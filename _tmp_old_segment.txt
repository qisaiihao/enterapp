            return cloudCall(name, data, Object.assign({ pageTag: 'profile-edit', context: this, requireAuth: true }, extraOptions));
        },

        // å…¼å®¹æ€§æ–‡ä»¶ä¸Šä¼ æ–¹æ³•
        uploadFile(cloudPath, filePath) {
            console.log(`ğŸ” [ProfileEdit] ä¸Šä¼ æ–‡ä»¶: ${cloudPath}`, filePath);
            
            return new Promise((resolve, reject) => {
                // ä½¿ç”¨æ–°çš„å¹³å°æ£€æµ‹å·¥å…·
                const { getCurrentPlatform, getCloudFunctionMethod } = require('../../utils/platformDetector.js');
                
                const platform = getCurrentPlatform();
                const method = getCloudFunctionMethod();
                
                console.log(`ğŸ” [ProfileEdit] è¿è¡Œç¯å¢ƒ: ${platform}, è°ƒç”¨æ–¹å¼: ${method}`);
                
                if (method === 'tcb') {
                    // H5å’ŒAppç¯å¢ƒä½¿ç”¨TCB
                    const app = getApp();
                    if (app && app.$tcb && app.$tcb.uploadFile) {
                        console.log(`ğŸ” [ProfileEdit] ${platform}ç¯å¢ƒä½¿ç”¨TCBä¸Šä¼ æ–‡ä»¶: ${cloudPath}`);
                        app.$tcb.uploadFile({
                            cloudPath: cloudPath,
                            filePath: filePath
                        }).then(resolve).catch(reject);
                    } else {
                        console.error(`âŒ [ProfileEdit] ${platform}ç¯å¢ƒTCBä¸å¯ç”¨`);
                        console.error(`âŒ [ProfileEdit] app:`, app);
                        console.error(`âŒ [ProfileEdit] app.$tcb:`, app && app.$tcb);
                        reject(new Error('TCBå®ä¾‹ä¸å¯ç”¨'));
                    }
                } else if (method === 'wx-cloud') {
                    // å°ç¨‹åºç¯å¢ƒä½¿ç”¨å¾®ä¿¡äº‘å¼€å‘
                    if (wx.cloud && wx.cloud.uploadFile) {
                        console.log(`ğŸ” [ProfileEdit] å°ç¨‹åºç¯å¢ƒä½¿ç”¨å¾®ä¿¡äº‘å¼€å‘ä¸Šä¼ æ–‡ä»¶: ${cloudPath}`);
                        wx.cloud.uploadFile({
                            cloudPath: cloudPath,
                            filePath: filePath,
                            success: (res) => {
                                console.log(`âœ… [ProfileEdit] æ–‡ä»¶ä¸Šä¼ æˆåŠŸ: ${cloudPath}`, res);
                                resolve(res);
                            },
                            fail: (err) => {
                                console.error(`âŒ [ProfileEdit] æ–‡ä»¶ä¸Šä¼ å¤±è´¥: ${cloudPath}`, err);
                                reject(err);
                            }
                        });
                    } else {
                        console.error(`âŒ [ProfileEdit] å°ç¨‹åºç¯å¢ƒå¾®ä¿¡äº‘å¼€å‘ä¸å¯ç”¨`);
                        reject(new Error('å¾®ä¿¡äº‘å¼€å‘ä¸å¯ç”¨'));
                    }
                } else {
                    console.error(`âŒ [ProfileEdit] ä¸æ”¯æŒçš„äº‘å‡½æ•°è°ƒç”¨æ–¹å¼: ${method}`);
                    reject(new Error(`ä¸æ”¯æŒçš„äº‘å‡½æ•°è°ƒç”¨æ–¹å¼: ${method}`));
                }
            });
        },
