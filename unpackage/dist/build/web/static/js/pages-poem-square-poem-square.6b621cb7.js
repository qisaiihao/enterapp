(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-poem-square-poem-square"],{"0154":function(n,t,e){"use strict";var r=e("cdb6"),a=e.n(r);a.a},"0a7d":function(n,t,e){"use strict";e.r(t);var r=e("6737"),a=e("1370");for(var o in a)["default"].indexOf(o)<0&&function(n){e.d(t,n,(function(){return a[n]}))}(o);e("2eb7");var i=e("828b"),s=Object(i["a"])(a["default"],r["b"],r["c"],!1,null,"189d72ce",null,!1,r["a"],void 0);t["default"]=s.exports},1370:function(n,t,e){"use strict";e.r(t);var r=e("ce2b"),a=e.n(r);for(var o in r)["default"].indexOf(o)<0&&function(n){e.d(t,n,(function(){return r[n]}))}(o);t["default"]=a.a},"2eb7":function(n,t,e){"use strict";var r=e("e525"),a=e.n(r);a.a},"42de":function(n,t,e){"use strict";e("6a54");var r=e("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(e("39d8")),o=r(e("2634")),i=r(e("2fdc")),s=r(e("fcf3"));e("5c47"),e("8f71"),e("bf0f"),e("5ef2"),e("2797"),e("c223"),e("7a76"),e("c9b5");var c=r(e("ab25")),d=r(e("8cb3")),l=r(e("0a7d")),u=r(e("8cb3")),p=e("11ca"),f=p.cloudCall,g=e("fe58"),v={onShow:function(){try{uni.hideTabBar({animation:!1})}catch(n){}try{this.$refs.customTabBar&&this.$refs.customTabBar.syncSelected&&this.$refs.customTabBar.syncSelected()}catch(n){}},components:{skeleton:d.default,topBar:l.default,AppTabBar:c.default},data:function(){return{postList:[],page:0,hasMore:!0,isLoading:!0,isLoadingMore:!1,lastUsedColorIndex:-1,backgroundColors:["#a4c4bd","#c9cfcf","#906161","#909388"],showPageIndicator:!1,votingInProgress:{},fetchingSignatures:{},safeAreaTop:0}},onLoad:function(){this.debugSafeArea(),this.getIndexData()},onPullDownRefresh:function(){console.log("【poem-square】📱 下拉刷新，重新获取数据"),this.getIndexData((function(){console.log("【poem-square】✅ 下拉刷新完成，停止刷新动画"),uni.stopPullDownRefresh()}))},onPageScroll:function(n){var t=this;this._scrollTimer&&clearTimeout(this._scrollTimer),this._scrollTimer=setTimeout((function(){if(t.hasMore&&!t.isLoadingMore&&!t.isLoading)try{var e=uni.getSystemInfoSync(),r=e.windowHeight;uni.createSelectorQuery().in(t).select("#post-list-container").boundingClientRect((function(e){if(e&&e.height){var a=e.height-n.scrollTop-r,o=1.5*r;a<o&&(t.showPageIndicator=!0,t.getPostList((function(){t.showPageIndicator=!1})))}})).exec()}catch(a){}}),100)},methods:{debugSafeArea:function(){try{var n=uni.getSystemInfoSync();if(console.log("【poem-square】系统信息:",{statusBarHeight:n.statusBarHeight,safeAreaInsets:n.safeAreaInsets,safeArea:n.safeArea,windowHeight:n.windowHeight,screenHeight:n.screenHeight,platform:n.platform}),n.statusBarHeight){var t=n.statusBarHeight;console.log("【poem-square】使用状态栏高度作为安全区域:",t),this.setData({safeAreaTop:t});try{"undefined"!==typeof document&&document.documentElement&&(document.documentElement.style.setProperty("--safe-area-inset-top",t+"px"),console.log("【poem-square】CSS变量设置成功"))}catch(e){console.log("【poem-square】CSS变量设置失败，使用数据绑定方式:",e)}}}catch(r){console.error("【poem-square】安全区域调试失败:",r)}},callCloudFunction:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return f(n,t,Object.assign({pageTag:"poem-square",context:this,requireAuth:!1},e))},getIndexData:function(n){var t=this;console.log("【poem-square】开始获取数据，callback:",(0,s.default)(n)),this.setData({isLoading:!0,postList:[],page:0,hasMore:!0}),this.getPostList((function(){console.log("【poem-square】getPostList 完成，设置 isLoading: false"),t.setData({isLoading:!1}),"function"===typeof n&&(console.log("【poem-square】执行回调函数"),n())}))},generateRandomBackgroundColor:function(){var n=this.backgroundColors,t=this.lastUsedColorIndex;if(-1===t){var e=Math.floor(Math.random()*n.length);return this.lastUsedColorIndex=e,n[e]}var r=n.filter((function(n,e){return e!==t})),a=r[Math.floor(Math.random()*r.length)];return this.lastUsedColorIndex=n.indexOf(a),a},getPostList:function(n){var t=this;return(0,i.default)((0,o.default)().mark((function e(){var r,a,i;return(0,o.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(console.log("【poem-square】getPostList 开始，isLoadingMore:",t.isLoadingMore,"callback:",(0,s.default)(n)),!t.isLoadingMore){e.next=5;break}return console.log("【poem-square】正在加载更多，跳过请求"),"function"===typeof n&&n(),e.abrupt("return");case 5:return t.setData({isLoadingMore:!0}),e.prev=6,e.next=9,t.callCloudFunction("getPostList",{skip:10*t.page,limit:10,isPoem:!0,isOriginal:!0});case 9:r=e.sent,a=r&&r.result&&r.result.posts?r.result.posts:[],console.log("【poem-square】获取到帖子数量:",a.length),a.forEach((function(n){n.backgroundColor=n.backgroundColor||t.generateRandomBackgroundColor(),n.textColor=n.textColor||"#222",n.isExpanded=!1,n.authorSignature="",n.likeIcon=g&&g.getLikeIcon?g.getLikeIcon(n.votes||0,!!n.isVoted):""})),i=0===t.page?a:t.postList.concat(a),t.setData({postList:i,page:t.page+1,hasMore:10===a.length}),i.forEach((function(n,e){n._openid&&!n.authorSignature&&t.fetchAuthorSignature(n._openid,e)})),console.log("【poem-square】数据处理完成"),e.next=23;break;case 19:e.prev=19,e.t0=e["catch"](6),console.error("【poem-square】获取帖子列表失败:",e.t0),uni.showToast({title:"加载失败",icon:"none"});case 23:return e.prev=23,console.log("【poem-square】设置 isLoadingMore: false，执行回调"),t.setData({isLoadingMore:!1}),"function"===typeof n&&(console.log("【poem-square】执行回调函数"),n()),e.finish(23);case 28:case"end":return e.stop()}}),e,null,[[6,19,23,28]])})))()},togglePostExpansion:function(n){var t=n.currentTarget.dataset.index,e=this.postList[t],r=!e.isExpanded;this.setData((0,a.default)({},"postList[".concat(t,"].isExpanded"),r)),e._openid&&!e.authorSignature&&this.fetchAuthorSignature(e._openid,t)},onCommentClick:function(n){var t=n.currentTarget.dataset.postid;uni.navigateTo({url:"/pages/post-detail/post-detail?id=".concat(t)})},onLikeIconError:function(){},fetchAuthorSignature:function(n,t){var e=this;return(0,i.default)((0,o.default)().mark((function r(){var i,s;return(0,o.default)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n&&!e.fetchingSignatures[n]){r.next=2;break}return r.abrupt("return");case 2:return e.fetchingSignatures[n]=!0,r.prev=3,r.next=6,e.callCloudFunction("getUserProfile",{userId:n});case 6:i=r.sent,i.result&&i.result.success&&i.result.userInfo&&i.result.userInfo.signatureUrl?(s=i.result.userInfo.signatureUrl,console.log("【poem-square】获取到作者签名:",s),e.setData((0,a.default)({},"postList[".concat(t,"].authorSignature"),s))):(console.log("【poem-square】作者未设置签名"),e.setData((0,a.default)({},"postList[".concat(t,"].authorSignature"),""))),r.next=14;break;case 10:r.prev=10,r.t0=r["catch"](3),console.error("【poem-square】获取作者签名失败:",r.t0),e.setData((0,a.default)({},"postList[".concat(t,"].authorSignature"),""));case 14:return r.prev=14,delete e.fetchingSignatures[n],r.finish(14);case 17:case"end":return r.stop()}}),r,null,[[3,10,14,17]])})))()},onSignatureLoad:function(n){console.log("【poem-square】签名图片加载成功:",n)},onSignatureError:function(n){console.error("【poem-square】签名图片加载失败:",n)},onVote:function(n){var t=this;return(0,i.default)((0,o.default)().mark((function e(){var r,i,s,c,d,l;return(0,o.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=n.currentTarget.dataset.postid,i=n.currentTarget.dataset.index,!t.votingInProgress[r]){e.next=4;break}return e.abrupt("return");case 4:return t.setData((0,a.default)({},"votingInProgress.".concat(r),!0)),s=t.postList,c=s[i].votes||0,d=!!s[i].isVoted,s[i].votes=d?c-1:c+1,s[i].isVoted=!d,s[i].likeIcon=g.getLikeIcon(s[i].votes,s[i].isVoted),t.setData({postList:s}),e.prev=12,e.next=15,t.callCloudFunction("vote",{postId:r});case 15:if(l=e.sent,l&&l.result&&l.result.success){e.next=18;break}throw new Error("vote failed");case 18:"number"===typeof l.result.votes&&l.result.votes!==s[i].votes&&t.setData((0,a.default)({},"postList[".concat(i,"].votes"),l.result.votes)),e.next=28;break;case 21:e.prev=21,e.t0=e["catch"](12),s[i].votes=c,s[i].isVoted=d,s[i].likeIcon=g.getLikeIcon(c,d),t.setData({postList:s}),uni.showToast({title:"操作失败",icon:"none"});case 28:return e.prev=28,t.setData((0,a.default)({},"votingInProgress.".concat(r),!1)),e.finish(28);case 31:case"end":return e.stop()}}),e,null,[[12,21,28,31]])})))()},onLongPressCard:function(n){var t=n.currentTarget.dataset.postid;t&&uni.navigateTo({url:"/pages/post-detail/post-detail?id=".concat(t)})},touchStart:function(){},touchEnd:function(){}}};t.default=v,t.default.components=Object.assign({skeleton:u.default},t.default.components||{})},"4a23":function(n,t,e){"use strict";e.r(t);var r=e("42de"),a=e.n(r);for(var o in r)["default"].indexOf(o)<0&&function(n){e.d(t,n,(function(){return r[n]}))}(o);t["default"]=a.a},6737:function(n,t,e){"use strict";e.d(t,"b",(function(){return r})),e.d(t,"c",(function(){return a})),e.d(t,"a",(function(){}));var r=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("v-uni-view",{staticClass:"top-bar-container",style:{top:n.safeAreaTop+"px"}},[e("v-uni-view",{staticClass:"custom-top-bar"},[e("v-uni-view",{staticClass:"top-left",on:{click:function(t){arguments[0]=t=n.$handleEvent(t),n.navigateToAdd.apply(void 0,arguments)}}},[e("v-uni-image",{staticClass:"top-icon",attrs:{src:"/static/images/write_poetry.png",mode:"aspectFit"}})],1),e("v-uni-view",{staticClass:"top-right"},[e("v-uni-view",{staticClass:"top-item",on:{click:function(t){arguments[0]=t=n.$handleEvent(t),n.navigateToSearch.apply(void 0,arguments)}}},[e("v-uni-image",{staticClass:"top-icon",attrs:{src:"/static/images/search.png",mode:"aspectFit"}})],1),e("v-uni-view",{staticClass:"top-item",on:{click:function(t){arguments[0]=t=n.$handleEvent(t),n.navigateToMessages.apply(void 0,arguments)}}},[e("v-uni-image",{staticClass:"top-icon",attrs:{src:"/static/images/messages.png",mode:"aspectFit"}}),n.unreadMessageCount>0?e("v-uni-view",{staticClass:"unread-dot"}):n._e()],1)],1)],1)],1)},a=[]},"7de3":function(n,t,e){var r=e("c86c");t=r(!1),t.push([n.i,'.top-bar-container[data-v-189d72ce]{position:fixed;left:0;right:0;background:#fff;z-index:1000;border-bottom:none;box-shadow:none\r\n  /* top 值通过 JavaScript 动态设置 */\r\n  /* 添加伪元素作为状态栏区域的白色背景 */}.top-bar-container[data-v-189d72ce]::before{content:"";position:absolute;top:-100vh; /* 向上延伸覆盖状态栏区域 */left:0;right:0;height:100vh;background:#fff;z-index:-1}.custom-top-bar[data-v-189d72ce]{height:%?100?%;display:flex;justify-content:space-between;align-items:center;padding:%?20?% %?40?% 0 %?40?%;background:#fff;border-bottom:none;box-shadow:none}.top-left[data-v-189d72ce]{display:flex;align-items:center;cursor:pointer;transition:all .2s ease;padding:%?10?%}.top-left[data-v-189d72ce]:active{-webkit-transform:scale(.95);transform:scale(.95)}.top-right[data-v-189d72ce]{display:flex;align-items:center;gap:%?40?%}.top-item[data-v-189d72ce]{display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s ease;padding:%?10?%;position:relative}.top-item[data-v-189d72ce]:active{-webkit-transform:scale(.95);transform:scale(.95)}.top-icon[data-v-189d72ce]{width:%?80?%;height:%?80?%;-webkit-filter:drop-shadow(0 %?2?% %?4?% rgba(0,0,0,.1));filter:drop-shadow(0 %?2?% %?4?% rgba(0,0,0,.1))}\r\n\r\n/* 未读消息红点 */.unread-dot[data-v-189d72ce]{position:absolute;top:%?4?%;right:%?4?%;width:%?16?%;height:%?16?%;background-color:#ff4757;border-radius:50%;border:%?2?% solid #fff;-webkit-animation:pulse-data-v-189d72ce 2s infinite;animation:pulse-data-v-189d72ce 2s infinite}\r\n\r\n/* 红点脉冲动画 */@-webkit-keyframes pulse-data-v-189d72ce{0%{-webkit-transform:scale(1);transform:scale(1);opacity:1}50%{-webkit-transform:scale(1.2);transform:scale(1.2);opacity:.8}100%{-webkit-transform:scale(1);transform:scale(1);opacity:1}}@keyframes pulse-data-v-189d72ce{0%{-webkit-transform:scale(1);transform:scale(1);opacity:1}50%{-webkit-transform:scale(1.2);transform:scale(1.2);opacity:.8}100%{-webkit-transform:scale(1);transform:scale(1);opacity:1}}',""]),n.exports=t},"86ad":function(n,t,e){"use strict";e.d(t,"b",(function(){return a})),e.d(t,"c",(function(){return o})),e.d(t,"a",(function(){return r}));var r={topBar:e("0a7d").default,skeleton:e("8cb3").default},a=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("v-uni-view",{staticClass:"poem-square white-bg",on:{touchstart:function(t){arguments[0]=t=n.$handleEvent(t),n.touchStart.apply(void 0,arguments)},touchend:function(t){arguments[0]=t=n.$handleEvent(t),n.touchEnd.apply(void 0,arguments)}}},[e("top-bar"),n.isLoading?e("v-uni-view",[e("skeleton")],1):e("v-uni-view",{staticClass:"square-mode-container"},[0===n.postList.length?e("v-uni-view",{staticClass:"empty-state"},[e("v-uni-view",{staticClass:"empty-icon"},[n._v("😶")]),e("v-uni-view",{staticClass:"empty-text"},[n._v("这里还没有内容")]),e("v-uni-view",{staticClass:"empty-subtext"},[n._v("去广场发布一条吧～")])],1):n._e(),e("v-uni-view",{attrs:{id:"post-list-container"}},n._l(n.postList,(function(t,r){return e("v-uni-view",{key:t._id||r,staticClass:"post-item-wrapper",style:{backgroundColor:t.backgroundColor}},[e("v-uni-view",{staticClass:"post-content-navigator",attrs:{"data-index":r,"data-postid":t._id},on:{longpress:function(t){arguments[0]=t=n.$handleEvent(t),n.onLongPressCard.apply(void 0,arguments)},click:function(t){arguments[0]=t=n.$handleEvent(t),n.togglePostExpansion.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"post-item"},[t.content?e("v-uni-view",{class:"post-content "+(t.isExpanded?"expanded":"collapsed")+(t.isExpanded||t.highlightLines&&0!==t.highlightLines.length?"":" no-highlight"),style:{color:t.textColor,whiteSpace:"pre-wrap"}},[t.isExpanded?[n._v(n._s(t.content))]:[t.highlightLines&&t.highlightLines.length>0?n._l(t.highlightLines,(function(t,r){return e("v-uni-text",{key:"line-"+r,staticStyle:{"font-weight":"700",display:"block"}},[n._v(n._s(t))])})):[n._v(n._s(t.content))]]],2):n._e(),t.isExpanded&&t.authorSignature?e("v-uni-view",{staticClass:"user-signature"},[e("v-uni-image",{staticClass:"signature-image",attrs:{src:t.authorSignature,mode:"aspectFit"},on:{error:function(t){arguments[0]=t=n.$handleEvent(t),n.onSignatureError.apply(void 0,arguments)},load:function(t){arguments[0]=t=n.$handleEvent(t),n.onSignatureLoad.apply(void 0,arguments)}}})],1):n._e(),!t.isExpanded&&t.authorSignature?e("v-uni-view",{staticClass:"user-signature-small"},[e("v-uni-image",{staticClass:"signature-image-small",attrs:{src:t.authorSignature,mode:"aspectFit"},on:{error:function(t){arguments[0]=t=n.$handleEvent(t),n.onSignatureError.apply(void 0,arguments)},load:function(t){arguments[0]=t=n.$handleEvent(t),n.onSignatureLoad.apply(void 0,arguments)}}})],1):n._e()],1)],1),t.isExpanded?e("v-uni-view",{staticClass:"vote-section",style:{backgroundColor:t.backgroundColor}},[e("v-uni-view",{staticClass:"actions-left"}),e("v-uni-view",{staticClass:"button-group"},[e("v-uni-view",{staticClass:"like-icon-container",attrs:{"data-postid":t._id,"data-index":r},on:{click:function(t){t.stopPropagation(),t.preventDefault(),arguments[0]=t=n.$handleEvent(t),n.onVote.apply(void 0,arguments)}}},[e("v-uni-image",{staticClass:"like-icon",attrs:{src:t.likeIcon||"/static/images/seed.png",mode:"aspectFit"},on:{error:function(t){arguments[0]=t=n.$handleEvent(t),n.onLikeIconError.apply(void 0,arguments)}}})],1),e("v-uni-view",{staticClass:"comment-count",attrs:{"data-postid":t._id},on:{click:function(t){t.stopPropagation(),t.preventDefault(),arguments[0]=t=n.$handleEvent(t),n.onCommentClick.apply(void 0,arguments)}}},[e("v-uni-image",{staticClass:"comment-icon",attrs:{src:"/static/images/comment.png",mode:"aspectFit"}})],1)],1)],1):n._e()],1)})),1),e("v-uni-view",{staticClass:"loading-footer"},[!n.hasMore&&n.postList.length>0?[e("v-uni-text",[n._v("—— 到底啦 ——")])]:n._e()],2)],1),n.showPageIndicator?e("v-uni-view",{staticClass:"page-indicator"}):n._e(),e("app-tab-bar",{ref:"customTabBar"})],1)},o=[]},cdb6:function(n,t,e){var r=e("d711");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[n.i,r,""]]),r.locals&&(n.exports=r.locals);var a=e("967d").default;a("cd442350",r,!0,{sourceMap:!1,shadowMode:!1})},ce2b:function(n,t,e){"use strict";e("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=e("f117"),a={data:function(){return{unreadMessageCount:0,safeAreaTop:0}},mounted:function(){this.checkUnreadMessageCount(),this.getSafeAreaTop()},methods:{getSafeAreaTop:function(){try{var n=uni.getSystemInfoSync();console.log("【top-bar】获取系统信息:",{statusBarHeight:n.statusBarHeight,platform:n.platform});var t=n.statusBarHeight||0;console.log("【top-bar】设置安全区域高度:",t),this.safeAreaTop=t}catch(e){console.error("【top-bar】获取安全区域失败:",e),this.safeAreaTop=44}},navigateToAdd:function(){console.log("点击写诗按钮，跳转到add页面"),uni.navigateTo({url:"/pages/add/add",success:function(){console.log("跳转到add页面成功")},fail:function(n){console.error("跳转到add页面失败:",n),uni.showToast({title:"跳转失败",icon:"none"})}})},navigateToSearch:function(){console.log("点击搜索框，跳转到搜索页面"),uni.navigateTo({url:"/pages/search/search",success:function(){console.log("跳转到搜索页面成功")},fail:function(n){console.error("跳转到搜索页面失败:",n),uni.showToast({title:"跳转失败",icon:"none"})}})},navigateToMessages:function(){uni.navigateTo({url:"/pages/messages/messages",success:function(){console.log("跳转到消息页面成功")},fail:function(n){console.error("跳转到消息页面失败:",n),uni.showToast({title:"跳转失败",icon:"none"})}})},checkUnreadMessageCount:function(){var n=this;(0,r.getUnreadCount)(this).then((function(t){n.unreadMessageCount=t||0})).catch((function(){}))}}};t.default=a},d711:function(n,t,e){var r=e("c86c");t=r(!1),t.push([n.i,'\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/* 定义 Huiwen-mincho 字体 */@font-face{font-family:Huiwen-mincho;src:url(/static/fonts/Huiwen-mincho.otf) format("opentype");font-weight:400;font-style:normal}.white-bg[data-v-5d7cae2c]{background:#fff;min-height:100vh;padding-top:env(safe-area-inset-top,var(--safe-area-inset-top,44px)) /* 添加状态栏安全区域，备选方案 */}.square-mode-container[data-v-5d7cae2c]{padding:%?40?%;margin-bottom:%?200?%;padding-top:%?250?%; /* 增加上边距：100rpx(top-bar高度) + 150rpx(额外间距) */display:flex;flex-direction:column;align-items:center /* 居中卡片 */}.empty-state[data-v-5d7cae2c]{text-align:center;padding:%?100?% 0;color:#999}.empty-icon[data-v-5d7cae2c]{font-size:%?80?%;margin-bottom:%?20?%}.empty-text[data-v-5d7cae2c]{font-size:%?32?%;margin-bottom:%?10?%;color:#666}.empty-subtext[data-v-5d7cae2c]{font-size:%?24?%;color:#999}\r\n/* poem.css inspired card styles */.post-item-wrapper[data-v-5d7cae2c]{width:calc(100% - %?80?%); /* 响应式宽度：屏幕宽度减去左右各40rpx边距 */margin-left:%?40?%; /* 左边距 */margin-right:%?40?%; /* 右边距 */border-radius:%?30?%; /* 15px * 2 */margin-bottom:%?40?%; /* 减少间距，让卡片更紧凑 */overflow:hidden;box-shadow:0 %?8?% %?8?% rgba(0,0,0,.25); /* 0px 4px 4px * 2 */transition:-webkit-transform .3s ease;transition:transform .3s ease;transition:transform .3s ease,-webkit-transform .3s ease;border:none;position:relative /* 为卷边效果添加定位 */}\r\n/* 背景颜色现在通过内联样式动态设置，不再使用固定的CSS类 */.post-item-wrapper[data-v-5d7cae2c]:active{-webkit-transform:scale(.98);transform:scale(.98)}.post-content-navigator[data-v-5d7cae2c]{display:block}.post-item[data-v-5d7cae2c]{padding:%?30?% %?60?% %?30?% %?80?%;position:relative}\r\n/* 进一步减少上下padding，文字往左移动 */\r\n/* Typography inspired by poem.css */.post-content[data-v-5d7cae2c]{font-family:Huiwen-mincho,sans-serif;font-style:normal;font-weight:500;font-size:%?28?%; /* 调小字体：14px * 2 */line-height:%?38?%; /* 调整行距：19px * 2 */margin:%?30?% 0;width:100%;color:#fff}\r\n/* 文字颜色现在通过内联样式动态设置 */\r\n/* 折叠态：当没有高光行时显示前三行，有高光行时显示高光行 */.post-content.collapsed[data-v-5d7cae2c]{overflow:hidden;text-overflow:ellipsis}\r\n/* 当没有高光行时，使用三行裁切 */.post-content.collapsed.no-highlight[data-v-5d7cae2c]{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:3}.post-content.expanded[data-v-5d7cae2c]{display:block;overflow:visible}.comment-emoji[data-v-5d7cae2c]{font-size:%?40?%}.comment-icon[data-v-5d7cae2c]{width:%?60?%;height:%?60?%}.vote-section[data-v-5d7cae2c]{display:flex;justify-content:space-between;align-items:center;padding:%?35?% %?50?%}.actions-left[data-v-5d7cae2c]{flex:1;display:flex;align-items:center;gap:%?20?%}.button-group[data-v-5d7cae2c]{display:flex;align-items:center;gap:%?30?%}.comment-count[data-v-5d7cae2c]{display:flex;align-items:center;gap:%?8?%;padding:%?10?% %?15?%}.vote-count[data-v-5d7cae2c]{display:flex;align-items:center;gap:%?8?%;padding:%?10?% %?15?%;border-radius:%?20?%;background:hsla(0,0%,100%,.9);box-shadow:0 %?2?% %?8?% rgba(0,0,0,.1)}.comment-icon[data-v-5d7cae2c]{width:%?60?%;height:%?60?%}.like-icon[data-v-5d7cae2c]{width:%?60?%;height:%?60?%;margin-top:5px}\r\n/* 用户签名样式 */.user-signature[data-v-5d7cae2c]{position:absolute;bottom:%?-25?%; /* 从15rpx往下移动40rpx */right:%?60?%;z-index:10;pointer-events:none /* 防止签名影响点击事件 */}.signature-image[data-v-5d7cae2c]{width:%?180?%;height:%?90?%;opacity:.8; /* 稍微透明，不抢夺主要内容的注意力 */-webkit-filter:drop-shadow(0 %?2?% %?4?% rgba(0,0,0,.1));filter:drop-shadow(0 %?2?% %?4?% rgba(0,0,0,.1)); /* 添加轻微阴影 */display:block; /* 确保图片正确显示 */background:transparent /* 确保背景透明 */}\r\n/* 小签名样式 - 折叠状态下显示 */.user-signature-small[data-v-5d7cae2c]{position:absolute;bottom:%?30?%;right:%?60?%;z-index:10;pointer-events:none /* 防止签名影响点击事件 */}.signature-image-small[data-v-5d7cae2c]{width:%?100?%;height:%?50?%;opacity:.6; /* 更透明，不抢夺主要内容的注意力 */-webkit-filter:drop-shadow(0 %?1?% %?2?% rgba(0,0,0,.1));filter:drop-shadow(0 %?1?% %?2?% rgba(0,0,0,.1)); /* 添加轻微阴影 */display:block; /* 确保图片正确显示 */background:transparent /* 确保背景透明 */}.loading-footer[data-v-5d7cae2c]{text-align:center;color:#666;padding:%?30?% 0 %?120?%}.page-indicator[data-v-5d7cae2c]{position:fixed;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);background:rgba(0,0,0,.7);color:#fff;padding:%?20?% %?40?%;border-radius:%?40?%;z-index:1000;font-size:%?28?%}.page-indicator-text[data-v-5d7cae2c]{text-align:center}',""]),n.exports=t},e19c:function(n,t,e){"use strict";e.r(t);var r=e("86ad"),a=e("4a23");for(var o in a)["default"].indexOf(o)<0&&function(n){e.d(t,n,(function(){return a[n]}))}(o);e("0154");var i=e("828b"),s=Object(i["a"])(a["default"],r["b"],r["c"],!1,null,"5d7cae2c",null,!1,r["a"],void 0);t["default"]=s.exports},e525:function(n,t,e){var r=e("7de3");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[n.i,r,""]]),r.locals&&(n.exports=r.locals);var a=e("967d").default;a("3425f4d9",r,!0,{sourceMap:!1,shadowMode:!1})}}]);