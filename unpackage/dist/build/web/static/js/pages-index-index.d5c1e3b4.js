(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-index-index"],{"0277":function(n,r,e){"use strict";e("6a54"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var t=e("7b44"),a={name:"PageTabs",props:{currentTab:{type:String,default:"square"}},data:function(){return{unreadMessageCount:0,safeAreaTop:0,tabs:[{label:"ÂπøÂú∫",value:"square"},{label:"ÂèëÁé∞",value:"discover"},{label:"ËÆ®ËÆ∫",value:"discussion"}]}},mounted:function(){this.checkUnreadMessageCount(),this.getSafeAreaTop()},methods:{getSafeAreaTop:function(){try{var n=uni.getSystemInfoSync();console.log("„Äêpage-tabs„ÄëËé∑ÂèñÁ≥ªÁªü‰ø°ÊÅØ:",{statusBarHeight:n.statusBarHeight,platform:n.platform});var r=n.statusBarHeight||0;console.log("„Äêpage-tabs„ÄëËÆæÁΩÆÂÆâÂÖ®Âå∫ÂüüÈ´òÂ∫¶:",r),this.safeAreaTop=r}catch(e){console.error("„Äêpage-tabs„ÄëËé∑ÂèñÂÆâÂÖ®Âå∫ÂüüÂ§±Ë¥•:",e),this.safeAreaTop=44}},switchTab:function(n){n!==this.currentTab&&this.$emit("tab-change",n)},navigateToAdd:function(){console.log("ÁÇπÂáªÂÜôËØóÊåâÈíÆÔºåË∑≥ËΩ¨Âà∞addÈ°µÈù¢"),uni.navigateTo({url:"/pages/add/add",success:function(){console.log("Ë∑≥ËΩ¨Âà∞addÈ°µÈù¢ÊàêÂäü")},fail:function(n){console.error("Ë∑≥ËΩ¨Âà∞addÈ°µÈù¢Â§±Ë¥•:",n),uni.showToast({title:"Ë∑≥ËΩ¨Â§±Ë¥•",icon:"none"})}})},navigateToSearch:function(){console.log("ÁÇπÂáªÊêúÁ¥¢Ê°ÜÔºåË∑≥ËΩ¨Âà∞ÊêúÁ¥¢È°µÈù¢"),uni.navigateTo({url:"/pages/search/search",success:function(){console.log("Ë∑≥ËΩ¨Âà∞ÊêúÁ¥¢È°µÈù¢ÊàêÂäü")},fail:function(n){console.error("Ë∑≥ËΩ¨Âà∞ÊêúÁ¥¢È°µÈù¢Â§±Ë¥•:",n),uni.showToast({title:"Ë∑≥ËΩ¨Â§±Ë¥•",icon:"none"})}})},navigateToMessages:function(){uni.navigateTo({url:"/pages/messages/messages",success:function(){console.log("Ë∑≥ËΩ¨Âà∞Ê∂àÊÅØÈ°µÈù¢ÊàêÂäü")},fail:function(n){console.error("Ë∑≥ËΩ¨Âà∞Ê∂àÊÅØÈ°µÈù¢Â§±Ë¥•:",n),uni.showToast({title:"Ë∑≥ËΩ¨Â§±Ë¥•",icon:"none"})}})},checkUnreadMessageCount:function(){var n=this;(0,t.getUnreadCount)(this).then((function(r){n.unreadMessageCount=r||0})).catch((function(){}))}}};r.default=a},"05ef":function(n,r,e){"use strict";e("6a54");var t=e("f5bd").default;Object.defineProperty(r,"__esModule",{value:!0}),r.hydrateTempUrls=function(){return c.apply(this,arguments)},r.warmTempUrlsFromPosts=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=new Set;n.forEach((function(n){return o(n).forEach((function(n){return r.add(n)}))})),r.size>0&&s.default.warm(Array.from(r))};var a=t(e("2634")),i=t(e("2fdc"));e("9db6"),e("aa9c"),e("bf0f"),e("2797"),e("f3f7"),e("18f7"),e("de6c"),e("08eb"),e("fd3c");var s=t(e("9384"));function o(n){var r=[],e=function(n){"string"===typeof n&&n.startsWith("cloud://")&&r.push(n)};return e(n.imageUrl),e(n.originalImageUrl),e(n.authorAvatar),e(n.poemBgImage),Array.isArray(n.imageUrls)&&n.imageUrls.forEach(e),Array.isArray(n.originalImageUrls)&&n.originalImageUrls.forEach(e),r}function c(){return c=(0,i.default)((0,a.default)().mark((function n(){var r,e,t,i,c=arguments;return(0,a.default)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=c.length>0&&void 0!==c[0]?c[0]:[],Array.isArray(r)&&0!==r.length){n.next=3;break}return n.abrupt("return",r);case 3:if(e=new Set,r.forEach((function(n){return o(n).forEach((function(n){return e.add(n)}))})),0!==e.size){n.next=7;break}return n.abrupt("return",r);case 7:return n.next=9,s.default.getTempUrls(Array.from(e));case 9:return t=n.sent,i=function(n){return"string"===typeof n&&t[n]?t[n]:n},r.forEach((function(n){n.imageUrl&&(n.imageUrl=i(n.imageUrl)),n.originalImageUrl&&(n.originalImageUrl=i(n.originalImageUrl)),n.authorAvatar&&(n.authorAvatar=i(n.authorAvatar)),n.poemBgImage&&(n.poemBgImage=i(n.poemBgImage)),Array.isArray(n.imageUrls)&&(n.imageUrls=n.imageUrls.map(i)),Array.isArray(n.originalImageUrls)&&(n.originalImageUrls=n.originalImageUrls.map(i))})),n.abrupt("return",r);case 13:case"end":return n.stop()}}),n)}))),c.apply(this,arguments)}},"0da0":function(n,r,e){"use strict";var t=e("ac8d"),a=e.n(t);a.a},"0daf":function(n,r,e){"use strict";e.r(r);var t=e("0277"),a=e.n(t);for(var i in t)["default"].indexOf(i)<0&&function(n){e.d(r,n,(function(){return t[n]}))}(i);r["default"]=a.a},"0f46":function(n,r,e){"use strict";var t=e("14fe"),a=e.n(t);a.a},"14fe":function(n,r,e){var t=e("8ed6");t.__esModule&&(t=t.default),"string"===typeof t&&(t=[[n.i,t,""]]),t.locals&&(n.exports=t.locals);var a=e("967d").default;a("7a9d0cb7",t,!0,{sourceMap:!1,shadowMode:!1})},1879:function(n,r,e){"use strict";var t=e("f24c"),a=e.n(t);a.a},"21dc":function(n,r,e){"use strict";e.r(r);var t=e("c7c0"),a=e.n(t);for(var i in t)["default"].indexOf(i)<0&&function(n){e.d(r,n,(function(){return t[n]}))}(i);r["default"]=a.a},"26a8":function(n,r,e){"use strict";e("6a54"),Object.defineProperty(r,"__esModule",{value:!0}),r.getCurrentTabBarStatus=function(n){try{if("function"===typeof n.getTabBar&&n.getTabBar()){var r,e=n.getTabBar();return(null===(r=e.data)||void 0===r?void 0:r.selected)||null}}catch(i){console.log("Êó†Ê≥ï‰ªéÂéüÁîügetTabBarËé∑ÂèñÁä∂ÊÄÅ")}try{var t,a=null===(t=n.$refs)||void 0===t?void 0:t.customTabBar;if(a&&a.data)return a.data.selected||null}catch(i){console.log("Êó†Ê≥ï‰ªéËá™ÂÆö‰πâÁªÑ‰ª∂Ëé∑ÂèñÁä∂ÊÄÅ")}try{return uni.getStorageSync("currentTabIndex")||null}catch(i){console.log("Êó†Ê≥ï‰ªéÂ≠òÂÇ®Ëé∑ÂèñÁä∂ÊÄÅ")}return null},r.isTabBarSupported=function(){try{return!("undefined"===typeof wx||!wx.getTabBar)||!("undefined"===typeof uni||!uni.getTabBar)}catch(n){return!1}},r.updateTabBarStatus=function(n,r){try{if("function"===typeof n.getTabBar&&n.getTabBar())return n.getTabBar().setData({selected:r}),console.log("TabBarÁä∂ÊÄÅÊõ¥Êñ∞ÊàêÂäü (ÂéüÁîüAPI): selected=".concat(r)),!0}catch(e){console.log("ÂéüÁîügetTabBar API‰∏çÂèØÁî®:",e.message)}try{return uni.setStorageSync("currentTabIndex",r),console.log("TabBarÁä∂ÊÄÅÂ∑≤‰øùÂ≠òÂà∞Â≠òÂÇ®: selected=".concat(r)),!0}catch(e){console.log("Â≠òÂÇ®Êú∫Âà∂‰∏çÂèØÁî®:",e.message)}return console.warn("ÂéüÁîügetTabBar API‰∏çÂèØÁî®ÔºåÂΩìÂâçÂπ≥Âè∞ÂèØËÉΩ‰∏çÊîØÊåÅgetTabBar()"),!1}},3180:function(n,r,e){var t=e("dd7e").default,a=e("4cf1").default,i=e("46c5").default,s=e("883d").default,o=e("4db6").default;e("c1a3"),e("bf0f"),e("18f7"),e("de6c"),e("f7a5");var c=e("3863"),l=function(){"use strict";function n(){s(this,n),this.cache=new Map,this.preloadQueue=[],this.maxPreloadCount=3,this.isH5="undefined"!==typeof window}return o(n,[{key:"preloadImages",value:function(){var n=i(t().mark((function n(r,e){var i,s,o,l,u;return t().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(Array.isArray(r)&&0!==r.length){n.next=2;break}return n.abrupt("return");case 2:i=r.slice(0,this.maxPreloadCount),s=a(i),n.prev=4,s.s();case 6:if((o=s.n()).done){n.next=24;break}if(l=o.value,!this.cache.has(l)){n.next=11;break}return e&&e(l,!0),n.abrupt("continue",22);case 11:return n.prev=11,n.next=14,c.loadImage(l,{useCache:!0,fallbackToOriginal:!0});case 14:u=n.sent,u.success?(this.cache.set(l,u.url),e&&e(l,!0)):(console.error("ÂõæÁâáÈ¢ÑÂä†ËΩΩÂ§±Ë¥•:",l,u.error),e&&e(l,!1)),n.next=22;break;case 18:n.prev=18,n.t0=n["catch"](11),console.error("ÂõæÁâáÈ¢ÑÂä†ËΩΩÂºÇÂ∏∏:",l,n.t0),e&&e(l,!1);case 22:n.next=6;break;case 24:n.next=29;break;case 26:n.prev=26,n.t1=n["catch"](4),s.e(n.t1);case 29:return n.prev=29,s.f(),n.finish(29);case 32:case"end":return n.stop()}}),n,this,[[4,26,29,32],[11,18]])})));return function(r,e){return n.apply(this,arguments)}}()},{key:"getCachedImage",value:function(n){return this.cache.get(n)||n}},{key:"clearCache",value:function(){this.cache.clear()}},{key:"getCacheSize",value:function(){return this.cache.size}}]),n}(),u=new l;n.exports=u},3863:function(n,r,e){var t=e("d189").default,a=e("dd7e").default,i=e("46c5").default,s=e("883d").default,o=e("4db6").default;e("c1a3"),e("bf0f"),e("18f7"),e("de6c"),e("4626"),e("5ac7"),e("f7a5"),e("fd3c"),e("aa9c"),e("08eb");var c=function(){"use strict";function n(){s(this,n),this.cache=new Map,this.isH5="undefined"!==typeof window,this.isMiniProgram="undefined"!==typeof wx&&wx.cloud}return o(n,[{key:"loadImage",value:function(){var n=i(a().mark((function n(r){var e,t,i,s,o,c=arguments;return a().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e=c.length>1&&void 0!==c[1]?c[1]:{},t=e.useCache,i=void 0===t||t,s=e.timeout,void 0===s?1e4:s,o=e.fallbackToOriginal,void 0===o||o,!i||!this.cache.has(r)){n.next=4;break}return n.abrupt("return",{success:!0,url:this.cache.get(r),fromCache:!0});case 4:if(!this.isH5){n.next=8;break}return n.abrupt("return",this.loadImageH5(r,e));case 8:if(!this.isMiniProgram){n.next=12;break}return n.abrupt("return",this.loadImageMiniProgram(r,e));case 12:return n.abrupt("return",this.loadImageNative(r,e));case 13:case"end":return n.stop()}}),n,this)})));return function(r){return n.apply(this,arguments)}}()},{key:"loadImageH5",value:function(){var n=i(a().mark((function n(r,e){var t,i,s;return a().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t=e.fallbackToOriginal,i=void 0===t||t,!this.isCloudStorageUrl(r)){n.next=5;break}return console.log("üîç [H5] Ê£ÄÊµãÂà∞ËÖæËÆØ‰∫ëÂ≠òÂÇ®URLÔºåÁõ¥Êé•‰ΩøÁî®:",r),this.cache.set(r,r),n.abrupt("return",{success:!0,url:r,fromCache:!1,strategy:"direct"});case 5:return n.prev=5,n.next=8,this.downloadFileWithTimeout(r,e.timeout);case 8:if(s=n.sent,!s.success){n.next=12;break}return this.cache.set(r,s.tempFilePath),n.abrupt("return",{success:!0,url:s.tempFilePath,fromCache:!1,strategy:"download"});case 12:n.next=17;break;case 14:n.prev=14,n.t0=n["catch"](5),console.warn("üîç [H5] downloadFileÂ§±Ë¥•:",n.t0);case 17:if(!i){n.next=21;break}return console.log("üîç [H5] ‰ΩøÁî®ÈôçÁ∫ßÊñπÊ°àÔºåÁõ¥Êé•‰ΩøÁî®ÂéüURL:",r),this.cache.set(r,r),n.abrupt("return",{success:!0,url:r,fromCache:!1,strategy:"fallback"});case 21:return n.abrupt("return",{success:!1,error:"H5ÁéØÂ¢É‰∏ãÂõæÁâáÂä†ËΩΩÂ§±Ë¥•",url:r});case 22:case"end":return n.stop()}}),n,this,[[5,14]])})));return function(r,e){return n.apply(this,arguments)}}()},{key:"loadImageMiniProgram",value:function(){var n=i(a().mark((function n(r,e){var t;return a().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,this.downloadFileWithTimeout(r,e.timeout);case 3:if(t=n.sent,!t.success){n.next=7;break}return this.cache.set(r,t.tempFilePath),n.abrupt("return",{success:!0,url:t.tempFilePath,fromCache:!1,strategy:"download"});case 7:n.next=12;break;case 9:n.prev=9,n.t0=n["catch"](0),console.error("Â∞èÁ®ãÂ∫èÁéØÂ¢ÉÂõæÁâáÂä†ËΩΩÂ§±Ë¥•:",n.t0);case 12:return n.abrupt("return",{success:!1,error:"Â∞èÁ®ãÂ∫èÁéØÂ¢É‰∏ãÂõæÁâáÂä†ËΩΩÂ§±Ë¥•",url:r});case 13:case"end":return n.stop()}}),n,this,[[0,9]])})));return function(r,e){return n.apply(this,arguments)}}()},{key:"loadImageNative",value:function(){var n=i(a().mark((function n(r,e){var t;return a().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,this.downloadFileWithTimeout(r,e.timeout);case 3:if(t=n.sent,!t.success){n.next=7;break}return this.cache.set(r,t.tempFilePath),n.abrupt("return",{success:!0,url:t.tempFilePath,fromCache:!1,strategy:"download"});case 7:n.next=12;break;case 9:n.prev=9,n.t0=n["catch"](0),console.error("ÂéüÁîüÁéØÂ¢ÉÂõæÁâáÂä†ËΩΩÂ§±Ë¥•:",n.t0);case 12:return n.abrupt("return",{success:!1,error:"ÂéüÁîüÁéØÂ¢É‰∏ãÂõæÁâáÂä†ËΩΩÂ§±Ë¥•",url:r});case 13:case"end":return n.stop()}}),n,this,[[0,9]])})));return function(r,e){return n.apply(this,arguments)}}()},{key:"downloadFileWithTimeout",value:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e4;return new Promise((function(e){var t=setTimeout((function(){e({success:!1,error:"‰∏ãËΩΩË∂ÖÊó∂"})}),r);uni.downloadFile({url:n,success:function(n){clearTimeout(t),200===n.statusCode?e({success:!0,tempFilePath:n.tempFilePath}):e({success:!1,error:"HTTP ".concat(n.statusCode)})},fail:function(n){clearTimeout(t),e({success:!1,error:n.errMsg||"‰∏ãËΩΩÂ§±Ë¥•"})}})}))}},{key:"isCloudStorageUrl",value:function(n){return n.includes("tcb.qcloud.la")||n.includes("cloudbase")||n.includes("cloud://")}},{key:"loadImages",value:function(){var n=i(a().mark((function n(r){var e,i,s,o,c,l,u,d=this,g=arguments;return a().wrap((function(n){while(1)switch(n.prev=n.next){case 0:e=g.length>1&&void 0!==g[1]?g[1]:{},i=e.maxConcurrent,s=void 0===i?3:i,o=[],c=0;case 4:if(!(c<r.length)){n.next=13;break}return l=r.slice(c,c+s),n.next=8,Promise.all(l.map((function(n){return d.loadImage(n,e)})));case 8:u=n.sent,o.push.apply(o,t(u));case 10:c+=s,n.next=4;break;case 13:return n.abrupt("return",o);case 14:case"end":return n.stop()}}),n)})));return function(r){return n.apply(this,arguments)}}()},{key:"clearCache",value:function(){this.cache.clear()}},{key:"getCacheStats",value:function(){return{size:this.cache.size,keys:Array.from(this.cache.keys())}}}]),n}(),l=new c;n.exports=l},"4d07":function(n,r,e){"use strict";e.r(r);var t=e("c03a"),a=e.n(t);for(var i in t)["default"].indexOf(i)<0&&function(n){e.d(r,n,(function(){return t[n]}))}(i);r["default"]=a.a},"525e":function(n,r,e){var t=e("c86c");r=t(!1),r.push([n.i,'.page-tabs-container[data-v-152cec0b]{position:fixed;left:0;right:0;background:#fff;z-index:1000;box-shadow:0 %?2?% %?10?% rgba(0,0,0,.05)\r\n  /* top ÂÄºÈÄöËøá JavaScript Âä®ÊÄÅËÆæÁΩÆ */\r\n  /* Ê∑ªÂä†‰º™ÂÖÉÁ¥†‰Ωú‰∏∫Áä∂ÊÄÅÊ†èÂå∫ÂüüÁöÑÁôΩËâ≤ËÉåÊôØ */}.page-tabs-container[data-v-152cec0b]::before{content:"";position:absolute;top:-100vh; /* Âêë‰∏äÂª∂‰º∏Ë¶ÜÁõñÁä∂ÊÄÅÊ†èÂå∫Âüü */left:0;right:0;height:100vh;background:#fff;z-index:-1}\r\n\r\n/* Ëá™ÂÆö‰πâÈ°∂ÈÉ®Ê†èÊ†∑Âºè */.custom-top-bar[data-v-152cec0b]{height:%?100?%;display:flex;justify-content:space-between;align-items:center;padding:%?20?% %?40?% 0 %?40?%;background:#fff}.top-left[data-v-152cec0b]{display:flex;align-items:center;cursor:pointer;transition:all .2s ease;padding:%?10?%}.top-left[data-v-152cec0b]:active{-webkit-transform:scale(.95);transform:scale(.95)}.top-right[data-v-152cec0b]{display:flex;align-items:center;gap:%?40?%}.top-item[data-v-152cec0b]{display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s ease;padding:%?10?%}.top-item[data-v-152cec0b]:active{-webkit-transform:scale(.95);transform:scale(.95)}.top-icon[data-v-152cec0b]{width:%?80?%;height:%?80?%;-webkit-filter:drop-shadow(0 %?2?% %?4?% rgba(0,0,0,.1));filter:drop-shadow(0 %?2?% %?4?% rgba(0,0,0,.1))}\r\n\r\n/* Ê†áÁ≠æÊ†èÊ†∑Âºè */.tabs-container[data-v-152cec0b]{height:%?88?%}.tabs-list[data-v-152cec0b]{display:flex;height:100%;align-items:center}.tab-item[data-v-152cec0b]{flex:1;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;position:relative;transition:all .2s ease}.tab-item[data-v-152cec0b]:active{background-color:rgba(0,0,0,.02)}.tab-text[data-v-152cec0b]{font-size:%?30?%;color:#666;font-weight:500;transition:color .2s ease}.tab-item.active .tab-text[data-v-152cec0b]{color:#24375f;font-weight:600}.tab-indicator[data-v-152cec0b]{position:absolute;bottom:0;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);width:%?60?%;height:%?6?%;background:#24375f;border-radius:%?3?%;transition:all .3s ease}',""]),n.exports=r},5347:function(n,r,e){"use strict";e.d(r,"b",(function(){return t})),e.d(r,"c",(function(){return a})),e.d(r,"a",(function(){}));var t=function(){var n=this.$createElement,r=this._self._c||n;return r("v-uni-view",{staticClass:"skeleton-wrapper"},[r("v-uni-view",{staticClass:"skeleton-poem-card"},[r("v-uni-view",{staticClass:"skeleton-original-badge skeleton-animate"}),r("v-uni-view",{staticClass:"skeleton-author-info"},[r("v-uni-view",{staticClass:"skeleton-avatar skeleton-animate"}),r("v-uni-view",{staticClass:"skeleton-name skeleton-animate"})],1),r("v-uni-view",{staticClass:"skeleton-title skeleton-animate"}),r("v-uni-view",{staticClass:"skeleton-content-large skeleton-animate"}),r("v-uni-view",{staticClass:"skeleton-content-large skeleton-animate"}),r("v-uni-view",{staticClass:"skeleton-content-large skeleton-animate",staticStyle:{width:"70%"}})],1),r("v-uni-view",{staticClass:"skeleton-poem-card skeleton-secondary"},[r("v-uni-view",{staticClass:"skeleton-author-info"},[r("v-uni-view",{staticClass:"skeleton-avatar skeleton-animate"}),r("v-uni-view",{staticClass:"skeleton-name skeleton-animate"})],1),r("v-uni-view",{staticClass:"skeleton-title skeleton-animate"}),r("v-uni-view",{staticClass:"skeleton-content-large skeleton-animate"}),r("v-uni-view",{staticClass:"skeleton-content-large skeleton-animate",staticStyle:{width:"80%"}})],1)],1)},a=[]},"6bf1":function(n,r,e){"use strict";e.r(r);var t=e("7a50"),a=e.n(t);for(var i in t)["default"].indexOf(i)<0&&function(n){e.d(r,n,(function(){return t[n]}))}(i);r["default"]=a.a},"71b6":function(n,r,e){"use strict";e.r(r);var t=e("5347"),a=e("4d07");for(var i in a)["default"].indexOf(i)<0&&function(n){e.d(r,n,(function(){return a[n]}))}(i);e("0f46");var s=e("828b"),o=Object(s["a"])(a["default"],t["b"],t["c"],!1,null,"a51e8920",null,!1,t["a"],void 0);r["default"]=o.exports},"724b":function(n,r,e){"use strict";e.r(r);var t=e("7d9d"),a=e("6bf1");for(var i in a)["default"].indexOf(i)<0&&function(n){e.d(r,n,(function(){return a[n]}))}(i);e("0da0");var s=e("828b"),o=Object(s["a"])(a["default"],t["b"],t["c"],!1,null,"846b9078",null,!1,t["a"],void 0);r["default"]=o.exports},"7a50":function(n,r,e){"use strict";e("6a54"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,e("bd06"),e("5ef2"),e("5c47"),e("a1c1"),e("9db6");var t={data:function(){return{selected:0,color:"#999999",selectedColor:"#9ed7ee",lastTapTime:0,lastTapIndex:-1,doubleTapThreshold:300,list:[{pagePath:"pages/index/index",text:"ÂπøÂú∫",iconPath:"/static/images/market.png",selectedIconPath:"/static/images/marketplus.png"},{pagePath:"pages/poem-square/poem-square",text:"¬∑",iconPath:"/static/images/road.png",selectedIconPath:"/static/images/roadplus.png"},{pagePath:"pages/mountain/mountain",text:"Â±±",iconPath:"/static/images/mountain.png",selectedIconPath:"/static/images/mountainplus.png"},{pagePath:"pages/profile/profile",text:"Ê±†",iconPath:"/static/images/pools.png",selectedIconPath:"/static/images/poolsplus.png"}]}},created:function(){this.syncSelected()},methods:{syncSelected:function(){try{var n=getCurrentPages(),r=n&&n.length?n[n.length-1]:null,e=r&&(r.route||r.$page&&r.$page.fullPath||"");if(!e)return;var t=this.list.findIndex((function(n){return e.indexOf(n.pagePath.replace(/^\//,""))>=0}));t>=0&&this.setData({selected:t})}catch(a){}},switchTab:function(n){var r=n.currentTarget.dataset,e=r.path,t=r.index,a=Date.now(),i=a-this.lastTapTime<this.doubleTapThreshold&&this.lastTapIndex===t&&this.selected===t;if(this.setData({lastTapTime:a,lastTapIndex:t}),i)this.refreshCurrentPage();else{var s=e.startsWith("/")?e:"/".concat(e);uni.switchTab({url:s})}},refreshCurrentPage:function(){var n=this.list[this.selected],r=getCurrentPages(),e=r[r.length-1];if(e)switch(n.pagePath){case"pages/index/index":this.refreshIndexPage(e);break;case"pages/poem-square/poem-square":this.refreshPoemPage(e);break;case"pages/mountain/mountain":this.refreshMountainPage(e);break;case"pages/profile/profile":this.refreshProfilePage(e);break;default:this.refreshGenericPage(e)}},refreshIndexPage:function(n){n.refreshData?n.refreshData():n.onPullDownRefresh||uni.startPullDownRefresh()},refreshPoemPage:function(n){n.refreshPoemData?n.refreshPoemData():n.onPullDownRefresh||uni.startPullDownRefresh()},refreshMountainPage:function(n){n.refreshMountainData?n.refreshMountainData():n.onPullDownRefresh||uni.startPullDownRefresh()},refreshProfilePage:function(n){n.onPullDownRefresh||uni.startPullDownRefresh()},refreshGenericPage:function(n){n.onPullDownRefresh||uni.startPullDownRefresh()}}};r.default=t},"7b44":function(n,r,e){"use strict";e("6a54");var t=e("f5bd").default;Object.defineProperty(r,"__esModule",{value:!0}),r.getUnreadCount=function(n){return u.apply(this,arguments)},r.invalidateUnread=function(){l.delete("count")};var a=t(e("2634")),i=t(e("2fdc")),s=t(e("7ef8")),o=e("38db"),c=o.cloudCall,l=s.default.namespace("unread",{persistent:!1,maxItems:64});function u(){return u=(0,i.default)((0,a.default)().mark((function n(r){return(0,a.default)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.abrupt("return",l.getOrFetch("count",(0,i.default)((0,a.default)().mark((function n(){var e;return(0,a.default)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,c("getUnreadMessageCount",{},{pageTag:"unread",context:r,injectOpenId:!0});case 2:if(e=n.sent,!(e&&e.result&&e.result.success)){n.next=5;break}return n.abrupt("return",e.result.count||0);case 5:return n.abrupt("return",0);case 6:case"end":return n.stop()}}),n)}))),{ttlMs:6e4,swrMs:6e4}));case 1:case"end":return n.stop()}}),n)}))),u.apply(this,arguments)}},"7cd7":function(n,r,e){var t=e("dd7e").default,a=e("46c5").default;e("64aa"),e("dc8a"),e("8f71"),e("bf0f"),e("9db6"),e("2797"),e("de6c"),e("7a76"),e("c9b5");var i=e("38db"),s=i.cloudCall,o=e("9167"),c=e("7ef8").default;function l(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=Number(n);return Number.isFinite(e)?e:r}function u(n,r,e){if("function"===typeof n)try{return n(r,e)}catch(t){console.warn("[likeService] likeIcon resolver ÊâßË°åÂ§±Ë¥•",t)}return o.getLikeIcon(r,e)}function d(n){var r=n.votes,e=n.isLiked,t=n.icon;return{votes:r,isLiked:e,likeIcon:t}}function g(n,r,e,t){try{if(!n)return;var a=c.getStats?c.getStats():{},i=Object.keys(a),s=i.filter((function(n){return"posts:home"===n||"posts:discover"===n||n.startsWith("posts:tag:")||n.startsWith("me:posts")||n.startsWith("userPosts:")}));s.forEach((function(a){try{var i=c.namespace(a),s=i.keys&&i.keys()||[];s.forEach((function(a){try{i.update(a,(function(a){if(!Array.isArray(a))return a;for(var i=0;i<a.length;i+=1){var s=a[i];!s||s._id!==n&&s.id!==n||(s.votes=r,s.isVoted=e,s.likeIcon=t,!0)}return a}))}catch(s){}}))}catch(o){}}))}catch(o){console.warn("[likeService] updatePostInCaches failed",o)}}function f(n){if("undefined"!==typeof uni&&"function"===typeof uni.showToast)try{uni.showToast({title:n||"Êìç‰ΩúÂ§±Ë¥•ÔºåËØ∑Á®çÂêéÈáçËØï",icon:"none"})}catch(r){console.warn("[likeService] showToast Ë∞ÉÁî®Â§±Ë¥•",r)}}function v(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.pageTag,e=void 0===r?"like-service":r,t=n.context,a=void 0===t?null:t,i=n.currentVotes,s=void 0===i?0:i,c=n.currentIsLiked,u=void 0!==c&&c,d=n.likeIconResolver,g=void 0===d?o.getLikeIcon:d,f=n.requireAuth,v=void 0===f||f,p=n.retry,h=void 0===p?0:p,m=n.updateCache,b=void 0===m||m,w=n.showErrorToast,k=void 0===w||w,y=n.cloudOptions,x=void 0===y?{}:y;return{pageTag:e,context:a,currentVotes:l(s,0),currentIsLiked:Boolean(u),likeIconResolver:g,requireAuth:v,retry:h,updateCache:b,showErrorToast:k,cloudOptions:x}}function p(){return p=a(t().mark((function n(r){var e,a,i,o,c,p,h,m,b,w,k,y,x,P,C,I,T,_,L,D,U,M,S,A=arguments;return t().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e=A.length>1&&void 0!==A[1]?A[1]:{},r){n.next=3;break}return n.abrupt("return",Promise.reject(new Error("[likeService] postId ‰∏çËÉΩ‰∏∫Á©∫")));case 3:return a=v(e),i=a.pageTag,o=a.context,c=a.currentVotes,p=a.currentIsLiked,h=a.likeIconResolver,m=a.requireAuth,b=a.retry,w=a.updateCache,k=a.showErrorToast,y=a.cloudOptions,x=l(c,0),P=Boolean(p),C=u(h,x,P),I=d({votes:x,isLiked:P,icon:C}),n.prev=8,n.next=11,s("vote",{postId:r},Object.assign({pageTag:"likeService:".concat(i),context:o,requireAuth:m,retry:b},y));case 11:T=n.sent,n.next=19;break;case 14:return n.prev=14,n.t0=n["catch"](8),console.error("[likeService] Ë∞ÉÁî®‰∫ëÂáΩÊï∞Â§±Ë¥•",n.t0),k&&f(n.t0&&n.t0.message),n.abrupt("return",{success:!1,error:n.t0,rollback:I});case 19:if(_=T&&T.result?T.result:T,L=_&&!0===_.success,L){n.next=26;break}return D=_&&_.message?_.message:"Êìç‰ΩúÂ§±Ë¥•ÔºåËØ∑Á®çÂêéÈáçËØï",console.warn("[likeService] ‰∫ëÂáΩÊï∞ËøîÂõûÂ§±Ë¥•ÁªìÊûú",_),k&&f(D),n.abrupt("return",{success:!1,error:_,rollback:I});case 26:return U=l(_.votes,x),M=Boolean(_.isLiked),S=u(h,U,M),w&&g(r,U,M,S),n.abrupt("return",{success:!0,votes:U,isLiked:M,likeIcon:S,response:_});case 31:case"end":return n.stop()}}),n,null,[[8,14]])}))),p.apply(this,arguments)}n.exports={togglePostLike:function(n){return p.apply(this,arguments)}}},"7d9d":function(n,r,e){"use strict";e.d(r,"b",(function(){return t})),e.d(r,"c",(function(){return a})),e.d(r,"a",(function(){}));var t=function(){var n=this,r=n.$createElement,e=n._self._c||r;return e("v-uni-view",{staticClass:"tab-bar"},n._l(n.list,(function(r,t){return e("v-uni-view",{key:t,staticClass:"tab-bar-item",attrs:{"data-index":t,"data-path":r.pagePath},on:{click:function(r){arguments[0]=r=n.$handleEvent(r),n.switchTab.apply(void 0,arguments)}}},[e("v-uni-view",{class:["icon-wrap",n.selected===t?"pressed":""]},[e("v-uni-view",{class:["icon-inner",n.selected===t?"active":""]},[e("v-uni-image",{staticClass:"icon-img",attrs:{src:n.selected===t&&r.selectedIconPath||r.iconPath,mode:"aspectFill"}})],1)],1),e("v-uni-text",{staticClass:"tab-bar-text"},[n._v(n._s(r.text))])],1)})),1)},a=[]},"81f6":function(n,r,e){var t=e("5014").default,a=e("d189").default,i=e("4cf1").default;e("8f71"),e("bf0f"),e("aa9c"),e("fd3c");var s=e("962f"),o=s.formatRelativeTime,c=["createTime","postCreateTime","publishTime","createdAt","updateTime"],l=function(n){return n?Array.isArray(n)?n.filter(Boolean):[n].filter(Boolean):[]},u=function(n){var r,e=i(c);try{for(e.s();!(r=e.n()).done;){var t=r.value;if(n[t])return{key:t,value:n[t]}}}catch(a){e.e(a)}finally{e.f()}return null},d=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=r.withTime,i=void 0===e||e,s=l(n.imageUrls);0===s.length&&s.push.apply(s,a(l(n.imageUrl)));var c=l(n.originalImageUrls);0===c.length&&c.push.apply(c,a(l(n.originalImageUrl))),0===c.length&&s.length>0&&c.push.apply(c,a(s));var d=t(t({},n),{},{imageUrls:s,originalImageUrls:c,authorName:n.authorName||"ÂåøÂêçÁî®Êà∑",authorAvatar:"string"===typeof n.authorAvatar?n.authorAvatar:""});if(!d.imageStyle&&s.length>0&&(d.imageStyle="height: 0; padding-bottom: 75%;"),i)if(n.formattedCreateTime)d.formattedCreateTime=n.formattedCreateTime;else{var g=u(n);g&&(d.formattedCreateTime=o(g.value))}return d};n.exports={normalizePost:d,normalizePostList:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Array.isArray(n)?n.map((function(n){return d(n,r)})):[]}}},"8a72":function(n,r,e){"use strict";e.r(r);var t=e("d116"),a=e("21dc");for(var i in a)["default"].indexOf(i)<0&&function(n){e.d(r,n,(function(){return a[n]}))}(i);e("f318");var s=e("828b"),o=Object(s["a"])(a["default"],t["b"],t["c"],!1,null,"3dbe9718",null,!1,t["a"],void 0);r["default"]=o.exports},"8ed6":function(n,r,e){var t=e("c86c");r=t(!1),r.push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/* components/skeleton/skeleton.wxss */.skeleton-wrapper[data-v-a51e8920]{width:100%;height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:%?20?%;box-sizing:border-box}\n/* ËØªËØóÈ°µÈ™®Êû∂Â±èÂç°ÁâáÊ†∑Âºè - ÂåπÈÖçËØªËØóÈ°µËÆæËÆ° */.skeleton-poem-card[data-v-a51e8920]{width:calc(100% - %?40?%);height:calc(100% - %?80?%);display:flex;flex-direction:column;padding:%?40?% %?20?%;box-sizing:border-box;background:hsla(0,0%,100%,.95);margin:%?40?% %?20?%;border-radius:%?24?%;box-shadow:0 %?8?% %?32?% rgba(0,0,0,.1);position:relative}\n/* Á¨¨‰∫å‰∏™Âç°ÁâáÈÄèÊòéÂ∫¶Èôç‰Ωé */.skeleton-poem-card.skeleton-secondary[data-v-a51e8920]{opacity:.6;position:absolute;top:%?20?%;left:%?20?%;right:%?20?%;bottom:%?20?%;z-index:-1;-webkit-transform:scale(.95);transform:scale(.95)}\n/* ÂéüÂàõÊ†áËØÜÈ™®Êû∂ */.skeleton-original-badge[data-v-a51e8920]{position:absolute;top:%?20?%;right:%?20?%;width:%?80?%;height:%?40?%;border-radius:%?20?%}\n/* ‰ΩúËÄÖ‰ø°ÊÅØÈ™®Êû∂ */.skeleton-author-info[data-v-a51e8920]{display:flex;align-items:center;margin-bottom:%?15?%;padding-bottom:%?10?%}.skeleton-avatar[data-v-a51e8920]{width:%?80?%;height:%?80?%;border-radius:50%;margin-right:%?20?%}.skeleton-name[data-v-a51e8920]{width:%?200?%;height:%?32?%;border-radius:%?16?%}\n/* Â±Ö‰∏≠Ê†áÈ¢òÈ™®Êû∂ */.skeleton-title[data-v-a51e8920]{width:60%;height:%?40?%;margin:0 auto %?20?% auto; /* Â±Ö‰∏≠Âπ∂Â¢ûÂä†‰∏ãËæπË∑ù */border-radius:%?20?%;text-align:center}\n/* Â§ßÂÜÖÂÆπÂå∫ÂüüÈ™®Êû∂ */.skeleton-content-large[data-v-a51e8920]{width:100%;height:%?40?%;margin-bottom:%?20?%;border-radius:%?20?%}.skeleton-animate[data-v-a51e8920]{background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0 50%,#f0f0f0 75%);background-size:200% 100%;-webkit-animation:skeleton-loading-data-v-a51e8920 1.5s infinite linear;animation:skeleton-loading-data-v-a51e8920 1.5s infinite linear}@-webkit-keyframes skeleton-loading-data-v-a51e8920{0%{background-position:200% 0}100%{background-position:-200% 0}}@keyframes skeleton-loading-data-v-a51e8920{0%{background-position:200% 0}100%{background-position:-200% 0}}",""]),n.exports=r},9167:function(n,r){n.exports={getLikeIcon:function(n,r){var e="";return e=n<=3?r?"seedplus.png":"seed.png":n<=7?r?"leafplus.png":"leaf.png":n<=15?r?"flowerplus .png":"flower.png":r?"peachplus.png":"peach.png","/static/images/"+e},getLikeIconDescription:function(n){return n<=3?"ÁßçÂ≠ê":n<=7?"Âè∂Â≠ê":n<=15?"Ëä±":"ÊûúÂÆû"}}},"9d8f":function(n,r,e){var t=e("ab23");t.__esModule&&(t=t.default),"string"===typeof t&&(t=[[n.i,t,""]]),t.locals&&(n.exports=t.locals);var a=e("967d").default;a("2f26ee1a",t,!0,{sourceMap:!1,shadowMode:!1})},ab23:function(n,r,e){var t=e("c86c");r=t(!1),r.push([n.i,"\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/* index.wxss */.page-indicator[data-v-3dbe9718]{position:fixed;top:%?100?%;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);background:rgba(0,0,0,.7);color:#fff;padding:%?20?% %?40?%;border-radius:%?50?%;font-size:%?28?%;z-index:9999;-webkit-animation:pageIndicatorFadeIn-data-v-3dbe9718 .3s ease-in-out;animation:pageIndicatorFadeIn-data-v-3dbe9718 .3s ease-in-out}.page-indicator-text[data-v-3dbe9718]{text-align:center;font-weight:500}@-webkit-keyframes pageIndicatorFadeIn-data-v-3dbe9718{0%{opacity:0;-webkit-transform:translateX(-50%) translateY(%?-20?%);transform:translateX(-50%) translateY(%?-20?%)}100%{opacity:1;-webkit-transform:translateX(-50%) translateY(0);transform:translateX(-50%) translateY(0)}}@keyframes pageIndicatorFadeIn-data-v-3dbe9718{0%{opacity:0;-webkit-transform:translateX(-50%) translateY(%?-20?%);transform:translateX(-50%) translateY(%?-20?%)}100%{opacity:1;-webkit-transform:translateX(-50%) translateY(0);transform:translateX(-50%) translateY(0)}}.container[data-v-3dbe9718]{padding:%?255?% 0 %?100?% 0; /* ‰∏∫page-tabsÁïôÂá∫Á©∫Èó¥Ôºö188rpx(page-tabsÊÄªÈ´òÂ∫¶) + 62rpx(È¢ùÂ§ñÈó¥Ë∑ù) */background-color:#fff;min-height:100vh;padding-bottom:%?100?%; /* ‰∏∫Â∫ïÈÉ®tabBarÁïôÂá∫Á©∫Èó¥ */position:relative}\r\n/* ËØªËØóÊ®°ÂºèÂÆπÂô® */.poem-mode-container[data-v-3dbe9718]{position:fixed;top:0;left:0;width:100vw;height:100vh;background:linear-gradient(135deg,#667eea,#764ba2);z-index:100;overflow:hidden}\r\n/* ÊªëÂä®ÊåáÁ§∫Âô® */.swipe-indicator[data-v-3dbe9718]{position:absolute;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);color:hsla(0,0%,100%,.8);font-size:%?28?%;padding:%?20?% %?30?%;background:rgba(0,0,0,.3);border-radius:%?50?%;-webkit-backdrop-filter:blur(%?10?%);backdrop-filter:blur(%?10?%)}.swipe-indicator.left[data-v-3dbe9718]{left:%?30?%}.swipe-indicator.right[data-v-3dbe9718]{right:%?30?%}\r\n/* Â∏ñÂ≠êÁ¥¢ÂºïÊåáÁ§∫Âô® */.post-indicator[data-v-3dbe9718]{position:absolute;bottom:%?60?%;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);color:hsla(0,0%,100%,.9);font-size:%?24?%;padding:%?12?% %?24?%;background:rgba(0,0,0,.4);border-radius:%?30?%;-webkit-backdrop-filter:blur(%?10?%);backdrop-filter:blur(%?10?%)}\r\n/* ÂàóË°®Ê®°ÂºèÂÆπÂô® */.list-mode-container[data-v-3dbe9718],\r\n.list-content[data-v-3dbe9718]{display:block}\r\n/* ÂπøÂú∫Ê®°ÂºèÂÆπÂô® */.square-mode-container[data-v-3dbe9718]{display:block;padding-top:%?40?% /* Â¢ûÂä†‰∏éÈ°∂ÈÉ®Ê†èÁöÑË∑ùÁ¶ª */}\r\n/* Êñ∞Â¢ûÔºöÂ∏ñÂ≠êÈ°πÂåÖË£ÖÂô®Ê†∑Âºè */.post-item-wrapper[data-v-3dbe9718]{background:#fff;margin-bottom:%?20?%;padding:0;box-shadow:none;border-radius:0;border-bottom:%?1?% solid #f0f0f0}\r\n/* ÂéüÂàõÂ∏ñÂ≠êÁâπÊÆäÊ†∑Âºè */.post-item-wrapper.original-post[data-v-3dbe9718]{background:linear-gradient(90deg,rgba(235,200,141,.05),hsla(0,0%,100%,0));border-left:%?3?% solid #ebc88d;position:relative}\r\n/* ÂéüÂàõÂ∏ñÂ≠êÂÖâÂΩ±ÊïàÊûúÂ∑≤ÁßªÈô§ */\r\n/* Êñ∞Â¢ûÔºöÂÜÖÂÆπÂØºËà™Âô®Ê†∑Âºè */.post-content-navigator[data-v-3dbe9718]{display:block;background:transparent}\r\n/* Êñ∞Â¢ûÔºöÂØºËà™Âô®ÁÇπÂáªÊïàÊûú */.navigator-hover[data-v-3dbe9718]{background-color:rgba(0,0,0,.02)}\r\n/* Êñ∞Â¢ûÔºöÁÇπËµûÊåâÈíÆÂÆπÂô®Ê†∑Âºè */.like-icon-container[data-v-3dbe9718]{padding:%?10?%;border-radius:50%;transition:all .2s ease}\r\n/* Êñ∞Â¢ûÔºöÁÇπËµûÊåâÈíÆÁÇπÂáªÊïàÊûú */.like-icon-container[data-v-3dbe9718]:active{-webkit-transform:scale(.9);transform:scale(.9);background-color:hsla(0,100%,71%,.1)}\r\n/* Êñ∞Â¢ûÔºöÁÇπËµûÂõæÊ†áÊ†∑Âºè */.like-icon[data-v-3dbe9718]{width:%?40?%;height:%?40?%;transition:all .2s ease}.author-info[data-v-3dbe9718]{display:flex;align-items:center;margin-bottom:%?15?%}.author-avatar[data-v-3dbe9718]{width:%?60?%;height:%?60?%;border-radius:50%;margin-right:%?15?%;background-color:#f5f5f5}.author-name[data-v-3dbe9718]{font-size:%?28?%;color:#333;font-weight:500}\r\n/* Êñ∞Â¢ûÔºöÂõæÁâáÂÆπÂô®Âç†‰ΩçÊ†∑Âºè */.image-container-wrapper[data-v-3dbe9718]{position:relative;width:100%;background-color:#f0f0f0; /* Âç†‰ΩçÊó∂ÁöÑËÉåÊôØËâ≤ÔºåÂæàÈáçË¶Å */overflow:hidden;border-radius:8px; /* ÂèØ‰ª•Âä†‰∏™ÂúÜËßíÔºåËÆ©Âç†‰ΩçÂùóÊõ¥Â•ΩÁúã */margin:%?20?% 0 /* ÂõæÁâáÂíå‰∏ãÊñπÂÜÖÂÆπÁöÑÈó¥Ë∑ù */}\r\n/* Êñ∞Â¢ûÔºöËÆ©ÂõæÁâáÊàñSwiperÂ°´ÂÖÖÊï¥‰∏™Âç†‰ΩçÂÆπÂô® */.image-container-wrapper .post-image[data-v-3dbe9718],\r\n.image-container-wrapper .image-swiper[data-v-3dbe9718]{position:absolute;top:0;left:0;width:100%;height:100%}\r\n/* Â§öÂõæÂÆπÂô® */.multi-image-container[data-v-3dbe9718]{width:100%;position:relative}\r\n/* ÂçïÂõæÂÆπÂô® */.single-image-container[data-v-3dbe9718]{width:100%;position:relative}\r\n/* Â§öÂº†ÂõæÁâáÁöÑswiperÊ†∑Âºè */.image-swiper[data-v-3dbe9718]{width:100%;background-color:#fff\r\n    /* È´òÂ∫¶Áî± style ÁªëÂÆöÂä®ÊÄÅËÆæÁΩÆ */}.swiper-item[data-v-3dbe9718]{width:100%;height:100%;display:flex;align-items:center;justify-content:center}.post-image[data-v-3dbe9718]{width:100%;height:100%;display:block;object-fit:contain}.post-image[data-v-3dbe9718]:active{-webkit-transform:scale(1.05);transform:scale(1.05)}.post-image.single-image[data-v-3dbe9718]{width:100%;height:auto;display:block;background-color:#f5f5f5}\r\n/* ÂõæÁâáÊï∞ÈáèÊåáÁ§∫Âô® */.image-count-indicator[data-v-3dbe9718]{position:absolute;top:%?20?%;right:%?20?%;background-color:rgba(0,0,0,.6);color:#fff;padding:%?8?% %?16?%;border-radius:%?20?%;font-size:%?24?%;z-index:10;-webkit-backdrop-filter:blur(%?10?%);backdrop-filter:blur(%?10?%)}\r\n/* Âç°ÁâáÈ°πÊ†∑Âºè */.post-item-wrapper[data-v-3dbe9718]{margin-bottom:%?20?%}\r\n/* Â§ñÈÉ®‰ΩúËÄÖ‰ø°ÊÅØÊ†∑Âºè */.author-info-outside[data-v-3dbe9718]{display:flex;align-items:center;padding:%?20?% %?40?% %?10?% %?40?%;background:#fff}.author-info-outside .author-avatar[data-v-3dbe9718]{width:%?60?%;height:%?60?%;border-radius:50%;margin-right:%?15?%;background-color:#f5f5f5;cursor:pointer}.author-info-outside .author-name[data-v-3dbe9718]{font-size:%?28?%;color:#333;font-weight:500}.post-item[data-v-3dbe9718]{width:100%;background:#fff;box-shadow:none;box-sizing:border-box;padding:%?20?% %?40?% %?30?% %?40?%}\r\n/* ÂÆö‰πâÁÇπÂáªÊó∂ÁöÑÊ†∑Âºè - Êï¥‰∏™Âç°ÁâáÁº©Â∞è */.post-card-active[data-v-3dbe9718]{-webkit-transform:scale(.98);transform:scale(.98)}.post-title[data-v-3dbe9718]{font-size:%?36?%;font-weight:700;color:#333;margin-bottom:%?15?%;line-height:1.4;word-break:break-word;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;line-clamp:2;-webkit-box-orient:vertical}\r\n/* ËØóÊ≠å‰ΩúËÄÖÊ†∑Âºè */.poem-author[data-v-3dbe9718]{font-size:%?32?%;color:#000;text-align:center;margin:%?5?% 0 %?15?% 0;letter-spacing:%?2?%}.post-content[data-v-3dbe9718]{font-size:%?28?%;color:#666;line-height:1.6;margin-top:%?15?%;word-break:break-word;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:3;line-clamp:3;-webkit-box-orient:vertical}.vote-section[data-v-3dbe9718]{display:flex;justify-content:space-between;align-items:center;\r\n    /* ‰∏äÁßª‰∏ÄÁÇπÔºöÊî∂Á¥ß‰∏éÂÜÖÂÆπÁöÑÂûÇÁõ¥Èó¥Ë∑ù */margin-top:%?-8?%;padding:0 %?60?% 0 %?60?%}.vote-count[data-v-3dbe9718],\r\n.comment-count[data-v-3dbe9718]{display:flex;align-items:center;font-size:%?28?%;color:#999;margin-left:%?10?%;transition:color .2s ease}.vote-count[data-v-3dbe9718]{margin-left:%?10?%}.vote-count.voted[data-v-3dbe9718]{color:#ff4757}.actions-left[data-v-3dbe9718]{display:flex;align-items:center}.action-emoji[data-v-3dbe9718]{font-size:%?28?%;margin-right:%?8?%}.action-text[data-v-3dbe9718]{font-size:%?28?%;color:inherit}.button-group[data-v-3dbe9718]{display:flex;align-items:center}.like-icon-container[data-v-3dbe9718]{display:flex;align-items:center;justify-content:center;padding:%?8?%;border-radius:%?8?%;margin-left:%?20?%;transition:all .2s ease}.like-icon-container[data-v-3dbe9718]:active{-webkit-transform:scale(.95);transform:scale(.95)}.like-icon[data-v-3dbe9718]{width:%?48?%;height:%?48?%}\r\n/* Á©∫Áä∂ÊÄÅÊ†∑Âºè */.empty-state[data-v-3dbe9718]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:%?100?% %?40?%;text-align:center}.empty-icon[data-v-3dbe9718]{font-size:%?120?%;margin-bottom:%?30?%;opacity:.6}.empty-text[data-v-3dbe9718]{font-size:%?32?%;color:#666;margin-bottom:%?15?%}.empty-subtext[data-v-3dbe9718]{font-size:%?28?%;color:#999}\r\n/* Âä†ËΩΩÊõ¥Â§öÊ†∑Âºè */.loading-more[data-v-3dbe9718]{display:flex;justify-content:center;align-items:center;padding:%?40?%}.loading-text[data-v-3dbe9718]{font-size:%?28?%;color:#999}\r\n/* Â∫ïÈÉ®Âä†ËΩΩÁä∂ÊÄÅÊ†∑Âºè */.loading-footer[data-v-3dbe9718]{text-align:center;padding:%?20?% 0;color:#999;font-size:14px}\r\n/* Ê†áÁ≠æÊ†∑Âºè */.post-tags[data-v-3dbe9718]{margin-top:%?30?%;margin-bottom:%?10?%;line-height:1.5}.post-tag[data-v-3dbe9718]{color:#24375f;font-size:%?26?%;margin-right:%?10?%;transition:all .2s ease;cursor:pointer}.post-tag[data-v-3dbe9718]:active{color:#1a2a4a;opacity:.8}\r\n/* ÂèëÁé∞È°µÊé®ËçêÁõ∏ÂÖ≥Ê†∑Âºè */.discover-end-tip[data-v-3dbe9718]{display:flex;flex-direction:column;align-items:center;padding:%?40?% %?20?%;color:#999}.end-text[data-v-3dbe9718]{font-size:%?28?%;margin-bottom:%?20?%}.refresh-tip[data-v-3dbe9718]{background:rgba(255,193,7,.1);border:%?2?% solid rgba(255,193,7,.3);border-radius:%?20?%;padding:%?16?% %?24?%}.refresh-text[data-v-3dbe9718]{font-size:%?24?%;color:#ffc107;font-weight:500}",""]),n.exports=r},ac8d:function(n,r,e){var t=e("d1b0");t.__esModule&&(t=t.default),"string"===typeof t&&(t=[[n.i,t,""]]),t.locals&&(n.exports=t.locals);var a=e("967d").default;a("471ee932",t,!0,{sourceMap:!1,shadowMode:!1})},c03a:function(n,r,e){"use strict";e("6a54"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default={data:function(){return{}},props:{},methods:{},created:function(){}}},c7c0:function(n,r,e){"use strict";e("6a54");var t=e("f5bd").default;Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=t(e("39d8")),i=t(e("2634")),s=t(e("9b1b")),o=t(e("2fdc"));e("bf0f"),e("f3f7"),e("18f7"),e("de6c"),e("5c47"),e("fd3c"),e("bd06"),e("64aa"),e("f7a5"),e("8f71"),e("c223"),e("08eb"),e("2797");var c=t(e("71b6")),l=t(e("e7ad")),u=t(e("724b")),d=(e("7b44"),e("db44")),g=e("894e"),f=e("05ef"),v=t(e("71b6")),p=e("3180"),h=e("9167"),m=e("7cd7"),b=m.togglePostLike,w=e("0123"),k=e("acbf"),y=e("edf3"),x=y.previewImage,P=e("81f6"),C=P.normalizePostList,I=e("38db"),T=I.cloudCall,_=e("9c8b"),L={components:{skeleton:c.default,pageTabs:l.default,AppTabBar:u.default},mixins:[_],data:function(){return{postList:[],votingInProgress:{},page:0,hasMore:!0,isLoading:!1,openid:"",isLoadingMore:!1,swiperHeights:{},imageClampHeights:{},displayMode:"square",imageCache:{},visiblePosts:new Set,currentTab:"square",currentPage:"home",showPageIndicator:!1,pageIndicatorText:"",discoverPostList:[],discoverPage:0,discoverHasMore:!0,discoverShownPostIds:[],discoverRefreshTime:0,discoverIsLoading:!1,discoverIsLoadingMore:!1,discussionPostList:[],discussionPage:0,discussionHasMore:!0,discussionIsLoading:!1,discussionIsLoadingMore:!1,touchStartX:0,touchStartY:0,touchEndX:0,touchEndY:0,selected:0,img:"",safeAreaTop:0}},onLoad:function(n){this.debugSafeArea(),this.setData({displayMode:"square"}),this.pageLoadStartTime=Date.now(),this.initOpenid(),this.waitForLoginThenInit()},onShow:function(){try{uni.hideTabBar({animation:!1})}catch(a){}try{this.$refs.customTabBar&&this.$refs.customTabBar.syncSelected&&this.$refs.customTabBar.syncSelected()}catch(a){}var n=e("26a8"),r=n.updateTabBarStatus;r(this,0);try{var t=uni.getStorageSync("shouldRefreshIndex");t&&(console.log("„Äêindex„ÄëÊ£ÄÊµãÂà∞ÂèëÂ∏ÉÊ†áËÆ∞ÔºåÂà∑Êñ∞Êï∞ÊçÆ"),uni.removeStorageSync("shouldRefreshIndex"),this.refreshIndexData())}catch(a){console.log("CatchClause",a),console.log("CatchClause",a),console.error("Ê£ÄÊü•Âà∑Êñ∞Ê†áËÆ∞Â§±Ë¥•:",a)}this.syncLikeStatusFromCache()},onPullDownRefresh:function(){var n=this;console.log("üîç [È¶ñÈ°µ] ‰∏ãÊãâÂà∑Êñ∞Ëß¶ÂèëÔºåÂΩìÂâçÈ°µÈù¢:",this.currentPage),"home"===this.currentPage?(console.log("üîç [È¶ñÈ°µ] ÊâßË°å‰∏ªÈ°µÂà∑Êñ∞"),this.setData({postList:[],swiperHeights:{},page:0,hasMore:!0},(function(){console.log("üîç [È¶ñÈ°µ] Áä∂ÊÄÅÈáçÁΩÆÂÆåÊàêÔºåÂºÄÂßãËé∑ÂèñÊï∞ÊçÆ"),n.getPostList((function(){console.log("‚úÖ [È¶ñÈ°µ] ‰∏ãÊãâÂà∑Êñ∞ÂÆåÊàê"),uni.stopPullDownRefresh()}))}))):"discover"===this.currentPage?(console.log("üîç [È¶ñÈ°µ] ÊâßË°åÂèëÁé∞È°µÂà∑Êñ∞"),this.refreshDiscoverPosts(),uni.stopPullDownRefresh()):"discussion"===this.currentPage&&(console.log("üîç [È¶ñÈ°µ] ÊâßË°åËÆ®ËÆ∫È°µÂà∑Êñ∞"),this.refreshDiscussionPosts(),uni.stopPullDownRefresh())},onPageScroll:function(n){var r=this;this.scrollTimer&&clearTimeout(this.scrollTimer),this.scrollTimer=setTimeout((function(){var e,t,a="home"===r.currentPage,i="discover"===r.currentPage,s="discussion"===r.currentPage;if(a||i||s)if(a?(e=r.hasMore,t=r.isLoading||r.isLoadingMore):i?(e=r.discoverHasMore,t=r.discoverIsLoading||r.discoverIsLoadingMore):s&&(e=r.discussionHasMore,t=r.discussionIsLoading||r.discussionIsLoadingMore),e&&!t){var o=uni.getWindowInfo(),c=o.windowHeight;console.log("„ÄêÈ¶ñÈ°µ„ÄëÊªöÂä®Ê£ÄÊµã - page:",r.currentPage,"scrollTop:",n.scrollTop,"windowHeight:",c),uni.createSelectorQuery().in(r).select("#post-list-container").boundingClientRect((function(e){if(e&&e.height>0){var t=e.height,o=n.scrollTop,l=t-o-c,u=1.5*c;console.log("„ÄêÈ¶ñÈ°µ„ÄëÊªöÂä®ËÆ°ÁÆó:",{scrollHeight:t,scrollTop:o,windowHeight:c,distanceToBottom:l,preloadThreshold:u}),l<u&&(console.log("„ÄêÈ¶ñÈ°µ„ÄëËß¶ÂèëÈ¢ÑÂä†ËΩΩÔºåÈ°µÈù¢:",r.currentPage),a?r.getPostList():i?r.loadRecommendationPosts():s&&r.loadDiscussionPosts())}else console.log("„ÄêÈ¶ñÈ°µ„ÄëÂÆπÂô®È´òÂ∫¶Ëé∑ÂèñÂ§±Ë¥•")})).exec()}else console.log("„ÄêÈ¶ñÈ°µ„ÄëÊªöÂä®Ê£ÄÊµãË¢´ÈòªÊ≠¢:",{page:r.currentPage,hasMore:e,loadingFlag:t})}),100)},methods:{debugSafeArea:function(){try{var n=uni.getSystemInfoSync();if(console.log("„Äêindex„ÄëÁ≥ªÁªü‰ø°ÊÅØ:",{statusBarHeight:n.statusBarHeight,safeAreaInsets:n.safeAreaInsets,safeArea:n.safeArea,windowHeight:n.windowHeight,screenHeight:n.screenHeight,platform:n.platform}),n.statusBarHeight){var r=n.statusBarHeight;console.log("„Äêindex„Äë‰ΩøÁî®Áä∂ÊÄÅÊ†èÈ´òÂ∫¶‰Ωú‰∏∫ÂÆâÂÖ®Âå∫Âüü:",r),this.setData({safeAreaTop:r});try{"undefined"!==typeof document&&document.documentElement&&(document.documentElement.style.setProperty("--safe-area-inset-top",r+"px"),console.log("„Äêindex„ÄëCSSÂèòÈáèËÆæÁΩÆÊàêÂäü"))}catch(e){console.log("„Äêindex„ÄëCSSÂèòÈáèËÆæÁΩÆÂ§±Ë¥•Ôºå‰ΩøÁî®Êï∞ÊçÆÁªëÂÆöÊñπÂºè:",e)}}}catch(t){console.error("„Äêindex„ÄëÂÆâÂÖ®Âå∫ÂüüË∞ÉËØïÂ§±Ë¥•:",t)}},onTabChange:function(n){var r=this;switch(console.log("ÂàáÊç¢Ê†áÁ≠æÈ°µ:",n),this.setData({currentTab:n,showPageIndicator:!0}),n){case"square":this.setData({currentPage:"home",pageIndicatorText:"ÂπøÂú∫"});break;case"discover":this.setData({currentPage:"discover",pageIndicatorText:"ÂèëÁé∞"}),0===this.discoverPostList.length&&this.loadDiscoverPosts();break;case"discussion":this.setData({currentPage:"discussion",pageIndicatorText:"ËÆ®ËÆ∫"}),0===this.discussionPostList.length&&this.loadDiscussionPosts();break}setTimeout((function(){r.setData({showPageIndicator:!1})}),3e3)},waitForLoginThenInit:function(){var n=this,r=Date.now();(function e(){try{var t=getApp(),a=t&&t.globalData&&t.globalData._loginProcessCompleted,i=t&&t.globalData&&t.globalData.openid;if(a&&i)return console.log("üîê [È¶ñÈ°µ] Ê£ÄÊµãÂà∞ÁôªÂΩïÂÆåÊàê‰∏îÂ∑≤Ëé∑Âèñ openidÔºåÂºÄÂßãÊãâÂèñÊï∞ÊçÆ"),void n.getIndexData()}catch(s){console.log("üîê [È¶ñÈ°µ] ÁôªÂΩïÊ£ÄÊµãÂºÇÂ∏∏ÔºàÂøΩÁï•ÁªßÁª≠Á≠âÂæÖÔºâ",s)}if(Date.now()-r>=5e3)return console.log("‚è±Ô∏è [È¶ñÈ°µ] ÁôªÂΩïÁ≠âÂæÖË∂ÖÊó∂ÔºåÂÖúÂ∫ïÁõ¥Êé•ÊãâÂèñÊï∞ÊçÆ"),void n.getIndexData();setTimeout(e,100)})()},getIndexData:function(){var n=this;this.setData({isLoading:!0,postList:[],page:0,hasMore:!0}),(0,g.getHomePosts)({page:0,pageSize:5,context:this}).then(function(){var r=(0,o.default)((0,i.default)().mark((function r(e){var t,a,o;return(0,i.default)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t=Array.isArray(e)?e:[],a=C(t).map((function(n){return(0,s.default)((0,s.default)({},n),{},{likeIcon:h.getLikeIcon(n.votes||0,n.isVoted||!1)})})),r.next=4,(0,f.hydrateTempUrls)(a);case 4:a=r.sent,(0,f.warmTempUrlsFromPosts)(a),n.setData({postList:a,page:1,isLoading:!1,hasMore:5===a.length}),o=n,setTimeout((function(){o.preloadUserData&&"function"===typeof o.preloadUserData&&o.preloadUserData(a)}),500);case 9:case"end":return r.stop()}}),r)})));return function(n){return r.apply(this,arguments)}}()).catch((function(r){console.error("„ÄêÈ¶ñÈ°µ„ÄëgetIndexDataÔºàÁºìÂ≠òÂ∞ÅË£ÖÔºâÂ§±Ë¥•:",r),n.setData({isLoading:!1}),uni.showToast({title:"ÁΩëÁªúÈîôËØØ",icon:"none"})}))},refreshData:function(){var n=this;this.setData({postList:[],swiperHeights:{},imageClampHeights:{},page:0,hasMore:!0},(function(){n.getPostList()}))},handlePreview:function(n){console.log("„ÄêÂõæÁâáÈ¢ÑËßà„ÄëhandlePreview‰∫ã‰ª∂Ëß¶Âèë");var r=n&&n.currentTarget?n.currentTarget.dataset:{};console.log("„ÄêÂõæÁâáÈ¢ÑËßà„Äëevent.currentTarget.dataset:",r);var e=x(n);return e||console.error("„ÄêÂõæÁâáÈ¢ÑËßà„ÄëÈ¢ÑËßàÊù°‰ª∂‰∏çÊª°Ë∂≥",r),e},onVote:function(n){var r=this;console.log("„ÄêÁÇπËµû„ÄëonVote‰∫ã‰ª∂Ëß¶Âèë",n.currentTarget.dataset);var e=n.currentTarget.dataset.postid,t=n.currentTarget.dataset.index,i=n.currentTarget.dataset.listType;i||(i="discover"===this.currentPage?"discover":"discussion"===this.currentPage?"discussion":"home");var o="discover"===i?"discoverPostList":"discussion"===i?"discussionPostList":"postList",c="discover"===i?"discover":"discussion"===i?"discussion":"index",l=this[o]||[],u=t;if(l[u]&&l[u]._id===e||(u=l.findIndex((function(n){return n._id===e}))),u<0)console.warn("„ÄêÁÇπËµû„ÄëÊú™ÊâæÂà∞ÂØπÂ∫îÁöÑÂ∏ñÂ≠êÔºåpostId:",e,"listType:",i);else if(console.log("„ÄêÁÇπËµû„ÄëpostId:",e,"index:",t),this.votingInProgress[e])console.log("„ÄêÁÇπËµû„ÄëÊ≠£Âú®ÊäïÁ•®‰∏≠ÔºåË∑≥Ëøá");else{this.setData((0,a.default)({},"votingInProgress.".concat(e),!0));var d=l[u]||{},g=Number(d.votes)||0,f=!!d.isVoted;console.log("„ÄêÁÇπËµû„ÄëÂéüÂßãÁä∂ÊÄÅ - votes:",g,"isVoted:",f);var v=f?Math.max(0,g-1):g+1,p=(0,s.default)((0,s.default)({},d),{},{votes:v,isVoted:!f,likeIcon:h.getLikeIcon(v,!f)}),m=l.slice();m[u]=p,this.setData((0,a.default)({},o,m)),b(e,{pageTag:c,context:this,currentVotes:g,currentIsLiked:f,requireAuth:!0}).then((function(n){if(console.log("„ÄêÁÇπËµû„ÄëÊúçÂä°ËøîÂõûÁªìÊûú:",n),n.success){var t=r[o]||[],i=t.findIndex((function(n){return n._id===e}));if(i>-1){var c=(0,s.default)((0,s.default)({},t[i]),{},{votes:n.votes,isVoted:n.isLiked,likeIcon:n.likeIcon}),l=t.slice();l[i]=c,r.setData((0,a.default)({},o,l))}console.log("„ÄêÁÇπËµû„ÄëÊúçÂä°Ë∞ÉÁî®ÊàêÂäüÔºåÊï∞ÊçÆÂ∑≤ÂêåÊ≠•")}else{var u=n.rollback||{votes:g,isLiked:f,likeIcon:h.getLikeIcon(g,f)};console.warn("„ÄêÁÇπËµû„ÄëÊúçÂä°ËøîÂõûÂ§±Ë¥•ÔºåÂõûÊªöUI");var d=r[o]||[],v=d.findIndex((function(n){return n._id===e}));if(v>-1){var p=(0,s.default)((0,s.default)({},d[v]),{},{votes:u.votes,isVoted:u.isLiked,likeIcon:u.likeIcon}),m=d.slice();m[v]=p,r.setData((0,a.default)({},o,m))}}})).catch((function(n){console.error("„ÄêÁÇπËµû„ÄëË∞ÉÁî® likeService Â§±Ë¥•:",n);var t=r[o]||[],i=t.findIndex((function(n){return n._id===e}));if(i>-1){var c=(0,s.default)((0,s.default)({},t[i]),{},{votes:g,isVoted:f,likeIcon:h.getLikeIcon(g,f)}),l=t.slice();l[i]=c,r.setData((0,a.default)({},o,l))}})).finally((function(){console.log("„ÄêÁÇπËµû„ÄëÊúçÂä°Ë∞ÉÁî®ÂÆåÊàê"),r.setData((0,a.default)({},"votingInProgress.".concat(e),!1))}))}},updatePostCommentCount:function(n,r){var e=this.postList,t=e.findIndex((function(r){return r._id===n}));t>-1&&this.setData((0,a.default)({},"postList[".concat(t,"].commentCount"),r))},onImageError:function(n){console.error("ÂõæÁâáÂä†ËΩΩÂ§±Ë¥•",n.detail)},onAvatarError:function(n){console.error("Â§¥ÂÉèÂä†ËΩΩÂ§±Ë¥•",n.detail)},onAvatarLoad:function(n){console.log("Â§¥ÂÉèÂä†ËΩΩÊàêÂäü",n.detail)},onLikeIconError:function(n){console.error("ÁÇπËµûÂõæÊ†áÂä†ËΩΩÂ§±Ë¥•",n.detail,"ÂõæÊ†áË∑ØÂæÑ:",n.currentTarget.dataset.src)},preloadImages:function(n){var r=n.filter((function(n){return n.imageUrls&&n.imageUrls.length>0})).map((function(n){return n.imageUrls[0]})).slice(0,3);r.length>0&&p.preloadImages(r,(function(n,r){r&&console.log("ÂõæÁâáÈ¢ÑÂä†ËΩΩÊàêÂäü:",n)}))},preloadUserData:function(n){if(n&&0!==n.length){var r=this.getCurrentUserId();r&&(w.preloadAvatarsFromPosts(n),k.preloadFollowStatusFromPosts(n,r))}},initOpenid:function(){var n=getApp(),r=n&&n.globalData&&n.globalData.openid;if(r)this.setData({openid:r});else{var e=uni.getStorageSync("openid")||uni.getStorageSync("userOpenId");e&&this.setData({openid:e})}},getCurrentUserId:function(){return this.openid||uni.getStorageSync("openid")||uni.getStorageSync("userOpenId")},navigateToUserProfile:function(n){console.log("„ÄêÂ§¥ÂÉèÁÇπÂáª„Äë‰∫ã‰ª∂Ëß¶Âèë",n),console.log("„ÄêÂ§¥ÂÉèÁÇπÂáª„Äëdataset:",n.currentTarget.dataset);var r=n.currentTarget.dataset.userId;if(console.log("„ÄêÂ§¥ÂÉèÁÇπÂáª„ÄëÊèêÂèñÁöÑuserId:",r),r){var e=this.openid;r===e?(console.log("„ÄêÂ§¥ÂÉèÁÇπÂáª„ÄëÁÇπÂáªÁöÑÊòØËá™Â∑±Â§¥ÂÉèÔºåÂàáÊç¢Âà∞ÊàëÁöÑÈ°µÈù¢"),uni.switchTab({url:"/pages/profile/profile"})):(console.log("„ÄêÂ§¥ÂÉèÁÇπÂáª„ÄëÁÇπÂáªÁöÑÊòØ‰ªñ‰∫∫Â§¥ÂÉèÔºåË∑≥ËΩ¨Âà∞Áî®Êà∑‰∏ªÈ°µ"),uni.navigateTo({url:"/pages/user-profile/user-profile?userId=".concat(r),success:function(){console.log("„ÄêÂ§¥ÂÉèÁÇπÂáª„ÄëË∑≥ËΩ¨ÊàêÂäü")},fail:function(n){console.error("„ÄêÂ§¥ÂÉèÁÇπÂáª„ÄëË∑≥ËΩ¨Â§±Ë¥•:",n),uni.showToast({title:"Ë∑≥ËΩ¨Â§±Ë¥•",icon:"none"})}}))}else console.error("„ÄêÂ§¥ÂÉèÁÇπÂáª„ÄëuserId‰∏∫Á©∫ÔºåÊó†Ê≥ïË∑≥ËΩ¨"),uni.showToast({title:"Áî®Êà∑‰ø°ÊÅØËé∑ÂèñÂ§±Ë¥•",icon:"none"})},getPostList:function(n){var r=this;if(console.log("üîç [È¶ñÈ°µ] getPostList ÂºÄÂßãË∞ÉÁî®"),console.log("üîç [È¶ñÈ°µ] ÂΩìÂâçÁä∂ÊÄÅ:",{isLoading:this.isLoading,isLoadingMore:this.isLoadingMore,hasMore:this.hasMore,page:this.page,postListLength:this.postList.length}),this.isLoading||this.isLoadingMore||!this.hasMore)return console.log("„ÄêÈ¶ñÈ°µ„ÄëgetPostListË¢´ÈòªÊ≠¢ÔºöÊ≠£Âú®Âä†ËΩΩ‰∏≠ÊàñÊ≤°ÊúâÊõ¥Â§öÊï∞ÊçÆ"),void("function"===typeof n&&n());var e=5*this.page,t=0===this.page;console.log("üîç [È¶ñÈ°µ] ËØ∑Ê±ÇÂèÇÊï∞:",{skip:e,page:this.page,isFirstLoad:t,PAGE_SIZE:5}),t?this.setData({isLoading:!0}):this.setData({isLoadingMore:!0});Date.now();(0,g.getHomePosts)({page:this.page,pageSize:5,context:this}).then(function(){var n=(0,o.default)((0,i.default)().mark((function n(e){var a,o,c,l,u,d,g;return(0,i.default)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=Array.isArray(e)?e:[],console.log("‚úÖ [È¶ñÈ°µ] Ëé∑ÂèñÂà∞Â∏ñÂ≠êÊï∞ÈáèÔºàÁºìÂ≠òÂ∞ÅË£ÖÔºâ:",a.length),o=C(a).map((function(n){return(0,s.default)((0,s.default)({},n),{},{likeIcon:h.getLikeIcon(n.votes||0,n.isVoted||!1)})})),n.next=5,(0,f.hydrateTempUrls)(o);case 5:o=n.sent,(0,f.warmTempUrlsFromPosts)(o),c=r,setTimeout((function(){c.preloadUserData&&"function"===typeof c.preloadUserData&&c.preloadUserData(o)}),500),l=o.length,u=r.postList,d=u.concat(o),g={postList:d,page:r.page+1,hasMore:5===l},console.log("‚úÖ [È¶ñÈ°µ] Êõ¥Êñ∞Êï∞ÊçÆÔºàÁºìÂ≠òÂ∞ÅË£ÖÔºâ:",{newPostListLength:d.length,currentPage:r.page,newPage:r.page+1,hasMore:g.hasMore,newPostsCount:l}),r.setData(g),t&&r.preloadImages(o);case 16:case"end":return n.stop()}}),n)})));return function(r){return n.apply(this,arguments)}}()).catch((function(n){console.error("„ÄêÈ¶ñÈ°µ„ÄëgetPostListÔºàÁºìÂ≠òÂ∞ÅË£ÖÔºâÂ§±Ë¥•:",n),t&&uni.showToast({title:"ÁΩëÁªúÈîôËØØ",icon:"none"})})).finally((function(){t?r.setData({isLoading:!1}):r.setData({isLoadingMore:!1}),"function"===typeof n&&n()}))},syncLikeStatusFromCache:function(){console.log("„ÄêÈ¶ñÈ°µ„ÄëÂêåÊ≠•ÁÇπËµûÁä∂ÊÄÅÔºöCacheManager Êé•ÁÆ°ÔºåË∑≥Ëøá dataCache ÂêåÊ≠•")},onTagClick:function(n){var r=n.currentTarget.dataset.tag;console.log("ÁÇπÂáªÊ†áÁ≠æ:",r),uni.navigateTo({url:"/pages/tag-filter/tag-filter?tag=".concat(encodeURIComponent(r)),success:function(){console.log("Ë∑≥ËΩ¨Âà∞Ê†áÁ≠æÁ≠õÈÄâÈ°µÈù¢ÊàêÂäü")},fail:function(n){console.error("Ë∑≥ËΩ¨Âà∞Ê†áÁ≠æÁ≠õÈÄâÈ°µÈù¢Â§±Ë¥•:",n),uni.showToast({title:"Ë∑≥ËΩ¨Â§±Ë¥•",icon:"none"})}})},onCommentClick:function(n){var r=n.currentTarget.dataset.postid;console.log("ÁÇπÂáªËØÑËÆ∫ÔºåË∑≥ËΩ¨Âà∞ËØ¶ÊÉÖÈ°µ:",r),uni.navigateTo({url:"/pages/post-detail/post-detail?id=".concat(r),success:function(){console.log("Ë∑≥ËΩ¨Âà∞ËØ¶ÊÉÖÈ°µÊàêÂäü")},fail:function(n){console.error("Ë∑≥ËΩ¨Âà∞ËØ¶ÊÉÖÈ°µÂ§±Ë¥•:",n),uni.showToast({title:"Ë∑≥ËΩ¨Â§±Ë¥•",icon:"none"})}})},touchStart:function(n){this.setData({touchStartX:n.touches[0].clientX,touchStartY:n.touches[0].clientY})},touchEnd:function(n){var r=n.changedTouches[0].clientX,e=n.changedTouches[0].clientY,t=this.touchStartX-r,a=this.touchStartY-e,i=Math.sqrt(t*t+a*a),s=Math.abs(180*Math.atan2(Math.abs(a),Math.abs(t))/Math.PI);i>80&&Math.abs(t)>50&&s<45&&(t>0?(console.log("Â∑¶ÊªëÂàáÊç¢Âõû‰∏ªÈ°µ"),this.switchToHome()):(console.log("Âè≥ÊªëÂàáÊç¢Âà∞ÂèëÁé∞È°µ"),this.switchToDiscover()))},switchToDiscover:function(){var n=this;"discover"!==this.currentPage?(console.log("ÂàáÊç¢Âà∞ÂèëÁé∞È°µ"),this.setData({currentPage:"discover",showPageIndicator:!0,pageIndicatorText:"ÂèëÁé∞È°µ"}),0===this.discoverPostList.length?(console.log("ÂºÄÂßãÂä†ËΩΩÂèëÁé∞È°µÊï∞ÊçÆ"),this.loadDiscoverPosts()):console.log("ÂèëÁé∞È°µÂ∑≤ÊúâÊï∞ÊçÆÔºåÁõ¥Êé•ÂàáÊç¢"),setTimeout((function(){n.setData({showPageIndicator:!1})}),3e3)):console.log("Â∑≤ÁªèÂú®ÂèëÁé∞È°µÔºåÊó†ÈúÄÂàáÊç¢")},switchToHome:function(){var n=this;"home"!==this.currentPage?(console.log("ÂàáÊç¢Âõû‰∏ªÈ°µ"),this.setData({currentPage:"home",showPageIndicator:!0,pageIndicatorText:"‰∏ªÈ°µ"}),setTimeout((function(){n.setData({showPageIndicator:!1})}),3e3)):console.log("Â∑≤ÁªèÂú®‰∏ªÈ°µÔºåÊó†ÈúÄÂàáÊç¢")},loadDiscoverPosts:function(){console.log("ÂºÄÂßãÂä†ËΩΩÂèëÁé∞È°µÊé®ËçêÊï∞ÊçÆ"),this.loadRecommendationPosts()},loadRecommendationPosts:function(){var n=(0,o.default)((0,i.default)().mark((function n(){var r,e,t,a,o,c,l,u,g,v,p,m,b,w,k,y;return(0,i.default)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!this.discoverIsLoading&&!this.discoverIsLoadingMore){n.next=3;break}return console.log("ÂèëÁé∞È°µÊ≠£Âú®Âä†ËΩΩ‰∏≠ÔºåË∑≥ËøáÈáçÂ§çËØ∑Ê±Ç"),n.abrupt("return");case 3:if(this.discoverHasMore||!(this.discoverPage>0)){n.next=6;break}return console.log("ÂèëÁé∞È°µÂ∑≤Êó†Êõ¥Â§öÊé®ËçêÔºåË∑≥ËøáÂä†ËΩΩ"),n.abrupt("return");case 6:return r=0===this.discoverPage&&0===this.discoverPostList.length,this.setData({discoverIsLoading:r,discoverIsLoadingMore:!r}),n.prev=8,e=Array.from(new Set(Array.isArray(this.discoverShownPostIds)?this.discoverShownPostIds:[])),t=new Set(e),a=this.discoverPage,n.next=14,(0,d.getDiscoverFeed)({excludePostIds:e,page:a,pageSize:5,context:this});case 14:return o=n.sent,c=Array.isArray(null===o||void 0===o?void 0:o.posts)?o.posts:[],console.log("Ëé∑ÂèñÊé®ËçêÊï∞ÊçÆÁªìÊûúÔºàÂàÜÈ°µÔºâ: page=",a,"Êù°Êï∞=",c.length,"hasMore=",null===o||void 0===o?void 0:o.hasMore),l=C(c).map((function(n){return(0,s.default)((0,s.default)({},n),{},{likeIcon:h.getLikeIcon(n.votes||0,n.isVoted||!1)})})),l=l.filter((function(n){return n&&n._id&&!t.has(n._id)})),n.next=21,(0,f.hydrateTempUrls)(l);case 21:if(l=n.sent,(0,f.warmTempUrlsFromPosts)(l),l.length){n.next=29;break}return console.log("ÊöÇÊó†Êñ∞ÁöÑÊé®ËçêÂÜÖÂÆπ"),u=!(!o||!o.hasMore),this.setData({discoverPostList:0===a?[]:this.discoverPostList,discoverHasMore:u,discoverRefreshTime:Date.now(),discoverIsLoading:!1,discoverIsLoadingMore:!1,discoverPage:u?a+1:a}),u?(console.log("ÊúçÂä°Âô®ÊèêÁ§∫‰ªçÊúâÊõ¥Â§öÔºåÁªßÁª≠Â∞ùËØïËé∑Âèñ‰∏ã‰∏ÄÈ°µ"),this.loadRecommendationPosts()):(g=r?"ÊöÇÊó∂Ê≤°ÊúâÊñ∞ÁöÑÊé®Ëçê":"Ê≤°ÊúâÊõ¥Â§öÊé®Ëçê‰∫Ü",uni.showToast({title:g,icon:"none"})),n.abrupt("return");case 29:v=Array.isArray(this.discoverPostList)?this.discoverPostList.slice():[],p=0===a?l:v.concat(l),m=l.map((function(n){return n._id})).filter(Boolean),b=new Set(e),m.forEach((function(n){return b.add(n)})),w=Array.from(b).slice(-200),k=!(!o||!o.hasMore),y=l.length>=5||k,this.setData({discoverPostList:p,discoverPage:a+1,discoverHasMore:l.length>=5||y,discoverShownPostIds:w,discoverRefreshTime:Date.now()}),console.log("ÂèëÁé∞È°µÊé®ËçêÊï∞ÊçÆËÆæÁΩÆÂÆåÊàêÔºåÂ∏ñÂ≠êÊï∞Èáè:",l.length,"Á¥ØËÆ°:",p.length,"hasMore:",y),n.next=45;break;case 41:n.prev=41,n.t0=n["catch"](8),console.error("Êé®ËçêÊï∞ÊçÆËØ∑Ê±ÇÂ§±Ë¥•ÔºàÂàÜÈ°µÔºâ:",n.t0),uni.showToast({title:"Êé®ËçêÂä†ËΩΩÂ§±Ë¥•",icon:"none"});case 45:return n.prev=45,this.setData({discoverIsLoading:!1,discoverIsLoadingMore:!1}),n.finish(45);case 48:case"end":return n.stop()}}),n,this,[[8,41,45,48]])})));return function(){return n.apply(this,arguments)}}(),refreshDiscoverPosts:function(){console.log("Âà∑Êñ∞ÂèëÁé∞È°µÊé®Ëçê");try{(0,d.invalidateDiscover)()}catch(n){console.warn("Ê∏ÖÁêÜÂèëÁé∞È°µÁºìÂ≠òÂ§±Ë¥•:",n)}this.setData({discoverPostList:[],discoverPage:0,discoverHasMore:!0,discoverRefreshTime:Date.now(),discoverIsLoading:!1,discoverIsLoadingMore:!1}),this.loadRecommendationPosts()},loadDiscussionPosts:function(){var n=this;if(console.log("ÂºÄÂßãÂä†ËΩΩËÆ®ËÆ∫È°µÊï∞ÊçÆ"),this.discussionIsLoading||this.discussionIsLoadingMore)console.log("ËÆ®ËÆ∫È°µÊ≠£Âú®Âä†ËΩΩ‰∏≠ÔºåË∑≥ËøáÈáçÂ§çËØ∑Ê±Ç");else if(!this.discussionHasMore&&this.discussionPage>0)console.log("ËÆ®ËÆ∫È°µÂ∑≤Êó†Êõ¥Â§öÊï∞ÊçÆÔºåË∑≥ËøáÂä†ËΩΩ");else{var r=0===this.discussionPage&&0===this.discussionPostList.length;this.setData({discussionIsLoading:r,discussionIsLoadingMore:!r});var e=5*this.discussionPage;this.callCloudFunction("getDiscussionPosts",{skip:e,limit:5},{requireAuth:!1}).then(function(){var e=(0,o.default)((0,i.default)().mark((function e(t){var a,o,c;return(0,i.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(t.result&&t.result.success&&t.result.posts)){e.next=13;break}return a=t.result.posts.map((function(n){return(0,s.default)((0,s.default)({},n),{},{likeIcon:h.getLikeIcon(n.votes||0,n.isVoted||!1)})})),e.next=4,(0,f.hydrateTempUrls)(a);case 4:a=e.sent,(0,f.warmTempUrlsFromPosts)(a),o=0===n.discussionPage?[]:n.discussionPostList,c=o.concat(a),n.setData({discussionPostList:c,discussionPage:n.discussionPage+1,discussionHasMore:5===a.length,discussionIsLoading:!1,discussionIsLoadingMore:!1}),console.log("ËÆ®ËÆ∫È°µÊï∞ÊçÆÂä†ËΩΩÂÆåÊàêÔºåÂ∏ñÂ≠êÊï∞Èáè:",a.length,"Á¥ØËÆ°:",c.length),r&&setTimeout((function(){n.preloadUserData&&"function"===typeof n.preloadUserData&&n.preloadUserData(a)}),500),e.next=15;break;case 13:n.setData({discussionIsLoading:!1,discussionIsLoadingMore:!1,discussionHasMore:!1}),r&&uni.showToast({title:"ÊöÇÊó†ËÆ®ËÆ∫ÂÜÖÂÆπ",icon:"none"});case 15:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()).catch((function(r){console.error("Âä†ËΩΩËÆ®ËÆ∫È°µÊï∞ÊçÆÂ§±Ë¥•:",r),n.setData({discussionIsLoading:!1,discussionIsLoadingMore:!1}),uni.showToast({title:"Âä†ËΩΩÂ§±Ë¥•",icon:"none"})}))}},getMockDiscussionPosts:function(){return[{_id:"discussion_1",_openid:"user_1",title:"Â§ßÂÆ∂ËßâÂæóÁé∞‰ª£ËØóÊ≠åÂ∫îËØ•Â¶Ç‰ΩïÂèëÂ±ïÔºü",content:"ÊúÄËøëÁúãÂà∞ÂæàÂ§öÁé∞‰ª£ËØó‰ΩúÂìÅÔºåÊÑüËßâÈ£éÊ†ºÂêÑÂºÇ„ÄÇÊÉ≥Âê¨Âê¨Â§ßÂÆ∂ÂØπÁé∞‰ª£ËØóÊ≠åÊú™Êù•ÂèëÂ±ïÁöÑÁúãÊ≥ï„ÄÇ",authorName:"ËØóÂèãÂ∞èÁéã",authorAvatar:"/static/images/avatar.png",votes:15,commentCount:8,isVoted:!1,tags:["ËØóÊ≠åËÆ®ËÆ∫","Áé∞‰ª£ËØó"],imageUrls:[],createdAt:(new Date).toISOString()},{_id:"discussion_2",_openid:"user_2",title:"ÂàÜ‰∫´‰∏ÄÈ¶ñÊúÄÂñúÊ¨¢ÁöÑÂè§ËØó",content:"ÊúÄËøëÈáçËØª‰∫ÜÊùéÁôΩÁöÑ„ÄäÂ∞ÜËøõÈÖí„ÄãÔºåÊØèÊ¨°ËØªÈÉΩÊúâÊñ∞ÁöÑÊÑüÊÇü„ÄÇÂ§ßÂÆ∂ÊúÄÂñúÊ¨¢Âì™È¶ñÂè§ËØóÂë¢Ôºü",authorName:"Âè§È£éÁà±Â•ΩËÄÖ",authorAvatar:"/static/images/avatar.png",votes:23,commentCount:12,isVoted:!0,tags:["Âè§ËØó","ÊùéÁôΩ","ÁªèÂÖ∏"],imageUrls:[],createdAt:(new Date).toISOString()},{_id:"discussion_3",_openid:"user_3",title:"ÂÜô‰ΩúÁÅµÊÑüÊûØÁ´≠ÊÄé‰πàÂäûÔºü",content:"ÊúÄËøë‰∏ÄÊÆµÊó∂Èó¥ÊÄªÊòØÊÑüËßâÂÜô‰∏çÂá∫‰∏úË•øÔºåÁÅµÊÑüÂ•ΩÂÉèÊûØÁ´≠‰∫Ü„ÄÇÂ§ßÂÆ∂Êúâ‰ªÄ‰πàÂ•ΩÁöÑÂª∫ËÆÆÂêóÔºü",authorName:"ÂÜô‰ΩúÊñ∞Êâã",authorAvatar:"/static/images/avatar.png",votes:8,commentCount:6,isVoted:!1,tags:["ÂÜô‰Ωú","ÁÅµÊÑü","Ê±ÇÂä©"],imageUrls:[],createdAt:(new Date).toISOString()}]},refreshDiscussionPosts:function(){console.log("Âà∑Êñ∞ËÆ®ËÆ∫È°µÊï∞ÊçÆ"),this.setData({discussionPostList:[],discussionPage:0,discussionHasMore:!0,discussionIsLoading:!1,discussionIsLoadingMore:!1}),this.loadDiscussionPosts()},refreshIndexData:function(){console.log("„Äêindex„ÄëÂºÄÂßãÂà∑Êñ∞ÂπøÂú∫È°µÊï∞ÊçÆ"),this.setData({postList:[],page:0,hasMore:!0,isLoading:!1}),this.getIndexData()},callCloudFunction:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return T(n,r,Object.assign({pageTag:"index",context:this},e))}}};r.default=L,r.default.components=Object.assign({skeleton:v.default},r.default.components||{})},d116:function(n,r,e){"use strict";e.d(r,"b",(function(){return a})),e.d(r,"c",(function(){return i})),e.d(r,"a",(function(){return t}));var t={pageTabs:e("e7ad").default,skeleton:e("71b6").default},a=function(){var n=this,r=n.$createElement,e=n._self._c||r;return e("v-uni-view",[e("v-uni-view",{staticClass:"container",on:{touchstart:function(r){arguments[0]=r=n.$handleEvent(r),n.touchStart.apply(void 0,arguments)},touchend:function(r){arguments[0]=r=n.$handleEvent(r),n.touchEnd.apply(void 0,arguments)}}},[n.showPageIndicator?e("v-uni-view",{staticClass:"page-indicator"},[e("v-uni-view",{staticClass:"page-indicator-text"},[n._v(n._s(n.pageIndicatorText))])],1):n._e(),e("page-tabs",{ref:"pageTabs",attrs:{"current-tab":n.currentTab},on:{"tab-change":function(r){arguments[0]=r=n.$handleEvent(r),n.onTabChange.apply(void 0,arguments)}}}),n.isLoading?e("v-uni-view",[e("skeleton")],1):e("v-uni-view",{staticClass:"square-mode-container"},[0!==n.postList.length||n.isLoading?n._e():e("v-uni-view",{staticClass:"empty-state"},[e("v-uni-view",{staticClass:"empty-icon"},[n._v("üìù")]),e("v-uni-view",{staticClass:"empty-text"},[n._v("ËøòÊ≤°ÊúâÂ∏ñÂ≠êÂì¶ÔΩû")]),e("v-uni-view",{staticClass:"empty-subtext"},[n._v("Âø´Êù•ÂèëÂ∏ÉÁ¨¨‰∏ÄÊù°Â∏ñÂ≠êÂêßÔºÅ")])],1),e("v-uni-view",{attrs:{id:"post-list-container"}},["home"===n.currentPage?e("v-uni-view",n._l(n.postList,(function(r,t){return e("v-uni-view",{key:t,class:"post-item-wrapper "+(r.isOriginal?"original-post":"")},[e("v-uni-view",{staticClass:"author-info-outside"},[r.authorAvatar?e("v-uni-image",{staticClass:"author-avatar",attrs:{src:r.authorAvatar,mode:"aspectFill","data-postindex":t,"data-user-id":r._openid},on:{error:function(r){arguments[0]=r=n.$handleEvent(r),n.onAvatarError.apply(void 0,arguments)},load:function(r){arguments[0]=r=n.$handleEvent(r),n.onAvatarLoad.apply(void 0,arguments)},click:function(r){r.stopPropagation(),r.preventDefault(),arguments[0]=r=n.$handleEvent(r),n.navigateToUserProfile.apply(void 0,arguments)}}}):n._e(),e("v-uni-text",{staticClass:"author-name"},[n._v(n._s(r.authorName))])],1),e("v-uni-navigator",{staticClass:"post-content-navigator",attrs:{url:"/pages/post-detail/post-detail?id="+r._id,"hover-class":"navigator-hover"}},[e("v-uni-view",{staticClass:"post-item"},[e("v-uni-view",{staticClass:"post-title"},[n._v(n._s(r.title))]),r.isPoem&&r.author?e("v-uni-view",{staticClass:"poem-author"},[n._v(n._s(r.author))]):n._e(),r.imageUrls&&r.imageUrls.length>0?e("v-uni-view",{staticClass:"image-container-wrapper",style:r.imageStyle,attrs:{"data-src":r.imageUrls[0],"data-original-image-urls":r.originalImageUrls||r.imageUrls},on:{click:function(r){r.stopPropagation(),r.preventDefault(),arguments[0]=r=n.$handleEvent(r),n.handlePreview.apply(void 0,arguments)}}},[1===r.imageUrls.length?[e("v-uni-image",{staticClass:"post-image",attrs:{src:r.imageUrls[0],mode:"aspectFill","lazy-load":!0,"data-src":r.imageUrls[0],"data-original-image-urls":r.originalImageUrls||r.imageUrls},on:{error:function(r){arguments[0]=r=n.$handleEvent(r),n.onImageError.apply(void 0,arguments)},click:function(r){r.stopPropagation(),r.preventDefault(),arguments[0]=r=n.$handleEvent(r),n.handlePreview.apply(void 0,arguments)}}})]:r.imageUrls.length>1?[e("v-uni-swiper",{staticClass:"image-swiper",attrs:{"indicator-dots":!0,circular:!0}},[n._l(r.imageUrls,(function(t,a){return[e("v-uni-swiper-item",[e("v-uni-image",{staticClass:"post-image",attrs:{src:t,mode:"aspectFill","lazy-load":!0,"data-src":t,"data-original-image-urls":r.originalImageUrls||r.imageUrls},on:{error:function(r){arguments[0]=r=n.$handleEvent(r),n.onImageError.apply(void 0,arguments)},click:function(r){r.stopPropagation(),r.preventDefault(),arguments[0]=r=n.$handleEvent(r),n.handlePreview.apply(void 0,arguments)}}})],1)]}))],2)]:n._e()],2):n._e(),r.content?e("v-uni-view",{staticClass:"post-content",staticStyle:{"white-space":"pre-wrap"}},[n._v(n._s(r.content))]):n._e(),r.tags&&r.tags.length>0?e("v-uni-view",{staticClass:"post-tags"},n._l(r.tags,(function(r,t){return e("v-uni-text",{key:t,staticClass:"post-tag",attrs:{"data-tag":r},on:{click:function(r){r.stopPropagation(),r.preventDefault(),arguments[0]=r=n.$handleEvent(r),n.onTagClick.apply(void 0,arguments)}}},[n._v("#"+n._s(r))])})),1):n._e()],1)],1),e("v-uni-view",{staticClass:"vote-section"},[e("v-uni-view",{staticClass:"actions-left"}),e("v-uni-view",{staticClass:"button-group"},[e("v-uni-view",{staticClass:"comment-count",attrs:{"data-postid":r._id},on:{click:function(r){r.stopPropagation(),r.preventDefault(),arguments[0]=r=n.$handleEvent(r),n.onCommentClick.apply(void 0,arguments)}}},[e("v-uni-text",{staticClass:"action-emoji"},[n._v("üí¨")]),e("v-uni-text",{staticClass:"action-text"},[n._v(n._s(r.commentCount||0))])],1),e("v-uni-view",{staticClass:"like-icon-container",attrs:{"data-postid":r._id,"data-index":t,"data-list-type":"home"},on:{click:function(r){r.stopPropagation(),r.preventDefault(),arguments[0]=r=n.$handleEvent(r),n.onVote.apply(void 0,arguments)}}},[e("v-uni-image",{staticClass:"like-icon",attrs:{src:r.likeIcon||"/static/images/seed.png",mode:"aspectFit"},on:{error:function(r){arguments[0]=r=n.$handleEvent(r),n.onLikeIconError.apply(void 0,arguments)}}})],1),e("v-uni-view",{class:"vote-count "+(r.isVoted?"voted":"")},[e("v-uni-text",{staticClass:"action-text"},[n._v(n._s(r.votes||0))])],1)],1)],1)],1)})),1):"discover"===n.currentPage?e("v-uni-view",[0!==n.discoverPostList.length||n.isLoading?n._e():e("v-uni-view",{staticClass:"empty-state"},[e("v-uni-view",{staticClass:"empty-icon"},[n._v("üîç")]),e("v-uni-view",{staticClass:"empty-text"},[n._v("ÂèëÁé∞È°µÊöÇÊó†ÂÜÖÂÆπ")]),e("v-uni-view",{staticClass:"empty-subtext"},[n._v("Êé®ËçêÁÆóÊ≥ïÊ≠£Âú®Â≠¶‰π†‰∏≠...")])],1),n._l(n.discoverPostList,(function(r,t){return e("v-uni-view",{key:t,class:"post-item-wrapper "+(r.isOriginal?"original-post":"")},[e("v-uni-view",{staticClass:"author-info-outside"},[r.authorAvatar?e("v-uni-image",{staticClass:"author-avatar",attrs:{src:r.authorAvatar,mode:"aspectFill","data-postindex":t,"data-user-id":r._openid},on:{error:function(r){arguments[0]=r=n.$handleEvent(r),n.onAvatarError.apply(void 0,arguments)},load:function(r){arguments[0]=r=n.$handleEvent(r),n.onAvatarLoad.apply(void 0,arguments)},click:function(r){r.stopPropagation(),r.preventDefault(),arguments[0]=r=n.$handleEvent(r),n.navigateToUserProfile.apply(void 0,arguments)}}}):n._e(),e("v-uni-text",{staticClass:"author-name"},[n._v(n._s(r.authorName))])],1),e("v-uni-navigator",{staticClass:"post-content-navigator",attrs:{url:"/pages/post-detail/post-detail?id="+r._id,"hover-class":"navigator-hover"}},[e("v-uni-view",{staticClass:"post-item"},[e("v-uni-view",{staticClass:"post-title"},[n._v(n._s(r.title))]),r.isPoem&&r.author?e("v-uni-view",{staticClass:"poem-author"},[n._v(n._s(r.author))]):n._e(),r.imageUrls&&r.imageUrls.length>0?e("v-uni-view",{staticClass:"image-container-wrapper",style:r.imageStyle,attrs:{"data-src":r.imageUrls[0],"data-original-image-urls":r.originalImageUrls||r.imageUrls},on:{click:function(r){r.stopPropagation(),r.preventDefault(),arguments[0]=r=n.$handleEvent(r),n.handlePreview.apply(void 0,arguments)}}},[1===r.imageUrls.length?[e("v-uni-image",{staticClass:"post-image",attrs:{src:r.imageUrls[0],mode:"aspectFill","lazy-load":!0,"data-src":r.imageUrls[0],"data-original-image-urls":r.originalImageUrls||r.imageUrls},on:{error:function(r){arguments[0]=r=n.$handleEvent(r),n.onImageError.apply(void 0,arguments)},click:function(r){r.stopPropagation(),r.preventDefault(),arguments[0]=r=n.$handleEvent(r),n.handlePreview.apply(void 0,arguments)}}})]:r.imageUrls.length>1?[e("v-uni-swiper",{staticClass:"image-swiper",attrs:{"indicator-dots":!0,circular:!0}},[n._l(r.imageUrls,(function(t,a){return[e("v-uni-swiper-item",[e("v-uni-image",{staticClass:"post-image",attrs:{src:t,mode:"aspectFill","lazy-load":!0,"data-src":t,"data-original-image-urls":r.originalImageUrls||r.imageUrls},on:{error:function(r){arguments[0]=r=n.$handleEvent(r),n.onImageError.apply(void 0,arguments)},click:function(r){r.stopPropagation(),r.preventDefault(),arguments[0]=r=n.$handleEvent(r),n.handlePreview.apply(void 0,arguments)}}})],1)]}))],2)]:n._e()],2):n._e(),r.content?e("v-uni-view",{staticClass:"post-content",staticStyle:{"white-space":"pre-wrap"}},[n._v(n._s(r.content))]):n._e(),r.tags&&r.tags.length>0?e("v-uni-view",{staticClass:"post-tags"},n._l(r.tags,(function(r,t){return e("v-uni-text",{key:t,staticClass:"post-tag",attrs:{"data-tag":r},on:{click:function(r){r.stopPropagation(),r.preventDefault(),arguments[0]=r=n.$handleEvent(r),n.onTagClick.apply(void 0,arguments)}}},[n._v("#"+n._s(r))])})),1):n._e()],1)],1),e("v-uni-view",{staticClass:"vote-section"},[e("v-uni-view",{staticClass:"actions-left"}),e("v-uni-view",{staticClass:"button-group"},[e("v-uni-view",{staticClass:"comment-count",attrs:{"data-postid":r._id},on:{click:function(r){r.stopPropagation(),r.preventDefault(),arguments[0]=r=n.$handleEvent(r),n.onCommentClick.apply(void 0,arguments)}}},[e("v-uni-text",{staticClass:"action-emoji"},[n._v("üí¨")]),e("v-uni-text",{staticClass:"action-text"},[n._v(n._s(r.commentCount||0))])],1),e("v-uni-view",{staticClass:"like-icon-container",attrs:{"data-postid":r._id,"data-index":t,"data-list-type":"discover"},on:{click:function(r){r.stopPropagation(),r.preventDefault(),arguments[0]=r=n.$handleEvent(r),n.onVote.apply(void 0,arguments)}}},[e("v-uni-image",{staticClass:"like-icon",attrs:{src:r.likeIcon||"/static/images/seed.png",mode:"aspectFit"},on:{error:function(r){arguments[0]=r=n.$handleEvent(r),n.onLikeIconError.apply(void 0,arguments)}}})],1),e("v-uni-view",{class:"vote-count "+(r.isVoted?"voted":"")},[e("v-uni-text",{staticClass:"action-text"},[n._v(n._s(r.votes||0))])],1)],1)],1)],1)}))],2):"discussion"===n.currentPage?e("v-uni-view",[0!==n.discussionPostList.length||n.discussionIsLoading?n._e():e("v-uni-view",{staticClass:"empty-state"},[e("v-uni-view",{staticClass:"empty-icon"},[n._v("üí¨")]),e("v-uni-view",{staticClass:"empty-text"},[n._v("ËÆ®ËÆ∫Âå∫ÊöÇÊó†ÂÜÖÂÆπ")]),e("v-uni-view",{staticClass:"empty-subtext"},[n._v("Âø´Êù•ÂèëËµ∑Á¨¨‰∏Ä‰∏™ËØùÈ¢òÂêßÔºÅ")])],1),n._l(n.discussionPostList,(function(r,t){return e("v-uni-view",{key:t,class:"post-item-wrapper "+(r.isOriginal?"original-post":"")},[e("v-uni-view",{staticClass:"author-info-outside"},[r.authorAvatar?e("v-uni-image",{staticClass:"author-avatar",attrs:{src:r.authorAvatar,mode:"aspectFill","data-postindex":t,"data-user-id":r._openid},on:{error:function(r){arguments[0]=r=n.$handleEvent(r),n.onAvatarError.apply(void 0,arguments)},load:function(r){arguments[0]=r=n.$handleEvent(r),n.onAvatarLoad.apply(void 0,arguments)},click:function(r){r.stopPropagation(),r.preventDefault(),arguments[0]=r=n.$handleEvent(r),n.navigateToUserProfile.apply(void 0,arguments)}}}):n._e(),e("v-uni-text",{staticClass:"author-name"},[n._v(n._s(r.authorName))])],1),e("v-uni-navigator",{staticClass:"post-content-navigator",attrs:{url:"/pages/post-detail/post-detail?id="+r._id,"hover-class":"navigator-hover"}},[e("v-uni-view",{staticClass:"post-item"},[e("v-uni-view",{staticClass:"post-title"},[n._v(n._s(r.title))]),r.isPoem&&r.author?e("v-uni-view",{staticClass:"poem-author"},[n._v(n._s(r.author))]):n._e(),r.imageUrls&&r.imageUrls.length>0?e("v-uni-view",{staticClass:"image-container-wrapper",style:r.imageStyle,attrs:{"data-src":r.imageUrls[0],"data-original-image-urls":r.originalImageUrls||r.imageUrls},on:{click:function(r){r.stopPropagation(),r.preventDefault(),arguments[0]=r=n.$handleEvent(r),n.handlePreview.apply(void 0,arguments)}}},[1===r.imageUrls.length?[e("v-uni-image",{staticClass:"post-image",attrs:{src:r.imageUrls[0],mode:"aspectFill","lazy-load":!0,"data-src":r.imageUrls[0],"data-original-image-urls":r.originalImageUrls||r.imageUrls},on:{error:function(r){arguments[0]=r=n.$handleEvent(r),n.onImageError.apply(void 0,arguments)},click:function(r){r.stopPropagation(),r.preventDefault(),arguments[0]=r=n.$handleEvent(r),n.handlePreview.apply(void 0,arguments)}}})]:r.imageUrls.length>1?[e("v-uni-swiper",{staticClass:"image-swiper",attrs:{"indicator-dots":!0,circular:!0}},[n._l(r.imageUrls,(function(t,a){return[e("v-uni-swiper-item",[e("v-uni-image",{staticClass:"post-image",attrs:{src:t,mode:"aspectFill","lazy-load":!0,"data-src":t,"data-original-image-urls":r.originalImageUrls||r.imageUrls},on:{error:function(r){arguments[0]=r=n.$handleEvent(r),n.onImageError.apply(void 0,arguments)},click:function(r){r.stopPropagation(),r.preventDefault(),arguments[0]=r=n.$handleEvent(r),n.handlePreview.apply(void 0,arguments)}}})],1)]}))],2)]:n._e()],2):n._e(),r.content?e("v-uni-view",{staticClass:"post-content",staticStyle:{"white-space":"pre-wrap"}},[n._v(n._s(r.content))]):n._e(),r.tags&&r.tags.length>0?e("v-uni-view",{staticClass:"post-tags"},n._l(r.tags,(function(r,t){return e("v-uni-text",{key:t,staticClass:"post-tag",attrs:{"data-tag":r},on:{click:function(r){r.stopPropagation(),r.preventDefault(),arguments[0]=r=n.$handleEvent(r),n.onTagClick.apply(void 0,arguments)}}},[n._v("#"+n._s(r))])})),1):n._e()],1)],1),e("v-uni-view",{staticClass:"vote-section"},[e("v-uni-view",{staticClass:"actions-left"}),e("v-uni-view",{staticClass:"button-group"},[e("v-uni-view",{staticClass:"comment-count",attrs:{"data-postid":r._id},on:{click:function(r){r.stopPropagation(),r.preventDefault(),arguments[0]=r=n.$handleEvent(r),n.onCommentClick.apply(void 0,arguments)}}},[e("v-uni-text",{staticClass:"action-emoji"},[n._v("üí¨")]),e("v-uni-text",{staticClass:"action-text"},[n._v(n._s(r.commentCount||0))])],1),e("v-uni-view",{staticClass:"like-icon-container",attrs:{"data-postid":r._id,"data-index":t,"data-list-type":"discussion"},on:{click:function(r){r.stopPropagation(),r.preventDefault(),arguments[0]=r=n.$handleEvent(r),n.onVote.apply(void 0,arguments)}}},[e("v-uni-image",{staticClass:"like-icon",attrs:{src:r.likeIcon||"/static/images/seed.png",mode:"aspectFit"},on:{error:function(r){arguments[0]=r=n.$handleEvent(r),n.onLikeIconError.apply(void 0,arguments)}}})],1),e("v-uni-view",{class:"vote-count "+(r.isVoted?"voted":"")},[e("v-uni-text",{staticClass:"action-text"},[n._v(n._s(r.votes||0))])],1)],1)],1)],1)}))],2):n._e()],1),e("v-uni-view",{staticClass:"loading-footer"},["home"===n.currentPage&&!n.hasMore&&n.postList.length>0?[e("v-uni-text",[n._v("--- ÊàëÊòØÊúâÂ∫ïÁ∫øÁöÑ ---")])]:"discover"===n.currentPage&&!n.discoverHasMore&&n.discoverPostList.length>0?[e("v-uni-view",{staticClass:"discover-end-tip"},[e("v-uni-text",{staticClass:"end-text"},[n._v("--- Ê≤°ÊúâÊõ¥Â§ö‰∫Ü ---")]),e("v-uni-view",{staticClass:"refresh-tip"},[e("v-uni-text",{staticClass:"refresh-text"},[n._v("‰∏ãÊãâÂà∑Êñ∞Ëé∑ÂèñÊñ∞ÁöÑÊé®Ëçê")])],1)],1)]:"discussion"===n.currentPage&&!n.discussionHasMore&&n.discussionPostList.length>0?[e("v-uni-text",[n._v("--- Ê≤°ÊúâÊõ¥Â§öËÆ®ËÆ∫‰∫Ü ---")])]:n._e()],2)],1)],1),e("app-tab-bar",{ref:"customTabBar"})],1)},i=[]},d1b0:function(n,r,e){var t=e("c86c");r=t(!1),r.push([n.i,".tab-bar[data-v-846b9078]{position:fixed;bottom:0;left:0;width:100%;height:%?120?%;display:flex;align-items:center;justify-content:space-around;z-index:1000;background:#fff}.tab-bar-item[data-v-846b9078]{display:flex;flex-direction:column;align-items:center;justify-content:center;flex:1;height:100%}.icon-wrap[data-v-846b9078]{width:%?88?%;height:%?88?%;border-radius:%?24?%;background:#f8f8f8;overflow:hidden;box-shadow:0 %?18?% %?32?% rgba(0,0,0,.16);transition:box-shadow .22s ease}.icon-wrap.pressed[data-v-846b9078]{box-shadow:0 %?6?% %?12?% rgba(0,0,0,.08)}.icon-inner[data-v-846b9078]{width:100%;height:100%;background:#fff;box-shadow:none;transition:box-shadow .22s ease,-webkit-transform .22s ease;transition:transform .22s ease,box-shadow .22s ease;transition:transform .22s ease,box-shadow .22s ease,-webkit-transform .22s ease}.icon-inner.active[data-v-846b9078]{box-shadow:inset 0 %?10?% %?20?% rgba(0,0,0,.22);-webkit-transform:translateY(%?3?%) scale(.97);transform:translateY(%?3?%) scale(.97)}.icon-img[data-v-846b9078]{width:100%;height:100%;display:block}.tab-bar-text[data-v-846b9078]{font-size:%?22?%;color:transparent;height:0;overflow:hidden}",""]),n.exports=r},e2e1:function(n,r,e){"use strict";e.d(r,"b",(function(){return t})),e.d(r,"c",(function(){return a})),e.d(r,"a",(function(){}));var t=function(){var n=this,r=n.$createElement,e=n._self._c||r;return e("v-uni-view",{staticClass:"page-tabs-container",style:{top:n.safeAreaTop+"px"}},[e("v-uni-view",{staticClass:"custom-top-bar"},[e("v-uni-view",{staticClass:"top-left",on:{click:function(r){arguments[0]=r=n.$handleEvent(r),n.navigateToAdd.apply(void 0,arguments)}}},[e("v-uni-image",{staticClass:"top-icon",attrs:{src:"/static/images/create_post.png",mode:"aspectFit"}})],1),e("v-uni-view",{staticClass:"top-right"},[e("v-uni-view",{staticClass:"top-item",on:{click:function(r){arguments[0]=r=n.$handleEvent(r),n.navigateToSearch.apply(void 0,arguments)}}},[e("v-uni-image",{staticClass:"top-icon",attrs:{src:"/static/images/search.png",mode:"aspectFit"}})],1),e("v-uni-view",{staticClass:"top-item",on:{click:function(r){arguments[0]=r=n.$handleEvent(r),n.navigateToMessages.apply(void 0,arguments)}}},[e("v-uni-image",{staticClass:"top-icon",attrs:{src:"/static/images/messages.png",mode:"aspectFit"}})],1)],1)],1),e("v-uni-view",{staticClass:"tabs-container"},[e("v-uni-view",{staticClass:"tabs-list"},n._l(n.tabs,(function(r,t){return e("v-uni-view",{key:t,class:["tab-item",{active:n.currentTab===r.value}],on:{click:function(e){arguments[0]=e=n.$handleEvent(e),n.switchTab(r.value)}}},[e("v-uni-text",{staticClass:"tab-text"},[n._v(n._s(r.label))]),n.currentTab===r.value?e("v-uni-view",{staticClass:"tab-indicator"}):n._e()],1)})),1)],1)],1)},a=[]},e7ad:function(n,r,e){"use strict";e.r(r);var t=e("e2e1"),a=e("0daf");for(var i in a)["default"].indexOf(i)<0&&function(n){e.d(r,n,(function(){return a[n]}))}(i);e("1879");var s=e("828b"),o=Object(s["a"])(a["default"],t["b"],t["c"],!1,null,"152cec0b",null,!1,t["a"],void 0);r["default"]=o.exports},f24c:function(n,r,e){var t=e("525e");t.__esModule&&(t=t.default),"string"===typeof t&&(t=[[n.i,t,""]]),t.locals&&(n.exports=t.locals);var a=e("967d").default;a("4dde1d6e",t,!0,{sourceMap:!1,shadowMode:!1})},f318:function(n,r,e){"use strict";var t=e("9d8f"),a=e.n(t);a.a}}]);