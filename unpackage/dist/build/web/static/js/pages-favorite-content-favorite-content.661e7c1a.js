(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-favorite-content-favorite-content"],{"07ea":function(n,r,t){"use strict";t.r(r);var e=t("8e1d"),a=t.n(e);for(var i in e)["default"].indexOf(i)<0&&function(n){t.d(r,n,(function(){return e[n]}))}(i);r["default"]=a.a},"1cbc":function(n,r,t){"use strict";t.d(r,"b",(function(){return e})),t.d(r,"c",(function(){return a})),t.d(r,"a",(function(){}));var e=function(){var n=this,r=n.$createElement,t=n._self._c||r;return t("v-uni-view",{staticClass:"container"},[n.isLoading&&0===n.favorites.length?t("v-uni-view",{staticClass:"loading-container"},[t("v-uni-view",{staticClass:"loading-text"},[n._v("加载中...")])],1):n.favorites.length>0?t("v-uni-view",{staticClass:"favorites-container"},n._l(n.favorites,(function(r,e){return t("v-uni-view",{key:e,class:"post-item-wrapper "+(r.isOriginal?"original-post":"")},[t("v-uni-view",{staticClass:"author-info-outside"},[r.postAuthorAvatar?t("v-uni-image",{staticClass:"author-avatar",attrs:{src:r.postAuthorAvatar,mode:"aspectFill","data-postindex":e,"data-user-id":r.postAuthorOpenid},on:{error:function(r){arguments[0]=r=n.$handleEvent(r),n.onAvatarError.apply(void 0,arguments)},load:function(r){arguments[0]=r=n.$handleEvent(r),n.onAvatarLoad.apply(void 0,arguments)},click:function(r){r.stopPropagation(),r.preventDefault(),arguments[0]=r=n.$handleEvent(r),n.navigateToUserProfile.apply(void 0,arguments)}}}):n._e(),t("v-uni-text",{staticClass:"author-name"},[n._v(n._s(r.postAuthorName))])],1),t("v-uni-navigator",{staticClass:"post-content-navigator",attrs:{url:"/pages/post-detail/post-detail?id="+r.postId,"hover-class":"navigator-hover"}},[t("v-uni-view",{staticClass:"post-item"},[t("v-uni-view",{staticClass:"post-title"},[n._v(n._s(r.postTitle))]),r.postIsPoem&&r.postAuthor?t("v-uni-view",{staticClass:"poem-author"},[n._v(n._s(r.postAuthor))]):n._e(),r.imageUrls&&r.imageUrls.length>0?t("v-uni-view",{staticClass:"image-container-wrapper",style:r.imageStyle,attrs:{"data-src":r.imageUrls[0],"data-original-image-urls":r.originalImageUrls||r.imageUrls},on:{click:function(r){r.stopPropagation(),r.preventDefault(),arguments[0]=r=n.$handleEvent(r),n.handlePreview.apply(void 0,arguments)}}},[1===r.imageUrls.length?[t("v-uni-image",{staticClass:"post-image",attrs:{id:"single-image-"+r.postId,src:r.imageUrls[0],mode:"aspectFill","lazy-load":!0,"data-postid":r.postId,"data-postindex":e,"data-imgindex":"0","data-type":"single"},on:{error:function(r){arguments[0]=r=n.$handleEvent(r),n.onImageError.apply(void 0,arguments)},load:function(r){arguments[0]=r=n.$handleEvent(r),n.onImageLoad.apply(void 0,arguments)}}})]:r.imageUrls.length>1?[t("v-uni-swiper",{staticClass:"image-swiper",style:"height: "+(n.swiperHeights[e]?n.swiperHeights[e]+"px":"220px")+";",attrs:{id:"swiper-"+r.postId,"indicator-dots":!0,circular:!0}},[n._l(r.imageUrls,(function(a,i){return[t("v-uni-swiper-item",[t("v-uni-image",{staticClass:"post-image",attrs:{src:a,mode:"aspectFill","lazy-load":!0,"data-src":a,"data-original-image-urls":r.originalImageUrls||r.imageUrls,"data-postid":r.postId,"data-postindex":e,"data-imgindex":i,"data-type":"multi"},on:{error:function(r){arguments[0]=r=n.$handleEvent(r),n.onImageError.apply(void 0,arguments)},load:function(r){arguments[0]=r=n.$handleEvent(r),n.onImageLoad.apply(void 0,arguments)},click:function(r){r.stopPropagation(),r.preventDefault(),arguments[0]=r=n.$handleEvent(r),n.handlePreview.apply(void 0,arguments)}}})],1)]}))],2)]:n._e()],2):n._e(),r.postContent?t("v-uni-view",{staticClass:"post-content",staticStyle:{"white-space":"pre-wrap"}},[n._v(n._s(r.postContent))]):n._e(),r.postTags&&r.postTags.length>0?t("v-uni-view",{staticClass:"post-tags"},n._l(r.postTags,(function(r,e){return t("v-uni-text",{key:e,staticClass:"post-tag",attrs:{"data-tag":r},on:{click:function(r){r.stopPropagation(),r.preventDefault(),arguments[0]=r=n.$handleEvent(r),n.onTagClick.apply(void 0,arguments)}}},[n._v("#"+n._s(r))])})),1):n._e()],1)],1),t("v-uni-view",{staticClass:"delete-section"},[t("v-uni-view",{staticClass:"time-left"},[t("v-uni-text",{staticClass:"favorite-time"},[n._v("收藏于 "+n._s(r.formattedCreateTime||"未知时间"))])],1),t("v-uni-view",{staticClass:"button-group"},[t("v-uni-button",{staticClass:"remove-favorite-btn",attrs:{size:"mini","data-favorite-id":r._id,"data-index":e},on:{click:function(r){r.stopPropagation(),r.preventDefault(),arguments[0]=r=n.$handleEvent(r),n.removeFavorite.apply(void 0,arguments)}}},[n._v("取消收藏")])],1)],1)],1)})),1):t("v-uni-view",{staticClass:"empty-container"},[t("v-uni-view",{staticClass:"empty-icon"},[n._v("📖")]),t("v-uni-view",{staticClass:"empty-text"},[n._v("收藏夹是空的")]),t("v-uni-view",{staticClass:"empty-subtext"},[n._v("去发现一些好诗收藏起来吧")]),t("v-uni-button",{staticStyle:{"margin-top":"20rpx",padding:"15rpx 30rpx",background:"#9ed7ee",color:"white","border-radius":"8rpx","font-size":"26rpx"},on:{click:function(r){arguments[0]=r=n.$handleEvent(r),n.manualLoad.apply(void 0,arguments)}}},[n._v("刷新")])],1),n.favorites.length>0&&n.isLoading?t("v-uni-view",{staticClass:"loading-more"},[t("v-uni-view",{staticClass:"loading-text"},[n._v("加载中...")])],1):n._e(),n.favorites.length>0&&!n.hasMore&&!n.isLoading?t("v-uni-view",{staticClass:"no-more"},[t("v-uni-text",[n._v("没有更多了")])],1):n._e()],1)},a=[]},"73da":function(n,r,t){"use strict";t.r(r);var e=t("1cbc"),a=t("07ea");for(var i in a)["default"].indexOf(i)<0&&function(n){t.d(r,n,(function(){return a[n]}))}(i);t("b32eb");var o=t("828b"),s=Object(o["a"])(a["default"],e["b"],e["c"],!1,null,"47d90ed4",null,!1,e["a"],void 0);r["default"]=s.exports},"81f6":function(n,r,t){var e=t("5014").default,a=t("d189").default,i=t("4cf1").default;t("8f71"),t("bf0f"),t("aa9c"),t("fd3c");var o=t("962f"),s=o.formatRelativeTime,l=["createTime","postCreateTime","publishTime","createdAt","updateTime"],d=function(n){return n?Array.isArray(n)?n.filter(Boolean):[n].filter(Boolean):[]},c=function(n){var r,t=i(l);try{for(t.s();!(r=t.n()).done;){var e=r.value;if(n[e])return{key:e,value:n[e]}}}catch(a){t.e(a)}finally{t.f()}return null},u=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=r.withTime,i=void 0===t||t,o=d(n.imageUrls);0===o.length&&o.push.apply(o,a(d(n.imageUrl)));var l=d(n.originalImageUrls);0===l.length&&l.push.apply(l,a(d(n.originalImageUrl))),0===l.length&&o.length>0&&l.push.apply(l,a(o));var u=e(e({},n),{},{imageUrls:o,originalImageUrls:l,authorName:n.authorName||"匿名用户",authorAvatar:"string"===typeof n.authorAvatar?n.authorAvatar:""});if(!u.imageStyle&&o.length>0&&(u.imageStyle="height: 0; padding-bottom: 75%;"),i)if(n.formattedCreateTime)u.formattedCreateTime=n.formattedCreateTime;else{var f=c(n);f&&(u.formattedCreateTime=s(f.value))}return u};n.exports={normalizePost:u,normalizePostList:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Array.isArray(n)?n.map((function(n){return u(n,r)})):[]}}},"8e1d":function(n,r,t){"use strict";t("6a54");var e=t("f5bd").default;Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,t("7a76"),t("c9b5"),t("bf0f"),t("18f7"),t("de6c"),t("fd3c"),t("c223"),t("8f71");var a=e(t("2634")),i=e(t("9b1b")),o=e(t("2fdc")),s=t("962f"),l=s.formatRelativeTime,d=t("edf3"),c=d.previewImage,u=t("38db"),f=u.cloudCall,p=t("9c8b"),g=t("d6e5"),v=t("81f6"),m=v.normalizePostList,h={mixins:[g,p],data:function(){return{folderId:"",folderName:"",favorites:[],pageSize:10,swiperHeights:{},imageClampHeights:{},imgindex:0,img:""}},onLoad:function(n){var r=n.folderId,t=n.folderName||"";if(r){var e=t;try{e=decodeURIComponent(t||"")}catch(a){console.log("CatchClause",a),console.log("CatchClause",a),e=t}this.setData({folderId:r,folderName:e,favorites:[]}),uni.setNavigationBarTitle({title:e||"收藏夹"}),this.initPagination(this.loadFavorites,{pageSize:this.pageSize})}else uni.showToast({title:"参数错误：收藏夹ID为空",icon:"none"})},onShow:function(){},methods:{callCloudFunction:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return f(n,r,Object.assign({pageTag:"favorite-content",context:this,requireAuth:!0},t))},loadFavorites:function(n){var r=this;return(0,o.default)((0,a.default)().mark((function t(){var e,o,s,l,d,c,u,f,p,g,v;return(0,a.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=n.page,o=n.isRefresh,r.folderId){t.next=6;break}throw s=new Error("参数错误：收藏夹ID为空"),s.__toastShown=!0,uni.showToast({title:"参数错误：收藏夹ID为空",icon:"none"}),s;case 6:return o&&r.setData({favorites:[],swiperHeights:{},imageClampHeights:{}}),l=e*r.pageSize,1e4,d=null,c=new Promise((function(n,r){d=setTimeout((function(){var n=new Error("加载超时，请重试");n.code="LOAD_TIMEOUT",n.__toastShown=!0,uni.showToast({title:"加载超时，请重试",icon:"none"}),r(n)}),1e4)})),t.prev=11,t.next=14,Promise.race([r.callCloudFunction("getMyProfileData",{action:"getFavoritesByFolder",folderId:r.folderId,skip:l,limit:r.pageSize}),c]);case 14:if(u=t.sent,d&&clearTimeout(d),console.log("云函数调用成功，返回结果:",u),u.result&&!0===u.result.success){t.next=23;break}throw f=u.result&&u.result.message||"加载失败",uni.showToast({title:f,icon:"none"}),p=new Error(f),p.__toastShown=!0,p;case 23:return g=m(u.result.favorites||[]).map((function(n,t){var e=(0,i.default)({},n);return!e.formattedCreateTime&&e.createTime&&(e.formattedCreateTime=r.formatTime(e.createTime)),e.postCreateTime&&!e.formattedPostCreateTime&&(e.formattedPostCreateTime=r.formatTime(e.postCreateTime)),e.favoriteTime&&!e.formattedFavoriteTime&&(e.formattedFavoriteTime=r.formatTime(e.favoriteTime)),!e.postTitle&&e.title&&(e.postTitle=e.title),!e.postContent&&e.content&&(e.postContent=e.content),!e.postImageUrls&&e.imageUrls&&(e.postImageUrls=e.imageUrls),!e.postOriginalImageUrls&&e.originalImageUrls&&(e.postOriginalImageUrls=e.originalImageUrls),!e.postAuthorAvatar&&e.authorAvatar&&(e.postAuthorAvatar=e.authorAvatar),!e.postAuthorName&&e.authorName&&(e.postAuthorName=e.authorName),!e.imageStyle&&e.imageUrls&&e.imageUrls.length>0&&(e.imageStyle="height: 0; padding-bottom: 75%;"),console.log("【收藏夹】帖子".concat(t,"图片数据:"),{postId:e._id,postTitle:e.title||e.postTitle,imageUrls:e.imageUrls,originalImageUrls:e.originalImageUrls,hasImageUrls:!!(e.imageUrls&&e.imageUrls.length>0)}),e})),v=0===e||o?g:r.favorites.concat(g),r.setData({favorites:v}),t.abrupt("return",{list:g,hasMore:g.length===r.pageSize});case 29:throw t.prev=29,t.t0=t["catch"](11),d&&clearTimeout(d),console.error("加载收藏数据失败:",t.t0),t.t0&&t.t0.__toastShown||uni.showToast({title:"网络错误",icon:"none"}),t.t0;case 35:return t.prev=35,d&&clearTimeout(d),t.finish(35);case 38:case"end":return t.stop()}}),t,null,[[11,29,35,38]])})))()},manualLoad:function(){this.folderId?this.refresh():uni.showToast({title:"收藏夹ID为空",icon:"none"})},onFavoriteTap:function(n){var r=n.currentTarget.dataset.postId;uni.navigateTo({url:"/pages/post-detail/post-detail?id=".concat(r)})},onFavoriteLongPress:function(n){var r=this,t=n.currentTarget.dataset.favoriteId,e=n.currentTarget.dataset.postTitle;uni.showActionSheet({itemList:["取消收藏"],success:function(n){0===n.tapIndex&&r.removeFavorite(t,e)}})},removeFavorite:function(n){var r=this,t=n.currentTarget.dataset.favoriteId,e=n.currentTarget.dataset.index,a=this.favorites[e],i=a?a.postTitle:"未知标题";uni.showModal({title:"确认取消收藏",content:'确定要取消收藏"'.concat(i,'"吗？'),success:function(n){n.confirm&&(uni.showLoading({title:"处理中..."}),r.callCloudFunction("getMyProfileData",{action:"removeFromFavorite",favoriteId:t}).then((function(n){if(uni.hideLoading(),n.result&&n.result.success){uni.showToast({title:"取消收藏成功"});var e=r.favorites.filter((function(n){return n._id!==t}));r.setData({favorites:e})}else uni.showToast({title:n.result.message||"操作失败",icon:"none"})})).catch((function(n){uni.hideLoading(),console.error("取消收藏失败:",n),uni.showToast({title:"网络错误",icon:"none"})})))}})},onImagePreview:function(n){return c(n,{fallbackToast:!1})},handlePreview:function(n){var r=c(n,{fallbackToast:!1});return r||uni.showToast({title:"图片加载失败",icon:"none"}),r},onImageError:function(n){console.error("【收藏夹】图片加载失败",n);var r=n.detail.src;console.error("【收藏夹】失败的图片URL:",r);var t=n.currentTarget.dataset,e=t.postindex,a=t.imgindex;if(void 0!==e&&void 0!==a){var i=this.favorites[e];console.error("【收藏夹】图片加载失败的上下文:",{postId:i?i._id:"unknown",postTitle:i?i.title:"unknown",imageIndex:a,imageUrl:r,allImageUrls:i?i.imageUrls:"unknown"})}console.error("【收藏夹】图片加载失败详情:",{error:n.detail,src:r,dataset:n.currentTarget.dataset})},formatTime:function(n){return l(n)},onAvatarError:function(n){console.error("头像加载失败:",n);var r=n.currentTarget.dataset.postindex;if(void 0!==r){var t=this.favorites;t[r]&&(t[r].postAuthorAvatar="/images/avatar.png",this.setData({favorites:t}))}},onAvatarLoad:function(n){},navigateToUserProfile:function(n){var r=n.currentTarget.dataset.userId;r&&uni.navigateTo({url:"/pages/user-profile/user-profile?userId=".concat(r)})},onTagClick:function(n){var r=n.currentTarget.dataset.tag;r&&uni.navigateTo({url:"/pages/search/search?keyword=".concat(encodeURIComponent(r))})}}};r.default=h},"97fe":function(n,r,t){var e=t("c86c");r=e(!1),r.push([n.i,'\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/* pages/favorite-content/favorite-content.wxss */.container[data-v-47d90ed4]{padding:%?20?%;background-color:#f7f8fa;min-height:100vh}.loading-container[data-v-47d90ed4]{display:flex;justify-content:center;align-items:center;height:%?400?%;background-color:#fff;border-radius:%?16?%;margin:%?30?%;box-shadow:0 %?4?% %?12?% rgba(0,0,0,.05)}.loading-text[data-v-47d90ed4]{color:#999;font-size:%?28?%}.favorites-container[data-v-47d90ed4]{margin:0 %?30?% %?30?% %?30?%}\r\n/* 新增：帖子项包装器样式 */.post-item-wrapper[data-v-47d90ed4]{background:#fff;border-radius:%?16?%;margin-bottom:%?20?%;padding:%?30?%;box-shadow:0 %?2?% %?12?% rgba(0,0,0,.06)}\r\n/* 原创帖子特殊样式 */.post-item-wrapper.original-post[data-v-47d90ed4]{border:%?3?% solid #ebc88d;box-shadow:0 %?4?% %?20?% rgba(235,200,141,.3),0 %?2?% %?12?% rgba(0,0,0,.06);position:relative}\r\n/* 原创帖子光影效果 */.post-item-wrapper.original-post[data-v-47d90ed4]::before{content:"";position:absolute;top:%?-2?%;left:%?-2?%;right:%?-2?%;bottom:%?-2?%;background:linear-gradient(45deg,#ebc88d,#f4d03f,#ebc88d);border-radius:%?18?%;z-index:-1;opacity:.6;-webkit-filter:blur(%?8?%);filter:blur(%?8?%)}\r\n/* 新增：内容导航器样式 */.post-content-navigator[data-v-47d90ed4]{display:block;background:transparent}\r\n/* 新增：导航器点击效果 */.navigator-hover[data-v-47d90ed4]{opacity:.8}\r\n/* 作者信息样式 */.author-info-outside[data-v-47d90ed4]{display:flex;align-items:center;margin-bottom:%?20?%}.author-avatar[data-v-47d90ed4]{width:%?60?%;height:%?60?%;border-radius:50%;margin-right:%?15?%;background-color:#f5f5f5}.author-name[data-v-47d90ed4]{font-size:%?28?%;color:#333;font-weight:500}.post-title[data-v-47d90ed4]{font-size:%?32?%;font-weight:700;color:#333;margin-bottom:%?10?%;line-height:1.4;word-break:break-word;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}\r\n/* 诗歌作者信息 */.poem-author[data-v-47d90ed4]{font-size:%?26?%;color:#666;font-style:italic;margin-bottom:%?10?%}.post-content[data-v-47d90ed4]{font-size:%?26?%;color:#666;line-height:1.5;margin-bottom:%?15?%;word-break:break-word;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;white-space:pre-wrap}\r\n/* 图片容器样式 - 与首页保持一致 */.image-container-wrapper[data-v-47d90ed4]{position:relative;width:100%;background-color:#f0f0f0; /* 占位时的背景色，很重要 */overflow:hidden;border-radius:8px; /* 可以加个圆角，让占位块更好看 */margin:%?20?% 0 /* 图片和下方内容的间距 */}\r\n/* 让图片或Swiper填充整个占位容器 */.image-container-wrapper .post-image[data-v-47d90ed4],\r\n.image-container-wrapper .image-swiper[data-v-47d90ed4]{position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover}.post-image[data-v-47d90ed4]{transition:-webkit-transform .3s ease;transition:transform .3s ease;transition:transform .3s ease,-webkit-transform .3s ease}.post-image[data-v-47d90ed4]:active{-webkit-transform:scale(1.05);transform:scale(1.05)}.image-swiper[data-v-47d90ed4]{width:100%;border-radius:%?12?%;overflow:hidden}\r\n/* 标签样式 - 与首页和详情页保持一致 */.post-tags[data-v-47d90ed4]{margin-top:%?30?%;margin-bottom:%?10?%;line-height:1.5}.post-tag[data-v-47d90ed4]{color:#24375f;font-size:%?26?%;margin-right:%?10?%;transition:all .2s ease;cursor:pointer}.post-tag[data-v-47d90ed4]:active{color:#1a2a4a;opacity:.8}\r\n/* 删除/操作按钮区域 */.delete-section[data-v-47d90ed4]{display:flex;justify-content:space-between;align-items:center;margin-top:%?20?%;padding-top:%?20?%;border-top:%?1?% solid #f0f0f0}.time-left[data-v-47d90ed4]{flex:1}.favorite-time[data-v-47d90ed4]{font-size:%?24?%;color:#999}.button-group[data-v-47d90ed4]{display:flex;gap:%?10?%}.remove-favorite-btn[data-v-47d90ed4]{background:#ff4757;color:#fff;border:none;border-radius:%?8?%;font-size:%?24?%;padding:%?8?% %?16?%}.remove-favorite-btn[data-v-47d90ed4]:active{background:#ff3742}\r\n/* 加载更多样式 */.loading-more[data-v-47d90ed4]{display:flex;justify-content:center;align-items:center;padding:%?30?%;color:#999;font-size:%?28?%}.no-more[data-v-47d90ed4]{display:flex;justify-content:center;align-items:center;padding:%?30?%;color:#999;font-size:%?28?%}\r\n/* 空状态样式 */.empty-container[data-v-47d90ed4]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:%?100?% %?30?%;text-align:center}.empty-icon[data-v-47d90ed4]{font-size:%?80?%;margin-bottom:%?20?%;opacity:.5}.empty-text[data-v-47d90ed4]{font-size:%?32?%;color:#666;margin-bottom:%?10?%}.empty-subtext[data-v-47d90ed4]{font-size:%?26?%;color:#999}',""]),n.exports=r},b32eb:function(n,r,t){"use strict";var e=t("cf54"),a=t.n(e);a.a},cf54:function(n,r,t){var e=t("97fe");e.__esModule&&(e=e.default),"string"===typeof e&&(e=[[n.i,e,""]]),e.locals&&(n.exports=e.locals);var a=t("967d").default;a("1d7250e4",e,!0,{sourceMap:!1,shadowMode:!1})},d6e5:function(n,r,t){var e=t("dd7e").default,a=t("46c5").default,i=t("bdbb").default,o=t("5014").default;t("dc8a"),t("bf0f"),t("2797"),t("7a76"),t("c9b5");var s={page:0,hasMore:!0,isLoading:!1,isLoadingMore:!1},l=Object.keys(s);function d(n){return n.__paginationState||(n.__paginationState=o({},s)),"object"!==i(n.pagination)||null===n.pagination?n.pagination=o({},s):n.pagination=o(o({},s),n.pagination),l.forEach((function(r){"undefined"===typeof n[r]&&(n[r]=s[r])})),n.__paginationState}function c(n,r){var t=d(n);Object.assign(t,r),function(n,r){if(r&&"object"===i(r)){var t={};if(l.forEach((function(e){Object.prototype.hasOwnProperty.call(r,e)&&(t[e]=r[e],n.pagination&&"object"===i(n.pagination)&&(n.pagination[e]=r[e]),n[e]=r[e])})),"function"===typeof n.setData){var e={};return Object.keys(t).forEach((function(n){e[n]=t[n],e["pagination.".concat(n)]=t[n]})),void n.setData(e)}Object.assign(n,t)}}(n,r)}function u(n,r,t){var e=t.pageSize,a=t.isRefresh,i=t.fallback;if(r&&"boolean"===typeof r.hasMore)return r.hasMore;var o=n.__paginationConfig||{};if("function"===typeof o.computeHasMore)try{var s=o.computeHasMore.call(n,r,{page:n.__paginationState.page,pageSize:e,isRefresh:a});if("boolean"===typeof s)return s}catch(l){console.warn("[pagination] computeHasMore 执行失败",l)}return r&&Array.isArray(r.list)?"number"===typeof e?r.list.length>=e:r.list.length>0:r&&Array.isArray(r.items)?"number"===typeof e?r.items.length>=e:r.items.length>0:"boolean"!==typeof i||i}function f(n){return p.apply(this,arguments)}function p(){return p=a(e().mark((function n(r){var t,a,i,o,s,l,f,p,g,v,m,h,w,b,y=arguments;return e().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t=y.length>1&&void 0!==y[1]?y[1]:{},a=t.isRefresh,i=t.extra,o=void 0===i?{}:i,s=t.fromPullDown,l=void 0!==s&&s,f=r.__paginationConfig,f&&"function"===typeof f.loader){n.next=5;break}return console.warn("[pagination] 尚未通过 initPagination 注册加载函数"),n.abrupt("return",null);case 5:if(d(r),p=r.__paginationState,a||!1!==p.hasMore){n.next=9;break}return n.abrupt("return",null);case 9:if(!p.isLoading&&!p.isLoadingMore){n.next=11;break}return n.abrupt("return",null);case 11:return g=a?0:p.page,v=0===g,c(r,{isLoading:v,isLoadingMore:!v}),m={page:g,pageSize:f.pageSize,isRefresh:a,isFirstPage:v,extra:o},n.prev=15,"function"===typeof f.beforeLoad&&f.beforeLoad.call(r,m),n.next=19,f.loader.call(r,m);case 19:h=n.sent,w=g+1,b=u(r,h,{pageSize:f.pageSize,isRefresh:a,fallback:!!a||p.hasMore}),c(r,{page:w,hasMore:b}),"function"===typeof f.afterLoad&&f.afterLoad.call(r,h,m),n.next=30;break;case 26:throw n.prev=26,n.t0=n["catch"](15),"function"===typeof f.onError?f.onError.call(r,n.t0,m):console.error("[pagination] 加载数据失败",n.t0),n.t0;case 30:if(n.prev=30,c(r,{isLoading:!1,isLoadingMore:!1}),a&&!1!==f.autoStopPullDown&&l&&"undefined"!==typeof uni&&"function"===typeof uni.stopPullDownRefresh)try{uni.stopPullDownRefresh()}catch(e){console.warn("[pagination] stopPullDownRefresh 调用失败",e)}return n.finish(30);case 34:return n.abrupt("return",h);case 35:case"end":return n.stop()}}),n,null,[[15,26,30,34]])}))),p.apply(this,arguments)}n.exports={data:function(){return o({pagination:o({},s)},s)},created:function(){d(this)},onReachBottom:function(){this.__paginationConfig&&this.loadNext().catch((function(){}))},onPullDownRefresh:function(){this.__paginationConfig&&this.refresh({fromPullDown:!0}).catch((function(){}))},methods:{initPagination:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("function"!==typeof n)throw new TypeError("[pagination] initPagination 需要传入函数类型的 loader");var t=r.pageSize,e=void 0===t?10:t,a=r.immediate,i=void 0===a||a,l=r.autoStopPullDown,d=void 0===l||l,u=r.computeHasMore,f=r.beforeLoad,p=r.afterLoad,g=r.onError;return this.__paginationConfig={loader:n,pageSize:e,immediate:i,autoStopPullDown:d,computeHasMore:u,beforeLoad:f,afterLoad:p,onError:g},c(this,o({},s)),i?this.refresh({fromPullDown:!1}):Promise.resolve()},refresh:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return d(this),c(this,{page:0,hasMore:!0}),f(this,o({isRefresh:!0},n))},loadNext:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f(this,o({isRefresh:!1},n))},getPaginationState:function(){return d(this),o({},this.__paginationState)}}}}}]);