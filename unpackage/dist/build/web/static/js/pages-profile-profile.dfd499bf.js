(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-profile-profile"],{"139b":function(n,r,t){t("795c"),t("64aa"),t("5c47"),t("a1c1"),t("c223"),t("f7a5");var e=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return String(n).padStart(r,"0")},a=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy-MM-dd HH:mm:ss",t=n instanceof Date?n:new Date(n);if(Number.isNaN(t.getTime()))return"";var a={yyyy:String(t.getFullYear()),MM:e(t.getMonth()+1),dd:e(t.getDate()),HH:e(t.getHours()),mm:e(t.getMinutes()),ss:e(t.getSeconds())};return r.replace(/yyyy|MM|dd|HH|mm|ss/g,(function(n){return a[n]}))};n.exports={formatTimeAgo:function(n){var r=new Date,t=new Date(n),e=r.getTime()-t.getTime(),a=Math.floor(e/1e3),i=Math.floor(a/60),o=Math.floor(i/60),s=Math.floor(o/24);if(s>=7){var l=t.getFullYear(),c=("0"+(t.getMonth()+1)).slice(-2),d=("0"+t.getDate()).slice(-2);return"".concat(l,"-").concat(c,"-").concat(d)}return s>=1?"".concat(s,"天前"):o>=1?"".concat(o,"小时前"):i>=1?"".concat(i,"分钟前"):"刚刚"},formatRelativeTime:function(n){var r=Date.now(),t=n instanceof Date?n.getTime():new Date(n).getTime();if(Number.isNaN(t))return"";var e=r-t,i=Math.floor(Math.abs(e)/1e3),o=e>=0?"前":"后";if(i<60)return"刚刚";var s=Math.floor(i/60);if(s<60)return"".concat(s,"分钟").concat(o);var l=Math.floor(s/60);if(l<24)return"".concat(l,"小时").concat(o);var c=Math.floor(l/24);return c<7?"".concat(c,"天").concat(o):a(t,"yyyy-MM-dd")},formatDate:a}},"57d4":function(n,r,t){"use strict";t.r(r);var e=t("8dac"),a=t("9e3b");for(var i in a)["default"].indexOf(i)<0&&function(n){t.d(r,n,(function(){return a[n]}))}(i);t("8909");var o=t("828b"),s=Object(o["a"])(a["default"],e["b"],e["c"],!1,null,"046ce243",null,!1,e["a"],void 0);r["default"]=s.exports},"73e1":function(n,r,t){"use strict";var e=t("29d8");n.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(e)},"795c":function(n,r,t){"use strict";var e=t("8bdb"),a=t("db04").start,i=t("73e1");e({target:"String",proto:!0,forced:i},{padStart:function(n){return a(this,n,arguments.length>1?arguments[1]:void 0)}})},8909:function(n,r,t){"use strict";var e=t("9b4b"),a=t.n(e);a.a},"8dac":function(n,r,t){"use strict";t.d(r,"b",(function(){return a})),t.d(r,"c",(function(){return i})),t.d(r,"a",(function(){return e}));var e={skeleton:t("8cb3").default},a=function(){var n=this,r=n.$createElement,t=n._self._c||r;return t("v-uni-view",[t("v-uni-view",{staticClass:"container"},[n.isLoading?t("v-uni-view",[t("skeleton")],1):n._e(),t("v-uni-scroll-view",{staticClass:"scroll-container",attrs:{"wx:else":!0,"scroll-y":!0,"lower-threshold":"100",enhanced:!0,"show-scrollbar":!1},on:{scrolltolower:function(r){arguments[0]=r=n.$handleEvent(r),n.onScrollToLower.apply(void 0,arguments)}}},[n.isSidebarOpen?t("v-uni-view",{staticClass:"sidebar-mask",on:{click:function(r){arguments[0]=r=n.$handleEvent(r),n.toggleSidebar.apply(void 0,arguments)}}}):n._e(),t("v-uni-view",{class:"sidebar "+(n.isSidebarOpen?"open":"")},[t("v-uni-view",{staticClass:"sidebar-header"},[t("v-uni-image",{staticClass:"sidebar-avatar",attrs:{src:n.userInfo.avatarUrl||"/static/images/avatar.png",mode:"aspectFill"},on:{error:function(r){arguments[0]=r=n.$handleEvent(r),n.onAvatarError.apply(void 0,arguments)}}}),t("v-uni-text",{staticClass:"sidebar-nickname"},[n._v(n._s(n.userInfo.nickName||"微信用户"))])],1),t("v-uni-view",{staticClass:"sidebar-menu"},[t("v-uni-view",{staticClass:"sidebar-item",on:{click:function(r){arguments[0]=r=n.$handleEvent(r),n.navigateToEditProfile.apply(void 0,arguments)}}},[t("v-uni-text",[n._v("修改资料")])],1),n.isAdmin?t("v-uni-view",{staticClass:"sidebar-item",on:{click:function(r){arguments[0]=r=n.$handleEvent(r),n.navigateToImageManager.apply(void 0,arguments)}}},[t("v-uni-text",[n._v("图片管理")])],1):n._e(),t("v-uni-view",{staticClass:"sidebar-item",on:{click:function(r){arguments[0]=r=n.$handleEvent(r),n.navigateToMessages.apply(void 0,arguments)}}},[t("v-uni-text",[n._v("消息通知")]),n.unreadCount>0?t("v-uni-view",{staticClass:"unread-badge"},[n._v(n._s(n.unreadCount))]):n._e()],1),t("v-uni-view",{staticClass:"sidebar-item",on:{click:function(r){arguments[0]=r=n.$handleEvent(r),n.navigateToMyLikes.apply(void 0,arguments)}}},[t("v-uni-text",[n._v("我的点赞")])],1),t("v-uni-view",{staticClass:"sidebar-item",on:{click:function(r){arguments[0]=r=n.$handleEvent(r),n.navigateToFollowing.apply(void 0,arguments)}}},[t("v-uni-text",[n._v("我关注的")])],1),t("v-uni-view",{staticClass:"sidebar-item",on:{click:function(r){arguments[0]=r=n.$handleEvent(r),n.navigateToFans.apply(void 0,arguments)}}},[t("v-uni-text",[n._v("我的粉丝")]),n.newFollowerCount>0?t("v-uni-view",{staticClass:"unread-dot"}):n._e()],1),t("v-uni-view",{staticClass:"sidebar-item",on:{click:function(r){arguments[0]=r=n.$handleEvent(r),n.navigateToFavoriteFolders.apply(void 0,arguments)}}},[t("v-uni-text",[n._v("我的收藏夹")])],1),t("v-uni-view",{staticClass:"sidebar-item",on:{click:function(r){arguments[0]=r=n.$handleEvent(r),n.navigateToDraftBox.apply(void 0,arguments)}}},[t("v-uni-text",[n._v("草稿箱")])],1),t("v-uni-view",{staticClass:"sidebar-item",on:{click:function(r){arguments[0]=r=n.$handleEvent(r),n.navigateToFeedback.apply(void 0,arguments)}}},[t("v-uni-text",[n._v("意见反馈")])],1),n.isAdmin?t("v-uni-view",{staticClass:"sidebar-item",on:{click:function(r){arguments[0]=r=n.$handleEvent(r),n.navigateToFeedbackAdmin.apply(void 0,arguments)}}},[t("v-uni-text",[n._v("反馈管理")])],1):n._e(),t("v-uni-view",{staticClass:"sidebar-item logout-item",on:{click:function(r){arguments[0]=r=n.$handleEvent(r),n.showLogoutConfirm.apply(void 0,arguments)}}},[t("v-uni-text",[n._v("退出登录")])],1)],1)],1),t("v-uni-view",{staticClass:"main-content"},[t("v-uni-view",{staticClass:"profile-card profile-card-center"},[t("v-uni-image",{staticClass:"menu-btn-large",staticStyle:{"z-index":"101"},attrs:{src:"/static/images/icons/menu-icon.svg"},on:{click:function(r){arguments[0]=r=n.$handleEvent(r),n.toggleSidebar.apply(void 0,arguments)}}}),t("v-uni-view",{staticClass:"profile-avatar-large"},[t("v-uni-image",{attrs:{src:n.userInfo.avatarUrl||"/static/images/avatar.png",mode:"aspectFill"},on:{error:function(r){arguments[0]=r=n.$handleEvent(r),n.onAvatarError.apply(void 0,arguments)}}})],1),t("v-uni-view",{staticClass:"profile-info-center"},[t("v-uni-text",{staticClass:"profile-name-center"},[n._v(n._s(n.userInfo.nickName||"微信用户"))]),t("v-uni-text",{staticClass:"profile-bio-center"},[n._v(n._s(n.userInfo.bio||"这个用户很懒,什么都没留下..."))])],1)],1),n.isViewingSelf?t("v-uni-view",{staticClass:"profile-detail-card"},[t("v-uni-text",{staticClass:"detail-item-inline"},[n._v("生日:"+n._s(n.userInfo.birthday?n.userInfo.birthday:"未设置"))]),t("v-uni-text",{staticClass:"detail-item-inline"},[n._v("年龄:"+n._s(n.userInfo.age?n.userInfo.age+"岁":"未知"))])],1):n._e(),t("v-uni-view",{staticClass:"tab-navigation"},[t("v-uni-view",{class:"tab-item "+("posts"===n.currentTab?"active":""),attrs:{"data-tab":"posts"},on:{click:function(r){arguments[0]=r=n.$handleEvent(r),n.switchTab.apply(void 0,arguments)}}},[t("v-uni-text",[n._v("我发布的帖子")])],1),t("v-uni-view",{class:"tab-item "+("favorites"===n.currentTab?"active":""),attrs:{"data-tab":"favorites"},on:{click:function(r){arguments[0]=r=n.$handleEvent(r),n.switchTab.apply(void 0,arguments)}}},[t("v-uni-text",[n._v("收藏")])],1)],1),"posts"===n.currentTab?t("v-uni-view",{staticClass:"my-posts-section"},[n.myPosts.length>0?[n._l(n.myPosts,(function(r,e){return t("v-uni-view",{key:e,class:"post-item-wrapper "+(r.isOriginal?"original-post":"")},[t("v-uni-view",{staticClass:"author-info-outside"},[r.authorAvatar?t("v-uni-image",{staticClass:"author-avatar",attrs:{src:r.authorAvatar,mode:"aspectFill","data-postindex":e,"data-user-id":r._openid},on:{error:function(r){arguments[0]=r=n.$handleEvent(r),n.onAvatarError.apply(void 0,arguments)},load:function(r){arguments[0]=r=n.$handleEvent(r),n.onAvatarLoad.apply(void 0,arguments)},click:function(r){r.stopPropagation(),r.preventDefault(),arguments[0]=r=n.$handleEvent(r),n.navigateToUserProfile.apply(void 0,arguments)}}}):n._e(),t("v-uni-text",{staticClass:"author-name"},[n._v(n._s(r.authorName))])],1),t("v-uni-navigator",{staticClass:"post-content-navigator",attrs:{url:"/pages/post-detail/post-detail?id="+r._id,"hover-class":"navigator-hover"}},[t("v-uni-view",{staticClass:"post-item"},[t("v-uni-view",{staticClass:"post-title"},[n._v(n._s(r.title))]),r.isPoem&&r.author?t("v-uni-view",{staticClass:"poem-author"},[n._v(n._s(r.author))]):n._e(),r.imageUrls&&r.imageUrls.length>0?t("v-uni-view",{staticClass:"image-container-wrapper",style:r.imageStyle,attrs:{"data-src":r.imageUrls[0],"data-original-image-urls":r.originalImageUrls||r.imageUrls},on:{click:function(r){r.stopPropagation(),r.preventDefault(),arguments[0]=r=n.$handleEvent(r),n.handlePreview.apply(void 0,arguments)}}},[1===r.imageUrls.length?[t("v-uni-image",{staticClass:"post-image",attrs:{id:"single-image-"+r._id,src:r.imageUrls[0],mode:"aspectFill","lazy-load":!0,"data-postid":r._id,"data-postindex":e,"data-imgindex":"0","data-type":"single"},on:{error:function(r){arguments[0]=r=n.$handleEvent(r),n.onImageError.apply(void 0,arguments)},load:function(r){arguments[0]=r=n.$handleEvent(r),n.onImageLoad.apply(void 0,arguments)}}})]:r.imageUrls.length>1?[t("v-uni-swiper",{staticClass:"image-swiper",style:"height: "+(n.swiperHeights[e]?n.swiperHeights[e]+"px":"220px")+";",attrs:{id:"swiper-"+r._id,"indicator-dots":!0,circular:!0}},[n._l(r.imageUrls,(function(a,i){return[t("v-uni-swiper-item",[t("v-uni-image",{staticClass:"post-image",attrs:{src:a,mode:"aspectFill","lazy-load":!0,"data-src":a,"data-original-image-urls":r.originalImageUrls||r.imageUrls,"data-postid":r._id,"data-postindex":e,"data-imgindex":i,"data-type":"multi"},on:{error:function(r){arguments[0]=r=n.$handleEvent(r),n.onImageError.apply(void 0,arguments)},load:function(r){arguments[0]=r=n.$handleEvent(r),n.onImageLoad.apply(void 0,arguments)},click:function(r){r.stopPropagation(),r.preventDefault(),arguments[0]=r=n.$handleEvent(r),n.handlePreview.apply(void 0,arguments)}}})],1)]}))],2)]:n._e()],2):n._e(),r.content?t("v-uni-view",{staticClass:"post-content",staticStyle:{"white-space":"pre-wrap"}},[n._v(n._s(r.content))]):n._e(),r.tags&&r.tags.length>0?t("v-uni-view",{staticClass:"post-tags"},n._l(r.tags,(function(r,e){return t("v-uni-text",{key:e,staticClass:"post-tag",attrs:{"data-tag":r},on:{click:function(r){r.stopPropagation(),r.preventDefault(),arguments[0]=r=n.$handleEvent(r),n.onTagClick.apply(void 0,arguments)}}},[n._v("#"+n._s(r))])})),1):n._e()],1)],1),t("v-uni-view",{staticClass:"delete-section"},[t("v-uni-view",{staticClass:"time-left"},[t("v-uni-text",{staticClass:"post-time"},[n._v("发布于"+n._s(r.formattedCreateTime||"未知时间"))])],1),t("v-uni-view",{staticClass:"button-group"},[t("v-uni-button",{staticClass:"delete-btn",attrs:{size:"mini","data-postid":r._id,"data-index":e},on:{click:function(r){r.stopPropagation(),r.preventDefault(),arguments[0]=r=n.$handleEvent(r),n.onDelete.apply(void 0,arguments)}}},[n._v("删除")])],1)],1)],1)})),t("v-uni-view",{staticClass:"loading-footer"},[n.isLoadingMore?[t("v-uni-text",[n._v("正在加载...")])]:!n.hasMore&&n.myPosts.length>0?[t("v-uni-text",[n._v("--- 我是有底线的 ---")])]:n._e()],2),t("v-uni-view",{staticStyle:{height:"200rpx"}})]:t("v-uni-view",{staticClass:"empty-tip"},[t("v-uni-text",[n._v("你还没有发布过帖子哦～")])],1)],2):n._e(),"favorites"===n.currentTab?t("v-uni-view",{staticClass:"favorites-section"},[n.favoriteList.length>0?[n._l(n.favoriteList,(function(r,e){return t("v-uni-view",{key:e,class:"post-item-wrapper "+(r.isOriginal?"original-post":"")},[t("v-uni-view",{staticClass:"author-info-outside"},[r.authorAvatar?t("v-uni-image",{staticClass:"author-avatar",attrs:{src:r.authorAvatar,mode:"aspectFill","data-postindex":e,"data-user-id":r._openid},on:{error:function(r){arguments[0]=r=n.$handleEvent(r),n.onAvatarError.apply(void 0,arguments)},load:function(r){arguments[0]=r=n.$handleEvent(r),n.onAvatarLoad.apply(void 0,arguments)},click:function(r){r.stopPropagation(),r.preventDefault(),arguments[0]=r=n.$handleEvent(r),n.navigateToUserProfile.apply(void 0,arguments)}}}):n._e(),t("v-uni-text",{staticClass:"author-name"},[n._v(n._s(r.authorName))])],1),t("v-uni-navigator",{staticClass:"post-content-navigator",attrs:{url:"/pages/post-detail/post-detail?id="+r._id,"hover-class":"navigator-hover"}},[t("v-uni-view",{staticClass:"post-item"},[t("v-uni-view",{staticClass:"post-title"},[n._v(n._s(r.title))]),r.isPoem&&r.author?t("v-uni-view",{staticClass:"poem-author"},[n._v(n._s(r.author))]):n._e(),r.imageUrls&&r.imageUrls.length>0?t("v-uni-view",{staticClass:"image-container-wrapper",style:r.imageStyle,attrs:{"data-src":r.imageUrls[0],"data-original-image-urls":r.originalImageUrls||r.imageUrls},on:{click:function(r){r.stopPropagation(),r.preventDefault(),arguments[0]=r=n.$handleEvent(r),n.handlePreview.apply(void 0,arguments)}}},[1===r.imageUrls.length?[t("v-uni-image",{staticClass:"post-image",attrs:{id:"single-image-"+r._id,src:r.imageUrls[0],mode:"aspectFill","lazy-load":!0,"data-postid":r._id,"data-postindex":e,"data-imgindex":"0","data-type":"single"},on:{error:function(r){arguments[0]=r=n.$handleEvent(r),n.onImageError.apply(void 0,arguments)},load:function(r){arguments[0]=r=n.$handleEvent(r),n.onImageLoad.apply(void 0,arguments)}}})]:r.imageUrls.length>1?[t("v-uni-swiper",{staticClass:"image-swiper",style:"height: "+(n.swiperHeights[e]?n.swiperHeights[e]+"px":"220px")+";",attrs:{id:"swiper-"+r._id,"indicator-dots":!0,circular:!0}},[n._l(r.imageUrls,(function(a,i){return[t("v-uni-swiper-item",[t("v-uni-image",{staticClass:"post-image",attrs:{src:a,mode:"aspectFill","lazy-load":!0,"data-src":a,"data-original-image-urls":r.originalImageUrls||r.imageUrls,"data-postid":r._id,"data-postindex":e,"data-imgindex":i,"data-type":"multi"},on:{error:function(r){arguments[0]=r=n.$handleEvent(r),n.onImageError.apply(void 0,arguments)},load:function(r){arguments[0]=r=n.$handleEvent(r),n.onImageLoad.apply(void 0,arguments)},click:function(r){r.stopPropagation(),r.preventDefault(),arguments[0]=r=n.$handleEvent(r),n.handlePreview.apply(void 0,arguments)}}})],1)]}))],2)]:n._e()],2):n._e(),r.content?t("v-uni-view",{staticClass:"post-content",staticStyle:{"white-space":"pre-wrap"}},[n._v(n._s(r.content))]):n._e(),r.tags&&r.tags.length>0?t("v-uni-view",{staticClass:"post-tags"},n._l(r.tags,(function(r,e){return t("v-uni-text",{key:e,staticClass:"post-tag",attrs:{"data-tag":r},on:{click:function(r){r.stopPropagation(),r.preventDefault(),arguments[0]=r=n.$handleEvent(r),n.onTagClick.apply(void 0,arguments)}}},[n._v("#"+n._s(r))])})),1):n._e()],1)],1),t("v-uni-view",{staticClass:"delete-section"},[t("v-uni-view",{staticClass:"time-left"},[t("v-uni-text",{staticClass:"favorite-time"},[n._v("收藏于"+n._s(r.formattedFavoriteTime||"未知时间"))])],1),t("v-uni-view",{staticClass:"button-group"},[t("v-uni-button",{staticClass:"remove-favorite-btn",attrs:{size:"mini","data-favorite-id":r.favoriteId,"data-index":e},on:{click:function(r){r.stopPropagation(),r.preventDefault(),arguments[0]=r=n.$handleEvent(r),n.removeFavorite.apply(void 0,arguments)}}},[n._v("取消收藏")])],1)],1)],1)})),t("v-uni-view",{staticClass:"loading-footer"},[n.favoriteLoading?[t("v-uni-text",[n._v("正在加载...")])]:!n.favoriteHasMore&&n.favoriteList.length>0?[t("v-uni-text",[n._v("--- 我是有底线的 ---")])]:n._e()],2),t("v-uni-view",{staticStyle:{height:"200rpx"}})]:t("v-uni-view",{staticClass:"empty-tip"},[t("v-uni-text",[n._v("你还没有收藏过内容哦～")])],1)],2):n._e()],1)],1)],1)],1)},i=[]},"8e86":function(n,r,t){function e(n){if(!n)return{current:"",urls:[]};if(n.currentTarget&&n.currentTarget.dataset){var r=n.currentTarget.dataset,t=r.src||r.current||r.url||Array.isArray(r.urls)&&r.urls[0]||"",e=r.originalImageUrls||r.urls||r.urlList,a=Array.isArray(e)?e.filter(Boolean):"string"===typeof e&&e?[e]:[];return{current:t,urls:a}}var i=n.current||n.src||Array.isArray(n.urls)&&n.urls[0]||Array.isArray(n.list)&&n.list[0]||"",o=Array.isArray(n.urls)?n.urls.filter(Boolean):Array.isArray(n.list)?n.list.filter(Boolean):[];return{current:i,urls:o}}function a(n){"undefined"!==typeof uni&&uni.showToast&&uni.showToast({title:n,icon:"none"})}t("8f71"),t("bf0f"),n.exports={previewImage:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=r.fallbackToast,i=void 0===t||t,o=e(n);if(!o.current&&0===o.urls.length)return i&&a("图片数据缺失"),!1;var s=o.urls.length?o.urls:[o.current],l=o.current||s[0];return l&&0!==s.length?uni.previewImage({current:l,urls:s}):(i&&a("图片不可预览"),!1)}}},"9b4b":function(n,r,t){var e=t("a9a9");e.__esModule&&(e=e.default),"string"===typeof e&&(e=[[n.i,e,""]]),e.locals&&(n.exports=e.locals);var a=t("967d").default;a("70514306",e,!0,{sourceMap:!1,shadowMode:!1})},"9e3b":function(n,r,t){"use strict";t.r(r);var e=t("d2e7"),a=t.n(e);for(var i in e)["default"].indexOf(i)<0&&function(n){t.d(r,n,(function(){return e[n]}))}(i);r["default"]=a.a},a9a9:function(n,r,t){var e=t("c86c");r=e(!1),r.push([n.i,'\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/* pages/profile/profile.wxss */.container[data-v-046ce243]{width:100%;height:100vh;background-color:#f7f8fa}.scroll-container[data-v-046ce243]{width:100%;height:100%}.sidebar-mask[data-v-046ce243]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.5);z-index:999}.sidebar[data-v-046ce243]{position:fixed;top:0;left:-70%; /* Start off-screen */width:70%;height:100%;background-color:#fff;box-shadow:2px 0 5px rgba(0,0,0,.1);transition:left .3s ease;z-index:1000;display:flex;flex-direction:column;overflow-y:auto}.sidebar.open[data-v-046ce243]{left:0 /* Slide in */}.sidebar-header[data-v-046ce243]{padding:%?40?% %?30?%;border-bottom:%?1?% solid #eee;display:flex;flex-direction:column;align-items:center;margin-top:%?80?%}.sidebar-avatar[data-v-046ce243]{width:%?120?%;height:%?120?%;border-radius:50%;margin-bottom:%?20?%}.sidebar-nickname[data-v-046ce243]{font-size:%?32?%;font-weight:700}.sidebar-menu[data-v-046ce243]{margin-top:%?40?%}.sidebar-item[data-v-046ce243]{padding:%?30?%;border-bottom:%?1?% solid #f0f0f0;font-size:%?32?%;color:#333;position:relative;display:flex;justify-content:space-between;align-items:center}.sidebar-item[data-v-046ce243]:active{background-color:#f5f5f5}\r\n/* 未读消息标记 */.unread-badge[data-v-046ce243]{background-color:#ff6b6b;color:#fff;font-size:%?20?%;padding:%?4?% %?10?%;border-radius:%?20?%;min-width:%?32?%;text-align:center;font-weight:700}\r\n/* 退出登录按钮特殊样式 */.logout-item[data-v-046ce243]{border-top:%?2?% solid #f0f0f0;margin-top:%?20?%;color:#ff6b6b!important;font-weight:500}.logout-item[data-v-046ce243]:active{background-color:#fff5f5!important}.main-content[data-v-046ce243]{width:100%;\r\n    /* height: 100vh; */background-color:#f7f8fa;\r\n    /* overflow-y: auto; */padding-bottom:%?100?% /* 为底部TabBar留出空间 */}.header[data-v-046ce243]{display:flex;align-items:center;padding:%?20?% %?30?%;background-color:#fff;border-bottom:%?1?% solid #eee;padding-top:calc(%?20?% + 0px)}.menu-btn[data-v-046ce243]{width:%?48?%;height:%?48?%;padding:%?10?%;transition:opacity .2s ease}.menu-btn[data-v-046ce243]:active{opacity:.7}.header-title[data-v-046ce243]{flex:1;text-align:center;font-size:%?34?%;font-weight:500;margin-right:%?68?% /* to balance the menu button */}\r\n/* Loading State */.loading-container[data-v-046ce243]{display:flex;justify-content:center;align-items:center;height:%?400?%;background-color:#fff;border-radius:%?16?%;margin:%?30?%;box-shadow:0 %?4?% %?12?% rgba(0,0,0,.05)}.loading-text[data-v-046ce243]{font-size:%?28?%;color:#999}\r\n/* User Profile Card */.profile-card[data-v-046ce243]{margin:%?30?%;padding:%?40?%;background-color:#fff;border-radius:%?16?%;box-shadow:0 %?4?% %?12?% rgba(0,0,0,.05);display:flex;align-items:flex-start;transition:box-shadow .2s ease}.profile-card[data-v-046ce243]:active{box-shadow:0 %?2?% %?8?% rgba(0,0,0,.1)}.profile-avatar[data-v-046ce243]{margin-right:%?30?%}.profile-avatar uni-image[data-v-046ce243]{width:%?120?%;height:%?120?%;border-radius:50%}.profile-info[data-v-046ce243]{flex:1;display:flex;flex-direction:column;min-width:0 /* 防止flex子元素溢出 */}.profile-name[data-v-046ce243]{font-size:%?36?%;font-weight:700;color:#333;margin-bottom:%?10?%;word-break:break-word;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.profile-bio[data-v-046ce243]{font-size:%?28?%;color:#999;margin-bottom:%?20?%;line-height:1.4;word-break:break-word;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;line-clamp:2;-webkit-box-orient:vertical}.profile-details[data-v-046ce243]{display:flex;flex-direction:column;gap:%?8?%}.detail-item[data-v-046ce243]{font-size:%?26?%;color:#666;word-break:break-word;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}\r\n/* Tab Navigation */.tab-navigation[data-v-046ce243]{margin:0 %?30?% %?20?% %?30?%;display:flex;background:#fff;border-radius:%?16?%;box-shadow:0 %?4?% %?12?% rgba(0,0,0,.05);overflow:hidden}.tab-item[data-v-046ce243]{flex:1;padding:%?30?% %?20?%;text-align:center;font-size:%?28?%;color:#666;background:#fff;transition:all .3s ease;position:relative}.tab-item.active[data-v-046ce243]{color:#9ed7ee;font-weight:500;background:#f8fffe}.tab-item.active[data-v-046ce243]::after{content:"";position:absolute;bottom:0;left:20%;right:20%;height:%?4?%;background:#9ed7ee;border-radius:%?2?%}.tab-item[data-v-046ce243]:active{background:#f5f5f5}\r\n/* My Posts Section */.my-posts-section[data-v-046ce243]{margin:0 %?30?% %?30?% %?30?%}\r\n/* Favorites Section */.favorites-section[data-v-046ce243]{margin:0 %?30?% %?30?% %?30?%}.section-title[data-v-046ce243]{font-size:%?32?%;font-weight:700;color:#333;margin-bottom:%?20?%;padding:0 %?10?%}\r\n/* 新增：帖子项包装器样式 */.post-item-wrapper[data-v-046ce243]{background:#fff;border-radius:%?16?%;margin-bottom:%?20?%;padding:%?30?%;box-shadow:0 %?2?% %?12?% rgba(0,0,0,.06)}\r\n/* 原创帖子特殊样式 */.post-item-wrapper.original-post[data-v-046ce243]{border:%?3?% solid #ebc88d;box-shadow:0 %?4?% %?20?% rgba(235,200,141,.3),0 %?2?% %?12?% rgba(0,0,0,.06);position:relative}\r\n/* 原创帖子光影效果 */.post-item-wrapper.original-post[data-v-046ce243]::before{content:"";position:absolute;top:%?-2?%;left:%?-2?%;right:%?-2?%;bottom:%?-2?%;background:linear-gradient(45deg,#ebc88d,#f4d03f,#ebc88d);border-radius:%?18?%;z-index:-1;opacity:.6;-webkit-filter:blur(%?8?%);filter:blur(%?8?%)}\r\n/* 新增：内容导航器样式 */.post-content-navigator[data-v-046ce243]{display:block;background:transparent}\r\n/* 新增：导航器点击效果 */.navigator-hover[data-v-046ce243]{background-color:rgba(0,0,0,.02)}\r\n/* 外部作者信息样式 */.author-info-outside[data-v-046ce243]{display:flex;align-items:center;padding:%?20?% %?30?% %?10?% %?30?%;background:#fff;border-radius:%?16?% %?16?% 0 0;box-shadow:0 %?4?% %?12?% rgba(0,0,0,.05)}.author-info-outside .author-avatar[data-v-046ce243]{width:%?60?%;height:%?60?%;border-radius:50%;margin-right:%?15?%;background-color:#f5f5f5;cursor:pointer}.author-info-outside .author-name[data-v-046ce243]{font-size:%?28?%;color:#333;font-weight:500}.post-item[data-v-046ce243]{width:100%;background:#fff;border-radius:0 0 %?16?% %?16?%;box-shadow:0 %?4?% %?12?% rgba(0,0,0,.05);box-sizing:border-box;padding:%?20?% %?30?% %?30?% %?30?%}.post-title[data-v-046ce243]{font-size:%?36?%;font-weight:700;color:#333;margin-bottom:%?15?%;line-height:1.4;word-break:break-word;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;line-clamp:2;-webkit-box-orient:vertical}\r\n/* 诗歌作者样式 */.poem-author[data-v-046ce243]{font-size:%?32?%;color:#000;text-align:center;margin:%?5?% 0 %?15?% 0;letter-spacing:%?2?%}\r\n/* 新增：图片容器占位样式 */.image-container-wrapper[data-v-046ce243]{position:relative;width:100%;background-color:#f0f0f0; /* 占位时的背景色，很重要 */overflow:hidden;border-radius:8px; /* 可以加个圆角，让占位块更好看 */margin:%?20?% 0 /* 图片和下方内容的间距 */}\r\n/* 新增：让图片或swiper填充整个占位容器 */.image-container-wrapper .post-image[data-v-046ce243],\r\n.image-container-wrapper .image-swiper[data-v-046ce243]{position:absolute;top:0;left:0;width:100%;height:100%}\r\n/* 多张图片的swiper样式 */.image-swiper[data-v-046ce243]{width:100%;background-color:#fff\r\n    /* 高度由 style 绑定动态设置 */}.swiper-item[data-v-046ce243]{width:100%;height:100%;display:flex;align-items:center;justify-content:center}.post-image[data-v-046ce243]{width:100%;height:100%;display:block;object-fit:contain}.post-image[data-v-046ce243]:active{-webkit-transform:scale(1.05);transform:scale(1.05)}.post-content[data-v-046ce243]{font-size:%?28?%;color:#666;line-height:1.6;margin-top:%?15?%;word-break:break-word;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:3;line-clamp:3;-webkit-box-orient:vertical}\r\n/* 删除按钮区域样式 */.delete-section[data-v-046ce243]{display:flex;justify-content:space-between;align-items:center;margin-top:%?20?%;padding-top:%?20?%;border-top:%?1?% solid #f0f0f0}\r\n/* 左侧时间区域，保持原有样式 */.button-group[data-v-046ce243]{display:flex;align-items:center}.favorite-time[data-v-046ce243],\r\n.post-time[data-v-046ce243]{font-size:%?24?%;color:#999}\r\n/* 标签样式 */.post-tags[data-v-046ce243]{margin-top:%?30?%;margin-bottom:%?10?%;line-height:1.5}.post-tag[data-v-046ce243]{color:#24375f;font-size:%?26?%;margin-right:%?10?%;transition:all .2s ease;cursor:pointer}.post-tag[data-v-046ce243]:active{color:#1a2a4a;opacity:.8}.delete-btn[data-v-046ce243]{background-color:#ff4757;color:#fff;border:none;border-radius:%?8?%;font-size:%?24?%;padding:%?8?% %?16?%;line-height:1.2;min-width:%?80?%;transition:background-color .2s ease}.delete-btn[data-v-046ce243]:active{background-color:#e63946}.delete-btn[data-v-046ce243]::after{border:none}.remove-favorite-btn[data-v-046ce243]{background-color:#f39c12;color:#fff;border:none;border-radius:%?8?%;font-size:%?24?%;padding:%?8?% %?16?%;line-height:1.2;min-width:%?100?%;transition:background-color .2s ease}.remove-favorite-btn[data-v-046ce243]:active{background-color:#e67e22}.remove-favorite-btn[data-v-046ce243]::after{border:none}.empty-tip[data-v-046ce243]{text-align:center;color:#bbb;font-size:%?28?%;margin:%?40?% 0;padding:%?60?% 0;background-color:#fff;border-radius:%?16?%;box-shadow:0 %?4?% %?12?% rgba(0,0,0,.05)}.author-info[data-v-046ce243]{display:flex;align-items:center\r\n    /* margin-bottom: 15rpx;  // 移除多余的间距 */}.author-avatar[data-v-046ce243]{width:%?60?%;height:%?60?%;border-radius:50%;margin-right:%?15?%;background-color:#f5f5f5}.author-name[data-v-046ce243]{font-size:%?28?%;color:#333;font-weight:500}.profile-card-center[data-v-046ce243]{position:relative;margin:%?30?%;padding:%?60?% %?40?% %?40?% %?40?%;background-color:#fff;border-radius:%?16?%;box-shadow:0 %?4?% %?12?% rgba(0,0,0,.05);display:flex;flex-direction:column;align-items:center;overflow:visible}.menu-btn-large[data-v-046ce243]{position:absolute;top:%?24?%;left:%?24?%;width:%?56?%;height:%?56?%;z-index:100;background:none;-webkit-filter:grayscale(1) brightness(.5);filter:grayscale(1) brightness(.5);opacity:.7}.back-btn[data-v-046ce243]{position:absolute;top:%?24?%;left:%?24?%;width:%?56?%;height:%?56?%;z-index:100;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,.1);border-radius:50%;font-size:%?36?%;color:#333;transition:background-color .2s ease}.back-btn[data-v-046ce243]:active{background:rgba(0,0,0,.2)}.profile-avatar-large uni-image[data-v-046ce243]{width:%?150?%;height:%?150?%;border-radius:50%;display:block;margin:0 auto}.profile-info-center[data-v-046ce243]{display:flex;flex-direction:column;align-items:center;margin-top:%?20?%}.profile-name-center[data-v-046ce243]{font-size:%?40?%;font-weight:700;color:#333;margin-bottom:%?10?%;text-align:center}.profile-bio-center[data-v-046ce243]{font-size:%?28?%;color:#999;text-align:center;margin-bottom:0}.profile-detail-card[data-v-046ce243]{margin:0 %?30?% %?30?% %?30?%;padding:%?30?% %?40?%;background-color:#fff;border-radius:%?16?%;box-shadow:0 %?4?% %?12?% rgba(0,0,0,.05);display:flex;flex-direction:row;align-items:center;justify-content:center;gap:%?40?%}.detail-item-inline[data-v-046ce243]{font-size:%?28?%;color:#666;margin-right:%?20?%;white-space:nowrap}\r\n/* 底部加载状态样式 */.loading-footer[data-v-046ce243]{text-align:center;padding:%?20?% 0;color:#999;font-size:14px}.unread-dot[data-v-046ce243]{width:%?16?%;height:%?16?%;background-color:#ff6b6b;border-radius:50%;margin-left:%?12?%}',""]),n.exports=r},d2e7:function(n,r,t){"use strict";t("6a54");var e=t("f5bd").default;Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=e(t("39d8"));t("bf0f"),t("2797"),t("c223"),t("8f71"),t("fd3c"),t("bd06"),t("9db6");var i=t("5179"),o=(getApp(),t("139b")),s=o.formatRelativeTime,l=t("8e86"),c=l.previewImage,d=t("11ca"),u=d.cloudCall,g=t("2b90"),f={components:{},mixins:[g],data:function(){return{isLoading:!0,userInfo:{avatarUrl:"",nickName:"",bio:"",birthday:!1,age:!1},isSidebarOpen:!1,myPosts:[],page:0,hasMore:!0,PAGE_SIZE:5,swiperHeights:{},imageClampHeights:{},hasFirstShow_var:!1,unreadCount:0,currentTab:"posts",favoriteList:[],favoritePage:0,favoriteHasMore:!0,favoriteLoading:!1,currentUserOpenid:"",isAdmin:!1,swiperFixedHeight:"",selected:0,newFollowerCount:"",isLoadingMore:!1,isViewingSelf:!1,imgindex:0,img:""}},onLoad:function(n){var r=uni.getSystemInfoSync().windowWidth,t=Math.round(4*r/3);this.setData({swiperFixedHeight:t}),this.getProfileData()},onShow:function(){var n=t("d87a"),r=n.updateTabBarStatus;r(this,3),this._hasFirstShow?(console.log("【profile】onShow触发,开始刷新数据"),this.refreshProfileData()):(console.log("【profile】首次显示,标记已显示"),this.setData({hasFirstShow_var:!0}))},onPullDownRefresh:function(){console.log("【profile】下拉刷新触发，当前标签:",this.currentTab),"posts"===this.currentTab?(this.setData({myPosts:[],page:0,hasMore:!0,swiperHeights:{},imageClampHeights:{}}),this.loadMyPosts((function(){uni.stopPullDownRefresh(),console.log("【profile】下拉刷新结束")}))):"favorites"===this.currentTab&&(this.setData({favoriteList:[],favoritePage:0,favoriteHasMore:!0,swiperHeights:{},imageClampHeights:{}}),this.loadFavorites((function(){uni.stopPullDownRefresh(),console.log("【profile】收藏下拉刷新结束")})))},onReachBottom:function(){if(console.log("【profile】触底加载触发, currentTab:",this.currentTab),"posts"===this.currentTab){if(console.log("【profile】触底加载我的帖子, hasMore:",this.hasMore,"isLoading:",this.isLoading,"当前页:",this.page),!this.hasMore||this.isLoading)return;this.loadMyPosts()}else if("favorites"===this.currentTab){if(console.log("【profile】触底加载收藏, favoriteHasMore:",this.favoriteHasMore,"favoriteLoading:",this.favoriteLoading),!this.favoriteHasMore||this.favoriteLoading)return;this.loadFavorites()}},methods:{getProfileData:function(){this.checkLoginAndFetchData()},refreshProfileData:function(){console.log("【profile】开始刷新个人资料数据，当前标签:",this.currentTab);var n=uni.getStorageSync("shouldRefreshIndex");n&&(console.log("【profile】检测到首页需要刷新标记，清除缓存"),uni.removeStorageSync("shouldRefreshIndex")),this.userInfo&&this.userInfo._openid&&this.fetchUserProfileFast(),"posts"===this.currentTab?(this.setData({myPosts:[],page:0,hasMore:!0,swiperHeights:{},imageClampHeights:{}}),this.loadMyPosts((function(){console.log("【profile】onShow刷新帖子数据完成")}))):"favorites"===this.currentTab&&(this.setData({favoriteList:[],favoritePage:0,favoriteHasMore:!0,swiperHeights:{},imageClampHeights:{}}),this.loadFavorites((function(){console.log("【profile】onShow刷新收藏数据完成")}))),this.checkUnreadMessages()},forceRefresh:function(){console.log("强制刷新数据"),this.setData({userInfo:{},myPosts:[],isLoading:!0,swiperHeights:{},imageClampHeights:{}}),this.checkLoginAndFetchData()},checkLoginAndFetchData:function(){var n=this;if(!this._cacheEventsBound){this._cacheEventsBound=!0;try{uni.$on&&uni.$on("avatar-updated",(function(r){var t=getApp(),e=t&&t.globalData&&t.globalData.openid;r&&r.userId===e&&((0,i.invalidateMyInfo)(),(0,i.getMyInfo)(n).then((function(r){return n.setData({userInfo:r||{}})})).catch((function(){})))})),uni.$on&&uni.$on("post-created",(function(r){var t=getApp(),e=t&&t.globalData&&t.globalData.openid;r&&r.userId===e&&((0,i.invalidateMyPosts)(),n.setData({myPosts:[],page:0,hasMore:!0}),n.loadMyPosts())})),uni.$on&&uni.$on("favorite-changed",(function(r){var t=getApp(),e=t&&t.globalData&&t.globalData.openid;r&&r.userId===e&&((0,i.invalidateMyFavorites)(),"favorites"===n.currentTab&&(n.setData({favoriteList:[],favoritePage:0,favoriteHasMore:!0}),n.loadFavorites()))}))}catch(a){}}var r=getApp(),t=r.globalData&&r.globalData.userInfo,e=r.globalData&&r.globalData._loginProcessCompleted;console.log("🔍 [profile] 检查登录状态:",{hasUserInfo:!!t,hasOpenid:!(!t||!t._openid),loginProcessCompleted:e}),t&&t._openid?(this.fetchUserProfileFast(),this.loadMyPosts()):e?(this.setData({isLoading:!1}),console.log("⚠️ [profile] 登录流程已完成但无用户信息，用户未登录")):(console.log("⏳ [profile] 登录流程未完成，等待中..."),this.waitForLoginProcess())},waitForLoginProcess:function(){var n=this,r=setInterval((function(){var t=getApp(),e=t.globalData&&t.globalData._loginProcessCompleted;e&&(clearInterval(r),console.log("✅ [profile] 登录流程已完成，重新检查登录状态"),n.checkLoginAndFetchData())}),100);setTimeout((function(){clearInterval(r),console.log("⚠️ [profile] 等待登录流程超时，继续执行"),n.checkLoginAndFetchData()}),5e3)},fetchUserProfileFast:function(){var n=this;(0,i.getMyInfo)(this).then((function(r){r&&r.birthday?r.age=n.calculateAge(r.birthday):r&&(r.age=""),n.setData({userInfo:r||{},isLoading:!1})})).catch((function(r){console.error("获取用户资料失败（缓存封装）:",r),n.setData({isLoading:!1});var t=uni.getStorageSync("userInfo");t?(t.birthday&&(t.age=n.calculateAge(t.birthday)),n.setData({userInfo:t})):uni.showToast({title:"获取数据失败",icon:"none"})}))},loadMyPosts:function(n){var r=this,t=this.page,e=this.PAGE_SIZE;console.log("【profile】请求分页参数:",{page:t,PAGE_SIZE:e,skip:t*e,limit:e}),0===t&&this.setData({isLoading:!0});try{return(0,i.getMyPosts)({page:t,pageSize:e,context:this}).then((function(n){n.forEach((function(n){n.createTime&&(n.formattedCreateTime=r.formatTime(n.createTime)),n.imageUrls&&n.imageUrls.length>0&&(n.imageStyle="height: 0; padding-bottom: 75%;")}));var a=0===t?n:r.myPosts.concat(n);r.setData({myPosts:a,page:t+1,hasMore:n.length===e})})).catch((function(n){console.error("profile 获取帖子失败:",n),uni.showToast({title:"网络异常",icon:"none"})})).finally((function(){r.setData({isLoading:!1}),"function"===typeof n&&n()}))}catch(s){}var a=getApp(),o=a&&a.globalData&&a.globalData.openid;this.$tcb.callFunction({name:"getMyProfileData",data:{skip:t*e,limit:e,openid:o}}).then((function(n){if(n.result&&n.result.success){var a=n.result.posts||[];console.log("【profile】本次返回帖子数量:",a.length),a.forEach((function(n){n.createTime&&(n.formattedCreateTime=r.formatTime(n.createTime)),n.imageUrls&&n.imageUrls.length>0&&(n.imageStyle="height: 0; padding-bottom: 75%;")}));var i=0===t?a:r.myPosts.concat(a);console.log("【profile】更新后 myPosts 长度:",i.length,"hasMore:",a.length===e,"page:",t+1),r.setData({myPosts:i,page:t+1,hasMore:a.length===e})}})).catch((function(n){console.error("【profile】获取帖子失败:",n),uni.showToast({title:"网络错误",icon:"none"})})).finally((function(){r.setData({isLoading:!1}),"function"===typeof n&&n()}))},calculateAge:function(n){if(!n)return"";try{var r=new Date(n);if(isNaN(r.getTime()))return"";var t=new Date,e=t.getFullYear()-r.getFullYear(),a=t.getMonth()-r.getMonth();return(a<0||0===a&&t.getDate()<r.getDate())&&e--,e>0?e:""}catch(i){return console.log("CatchClause",i),console.log("CatchClause",i),console.error("计算年龄失败:",i),""}},formatTime:function(n){return s(n)},navigateToPostDetail:function(n){var r=n.currentTarget.dataset.id;uni.navigateTo({url:"/pages/post-detail/post-detail?id=".concat(r)})},onDelete:function(n){var r=n.currentTarget.dataset.postid,t=n.currentTarget.dataset.index,e=this;uni.showModal({title:"删除帖子",content:"您确定要删除这条帖子吗？",confirmText:"删除",cancelText:"保存草稿",confirmColor:"#ff4d4f",success:function(n){n.confirm?e.deletePost(r,t):e.saveToDraftBox(r,t)}})},deletePost:function(n,r){var t=this;uni.showLoading({title:"删除中..."}),this.$tcb.callFunction({name:"deletePost",data:{postId:n}}).then((function(r){if(uni.hideLoading(),r.result&&r.result.success){uni.showToast({title:"删除成功"});var e=t.myPosts.filter((function(r){return r._id!==n}));t.setData({myPosts:e});try{uni.setStorageSync("shouldRefreshIndex",!0)}catch(a){console.log("CatchClause",a),console.log("CatchClause",a)}}else uni.showToast({title:"删除失败",icon:"none"})})).catch((function(n){uni.hideLoading(),uni.showToast({title:"调用失败",icon:"none"})}))},saveToDraftBox:function(n,r){var t=this,e=this;uni.showLoading({title:"保存中..."}),this.$tcb.callFunction({name:"getPostDetail",data:{postId:n}}).then((function(n){if(n.result&&n.result.post){var r=n.result.post,e={title:r.title||"",content:r.content||"",imageList:r.imageUrls?r.imageUrls.map((function(n){return{previewUrl:n,compressedPath:n,originalPath:n,needCompression:!1}})):[],publishMode:r.isPoem?"poem":"normal",isOriginal:r.isOriginal||!1,selectedTags:r.tags||[],customTag:"",author:r.author||"",saveTime:new Date},a=getApp(),i=a&&a.globalData&&a.globalData.openid;return t.$tcb.callFunction({name:"getMyProfileData",data:{action:"saveDraft",draftData:e,openid:i}})}return uni.hideLoading(),uni.showToast({title:"获取帖子信息失败",icon:"none"}),Promise.reject("获取帖子信息失败")})).then((function(t){var a;(uni.hideLoading(),t.result&&t.result.success)?(uni.showToast({title:"已保存到草稿箱",icon:"success"}),e.deletePost(n,r)):uni.showToast({title:(null===(a=t.result)||void 0===a?void 0:a.message)||"保存草稿失败",icon:"none"})})).catch((function(n){uni.hideLoading(),console.error("保存草稿失败:",n),uni.showToast({title:"保存草稿失败",icon:"none"})}))},updatePostCommentCount:function(n,r){var t=this.myPosts.findIndex((function(r){return r._id===n}));t>-1&&this.setData((0,a.default)({},"myPosts[".concat(t,"].commentCount"),r))},handlePreview:function(n){return c(n)},stopPropagation:function(){},onAvatarError:function(n){console.error("头像加载失败:",n)},onImageError:function(n){console.error("图片加载失败:",n.detail);var r=n.detail.src;console.error("失败的图片URL:",r);var t=n.currentTarget.dataset,e=t.postindex,a=t.imgindex;if(void 0!==e&&void 0!==a){var i=this.myPosts[e];console.error("图片加载失败的上下文:",{postId:i?i._id:"unknown",postTitle:i?i.title:"unknown",imageIndex:a,imageUrl:r})}console.error("图片加载失败详情:",{error:n.detail,src:r,dataset:n.currentTarget.dataset})},testImageUrls:function(){console.log("=== 开始测试图片URL有效性 ==="),this.myPosts.forEach((function(n,r){console.log("帖子".concat(r+1," (").concat(n._id,"):")),console.log("  - 标题:",n.title),console.log("  - 作者头像:",n.authorAvatar),console.log("  - 图片URLs:",n.imageUrls),console.log("  - 原图URLs:",n.originalImageUrls),n.imageUrls&&n.imageUrls.length>0?n.imageUrls.forEach((function(n,r){console.log("  - 图片".concat(r+1,":"),n),n&&n.startsWith("http")?console.log("    ✅ 格式正确 (HTTP URL)"):n&&n.startsWith("cloud://")?console.log("    ⚠️ 格式为cloud:// (需要转换)"):n?console.log("    ? 未知格式: ".concat(n)):console.log("    ❌ URL为空")})):console.log("  - 无图片"),console.log("---")})),console.log("=== 图片URL测试完成 ===")},toggleSidebar:function(){this.setData({isSidebarOpen:!this.isSidebarOpen})},navigateToMyLikes:function(){uni.navigateTo({url:"/pages/my-likes/my-likes"})},navigateToFollowing:function(){uni.navigateTo({url:"/pages/following/following"})},navigateToFans:function(){uni.navigateTo({url:"/pages/fans/fans"})},navigateToEditProfile:function(){uni.navigateTo({url:"/pages/profile-edit/profile-edit"})},navigateToFavoriteFolders:function(){uni.navigateTo({url:"/pages/favorite-folders/favorite-folders"})},navigateToDraftBox:function(){uni.navigateTo({url:"/pages/draft-box/draft-box"})},navigateToMessages:function(){uni.navigateTo({url:"/pages/messages/messages"})},checkUnreadMessages:function(){var n=this;this.$tcb.callFunction({name:"getUnreadMessageCount"}).then((function(r){r.result&&r.result.success&&n.setData({unreadCount:r.result.count||0})})).catch((function(n){console.error("获取未读消息失败:",n)})),this.$tcb.callFunction({name:"follow",data:{action:"getNewFollowerCount"}}).then((function(r){r.result&&r.result.success&&n.setData({newFollowerCount:r.result.count||0})})).catch((function(n){console.error("获取新粉丝数量失败:",n)}))},switchTab:function(n){var r=n.currentTarget.dataset.tab;console.log("【profile】切换到标签:",r),r!==this.currentTab&&(this.setData({currentTab:r}),"favorites"===r&&0===this.favoriteList.length&&this.loadFavorites())},loadFavorites:function(n){var r=this,t=this.favoritePage,e=this.PAGE_SIZE;console.log("【profile】请求收藏分页参数:",{favoritePage:t,PAGE_SIZE:e,skip:t*e,limit:e}),this.setData({favoriteLoading:!0});try{return(0,i.getMyFavorites)({page:t,pageSize:e,context:this}).then((function(n){(n||[]).forEach((function(n){n.favoriteTime&&(n.formattedFavoriteTime=r.formatTime(n.favoriteTime)),n.imageUrls&&n.imageUrls.length>0&&(n.imageStyle="height: 0; padding-bottom: 75%;")}));var a=0===t?n:r.favoriteList.concat(n||[]);r.setData({favoriteList:a,favoritePage:t+1,favoriteHasMore:(n||[]).length===e})})).catch((function(n){console.error("profile 获取收藏失败:",n),uni.showToast({title:"网络异常",icon:"none"})})).finally((function(){r.setData({favoriteLoading:!1}),"function"===typeof n&&n()}))}catch(s){}var a=getApp(),o=a&&a.globalData&&a.globalData.openid;this.$tcb.callFunction({name:"getMyProfileData",data:{action:"getAllFavorites",skip:t*e,limit:e,openid:o}}).then((function(n){if(console.log("【profile】获取收藏返回:",n),n.result&&n.result.success){var a=n.result.favorites||[];console.log("【profile】本次返回收藏数量:",a.length),a.forEach((function(n){n.favoriteTime&&(n.formattedFavoriteTime=r.formatTime(n.favoriteTime)),n.imageUrls&&n.imageUrls.length>0&&(n.imageStyle="height: 0; padding-bottom: 75%;")}));var i=0===t?a:r.favoriteList.concat(a);console.log("【profile】更新后收藏列表长度:",i.length,"favoriteHasMore:",a.length===e,"favoritePage:",t+1),r.setData({favoriteList:i,favoritePage:t+1,favoriteHasMore:a.length===e})}else{var o;uni.showToast({title:(null===(o=n.result)||void 0===o?void 0:o.message)||"加载收藏失败",icon:"none"})}})).catch((function(n){console.error("【profile】获取收藏失败:",n),uni.showToast({title:"网络错误",icon:"none"})})).finally((function(){r.setData({favoriteLoading:!1}),"function"===typeof n&&n()}))},navigateToFavoriteDetail:function(n){var r=n.currentTarget.dataset.id;uni.navigateTo({url:"/pages/post-detail/post-detail?id=".concat(r)})},removeFavorite:function(n){var r=n.currentTarget.dataset.favoriteId,e=n.currentTarget.dataset.index,a=this;uni.showModal({title:"确认取消收藏",content:"确定要取消收藏这个内容吗？",success:function(i){if(i.confirm){uni.showLoading({title:"取消收藏中..."});var o=getApp(),s=o&&o.globalData&&o.globalData.openid;a.callCloudFunction("getMyProfileData",{action:"removeFromFavorite",favoriteId:r,openid:s}).then((function(r){if(uni.hideLoading(),r.result&&r.result.success){uni.showToast({title:"已取消收藏"});var i=a.favoriteList.filter((function(n,r){return r!==e}));a.setData({favoriteList:i});try{var o=getApp(),s=o&&o.globalData&&o.globalData.openid,l=a.favoriteList[e],c=l&&(l._id||l.postId),d=t("80fa"),u=d.emitFavoriteChanged;u({userId:s,postId:c,favored:!1})}catch(n){}}else uni.showToast({title:"取消收藏失败",icon:"none"})})).catch((function(n){uni.hideLoading(),uni.showToast({title:"操作失败",icon:"none"})}))}}})},navigateBack:function(){uni.navigateBack()},navigateToImageManager:function(){uni.navigateTo({url:"/pages/image-manager/image-manager"})},navigateToFeedback:function(){uni.navigateTo({url:"/pages/feedback/feedback"})},navigateToFeedbackAdmin:function(){uni.navigateTo({url:"/pages/feedback-admin/feedback-admin"})},showLogoutConfirm:function(){var n=this;this.isSidebarOpen&&(this.isSidebarOpen=!1),setTimeout((function(){uni.showModal({title:"退出登录",content:"确定要退出登录吗？",confirmText:"退出",cancelText:"取消",confirmColor:"#ff6b6b",success:function(r){r.confirm&&n.performLogout()}})}),100)},performLogout:function(){console.log("🔍 [退出登录] 开始执行退出登录流程");try{uni.removeStorageSync("userInfo"),uni.removeStorageSync("userOpenId");var n=getApp();n&&n.globalData&&(n.globalData.userInfo=null,n.globalData.openid=null,n.globalData._loginProcessCompleted=!1),this.setData({userInfo:null,myPosts:[],favoriteList:[],isLoading:!1,isSidebarOpen:!1}),console.log("✅ [退出登录] 本地数据清除完成"),this.reinitializeAnonymousOpenid(),uni.showToast({title:"已退出登录",icon:"success",duration:1500}),setTimeout((function(){uni.redirectTo({url:"/pages/login/login"})}),1500)}catch(r){console.error("❌ [退出登录] 退出登录失败:",r),uni.showToast({title:"退出失败，请重试",icon:"none"})}},reinitializeAnonymousOpenid:function(){console.log("🔄 [退出登录] 重新初始化匿名openid"),this.$tcb.callFunction({name:"login"}).then((function(n){console.log("✅ [退出登录] 匿名openid初始化成功:",n);var r=null;if(n.result&&n.result.openid?r=n.result.openid:n.openid?r=n.openid:n.result&&n.result.uid&&(r=n.result.uid),r){var t=getApp();t&&t.globalData&&(t.globalData.openid=r,console.log("✅ [退出登录] 匿名openid已设置:",r)),uni.setStorageSync("userOpenId",r)}else console.error("❌ [退出登录] 无法获取匿名openid")})).catch((function(n){console.error("❌ [退出登录] 匿名openid初始化失败:",n)}))},onScrollToLower:function(){var n=this;console.log("【profile】滚动到底部，当前标签:",this.currentTab),"posts"===this.currentTab?!this.hasMore||this.isLoadingMore||this.isLoading||(console.log("【profile】开始加载更多帖子"),this.setData({isLoadingMore:!0}),this.loadMyPosts((function(){n.setData({isLoadingMore:!1}),console.log("【profile】加载更多帖子完成")}))):"favorites"===this.currentTab&&this.favoriteHasMore&&!this.favoriteLoading&&(console.log("【profile】开始加载更多收藏"),this.loadFavorites((function(){console.log("【profile】加载更多收藏完成")})))},onAvatarLoad:function(){console.log("占位：函数 onAvatarLoad 未声明")},navigateToUserProfile:function(){console.log("占位：函数 navigateToUserProfile 未声明")},onTagClick:function(){console.log("占位：函数 onTagClick 未声明")},callCloudFunction:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return u(n,r,Object.assign({pageTag:"profile",context:this,requireAuth:!0},t))}}};r.default=f},db04:function(n,r,t){"use strict";var e=t("bb80"),a=t("c435"),i=t("9e70"),o=t("f298"),s=t("862c"),l=e(o),c=e("".slice),d=Math.ceil,u=function(n){return function(r,t,e){var o,u,g=i(s(r)),f=a(t),v=g.length,p=void 0===e?" ":i(e);return f<=v||""===p?g:(o=f-v,u=l(p,d(o/p.length)),u.length>o&&(u=c(u,0,o)),n?g+u:u+g)}};n.exports={start:u(!1),end:u(!0)}}}]);