(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-profile-profile"],{"139b":function(n,r,t){t("795c"),t("64aa"),t("5c47"),t("a1c1"),t("c223"),t("f7a5");var e=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return String(n).padStart(r,"0")},a=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy-MM-dd HH:mm:ss",t=n instanceof Date?n:new Date(n);if(Number.isNaN(t.getTime()))return"";var a={yyyy:String(t.getFullYear()),MM:e(t.getMonth()+1),dd:e(t.getDate()),HH:e(t.getHours()),mm:e(t.getMinutes()),ss:e(t.getSeconds())};return r.replace(/yyyy|MM|dd|HH|mm|ss/g,(function(n){return a[n]}))};n.exports={formatTimeAgo:function(n){var r=new Date,t=new Date(n),e=r.getTime()-t.getTime(),a=Math.floor(e/1e3),i=Math.floor(a/60),o=Math.floor(i/60),s=Math.floor(o/24);if(s>=7){var l=t.getFullYear(),c=("0"+(t.getMonth()+1)).slice(-2),d=("0"+t.getDate()).slice(-2);return"".concat(l,"-").concat(c,"-").concat(d)}return s>=1?"".concat(s,"å¤©å‰"):o>=1?"".concat(o,"å°æ—¶å‰"):i>=1?"".concat(i,"åˆ†é’Ÿå‰"):"åˆšåˆš"},formatRelativeTime:function(n){var r=Date.now(),t=n instanceof Date?n.getTime():new Date(n).getTime();if(Number.isNaN(t))return"";var e=r-t,i=Math.floor(Math.abs(e)/1e3),o=e>=0?"å‰":"å";if(i<60)return"åˆšåˆš";var s=Math.floor(i/60);if(s<60)return"".concat(s,"åˆ†é’Ÿ").concat(o);var l=Math.floor(s/60);if(l<24)return"".concat(l,"å°æ—¶").concat(o);var c=Math.floor(l/24);return c<7?"".concat(c,"å¤©").concat(o):a(t,"yyyy-MM-dd")},formatDate:a}},"57d4":function(n,r,t){"use strict";t.r(r);var e=t("8dac"),a=t("9e3b");for(var i in a)["default"].indexOf(i)<0&&function(n){t.d(r,n,(function(){return a[n]}))}(i);t("8909");var o=t("828b"),s=Object(o["a"])(a["default"],e["b"],e["c"],!1,null,"046ce243",null,!1,e["a"],void 0);r["default"]=s.exports},"73e1":function(n,r,t){"use strict";var e=t("29d8");n.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(e)},"795c":function(n,r,t){"use strict";var e=t("8bdb"),a=t("db04").start,i=t("73e1");e({target:"String",proto:!0,forced:i},{padStart:function(n){return a(this,n,arguments.length>1?arguments[1]:void 0)}})},8909:function(n,r,t){"use strict";var e=t("9b4b"),a=t.n(e);a.a},"8dac":function(n,r,t){"use strict";t.d(r,"b",(function(){return a})),t.d(r,"c",(function(){return i})),t.d(r,"a",(function(){return e}));var e={skeleton:t("8cb3").default},a=function(){var n=this,r=n.$createElement,t=n._self._c||r;return t("v-uni-view",[t("v-uni-view",{staticClass:"container"},[n.isLoading?t("v-uni-view",[t("skeleton")],1):n._e(),t("v-uni-scroll-view",{staticClass:"scroll-container",attrs:{"wx:else":!0,"scroll-y":!0,"lower-threshold":"100",enhanced:!0,"show-scrollbar":!1},on:{scrolltolower:function(r){arguments[0]=r=n.$handleEvent(r),n.onScrollToLower.apply(void 0,arguments)}}},[n.isSidebarOpen?t("v-uni-view",{staticClass:"sidebar-mask",on:{click:function(r){arguments[0]=r=n.$handleEvent(r),n.toggleSidebar.apply(void 0,arguments)}}}):n._e(),t("v-uni-view",{class:"sidebar "+(n.isSidebarOpen?"open":"")},[t("v-uni-view",{staticClass:"sidebar-header"},[t("v-uni-image",{staticClass:"sidebar-avatar",attrs:{src:n.userInfo.avatarUrl||"/static/images/avatar.png",mode:"aspectFill"},on:{error:function(r){arguments[0]=r=n.$handleEvent(r),n.onAvatarError.apply(void 0,arguments)}}}),t("v-uni-text",{staticClass:"sidebar-nickname"},[n._v(n._s(n.userInfo.nickName||"å¾®ä¿¡ç”¨æˆ·"))])],1),t("v-uni-view",{staticClass:"sidebar-menu"},[t("v-uni-view",{staticClass:"sidebar-item",on:{click:function(r){arguments[0]=r=n.$handleEvent(r),n.navigateToEditProfile.apply(void 0,arguments)}}},[t("v-uni-text",[n._v("ä¿®æ”¹èµ„æ–™")])],1),n.isAdmin?t("v-uni-view",{staticClass:"sidebar-item",on:{click:function(r){arguments[0]=r=n.$handleEvent(r),n.navigateToImageManager.apply(void 0,arguments)}}},[t("v-uni-text",[n._v("å›¾ç‰‡ç®¡ç†")])],1):n._e(),t("v-uni-view",{staticClass:"sidebar-item",on:{click:function(r){arguments[0]=r=n.$handleEvent(r),n.navigateToMessages.apply(void 0,arguments)}}},[t("v-uni-text",[n._v("æ¶ˆæ¯é€šçŸ¥")]),n.unreadCount>0?t("v-uni-view",{staticClass:"unread-badge"},[n._v(n._s(n.unreadCount))]):n._e()],1),t("v-uni-view",{staticClass:"sidebar-item",on:{click:function(r){arguments[0]=r=n.$handleEvent(r),n.navigateToMyLikes.apply(void 0,arguments)}}},[t("v-uni-text",[n._v("æˆ‘çš„ç‚¹èµ")])],1),t("v-uni-view",{staticClass:"sidebar-item",on:{click:function(r){arguments[0]=r=n.$handleEvent(r),n.navigateToFollowing.apply(void 0,arguments)}}},[t("v-uni-text",[n._v("æˆ‘å…³æ³¨çš„")])],1),t("v-uni-view",{staticClass:"sidebar-item",on:{click:function(r){arguments[0]=r=n.$handleEvent(r),n.navigateToFans.apply(void 0,arguments)}}},[t("v-uni-text",[n._v("æˆ‘çš„ç²‰ä¸")]),n.newFollowerCount>0?t("v-uni-view",{staticClass:"unread-dot"}):n._e()],1),t("v-uni-view",{staticClass:"sidebar-item",on:{click:function(r){arguments[0]=r=n.$handleEvent(r),n.navigateToFavoriteFolders.apply(void 0,arguments)}}},[t("v-uni-text",[n._v("æˆ‘çš„æ”¶è—å¤¹")])],1),t("v-uni-view",{staticClass:"sidebar-item",on:{click:function(r){arguments[0]=r=n.$handleEvent(r),n.navigateToDraftBox.apply(void 0,arguments)}}},[t("v-uni-text",[n._v("è‰ç¨¿ç®±")])],1),t("v-uni-view",{staticClass:"sidebar-item",on:{click:function(r){arguments[0]=r=n.$handleEvent(r),n.navigateToFeedback.apply(void 0,arguments)}}},[t("v-uni-text",[n._v("æ„è§åé¦ˆ")])],1),n.isAdmin?t("v-uni-view",{staticClass:"sidebar-item",on:{click:function(r){arguments[0]=r=n.$handleEvent(r),n.navigateToFeedbackAdmin.apply(void 0,arguments)}}},[t("v-uni-text",[n._v("åé¦ˆç®¡ç†")])],1):n._e(),t("v-uni-view",{staticClass:"sidebar-item logout-item",on:{click:function(r){arguments[0]=r=n.$handleEvent(r),n.showLogoutConfirm.apply(void 0,arguments)}}},[t("v-uni-text",[n._v("é€€å‡ºç™»å½•")])],1)],1)],1),t("v-uni-view",{staticClass:"main-content"},[t("v-uni-view",{staticClass:"profile-card profile-card-center"},[t("v-uni-image",{staticClass:"menu-btn-large",staticStyle:{"z-index":"101"},attrs:{src:"/static/images/icons/menu-icon.svg"},on:{click:function(r){arguments[0]=r=n.$handleEvent(r),n.toggleSidebar.apply(void 0,arguments)}}}),t("v-uni-view",{staticClass:"profile-avatar-large"},[t("v-uni-image",{attrs:{src:n.userInfo.avatarUrl||"/static/images/avatar.png",mode:"aspectFill"},on:{error:function(r){arguments[0]=r=n.$handleEvent(r),n.onAvatarError.apply(void 0,arguments)}}})],1),t("v-uni-view",{staticClass:"profile-info-center"},[t("v-uni-text",{staticClass:"profile-name-center"},[n._v(n._s(n.userInfo.nickName||"å¾®ä¿¡ç”¨æˆ·"))]),t("v-uni-text",{staticClass:"profile-bio-center"},[n._v(n._s(n.userInfo.bio||"è¿™ä¸ªç”¨æˆ·å¾ˆæ‡’,ä»€ä¹ˆéƒ½æ²¡ç•™ä¸‹..."))])],1)],1),n.isViewingSelf?t("v-uni-view",{staticClass:"profile-detail-card"},[t("v-uni-text",{staticClass:"detail-item-inline"},[n._v("ç”Ÿæ—¥:"+n._s(n.userInfo.birthday?n.userInfo.birthday:"æœªè®¾ç½®"))]),t("v-uni-text",{staticClass:"detail-item-inline"},[n._v("å¹´é¾„:"+n._s(n.userInfo.age?n.userInfo.age+"å²":"æœªçŸ¥"))])],1):n._e(),t("v-uni-view",{staticClass:"tab-navigation"},[t("v-uni-view",{class:"tab-item "+("posts"===n.currentTab?"active":""),attrs:{"data-tab":"posts"},on:{click:function(r){arguments[0]=r=n.$handleEvent(r),n.switchTab.apply(void 0,arguments)}}},[t("v-uni-text",[n._v("æˆ‘å‘å¸ƒçš„å¸–å­")])],1),t("v-uni-view",{class:"tab-item "+("favorites"===n.currentTab?"active":""),attrs:{"data-tab":"favorites"},on:{click:function(r){arguments[0]=r=n.$handleEvent(r),n.switchTab.apply(void 0,arguments)}}},[t("v-uni-text",[n._v("æ”¶è—")])],1)],1),"posts"===n.currentTab?t("v-uni-view",{staticClass:"my-posts-section"},[n.myPosts.length>0?[n._l(n.myPosts,(function(r,e){return t("v-uni-view",{key:e,class:"post-item-wrapper "+(r.isOriginal?"original-post":"")},[t("v-uni-view",{staticClass:"author-info-outside"},[r.authorAvatar?t("v-uni-image",{staticClass:"author-avatar",attrs:{src:r.authorAvatar,mode:"aspectFill","data-postindex":e,"data-user-id":r._openid},on:{error:function(r){arguments[0]=r=n.$handleEvent(r),n.onAvatarError.apply(void 0,arguments)},load:function(r){arguments[0]=r=n.$handleEvent(r),n.onAvatarLoad.apply(void 0,arguments)},click:function(r){r.stopPropagation(),r.preventDefault(),arguments[0]=r=n.$handleEvent(r),n.navigateToUserProfile.apply(void 0,arguments)}}}):n._e(),t("v-uni-text",{staticClass:"author-name"},[n._v(n._s(r.authorName))])],1),t("v-uni-navigator",{staticClass:"post-content-navigator",attrs:{url:"/pages/post-detail/post-detail?id="+r._id,"hover-class":"navigator-hover"}},[t("v-uni-view",{staticClass:"post-item"},[t("v-uni-view",{staticClass:"post-title"},[n._v(n._s(r.title))]),r.isPoem&&r.author?t("v-uni-view",{staticClass:"poem-author"},[n._v(n._s(r.author))]):n._e(),r.imageUrls&&r.imageUrls.length>0?t("v-uni-view",{staticClass:"image-container-wrapper",style:r.imageStyle,attrs:{"data-src":r.imageUrls[0],"data-original-image-urls":r.originalImageUrls||r.imageUrls},on:{click:function(r){r.stopPropagation(),r.preventDefault(),arguments[0]=r=n.$handleEvent(r),n.handlePreview.apply(void 0,arguments)}}},[1===r.imageUrls.length?[t("v-uni-image",{staticClass:"post-image",attrs:{id:"single-image-"+r._id,src:r.imageUrls[0],mode:"aspectFill","lazy-load":!0,"data-postid":r._id,"data-postindex":e,"data-imgindex":"0","data-type":"single"},on:{error:function(r){arguments[0]=r=n.$handleEvent(r),n.onImageError.apply(void 0,arguments)},load:function(r){arguments[0]=r=n.$handleEvent(r),n.onImageLoad.apply(void 0,arguments)}}})]:r.imageUrls.length>1?[t("v-uni-swiper",{staticClass:"image-swiper",style:"height: "+(n.swiperHeights[e]?n.swiperHeights[e]+"px":"220px")+";",attrs:{id:"swiper-"+r._id,"indicator-dots":!0,circular:!0}},[n._l(r.imageUrls,(function(a,i){return[t("v-uni-swiper-item",[t("v-uni-image",{staticClass:"post-image",attrs:{src:a,mode:"aspectFill","lazy-load":!0,"data-src":a,"data-original-image-urls":r.originalImageUrls||r.imageUrls,"data-postid":r._id,"data-postindex":e,"data-imgindex":i,"data-type":"multi"},on:{error:function(r){arguments[0]=r=n.$handleEvent(r),n.onImageError.apply(void 0,arguments)},load:function(r){arguments[0]=r=n.$handleEvent(r),n.onImageLoad.apply(void 0,arguments)},click:function(r){r.stopPropagation(),r.preventDefault(),arguments[0]=r=n.$handleEvent(r),n.handlePreview.apply(void 0,arguments)}}})],1)]}))],2)]:n._e()],2):n._e(),r.content?t("v-uni-view",{staticClass:"post-content",staticStyle:{"white-space":"pre-wrap"}},[n._v(n._s(r.content))]):n._e(),r.tags&&r.tags.length>0?t("v-uni-view",{staticClass:"post-tags"},n._l(r.tags,(function(r,e){return t("v-uni-text",{key:e,staticClass:"post-tag",attrs:{"data-tag":r},on:{click:function(r){r.stopPropagation(),r.preventDefault(),arguments[0]=r=n.$handleEvent(r),n.onTagClick.apply(void 0,arguments)}}},[n._v("#"+n._s(r))])})),1):n._e()],1)],1),t("v-uni-view",{staticClass:"delete-section"},[t("v-uni-view",{staticClass:"time-left"},[t("v-uni-text",{staticClass:"post-time"},[n._v("å‘å¸ƒäº"+n._s(r.formattedCreateTime||"æœªçŸ¥æ—¶é—´"))])],1),t("v-uni-view",{staticClass:"button-group"},[t("v-uni-button",{staticClass:"delete-btn",attrs:{size:"mini","data-postid":r._id,"data-index":e},on:{click:function(r){r.stopPropagation(),r.preventDefault(),arguments[0]=r=n.$handleEvent(r),n.onDelete.apply(void 0,arguments)}}},[n._v("åˆ é™¤")])],1)],1)],1)})),t("v-uni-view",{staticClass:"loading-footer"},[n.isLoadingMore?[t("v-uni-text",[n._v("æ­£åœ¨åŠ è½½...")])]:!n.hasMore&&n.myPosts.length>0?[t("v-uni-text",[n._v("--- æˆ‘æ˜¯æœ‰åº•çº¿çš„ ---")])]:n._e()],2),t("v-uni-view",{staticStyle:{height:"200rpx"}})]:t("v-uni-view",{staticClass:"empty-tip"},[t("v-uni-text",[n._v("ä½ è¿˜æ²¡æœ‰å‘å¸ƒè¿‡å¸–å­å“¦ï½")])],1)],2):n._e(),"favorites"===n.currentTab?t("v-uni-view",{staticClass:"favorites-section"},[n.favoriteList.length>0?[n._l(n.favoriteList,(function(r,e){return t("v-uni-view",{key:e,class:"post-item-wrapper "+(r.isOriginal?"original-post":"")},[t("v-uni-view",{staticClass:"author-info-outside"},[r.authorAvatar?t("v-uni-image",{staticClass:"author-avatar",attrs:{src:r.authorAvatar,mode:"aspectFill","data-postindex":e,"data-user-id":r._openid},on:{error:function(r){arguments[0]=r=n.$handleEvent(r),n.onAvatarError.apply(void 0,arguments)},load:function(r){arguments[0]=r=n.$handleEvent(r),n.onAvatarLoad.apply(void 0,arguments)},click:function(r){r.stopPropagation(),r.preventDefault(),arguments[0]=r=n.$handleEvent(r),n.navigateToUserProfile.apply(void 0,arguments)}}}):n._e(),t("v-uni-text",{staticClass:"author-name"},[n._v(n._s(r.authorName))])],1),t("v-uni-navigator",{staticClass:"post-content-navigator",attrs:{url:"/pages/post-detail/post-detail?id="+r._id,"hover-class":"navigator-hover"}},[t("v-uni-view",{staticClass:"post-item"},[t("v-uni-view",{staticClass:"post-title"},[n._v(n._s(r.title))]),r.isPoem&&r.author?t("v-uni-view",{staticClass:"poem-author"},[n._v(n._s(r.author))]):n._e(),r.imageUrls&&r.imageUrls.length>0?t("v-uni-view",{staticClass:"image-container-wrapper",style:r.imageStyle,attrs:{"data-src":r.imageUrls[0],"data-original-image-urls":r.originalImageUrls||r.imageUrls},on:{click:function(r){r.stopPropagation(),r.preventDefault(),arguments[0]=r=n.$handleEvent(r),n.handlePreview.apply(void 0,arguments)}}},[1===r.imageUrls.length?[t("v-uni-image",{staticClass:"post-image",attrs:{id:"single-image-"+r._id,src:r.imageUrls[0],mode:"aspectFill","lazy-load":!0,"data-postid":r._id,"data-postindex":e,"data-imgindex":"0","data-type":"single"},on:{error:function(r){arguments[0]=r=n.$handleEvent(r),n.onImageError.apply(void 0,arguments)},load:function(r){arguments[0]=r=n.$handleEvent(r),n.onImageLoad.apply(void 0,arguments)}}})]:r.imageUrls.length>1?[t("v-uni-swiper",{staticClass:"image-swiper",style:"height: "+(n.swiperHeights[e]?n.swiperHeights[e]+"px":"220px")+";",attrs:{id:"swiper-"+r._id,"indicator-dots":!0,circular:!0}},[n._l(r.imageUrls,(function(a,i){return[t("v-uni-swiper-item",[t("v-uni-image",{staticClass:"post-image",attrs:{src:a,mode:"aspectFill","lazy-load":!0,"data-src":a,"data-original-image-urls":r.originalImageUrls||r.imageUrls,"data-postid":r._id,"data-postindex":e,"data-imgindex":i,"data-type":"multi"},on:{error:function(r){arguments[0]=r=n.$handleEvent(r),n.onImageError.apply(void 0,arguments)},load:function(r){arguments[0]=r=n.$handleEvent(r),n.onImageLoad.apply(void 0,arguments)},click:function(r){r.stopPropagation(),r.preventDefault(),arguments[0]=r=n.$handleEvent(r),n.handlePreview.apply(void 0,arguments)}}})],1)]}))],2)]:n._e()],2):n._e(),r.content?t("v-uni-view",{staticClass:"post-content",staticStyle:{"white-space":"pre-wrap"}},[n._v(n._s(r.content))]):n._e(),r.tags&&r.tags.length>0?t("v-uni-view",{staticClass:"post-tags"},n._l(r.tags,(function(r,e){return t("v-uni-text",{key:e,staticClass:"post-tag",attrs:{"data-tag":r},on:{click:function(r){r.stopPropagation(),r.preventDefault(),arguments[0]=r=n.$handleEvent(r),n.onTagClick.apply(void 0,arguments)}}},[n._v("#"+n._s(r))])})),1):n._e()],1)],1),t("v-uni-view",{staticClass:"delete-section"},[t("v-uni-view",{staticClass:"time-left"},[t("v-uni-text",{staticClass:"favorite-time"},[n._v("æ”¶è—äº"+n._s(r.formattedFavoriteTime||"æœªçŸ¥æ—¶é—´"))])],1),t("v-uni-view",{staticClass:"button-group"},[t("v-uni-button",{staticClass:"remove-favorite-btn",attrs:{size:"mini","data-favorite-id":r.favoriteId,"data-index":e},on:{click:function(r){r.stopPropagation(),r.preventDefault(),arguments[0]=r=n.$handleEvent(r),n.removeFavorite.apply(void 0,arguments)}}},[n._v("å–æ¶ˆæ”¶è—")])],1)],1)],1)})),t("v-uni-view",{staticClass:"loading-footer"},[n.favoriteLoading?[t("v-uni-text",[n._v("æ­£åœ¨åŠ è½½...")])]:!n.favoriteHasMore&&n.favoriteList.length>0?[t("v-uni-text",[n._v("--- æˆ‘æ˜¯æœ‰åº•çº¿çš„ ---")])]:n._e()],2),t("v-uni-view",{staticStyle:{height:"200rpx"}})]:t("v-uni-view",{staticClass:"empty-tip"},[t("v-uni-text",[n._v("ä½ è¿˜æ²¡æœ‰æ”¶è—è¿‡å†…å®¹å“¦ï½")])],1)],2):n._e()],1)],1)],1)],1)},i=[]},"8e86":function(n,r,t){function e(n){if(!n)return{current:"",urls:[]};if(n.currentTarget&&n.currentTarget.dataset){var r=n.currentTarget.dataset,t=r.src||r.current||r.url||Array.isArray(r.urls)&&r.urls[0]||"",e=r.originalImageUrls||r.urls||r.urlList,a=Array.isArray(e)?e.filter(Boolean):"string"===typeof e&&e?[e]:[];return{current:t,urls:a}}var i=n.current||n.src||Array.isArray(n.urls)&&n.urls[0]||Array.isArray(n.list)&&n.list[0]||"",o=Array.isArray(n.urls)?n.urls.filter(Boolean):Array.isArray(n.list)?n.list.filter(Boolean):[];return{current:i,urls:o}}function a(n){"undefined"!==typeof uni&&uni.showToast&&uni.showToast({title:n,icon:"none"})}t("8f71"),t("bf0f"),n.exports={previewImage:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=r.fallbackToast,i=void 0===t||t,o=e(n);if(!o.current&&0===o.urls.length)return i&&a("å›¾ç‰‡æ•°æ®ç¼ºå¤±"),!1;var s=o.urls.length?o.urls:[o.current],l=o.current||s[0];return l&&0!==s.length?uni.previewImage({current:l,urls:s}):(i&&a("å›¾ç‰‡ä¸å¯é¢„è§ˆ"),!1)}}},"9b4b":function(n,r,t){var e=t("a9a9");e.__esModule&&(e=e.default),"string"===typeof e&&(e=[[n.i,e,""]]),e.locals&&(n.exports=e.locals);var a=t("967d").default;a("70514306",e,!0,{sourceMap:!1,shadowMode:!1})},"9e3b":function(n,r,t){"use strict";t.r(r);var e=t("d2e7"),a=t.n(e);for(var i in e)["default"].indexOf(i)<0&&function(n){t.d(r,n,(function(){return e[n]}))}(i);r["default"]=a.a},a9a9:function(n,r,t){var e=t("c86c");r=e(!1),r.push([n.i,'\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/* pages/profile/profile.wxss */.container[data-v-046ce243]{width:100%;height:100vh;background-color:#f7f8fa}.scroll-container[data-v-046ce243]{width:100%;height:100%}.sidebar-mask[data-v-046ce243]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.5);z-index:999}.sidebar[data-v-046ce243]{position:fixed;top:0;left:-70%; /* Start off-screen */width:70%;height:100%;background-color:#fff;box-shadow:2px 0 5px rgba(0,0,0,.1);transition:left .3s ease;z-index:1000;display:flex;flex-direction:column;overflow-y:auto}.sidebar.open[data-v-046ce243]{left:0 /* Slide in */}.sidebar-header[data-v-046ce243]{padding:%?40?% %?30?%;border-bottom:%?1?% solid #eee;display:flex;flex-direction:column;align-items:center;margin-top:%?80?%}.sidebar-avatar[data-v-046ce243]{width:%?120?%;height:%?120?%;border-radius:50%;margin-bottom:%?20?%}.sidebar-nickname[data-v-046ce243]{font-size:%?32?%;font-weight:700}.sidebar-menu[data-v-046ce243]{margin-top:%?40?%}.sidebar-item[data-v-046ce243]{padding:%?30?%;border-bottom:%?1?% solid #f0f0f0;font-size:%?32?%;color:#333;position:relative;display:flex;justify-content:space-between;align-items:center}.sidebar-item[data-v-046ce243]:active{background-color:#f5f5f5}\r\n/* æœªè¯»æ¶ˆæ¯æ ‡è®° */.unread-badge[data-v-046ce243]{background-color:#ff6b6b;color:#fff;font-size:%?20?%;padding:%?4?% %?10?%;border-radius:%?20?%;min-width:%?32?%;text-align:center;font-weight:700}\r\n/* é€€å‡ºç™»å½•æŒ‰é’®ç‰¹æ®Šæ ·å¼ */.logout-item[data-v-046ce243]{border-top:%?2?% solid #f0f0f0;margin-top:%?20?%;color:#ff6b6b!important;font-weight:500}.logout-item[data-v-046ce243]:active{background-color:#fff5f5!important}.main-content[data-v-046ce243]{width:100%;\r\n    /* height: 100vh; */background-color:#f7f8fa;\r\n    /* overflow-y: auto; */padding-bottom:%?100?% /* ä¸ºåº•éƒ¨TabBarç•™å‡ºç©ºé—´ */}.header[data-v-046ce243]{display:flex;align-items:center;padding:%?20?% %?30?%;background-color:#fff;border-bottom:%?1?% solid #eee;padding-top:calc(%?20?% + 0px)}.menu-btn[data-v-046ce243]{width:%?48?%;height:%?48?%;padding:%?10?%;transition:opacity .2s ease}.menu-btn[data-v-046ce243]:active{opacity:.7}.header-title[data-v-046ce243]{flex:1;text-align:center;font-size:%?34?%;font-weight:500;margin-right:%?68?% /* to balance the menu button */}\r\n/* Loading State */.loading-container[data-v-046ce243]{display:flex;justify-content:center;align-items:center;height:%?400?%;background-color:#fff;border-radius:%?16?%;margin:%?30?%;box-shadow:0 %?4?% %?12?% rgba(0,0,0,.05)}.loading-text[data-v-046ce243]{font-size:%?28?%;color:#999}\r\n/* User Profile Card */.profile-card[data-v-046ce243]{margin:%?30?%;padding:%?40?%;background-color:#fff;border-radius:%?16?%;box-shadow:0 %?4?% %?12?% rgba(0,0,0,.05);display:flex;align-items:flex-start;transition:box-shadow .2s ease}.profile-card[data-v-046ce243]:active{box-shadow:0 %?2?% %?8?% rgba(0,0,0,.1)}.profile-avatar[data-v-046ce243]{margin-right:%?30?%}.profile-avatar uni-image[data-v-046ce243]{width:%?120?%;height:%?120?%;border-radius:50%}.profile-info[data-v-046ce243]{flex:1;display:flex;flex-direction:column;min-width:0 /* é˜²æ­¢flexå­å…ƒç´ æº¢å‡º */}.profile-name[data-v-046ce243]{font-size:%?36?%;font-weight:700;color:#333;margin-bottom:%?10?%;word-break:break-word;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.profile-bio[data-v-046ce243]{font-size:%?28?%;color:#999;margin-bottom:%?20?%;line-height:1.4;word-break:break-word;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;line-clamp:2;-webkit-box-orient:vertical}.profile-details[data-v-046ce243]{display:flex;flex-direction:column;gap:%?8?%}.detail-item[data-v-046ce243]{font-size:%?26?%;color:#666;word-break:break-word;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}\r\n/* Tab Navigation */.tab-navigation[data-v-046ce243]{margin:0 %?30?% %?20?% %?30?%;display:flex;background:#fff;border-radius:%?16?%;box-shadow:0 %?4?% %?12?% rgba(0,0,0,.05);overflow:hidden}.tab-item[data-v-046ce243]{flex:1;padding:%?30?% %?20?%;text-align:center;font-size:%?28?%;color:#666;background:#fff;transition:all .3s ease;position:relative}.tab-item.active[data-v-046ce243]{color:#9ed7ee;font-weight:500;background:#f8fffe}.tab-item.active[data-v-046ce243]::after{content:"";position:absolute;bottom:0;left:20%;right:20%;height:%?4?%;background:#9ed7ee;border-radius:%?2?%}.tab-item[data-v-046ce243]:active{background:#f5f5f5}\r\n/* My Posts Section */.my-posts-section[data-v-046ce243]{margin:0 %?30?% %?30?% %?30?%}\r\n/* Favorites Section */.favorites-section[data-v-046ce243]{margin:0 %?30?% %?30?% %?30?%}.section-title[data-v-046ce243]{font-size:%?32?%;font-weight:700;color:#333;margin-bottom:%?20?%;padding:0 %?10?%}\r\n/* æ–°å¢ï¼šå¸–å­é¡¹åŒ…è£…å™¨æ ·å¼ */.post-item-wrapper[data-v-046ce243]{background:#fff;border-radius:%?16?%;margin-bottom:%?20?%;padding:%?30?%;box-shadow:0 %?2?% %?12?% rgba(0,0,0,.06)}\r\n/* åŸåˆ›å¸–å­ç‰¹æ®Šæ ·å¼ */.post-item-wrapper.original-post[data-v-046ce243]{border:%?3?% solid #ebc88d;box-shadow:0 %?4?% %?20?% rgba(235,200,141,.3),0 %?2?% %?12?% rgba(0,0,0,.06);position:relative}\r\n/* åŸåˆ›å¸–å­å…‰å½±æ•ˆæœ */.post-item-wrapper.original-post[data-v-046ce243]::before{content:"";position:absolute;top:%?-2?%;left:%?-2?%;right:%?-2?%;bottom:%?-2?%;background:linear-gradient(45deg,#ebc88d,#f4d03f,#ebc88d);border-radius:%?18?%;z-index:-1;opacity:.6;-webkit-filter:blur(%?8?%);filter:blur(%?8?%)}\r\n/* æ–°å¢ï¼šå†…å®¹å¯¼èˆªå™¨æ ·å¼ */.post-content-navigator[data-v-046ce243]{display:block;background:transparent}\r\n/* æ–°å¢ï¼šå¯¼èˆªå™¨ç‚¹å‡»æ•ˆæœ */.navigator-hover[data-v-046ce243]{background-color:rgba(0,0,0,.02)}\r\n/* å¤–éƒ¨ä½œè€…ä¿¡æ¯æ ·å¼ */.author-info-outside[data-v-046ce243]{display:flex;align-items:center;padding:%?20?% %?30?% %?10?% %?30?%;background:#fff;border-radius:%?16?% %?16?% 0 0;box-shadow:0 %?4?% %?12?% rgba(0,0,0,.05)}.author-info-outside .author-avatar[data-v-046ce243]{width:%?60?%;height:%?60?%;border-radius:50%;margin-right:%?15?%;background-color:#f5f5f5;cursor:pointer}.author-info-outside .author-name[data-v-046ce243]{font-size:%?28?%;color:#333;font-weight:500}.post-item[data-v-046ce243]{width:100%;background:#fff;border-radius:0 0 %?16?% %?16?%;box-shadow:0 %?4?% %?12?% rgba(0,0,0,.05);box-sizing:border-box;padding:%?20?% %?30?% %?30?% %?30?%}.post-title[data-v-046ce243]{font-size:%?36?%;font-weight:700;color:#333;margin-bottom:%?15?%;line-height:1.4;word-break:break-word;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;line-clamp:2;-webkit-box-orient:vertical}\r\n/* è¯—æ­Œä½œè€…æ ·å¼ */.poem-author[data-v-046ce243]{font-size:%?32?%;color:#000;text-align:center;margin:%?5?% 0 %?15?% 0;letter-spacing:%?2?%}\r\n/* æ–°å¢ï¼šå›¾ç‰‡å®¹å™¨å ä½æ ·å¼ */.image-container-wrapper[data-v-046ce243]{position:relative;width:100%;background-color:#f0f0f0; /* å ä½æ—¶çš„èƒŒæ™¯è‰²ï¼Œå¾ˆé‡è¦ */overflow:hidden;border-radius:8px; /* å¯ä»¥åŠ ä¸ªåœ†è§’ï¼Œè®©å ä½å—æ›´å¥½çœ‹ */margin:%?20?% 0 /* å›¾ç‰‡å’Œä¸‹æ–¹å†…å®¹çš„é—´è· */}\r\n/* æ–°å¢ï¼šè®©å›¾ç‰‡æˆ–swiperå¡«å……æ•´ä¸ªå ä½å®¹å™¨ */.image-container-wrapper .post-image[data-v-046ce243],\r\n.image-container-wrapper .image-swiper[data-v-046ce243]{position:absolute;top:0;left:0;width:100%;height:100%}\r\n/* å¤šå¼ å›¾ç‰‡çš„swiperæ ·å¼ */.image-swiper[data-v-046ce243]{width:100%;background-color:#fff\r\n    /* é«˜åº¦ç”± style ç»‘å®šåŠ¨æ€è®¾ç½® */}.swiper-item[data-v-046ce243]{width:100%;height:100%;display:flex;align-items:center;justify-content:center}.post-image[data-v-046ce243]{width:100%;height:100%;display:block;object-fit:contain}.post-image[data-v-046ce243]:active{-webkit-transform:scale(1.05);transform:scale(1.05)}.post-content[data-v-046ce243]{font-size:%?28?%;color:#666;line-height:1.6;margin-top:%?15?%;word-break:break-word;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:3;line-clamp:3;-webkit-box-orient:vertical}\r\n/* åˆ é™¤æŒ‰é’®åŒºåŸŸæ ·å¼ */.delete-section[data-v-046ce243]{display:flex;justify-content:space-between;align-items:center;margin-top:%?20?%;padding-top:%?20?%;border-top:%?1?% solid #f0f0f0}\r\n/* å·¦ä¾§æ—¶é—´åŒºåŸŸï¼Œä¿æŒåŸæœ‰æ ·å¼ */.button-group[data-v-046ce243]{display:flex;align-items:center}.favorite-time[data-v-046ce243],\r\n.post-time[data-v-046ce243]{font-size:%?24?%;color:#999}\r\n/* æ ‡ç­¾æ ·å¼ */.post-tags[data-v-046ce243]{margin-top:%?30?%;margin-bottom:%?10?%;line-height:1.5}.post-tag[data-v-046ce243]{color:#24375f;font-size:%?26?%;margin-right:%?10?%;transition:all .2s ease;cursor:pointer}.post-tag[data-v-046ce243]:active{color:#1a2a4a;opacity:.8}.delete-btn[data-v-046ce243]{background-color:#ff4757;color:#fff;border:none;border-radius:%?8?%;font-size:%?24?%;padding:%?8?% %?16?%;line-height:1.2;min-width:%?80?%;transition:background-color .2s ease}.delete-btn[data-v-046ce243]:active{background-color:#e63946}.delete-btn[data-v-046ce243]::after{border:none}.remove-favorite-btn[data-v-046ce243]{background-color:#f39c12;color:#fff;border:none;border-radius:%?8?%;font-size:%?24?%;padding:%?8?% %?16?%;line-height:1.2;min-width:%?100?%;transition:background-color .2s ease}.remove-favorite-btn[data-v-046ce243]:active{background-color:#e67e22}.remove-favorite-btn[data-v-046ce243]::after{border:none}.empty-tip[data-v-046ce243]{text-align:center;color:#bbb;font-size:%?28?%;margin:%?40?% 0;padding:%?60?% 0;background-color:#fff;border-radius:%?16?%;box-shadow:0 %?4?% %?12?% rgba(0,0,0,.05)}.author-info[data-v-046ce243]{display:flex;align-items:center\r\n    /* margin-bottom: 15rpx;  // ç§»é™¤å¤šä½™çš„é—´è· */}.author-avatar[data-v-046ce243]{width:%?60?%;height:%?60?%;border-radius:50%;margin-right:%?15?%;background-color:#f5f5f5}.author-name[data-v-046ce243]{font-size:%?28?%;color:#333;font-weight:500}.profile-card-center[data-v-046ce243]{position:relative;margin:%?30?%;padding:%?60?% %?40?% %?40?% %?40?%;background-color:#fff;border-radius:%?16?%;box-shadow:0 %?4?% %?12?% rgba(0,0,0,.05);display:flex;flex-direction:column;align-items:center;overflow:visible}.menu-btn-large[data-v-046ce243]{position:absolute;top:%?24?%;left:%?24?%;width:%?56?%;height:%?56?%;z-index:100;background:none;-webkit-filter:grayscale(1) brightness(.5);filter:grayscale(1) brightness(.5);opacity:.7}.back-btn[data-v-046ce243]{position:absolute;top:%?24?%;left:%?24?%;width:%?56?%;height:%?56?%;z-index:100;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,.1);border-radius:50%;font-size:%?36?%;color:#333;transition:background-color .2s ease}.back-btn[data-v-046ce243]:active{background:rgba(0,0,0,.2)}.profile-avatar-large uni-image[data-v-046ce243]{width:%?150?%;height:%?150?%;border-radius:50%;display:block;margin:0 auto}.profile-info-center[data-v-046ce243]{display:flex;flex-direction:column;align-items:center;margin-top:%?20?%}.profile-name-center[data-v-046ce243]{font-size:%?40?%;font-weight:700;color:#333;margin-bottom:%?10?%;text-align:center}.profile-bio-center[data-v-046ce243]{font-size:%?28?%;color:#999;text-align:center;margin-bottom:0}.profile-detail-card[data-v-046ce243]{margin:0 %?30?% %?30?% %?30?%;padding:%?30?% %?40?%;background-color:#fff;border-radius:%?16?%;box-shadow:0 %?4?% %?12?% rgba(0,0,0,.05);display:flex;flex-direction:row;align-items:center;justify-content:center;gap:%?40?%}.detail-item-inline[data-v-046ce243]{font-size:%?28?%;color:#666;margin-right:%?20?%;white-space:nowrap}\r\n/* åº•éƒ¨åŠ è½½çŠ¶æ€æ ·å¼ */.loading-footer[data-v-046ce243]{text-align:center;padding:%?20?% 0;color:#999;font-size:14px}.unread-dot[data-v-046ce243]{width:%?16?%;height:%?16?%;background-color:#ff6b6b;border-radius:50%;margin-left:%?12?%}',""]),n.exports=r},d2e7:function(n,r,t){"use strict";t("6a54");var e=t("f5bd").default;Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=e(t("39d8"));t("bf0f"),t("2797"),t("c223"),t("8f71"),t("fd3c"),t("bd06"),t("9db6");var i=t("5179"),o=(getApp(),t("139b")),s=o.formatRelativeTime,l=t("8e86"),c=l.previewImage,d=t("11ca"),u=d.cloudCall,g=t("2b90"),f={components:{},mixins:[g],data:function(){return{isLoading:!0,userInfo:{avatarUrl:"",nickName:"",bio:"",birthday:!1,age:!1},isSidebarOpen:!1,myPosts:[],page:0,hasMore:!0,PAGE_SIZE:5,swiperHeights:{},imageClampHeights:{},hasFirstShow_var:!1,unreadCount:0,currentTab:"posts",favoriteList:[],favoritePage:0,favoriteHasMore:!0,favoriteLoading:!1,currentUserOpenid:"",isAdmin:!1,swiperFixedHeight:"",selected:0,newFollowerCount:"",isLoadingMore:!1,isViewingSelf:!1,imgindex:0,img:""}},onLoad:function(n){var r=uni.getSystemInfoSync().windowWidth,t=Math.round(4*r/3);this.setData({swiperFixedHeight:t}),this.getProfileData()},onShow:function(){var n=t("d87a"),r=n.updateTabBarStatus;r(this,3),this._hasFirstShow?(console.log("ã€profileã€‘onShowè§¦å‘,å¼€å§‹åˆ·æ–°æ•°æ®"),this.refreshProfileData()):(console.log("ã€profileã€‘é¦–æ¬¡æ˜¾ç¤º,æ ‡è®°å·²æ˜¾ç¤º"),this.setData({hasFirstShow_var:!0}))},onPullDownRefresh:function(){console.log("ã€profileã€‘ä¸‹æ‹‰åˆ·æ–°è§¦å‘ï¼Œå½“å‰æ ‡ç­¾:",this.currentTab),"posts"===this.currentTab?(this.setData({myPosts:[],page:0,hasMore:!0,swiperHeights:{},imageClampHeights:{}}),this.loadMyPosts((function(){uni.stopPullDownRefresh(),console.log("ã€profileã€‘ä¸‹æ‹‰åˆ·æ–°ç»“æŸ")}))):"favorites"===this.currentTab&&(this.setData({favoriteList:[],favoritePage:0,favoriteHasMore:!0,swiperHeights:{},imageClampHeights:{}}),this.loadFavorites((function(){uni.stopPullDownRefresh(),console.log("ã€profileã€‘æ”¶è—ä¸‹æ‹‰åˆ·æ–°ç»“æŸ")})))},onReachBottom:function(){if(console.log("ã€profileã€‘è§¦åº•åŠ è½½è§¦å‘, currentTab:",this.currentTab),"posts"===this.currentTab){if(console.log("ã€profileã€‘è§¦åº•åŠ è½½æˆ‘çš„å¸–å­, hasMore:",this.hasMore,"isLoading:",this.isLoading,"å½“å‰é¡µ:",this.page),!this.hasMore||this.isLoading)return;this.loadMyPosts()}else if("favorites"===this.currentTab){if(console.log("ã€profileã€‘è§¦åº•åŠ è½½æ”¶è—, favoriteHasMore:",this.favoriteHasMore,"favoriteLoading:",this.favoriteLoading),!this.favoriteHasMore||this.favoriteLoading)return;this.loadFavorites()}},methods:{getProfileData:function(){this.checkLoginAndFetchData()},refreshProfileData:function(){console.log("ã€profileã€‘å¼€å§‹åˆ·æ–°ä¸ªäººèµ„æ–™æ•°æ®ï¼Œå½“å‰æ ‡ç­¾:",this.currentTab);var n=uni.getStorageSync("shouldRefreshIndex");n&&(console.log("ã€profileã€‘æ£€æµ‹åˆ°é¦–é¡µéœ€è¦åˆ·æ–°æ ‡è®°ï¼Œæ¸…é™¤ç¼“å­˜"),uni.removeStorageSync("shouldRefreshIndex")),this.userInfo&&this.userInfo._openid&&this.fetchUserProfileFast(),"posts"===this.currentTab?(this.setData({myPosts:[],page:0,hasMore:!0,swiperHeights:{},imageClampHeights:{}}),this.loadMyPosts((function(){console.log("ã€profileã€‘onShowåˆ·æ–°å¸–å­æ•°æ®å®Œæˆ")}))):"favorites"===this.currentTab&&(this.setData({favoriteList:[],favoritePage:0,favoriteHasMore:!0,swiperHeights:{},imageClampHeights:{}}),this.loadFavorites((function(){console.log("ã€profileã€‘onShowåˆ·æ–°æ”¶è—æ•°æ®å®Œæˆ")}))),this.checkUnreadMessages()},forceRefresh:function(){console.log("å¼ºåˆ¶åˆ·æ–°æ•°æ®"),this.setData({userInfo:{},myPosts:[],isLoading:!0,swiperHeights:{},imageClampHeights:{}}),this.checkLoginAndFetchData()},checkLoginAndFetchData:function(){var n=this;if(!this._cacheEventsBound){this._cacheEventsBound=!0;try{uni.$on&&uni.$on("avatar-updated",(function(r){var t=getApp(),e=t&&t.globalData&&t.globalData.openid;r&&r.userId===e&&((0,i.invalidateMyInfo)(),(0,i.getMyInfo)(n).then((function(r){return n.setData({userInfo:r||{}})})).catch((function(){})))})),uni.$on&&uni.$on("post-created",(function(r){var t=getApp(),e=t&&t.globalData&&t.globalData.openid;r&&r.userId===e&&((0,i.invalidateMyPosts)(),n.setData({myPosts:[],page:0,hasMore:!0}),n.loadMyPosts())})),uni.$on&&uni.$on("favorite-changed",(function(r){var t=getApp(),e=t&&t.globalData&&t.globalData.openid;r&&r.userId===e&&((0,i.invalidateMyFavorites)(),"favorites"===n.currentTab&&(n.setData({favoriteList:[],favoritePage:0,favoriteHasMore:!0}),n.loadFavorites()))}))}catch(a){}}var r=getApp(),t=r.globalData&&r.globalData.userInfo,e=r.globalData&&r.globalData._loginProcessCompleted;console.log("ğŸ” [profile] æ£€æŸ¥ç™»å½•çŠ¶æ€:",{hasUserInfo:!!t,hasOpenid:!(!t||!t._openid),loginProcessCompleted:e}),t&&t._openid?(this.fetchUserProfileFast(),this.loadMyPosts()):e?(this.setData({isLoading:!1}),console.log("âš ï¸ [profile] ç™»å½•æµç¨‹å·²å®Œæˆä½†æ— ç”¨æˆ·ä¿¡æ¯ï¼Œç”¨æˆ·æœªç™»å½•")):(console.log("â³ [profile] ç™»å½•æµç¨‹æœªå®Œæˆï¼Œç­‰å¾…ä¸­..."),this.waitForLoginProcess())},waitForLoginProcess:function(){var n=this,r=setInterval((function(){var t=getApp(),e=t.globalData&&t.globalData._loginProcessCompleted;e&&(clearInterval(r),console.log("âœ… [profile] ç™»å½•æµç¨‹å·²å®Œæˆï¼Œé‡æ–°æ£€æŸ¥ç™»å½•çŠ¶æ€"),n.checkLoginAndFetchData())}),100);setTimeout((function(){clearInterval(r),console.log("âš ï¸ [profile] ç­‰å¾…ç™»å½•æµç¨‹è¶…æ—¶ï¼Œç»§ç»­æ‰§è¡Œ"),n.checkLoginAndFetchData()}),5e3)},fetchUserProfileFast:function(){var n=this;(0,i.getMyInfo)(this).then((function(r){r&&r.birthday?r.age=n.calculateAge(r.birthday):r&&(r.age=""),n.setData({userInfo:r||{},isLoading:!1})})).catch((function(r){console.error("è·å–ç”¨æˆ·èµ„æ–™å¤±è´¥ï¼ˆç¼“å­˜å°è£…ï¼‰:",r),n.setData({isLoading:!1});var t=uni.getStorageSync("userInfo");t?(t.birthday&&(t.age=n.calculateAge(t.birthday)),n.setData({userInfo:t})):uni.showToast({title:"è·å–æ•°æ®å¤±è´¥",icon:"none"})}))},loadMyPosts:function(n){var r=this,t=this.page,e=this.PAGE_SIZE;console.log("ã€profileã€‘è¯·æ±‚åˆ†é¡µå‚æ•°:",{page:t,PAGE_SIZE:e,skip:t*e,limit:e}),0===t&&this.setData({isLoading:!0});try{return(0,i.getMyPosts)({page:t,pageSize:e,context:this}).then((function(n){n.forEach((function(n){n.createTime&&(n.formattedCreateTime=r.formatTime(n.createTime)),n.imageUrls&&n.imageUrls.length>0&&(n.imageStyle="height: 0; padding-bottom: 75%;")}));var a=0===t?n:r.myPosts.concat(n);r.setData({myPosts:a,page:t+1,hasMore:n.length===e})})).catch((function(n){console.error("profile è·å–å¸–å­å¤±è´¥:",n),uni.showToast({title:"ç½‘ç»œå¼‚å¸¸",icon:"none"})})).finally((function(){r.setData({isLoading:!1}),"function"===typeof n&&n()}))}catch(s){}var a=getApp(),o=a&&a.globalData&&a.globalData.openid;this.$tcb.callFunction({name:"getMyProfileData",data:{skip:t*e,limit:e,openid:o}}).then((function(n){if(n.result&&n.result.success){var a=n.result.posts||[];console.log("ã€profileã€‘æœ¬æ¬¡è¿”å›å¸–å­æ•°é‡:",a.length),a.forEach((function(n){n.createTime&&(n.formattedCreateTime=r.formatTime(n.createTime)),n.imageUrls&&n.imageUrls.length>0&&(n.imageStyle="height: 0; padding-bottom: 75%;")}));var i=0===t?a:r.myPosts.concat(a);console.log("ã€profileã€‘æ›´æ–°å myPosts é•¿åº¦:",i.length,"hasMore:",a.length===e,"page:",t+1),r.setData({myPosts:i,page:t+1,hasMore:a.length===e})}})).catch((function(n){console.error("ã€profileã€‘è·å–å¸–å­å¤±è´¥:",n),uni.showToast({title:"ç½‘ç»œé”™è¯¯",icon:"none"})})).finally((function(){r.setData({isLoading:!1}),"function"===typeof n&&n()}))},calculateAge:function(n){if(!n)return"";try{var r=new Date(n);if(isNaN(r.getTime()))return"";var t=new Date,e=t.getFullYear()-r.getFullYear(),a=t.getMonth()-r.getMonth();return(a<0||0===a&&t.getDate()<r.getDate())&&e--,e>0?e:""}catch(i){return console.log("CatchClause",i),console.log("CatchClause",i),console.error("è®¡ç®—å¹´é¾„å¤±è´¥:",i),""}},formatTime:function(n){return s(n)},navigateToPostDetail:function(n){var r=n.currentTarget.dataset.id;uni.navigateTo({url:"/pages/post-detail/post-detail?id=".concat(r)})},onDelete:function(n){var r=n.currentTarget.dataset.postid,t=n.currentTarget.dataset.index,e=this;uni.showModal({title:"åˆ é™¤å¸–å­",content:"æ‚¨ç¡®å®šè¦åˆ é™¤è¿™æ¡å¸–å­å—ï¼Ÿ",confirmText:"åˆ é™¤",cancelText:"ä¿å­˜è‰ç¨¿",confirmColor:"#ff4d4f",success:function(n){n.confirm?e.deletePost(r,t):e.saveToDraftBox(r,t)}})},deletePost:function(n,r){var t=this;uni.showLoading({title:"åˆ é™¤ä¸­..."}),this.$tcb.callFunction({name:"deletePost",data:{postId:n}}).then((function(r){if(uni.hideLoading(),r.result&&r.result.success){uni.showToast({title:"åˆ é™¤æˆåŠŸ"});var e=t.myPosts.filter((function(r){return r._id!==n}));t.setData({myPosts:e});try{uni.setStorageSync("shouldRefreshIndex",!0)}catch(a){console.log("CatchClause",a),console.log("CatchClause",a)}}else uni.showToast({title:"åˆ é™¤å¤±è´¥",icon:"none"})})).catch((function(n){uni.hideLoading(),uni.showToast({title:"è°ƒç”¨å¤±è´¥",icon:"none"})}))},saveToDraftBox:function(n,r){var t=this,e=this;uni.showLoading({title:"ä¿å­˜ä¸­..."}),this.$tcb.callFunction({name:"getPostDetail",data:{postId:n}}).then((function(n){if(n.result&&n.result.post){var r=n.result.post,e={title:r.title||"",content:r.content||"",imageList:r.imageUrls?r.imageUrls.map((function(n){return{previewUrl:n,compressedPath:n,originalPath:n,needCompression:!1}})):[],publishMode:r.isPoem?"poem":"normal",isOriginal:r.isOriginal||!1,selectedTags:r.tags||[],customTag:"",author:r.author||"",saveTime:new Date},a=getApp(),i=a&&a.globalData&&a.globalData.openid;return t.$tcb.callFunction({name:"getMyProfileData",data:{action:"saveDraft",draftData:e,openid:i}})}return uni.hideLoading(),uni.showToast({title:"è·å–å¸–å­ä¿¡æ¯å¤±è´¥",icon:"none"}),Promise.reject("è·å–å¸–å­ä¿¡æ¯å¤±è´¥")})).then((function(t){var a;(uni.hideLoading(),t.result&&t.result.success)?(uni.showToast({title:"å·²ä¿å­˜åˆ°è‰ç¨¿ç®±",icon:"success"}),e.deletePost(n,r)):uni.showToast({title:(null===(a=t.result)||void 0===a?void 0:a.message)||"ä¿å­˜è‰ç¨¿å¤±è´¥",icon:"none"})})).catch((function(n){uni.hideLoading(),console.error("ä¿å­˜è‰ç¨¿å¤±è´¥:",n),uni.showToast({title:"ä¿å­˜è‰ç¨¿å¤±è´¥",icon:"none"})}))},updatePostCommentCount:function(n,r){var t=this.myPosts.findIndex((function(r){return r._id===n}));t>-1&&this.setData((0,a.default)({},"myPosts[".concat(t,"].commentCount"),r))},handlePreview:function(n){return c(n)},stopPropagation:function(){},onAvatarError:function(n){console.error("å¤´åƒåŠ è½½å¤±è´¥:",n)},onImageError:function(n){console.error("å›¾ç‰‡åŠ è½½å¤±è´¥:",n.detail);var r=n.detail.src;console.error("å¤±è´¥çš„å›¾ç‰‡URL:",r);var t=n.currentTarget.dataset,e=t.postindex,a=t.imgindex;if(void 0!==e&&void 0!==a){var i=this.myPosts[e];console.error("å›¾ç‰‡åŠ è½½å¤±è´¥çš„ä¸Šä¸‹æ–‡:",{postId:i?i._id:"unknown",postTitle:i?i.title:"unknown",imageIndex:a,imageUrl:r})}console.error("å›¾ç‰‡åŠ è½½å¤±è´¥è¯¦æƒ…:",{error:n.detail,src:r,dataset:n.currentTarget.dataset})},testImageUrls:function(){console.log("=== å¼€å§‹æµ‹è¯•å›¾ç‰‡URLæœ‰æ•ˆæ€§ ==="),this.myPosts.forEach((function(n,r){console.log("å¸–å­".concat(r+1," (").concat(n._id,"):")),console.log("  - æ ‡é¢˜:",n.title),console.log("  - ä½œè€…å¤´åƒ:",n.authorAvatar),console.log("  - å›¾ç‰‡URLs:",n.imageUrls),console.log("  - åŸå›¾URLs:",n.originalImageUrls),n.imageUrls&&n.imageUrls.length>0?n.imageUrls.forEach((function(n,r){console.log("  - å›¾ç‰‡".concat(r+1,":"),n),n&&n.startsWith("http")?console.log("    âœ… æ ¼å¼æ­£ç¡® (HTTP URL)"):n&&n.startsWith("cloud://")?console.log("    âš ï¸ æ ¼å¼ä¸ºcloud:// (éœ€è¦è½¬æ¢)"):n?console.log("    ? æœªçŸ¥æ ¼å¼: ".concat(n)):console.log("    âŒ URLä¸ºç©º")})):console.log("  - æ— å›¾ç‰‡"),console.log("---")})),console.log("=== å›¾ç‰‡URLæµ‹è¯•å®Œæˆ ===")},toggleSidebar:function(){this.setData({isSidebarOpen:!this.isSidebarOpen})},navigateToMyLikes:function(){uni.navigateTo({url:"/pages/my-likes/my-likes"})},navigateToFollowing:function(){uni.navigateTo({url:"/pages/following/following"})},navigateToFans:function(){uni.navigateTo({url:"/pages/fans/fans"})},navigateToEditProfile:function(){uni.navigateTo({url:"/pages/profile-edit/profile-edit"})},navigateToFavoriteFolders:function(){uni.navigateTo({url:"/pages/favorite-folders/favorite-folders"})},navigateToDraftBox:function(){uni.navigateTo({url:"/pages/draft-box/draft-box"})},navigateToMessages:function(){uni.navigateTo({url:"/pages/messages/messages"})},checkUnreadMessages:function(){var n=this;this.$tcb.callFunction({name:"getUnreadMessageCount"}).then((function(r){r.result&&r.result.success&&n.setData({unreadCount:r.result.count||0})})).catch((function(n){console.error("è·å–æœªè¯»æ¶ˆæ¯å¤±è´¥:",n)})),this.$tcb.callFunction({name:"follow",data:{action:"getNewFollowerCount"}}).then((function(r){r.result&&r.result.success&&n.setData({newFollowerCount:r.result.count||0})})).catch((function(n){console.error("è·å–æ–°ç²‰ä¸æ•°é‡å¤±è´¥:",n)}))},switchTab:function(n){var r=n.currentTarget.dataset.tab;console.log("ã€profileã€‘åˆ‡æ¢åˆ°æ ‡ç­¾:",r),r!==this.currentTab&&(this.setData({currentTab:r}),"favorites"===r&&0===this.favoriteList.length&&this.loadFavorites())},loadFavorites:function(n){var r=this,t=this.favoritePage,e=this.PAGE_SIZE;console.log("ã€profileã€‘è¯·æ±‚æ”¶è—åˆ†é¡µå‚æ•°:",{favoritePage:t,PAGE_SIZE:e,skip:t*e,limit:e}),this.setData({favoriteLoading:!0});try{return(0,i.getMyFavorites)({page:t,pageSize:e,context:this}).then((function(n){(n||[]).forEach((function(n){n.favoriteTime&&(n.formattedFavoriteTime=r.formatTime(n.favoriteTime)),n.imageUrls&&n.imageUrls.length>0&&(n.imageStyle="height: 0; padding-bottom: 75%;")}));var a=0===t?n:r.favoriteList.concat(n||[]);r.setData({favoriteList:a,favoritePage:t+1,favoriteHasMore:(n||[]).length===e})})).catch((function(n){console.error("profile è·å–æ”¶è—å¤±è´¥:",n),uni.showToast({title:"ç½‘ç»œå¼‚å¸¸",icon:"none"})})).finally((function(){r.setData({favoriteLoading:!1}),"function"===typeof n&&n()}))}catch(s){}var a=getApp(),o=a&&a.globalData&&a.globalData.openid;this.$tcb.callFunction({name:"getMyProfileData",data:{action:"getAllFavorites",skip:t*e,limit:e,openid:o}}).then((function(n){if(console.log("ã€profileã€‘è·å–æ”¶è—è¿”å›:",n),n.result&&n.result.success){var a=n.result.favorites||[];console.log("ã€profileã€‘æœ¬æ¬¡è¿”å›æ”¶è—æ•°é‡:",a.length),a.forEach((function(n){n.favoriteTime&&(n.formattedFavoriteTime=r.formatTime(n.favoriteTime)),n.imageUrls&&n.imageUrls.length>0&&(n.imageStyle="height: 0; padding-bottom: 75%;")}));var i=0===t?a:r.favoriteList.concat(a);console.log("ã€profileã€‘æ›´æ–°åæ”¶è—åˆ—è¡¨é•¿åº¦:",i.length,"favoriteHasMore:",a.length===e,"favoritePage:",t+1),r.setData({favoriteList:i,favoritePage:t+1,favoriteHasMore:a.length===e})}else{var o;uni.showToast({title:(null===(o=n.result)||void 0===o?void 0:o.message)||"åŠ è½½æ”¶è—å¤±è´¥",icon:"none"})}})).catch((function(n){console.error("ã€profileã€‘è·å–æ”¶è—å¤±è´¥:",n),uni.showToast({title:"ç½‘ç»œé”™è¯¯",icon:"none"})})).finally((function(){r.setData({favoriteLoading:!1}),"function"===typeof n&&n()}))},navigateToFavoriteDetail:function(n){var r=n.currentTarget.dataset.id;uni.navigateTo({url:"/pages/post-detail/post-detail?id=".concat(r)})},removeFavorite:function(n){var r=n.currentTarget.dataset.favoriteId,e=n.currentTarget.dataset.index,a=this;uni.showModal({title:"ç¡®è®¤å–æ¶ˆæ”¶è—",content:"ç¡®å®šè¦å–æ¶ˆæ”¶è—è¿™ä¸ªå†…å®¹å—ï¼Ÿ",success:function(i){if(i.confirm){uni.showLoading({title:"å–æ¶ˆæ”¶è—ä¸­..."});var o=getApp(),s=o&&o.globalData&&o.globalData.openid;a.callCloudFunction("getMyProfileData",{action:"removeFromFavorite",favoriteId:r,openid:s}).then((function(r){if(uni.hideLoading(),r.result&&r.result.success){uni.showToast({title:"å·²å–æ¶ˆæ”¶è—"});var i=a.favoriteList.filter((function(n,r){return r!==e}));a.setData({favoriteList:i});try{var o=getApp(),s=o&&o.globalData&&o.globalData.openid,l=a.favoriteList[e],c=l&&(l._id||l.postId),d=t("80fa"),u=d.emitFavoriteChanged;u({userId:s,postId:c,favored:!1})}catch(n){}}else uni.showToast({title:"å–æ¶ˆæ”¶è—å¤±è´¥",icon:"none"})})).catch((function(n){uni.hideLoading(),uni.showToast({title:"æ“ä½œå¤±è´¥",icon:"none"})}))}}})},navigateBack:function(){uni.navigateBack()},navigateToImageManager:function(){uni.navigateTo({url:"/pages/image-manager/image-manager"})},navigateToFeedback:function(){uni.navigateTo({url:"/pages/feedback/feedback"})},navigateToFeedbackAdmin:function(){uni.navigateTo({url:"/pages/feedback-admin/feedback-admin"})},showLogoutConfirm:function(){var n=this;this.isSidebarOpen&&(this.isSidebarOpen=!1),setTimeout((function(){uni.showModal({title:"é€€å‡ºç™»å½•",content:"ç¡®å®šè¦é€€å‡ºç™»å½•å—ï¼Ÿ",confirmText:"é€€å‡º",cancelText:"å–æ¶ˆ",confirmColor:"#ff6b6b",success:function(r){r.confirm&&n.performLogout()}})}),100)},performLogout:function(){console.log("ğŸ” [é€€å‡ºç™»å½•] å¼€å§‹æ‰§è¡Œé€€å‡ºç™»å½•æµç¨‹");try{uni.removeStorageSync("userInfo"),uni.removeStorageSync("userOpenId");var n=getApp();n&&n.globalData&&(n.globalData.userInfo=null,n.globalData.openid=null,n.globalData._loginProcessCompleted=!1),this.setData({userInfo:null,myPosts:[],favoriteList:[],isLoading:!1,isSidebarOpen:!1}),console.log("âœ… [é€€å‡ºç™»å½•] æœ¬åœ°æ•°æ®æ¸…é™¤å®Œæˆ"),this.reinitializeAnonymousOpenid(),uni.showToast({title:"å·²é€€å‡ºç™»å½•",icon:"success",duration:1500}),setTimeout((function(){uni.redirectTo({url:"/pages/login/login"})}),1500)}catch(r){console.error("âŒ [é€€å‡ºç™»å½•] é€€å‡ºç™»å½•å¤±è´¥:",r),uni.showToast({title:"é€€å‡ºå¤±è´¥ï¼Œè¯·é‡è¯•",icon:"none"})}},reinitializeAnonymousOpenid:function(){console.log("ğŸ”„ [é€€å‡ºç™»å½•] é‡æ–°åˆå§‹åŒ–åŒ¿åopenid"),this.$tcb.callFunction({name:"login"}).then((function(n){console.log("âœ… [é€€å‡ºç™»å½•] åŒ¿åopenidåˆå§‹åŒ–æˆåŠŸ:",n);var r=null;if(n.result&&n.result.openid?r=n.result.openid:n.openid?r=n.openid:n.result&&n.result.uid&&(r=n.result.uid),r){var t=getApp();t&&t.globalData&&(t.globalData.openid=r,console.log("âœ… [é€€å‡ºç™»å½•] åŒ¿åopenidå·²è®¾ç½®:",r)),uni.setStorageSync("userOpenId",r)}else console.error("âŒ [é€€å‡ºç™»å½•] æ— æ³•è·å–åŒ¿åopenid")})).catch((function(n){console.error("âŒ [é€€å‡ºç™»å½•] åŒ¿åopenidåˆå§‹åŒ–å¤±è´¥:",n)}))},onScrollToLower:function(){var n=this;console.log("ã€profileã€‘æ»šåŠ¨åˆ°åº•éƒ¨ï¼Œå½“å‰æ ‡ç­¾:",this.currentTab),"posts"===this.currentTab?!this.hasMore||this.isLoadingMore||this.isLoading||(console.log("ã€profileã€‘å¼€å§‹åŠ è½½æ›´å¤šå¸–å­"),this.setData({isLoadingMore:!0}),this.loadMyPosts((function(){n.setData({isLoadingMore:!1}),console.log("ã€profileã€‘åŠ è½½æ›´å¤šå¸–å­å®Œæˆ")}))):"favorites"===this.currentTab&&this.favoriteHasMore&&!this.favoriteLoading&&(console.log("ã€profileã€‘å¼€å§‹åŠ è½½æ›´å¤šæ”¶è—"),this.loadFavorites((function(){console.log("ã€profileã€‘åŠ è½½æ›´å¤šæ”¶è—å®Œæˆ")})))},onAvatarLoad:function(){console.log("å ä½ï¼šå‡½æ•° onAvatarLoad æœªå£°æ˜")},navigateToUserProfile:function(){console.log("å ä½ï¼šå‡½æ•° navigateToUserProfile æœªå£°æ˜")},onTagClick:function(){console.log("å ä½ï¼šå‡½æ•° onTagClick æœªå£°æ˜")},callCloudFunction:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return u(n,r,Object.assign({pageTag:"profile",context:this,requireAuth:!0},t))}}};r.default=f},db04:function(n,r,t){"use strict";var e=t("bb80"),a=t("c435"),i=t("9e70"),o=t("f298"),s=t("862c"),l=e(o),c=e("".slice),d=Math.ceil,u=function(n){return function(r,t,e){var o,u,g=i(s(r)),f=a(t),v=g.length,p=void 0===e?" ":i(e);return f<=v||""===p?g:(o=f-v,u=l(p,d(o/p.length)),u.length>o&&(u=c(u,0,o)),n?g+u:u+g)}};n.exports={start:u(!1),end:u(!0)}}}]);