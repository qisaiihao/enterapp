(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-search-search"],{"0323":function(t,e,n){"use strict";n("6a54");var r=n("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("0c26"),n("bf0f"),n("f7a5"),n("8f71"),n("3efd");var a=r(n("71b6")),i=r(n("71b6")),o=n("edf3"),s=o.previewImage,c=n("81f6"),l=c.normalizePostList,u=n("38db"),d=u.cloudCall,f={components:{skeleton:a.default},data:function(){return{searchKeyword:"",searchResults:[],isSearching:!1,searchHistory:[],hotSearches:["诗歌","原创","生活","感悟","旅行","美食","摄影","读书"],searchTimer:null,img:""}},onLoad:function(t){this.loadSearchHistory()},methods:{callCloudFunction:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return d(t,e,Object.assign({pageTag:"search",context:this},n))},onSearchInput:function(t){var e=this,n=t.detail.value;if(this.setData({searchKeyword:n}),this.searchTimer&&clearTimeout(this.searchTimer),n.trim()){var r=setTimeout((function(){e.performSearch(n)}),500);this.setData({searchTimer:r})}else this.setData({searchResults:[],isSearching:!1})},onSearchConfirm:function(t){var e=t.detail.value.trim();e&&(this.searchTimer&&(clearTimeout(this.searchTimer),this.setData({searchTimer:null})),this.setData({searchKeyword:e}),this.performSearch(e))},clearSearch:function(){this.searchTimer&&clearTimeout(this.searchTimer),this.setData({searchKeyword:"",searchResults:[],isSearching:!1,searchTimer:null})},performSearch:function(t){var e=this,n=t||this.searchKeyword;console.log("执行搜索，关键词:",n,"传入参数:",t,"当前数据:",this.searchKeyword),n.trim()&&(this.setData({searchResults:[],isSearching:!0,searchKeyword:n}),this.saveSearchHistory(n),this.callCloudFunction("searchPosts",{keyword:n,limit:20}).then((function(t){if(console.log("搜索结果:",t),t.result&&t.result.success){var r=l(t.result.posts||[]);console.log("设置搜索结果:",r.length,"条结果，关键词:",n),e.setData({searchResults:r})}else uni.showToast({title:"搜索失败",icon:"none"})})).catch((function(t){console.error("搜索失败:",t),uni.showToast({title:"网络错误",icon:"none"})})).finally((function(){e.setData({isSearching:!1})})))},selectHistoryKeyword:function(t){var e=this,n=t.currentTarget.dataset.keyword;this.setData({searchKeyword:n},(function(){e.performSearch(n)}))},selectHotKeyword:function(t){var e=this,n=t.currentTarget.dataset.keyword;this.setData({searchKeyword:n},(function(){e.performSearch(n)}))},clearHistory:function(){var t=this;uni.showModal({title:"确认清空",content:"确定要清空搜索历史吗？",success:function(e){e.confirm&&(uni.removeStorageSync("searchHistory"),t.setData({searchHistory:[]}))}})},loadSearchHistory:function(){try{var t=uni.getStorageSync("searchHistory")||[];this.setData({searchHistory:t.slice(0,10)})}catch(e){console.log("CatchClause",e),console.log("CatchClause",e),console.error("加载搜索历史失败:",e)}},saveSearchHistory:function(t){try{var e=uni.getStorageSync("searchHistory")||[];e=e.filter((function(e){return e!==t})),e.unshift(t),e=e.slice(0,20),uni.setStorageSync("searchHistory",e),this.setData({searchHistory:e.slice(0,10)})}catch(n){console.log("CatchClause",n),console.log("CatchClause",n),console.error("保存搜索历史失败:",n)}},goBack:function(){uni.navigateBack()},onPostTap:function(t){var e=t.currentTarget.dataset.postid;uni.navigateTo({url:"/pages/post-detail/post-detail?id=".concat(e)})},onTagClick:function(t){var e=t.currentTarget.dataset.tag;uni.navigateTo({url:"/pages/tag-filter/tag-filter?tag=".concat(encodeURIComponent(e))})},onCommentClick:function(t){var e=t.currentTarget.dataset.postid;uni.navigateTo({url:"/pages/post-detail/post-detail?id=".concat(e)})},handlePreview:function(t){return s(t,{fallbackToast:!1})},onAvatarError:function(t){console.error("头像加载失败",t.detail)},onImageError:function(t){console.error("图片加载失败",t.detail)},navigateToUserProfile:function(t){var e=t.currentTarget.dataset.userId;uni.navigateTo({url:"/pages/user-profile/user-profile?userId=".concat(e)})}}};e.default=f,e.default.components=Object.assign({skeleton:i.default},e.default.components||{})},"0b5c":function(t,e,n){var r=n("c86c");e=r(!1),e.push([t.i,"\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/* pages/search/search.wxss */.container[data-v-2b9ad9ce]{padding:%?20?%;background-color:#f7f8fa;min-height:100vh}\r\n/* 搜索头部 */.search-header[data-v-2b9ad9ce]{display:flex;align-items:center;margin-bottom:%?30?%;gap:%?20?%}.search-input-container[data-v-2b9ad9ce]{flex:1;display:flex;align-items:center;background-color:#fff;border-radius:%?16?%;padding:%?20?% %?30?%;box-shadow:0 %?4?% %?12?% rgba(0,0,0,.05);border:%?1?% solid rgba(0,0,0,.05)}.search-icon[data-v-2b9ad9ce]{font-size:%?32?%;margin-right:%?20?%;color:#999}.search-input[data-v-2b9ad9ce]{flex:1;font-size:%?28?%;color:#333}.clear-btn[data-v-2b9ad9ce]{font-size:%?40?%;color:#999;margin-left:%?20?%;padding:%?10?%}.cancel-btn[data-v-2b9ad9ce]{font-size:%?28?%;color:#9ed7ee;padding:%?20?%}\r\n/* 搜索结果 */.search-results[data-v-2b9ad9ce]{margin-bottom:%?20?%}.results-header[data-v-2b9ad9ce]{margin-bottom:%?20?%}.results-count[data-v-2b9ad9ce]{font-size:%?24?%;color:#999}\r\n/* 文章列表样式 */.post-list[data-v-2b9ad9ce]{margin-bottom:%?20?%}.post-item-wrapper[data-v-2b9ad9ce]{background-color:#fff;border-radius:%?16?%;margin-bottom:%?20?%;box-shadow:0 %?4?% %?12?% rgba(0,0,0,.05);overflow:hidden}\r\n/* 作者信息 */.author-info-outside[data-v-2b9ad9ce]{display:flex;align-items:center;padding:%?20?% %?20?% 0 %?20?%;margin-bottom:%?15?%}.author-avatar[data-v-2b9ad9ce]{width:%?60?%;height:%?60?%;border-radius:50%;margin-right:%?15?%}.author-name[data-v-2b9ad9ce]{font-size:%?28?%;color:#333;font-weight:500}\r\n/* 帖子内容 */.post-item[data-v-2b9ad9ce]{padding:0 %?20?% %?20?% %?20?%}.post-title[data-v-2b9ad9ce]{font-size:%?32?%;font-weight:700;color:#333;margin-bottom:%?15?%;line-height:1.4}.post-content[data-v-2b9ad9ce]{font-size:%?28?%;color:#666;line-height:1.6;margin-bottom:%?15?%}\r\n/* 图片容器 */.image-container-wrapper[data-v-2b9ad9ce]{position:relative;width:100%;margin-bottom:%?15?%;background-color:#f0f0f0;overflow:hidden;border-radius:%?12?%}.image-container-wrapper .post-image[data-v-2b9ad9ce],\r\n.image-container-wrapper .image-swiper[data-v-2b9ad9ce]{position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover}.post-image[data-v-2b9ad9ce]{width:100%;height:100%;display:block;object-fit:cover}.image-swiper[data-v-2b9ad9ce]{width:100%;height:100%}\r\n/* 标签样式 */.post-tags[data-v-2b9ad9ce]{margin:%?20?% 0 %?10?% 0;line-height:1.5}.post-tag[data-v-2b9ad9ce]{color:#24375f;font-size:%?26?%;margin-right:%?10?%;transition:all .2s ease;cursor:pointer}.post-tag[data-v-2b9ad9ce]:active{color:#1a2a4a;opacity:.8}\r\n/* 互动区域 */.vote-section[data-v-2b9ad9ce]{display:flex;justify-content:space-between;align-items:center;padding:%?15?% %?20?% %?20?% %?20?%;border-top:%?1?% solid #f0f0f0}.actions-left[data-v-2b9ad9ce]{flex:1}.actions-right[data-v-2b9ad9ce]{display:flex;gap:%?30?%}.action-item[data-v-2b9ad9ce]{display:flex;align-items:center;gap:%?8?%}.action-emoji[data-v-2b9ad9ce]{font-size:%?24?%}.action-text[data-v-2b9ad9ce]{font-size:%?24?%;color:#999}\r\n/* 空状态 */.empty-state[data-v-2b9ad9ce]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:%?400?%;background-color:#fff;border-radius:%?16?%;margin:%?30?%;box-shadow:0 %?4?% %?12?% rgba(0,0,0,.05)}.empty-icon[data-v-2b9ad9ce]{font-size:%?80?%;margin-bottom:%?20?%}.empty-text[data-v-2b9ad9ce]{font-size:%?32?%;color:#333;margin-bottom:%?10?%}.empty-subtext[data-v-2b9ad9ce]{font-size:%?28?%;color:#999}\r\n/* 搜索建议 */.search-suggestions[data-v-2b9ad9ce]{background-color:#fff;border-radius:%?16?%;padding:%?30?%;box-shadow:0 %?4?% %?12?% rgba(0,0,0,.05)}.suggestions-header[data-v-2b9ad9ce]{display:flex;justify-content:space-between;align-items:center;margin-bottom:%?20?%}.suggestions-title[data-v-2b9ad9ce]{font-size:%?28?%;color:#333;font-weight:500}.clear-history[data-v-2b9ad9ce]{font-size:%?24?%;color:#999}.suggestions-list[data-v-2b9ad9ce]{display:flex;flex-wrap:wrap;gap:%?15?%}.suggestion-item[data-v-2b9ad9ce]{background-color:#f5f5f5;border-radius:%?20?%;padding:%?12?% %?20?%;transition:all .2s ease}.suggestion-item[data-v-2b9ad9ce]:active{background-color:#e8e8e8;-webkit-transform:scale(.95);transform:scale(.95)}.suggestion-text[data-v-2b9ad9ce]{font-size:%?26?%;color:#333}\r\n/* 热门搜索 */.hot-searches[data-v-2b9ad9ce]{background-color:#fff;border-radius:%?16?%;padding:%?30?%;box-shadow:0 %?4?% %?12?% rgba(0,0,0,.05)}.hot-header[data-v-2b9ad9ce]{margin-bottom:%?20?%}.hot-title[data-v-2b9ad9ce]{font-size:%?28?%;color:#333;font-weight:500}.hot-list[data-v-2b9ad9ce]{display:flex;flex-wrap:wrap;gap:%?15?%}.hot-item[data-v-2b9ad9ce]{background-color:#f0f8ff;border-radius:%?20?%;padding:%?12?% %?20?%;transition:all .2s ease}.hot-item[data-v-2b9ad9ce]:active{background-color:#e0f0ff;-webkit-transform:scale(.95);transform:scale(.95)}.hot-text[data-v-2b9ad9ce]{font-size:%?26?%;color:#9ed7ee}\r\n/* 加载状态 */.loading-state[data-v-2b9ad9ce]{display:flex;justify-content:center;align-items:center;padding:%?40?%}.loading-text[data-v-2b9ad9ce]{font-size:%?28?%;color:#999}",""]),t.exports=e},"0f46":function(t,e,n){"use strict";var r=n("14fe"),a=n.n(r);a.a},"14fe":function(t,e,n){var r=n("8ed6");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);var a=n("967d").default;a("7a9d0cb7",r,!0,{sourceMap:!1,shadowMode:!1})},2036:function(t,e,n){var r=n("0b5c");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);var a=n("967d").default;a("2d0f1180",r,!0,{sourceMap:!1,shadowMode:!1})},2774:function(t,e,n){n("01a2"),n("e39c"),n("bf0f"),n("844d"),n("18f7"),n("de6c"),n("08eb"),t.exports=function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)},t.exports.__esModule=!0,t.exports["default"]=t.exports},"412c":function(t,e,n){"use strict";var r=n("2036"),a=n.n(r);a.a},4550:function(t,e,n){n("6a54");var r=n("8bcf");t.exports=function(t,e,n){return e=r(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},t.exports.__esModule=!0,t.exports["default"]=t.exports},"4d07":function(t,e,n){"use strict";n.r(e);var r=n("c03a"),a=n.n(r);for(var i in r)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return r[t]}))}(i);e["default"]=a.a},5014:function(t,e,n){n("dc8a"),n("01a2"),n("8f71"),n("bf0f"),n("9a2c"),n("aa9c"),n("2797"),n("a644"),n("a03a"),n("6a54");var r=n("4550");function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}t.exports=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t},t.exports.__esModule=!0,t.exports["default"]=t.exports},5347:function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){}));var r=function(){var t=this.$createElement,e=this._self._c||t;return e("v-uni-view",{staticClass:"skeleton-wrapper"},[e("v-uni-view",{staticClass:"skeleton-poem-card"},[e("v-uni-view",{staticClass:"skeleton-original-badge skeleton-animate"}),e("v-uni-view",{staticClass:"skeleton-author-info"},[e("v-uni-view",{staticClass:"skeleton-avatar skeleton-animate"}),e("v-uni-view",{staticClass:"skeleton-name skeleton-animate"})],1),e("v-uni-view",{staticClass:"skeleton-title skeleton-animate"}),e("v-uni-view",{staticClass:"skeleton-content-large skeleton-animate"}),e("v-uni-view",{staticClass:"skeleton-content-large skeleton-animate"}),e("v-uni-view",{staticClass:"skeleton-content-large skeleton-animate",staticStyle:{width:"70%"}})],1),e("v-uni-view",{staticClass:"skeleton-poem-card skeleton-secondary"},[e("v-uni-view",{staticClass:"skeleton-author-info"},[e("v-uni-view",{staticClass:"skeleton-avatar skeleton-animate"}),e("v-uni-view",{staticClass:"skeleton-name skeleton-animate"})],1),e("v-uni-view",{staticClass:"skeleton-title skeleton-animate"}),e("v-uni-view",{staticClass:"skeleton-content-large skeleton-animate"}),e("v-uni-view",{staticClass:"skeleton-content-large skeleton-animate",staticStyle:{width:"80%"}})],1)],1)},a=[]},"56c9":function(t,e,n){n("9e15"),n("884b"),n("01a2"),n("e39c"),n("bf0f"),n("7a76"),n("c9b5"),n("64aa");var r=n("bdbb")["default"];t.exports=function(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var a=n.call(t,e||"default");if("object"!==r(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)},t.exports.__esModule=!0,t.exports["default"]=t.exports},6519:function(t,e,n){"use strict";n.r(e);var r=n("0323"),a=n.n(r);for(var i in r)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return r[t]}))}(i);e["default"]=a.a},"71b6":function(t,e,n){"use strict";n.r(e);var r=n("5347"),a=n("4d07");for(var i in a)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(i);n("0f46");var o=n("828b"),s=Object(o["a"])(a["default"],r["b"],r["c"],!1,null,"a51e8920",null,!1,r["a"],void 0);e["default"]=s.exports},"73e1":function(t,e,n){"use strict";var r=n("29d8");t.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(r)},"795c":function(t,e,n){"use strict";var r=n("8bdb"),a=n("db04").start,i=n("73e1");r({target:"String",proto:!0,forced:i},{padStart:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}})},"81f6":function(t,e,n){var r=n("5014").default,a=n("d189").default,i=n("4cf1").default;n("8f71"),n("bf0f"),n("aa9c"),n("fd3c");var o=n("962f"),s=o.formatRelativeTime,c=["createTime","postCreateTime","publishTime","createdAt","updateTime"],l=function(t){return t?Array.isArray(t)?t.filter(Boolean):[t].filter(Boolean):[]},u=function(t){var e,n=i(c);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(t[r])return{key:r,value:t[r]}}}catch(a){n.e(a)}finally{n.f()}return null},d=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.withTime,i=void 0===n||n,o=l(t.imageUrls);0===o.length&&o.push.apply(o,a(l(t.imageUrl)));var c=l(t.originalImageUrls);0===c.length&&c.push.apply(c,a(l(t.originalImageUrl))),0===c.length&&o.length>0&&c.push.apply(c,a(o));var d=r(r({},t),{},{imageUrls:o,originalImageUrls:c,authorName:t.authorName||"匿名用户",authorAvatar:"string"===typeof t.authorAvatar?t.authorAvatar:""});if(!d.imageStyle&&o.length>0&&(d.imageStyle="height: 0; padding-bottom: 75%;"),i)if(t.formattedCreateTime)d.formattedCreateTime=t.formattedCreateTime;else{var f=u(t);f&&(d.formattedCreateTime=s(f.value))}return d};t.exports={normalizePost:d,normalizePostList:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Array.isArray(t)?t.map((function(t){return d(t,e)})):[]}}},"8bcf":function(t,e,n){var r=n("bdbb")["default"],a=n("56c9");t.exports=function(t){var e=a(t,"string");return"symbol"===r(e)?e:String(e)},t.exports.__esModule=!0,t.exports["default"]=t.exports},"8ed6":function(t,e,n){var r=n("c86c");e=r(!1),e.push([t.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/* components/skeleton/skeleton.wxss */.skeleton-wrapper[data-v-a51e8920]{width:100%;height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:%?20?%;box-sizing:border-box}\n/* 读诗页骨架屏卡片样式 - 匹配读诗页设计 */.skeleton-poem-card[data-v-a51e8920]{width:calc(100% - %?40?%);height:calc(100% - %?80?%);display:flex;flex-direction:column;padding:%?40?% %?20?%;box-sizing:border-box;background:hsla(0,0%,100%,.95);margin:%?40?% %?20?%;border-radius:%?24?%;box-shadow:0 %?8?% %?32?% rgba(0,0,0,.1);position:relative}\n/* 第二个卡片透明度降低 */.skeleton-poem-card.skeleton-secondary[data-v-a51e8920]{opacity:.6;position:absolute;top:%?20?%;left:%?20?%;right:%?20?%;bottom:%?20?%;z-index:-1;-webkit-transform:scale(.95);transform:scale(.95)}\n/* 原创标识骨架 */.skeleton-original-badge[data-v-a51e8920]{position:absolute;top:%?20?%;right:%?20?%;width:%?80?%;height:%?40?%;border-radius:%?20?%}\n/* 作者信息骨架 */.skeleton-author-info[data-v-a51e8920]{display:flex;align-items:center;margin-bottom:%?15?%;padding-bottom:%?10?%}.skeleton-avatar[data-v-a51e8920]{width:%?80?%;height:%?80?%;border-radius:50%;margin-right:%?20?%}.skeleton-name[data-v-a51e8920]{width:%?200?%;height:%?32?%;border-radius:%?16?%}\n/* 居中标题骨架 */.skeleton-title[data-v-a51e8920]{width:60%;height:%?40?%;margin:0 auto %?20?% auto; /* 居中并增加下边距 */border-radius:%?20?%;text-align:center}\n/* 大内容区域骨架 */.skeleton-content-large[data-v-a51e8920]{width:100%;height:%?40?%;margin-bottom:%?20?%;border-radius:%?20?%}.skeleton-animate[data-v-a51e8920]{background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0 50%,#f0f0f0 75%);background-size:200% 100%;-webkit-animation:skeleton-loading-data-v-a51e8920 1.5s infinite linear;animation:skeleton-loading-data-v-a51e8920 1.5s infinite linear}@-webkit-keyframes skeleton-loading-data-v-a51e8920{0%{background-position:200% 0}100%{background-position:-200% 0}}@keyframes skeleton-loading-data-v-a51e8920{0%{background-position:200% 0}100%{background-position:-200% 0}}",""]),t.exports=e},9376:function(t,e,n){n("7a76"),n("c9b5"),t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports["default"]=t.exports},"962f":function(t,e,n){n("795c"),n("64aa"),n("5c47"),n("a1c1"),n("c223"),n("f7a5");var r=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return String(t).padStart(e,"0")},a=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy-MM-dd HH:mm:ss",n=t instanceof Date?t:new Date(t);if(Number.isNaN(n.getTime()))return"";var a={yyyy:String(n.getFullYear()),MM:r(n.getMonth()+1),dd:r(n.getDate()),HH:r(n.getHours()),mm:r(n.getMinutes()),ss:r(n.getSeconds())};return e.replace(/yyyy|MM|dd|HH|mm|ss/g,(function(t){return a[t]}))};t.exports={formatTimeAgo:function(t){var e=new Date,n=new Date(t),r=e.getTime()-n.getTime(),a=Math.floor(r/1e3),i=Math.floor(a/60),o=Math.floor(i/60),s=Math.floor(o/24);if(s>=7){var c=n.getFullYear(),l=("0"+(n.getMonth()+1)).slice(-2),u=("0"+n.getDate()).slice(-2);return"".concat(c,"-").concat(l,"-").concat(u)}return s>=1?"".concat(s,"天前"):o>=1?"".concat(o,"小时前"):i>=1?"".concat(i,"分钟前"):"刚刚"},formatRelativeTime:function(t){var e=Date.now(),n=t instanceof Date?t.getTime():new Date(t).getTime();if(Number.isNaN(n))return"";var r=e-n,i=Math.floor(Math.abs(r)/1e3),o=r>=0?"前":"后";if(i<60)return"刚刚";var s=Math.floor(i/60);if(s<60)return"".concat(s,"分钟").concat(o);var c=Math.floor(s/60);if(c<24)return"".concat(c,"小时").concat(o);var l=Math.floor(c/24);return l<7?"".concat(l,"天").concat(o):a(n,"yyyy-MM-dd")},formatDate:a}},9656:function(t,e,n){"use strict";n.r(e);var r=n("d2fc"),a=n("6519");for(var i in a)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(i);n("412c");var o=n("828b"),s=Object(o["a"])(a["default"],r["b"],r["c"],!1,null,"2b9ad9ce",null,!1,r["a"],void 0);e["default"]=s.exports},"967d":function(t,e,n){"use strict";function r(t,e){for(var n=[],r={},a=0;a<e.length;a++){var i=e[a],o=i[0],s=i[1],c=i[2],l=i[3],u={id:t+":"+a,css:s,media:c,sourceMap:l};r[o]?r[o].parts.push(u):n.push(r[o]={id:o,parts:[u]})}return n}n.r(e),n.d(e,"default",(function(){return v}));var a="undefined"!==typeof document;if("undefined"!==typeof DEBUG&&DEBUG&&!a)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var i={},o=a&&(document.head||document.getElementsByTagName("head")[0]),s=null,c=0,l=!1,u=function(){},d=null,f="undefined"!==typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function v(t,e,n,a){l=n,d=a||{};var o=r(t,e);return p(o),function(e){for(var n=[],a=0;a<o.length;a++){var s=o[a],c=i[s.id];c.refs--,n.push(c)}e?(o=r(t,e),p(o)):o=[];for(a=0;a<n.length;a++){c=n[a];if(0===c.refs){for(var l=0;l<c.parts.length;l++)c.parts[l]();delete i[c.id]}}}}function p(t){for(var e=0;e<t.length;e++){var n=t[e],r=i[n.id];if(r){r.refs++;for(var a=0;a<r.parts.length;a++)r.parts[a](n.parts[a]);for(;a<n.parts.length;a++)r.parts.push(h(n.parts[a]));r.parts.length>n.parts.length&&(r.parts.length=n.parts.length)}else{var o=[];for(a=0;a<n.parts.length;a++)o.push(h(n.parts[a]));i[n.id]={id:n.id,refs:1,parts:o}}}}function g(){var t=document.createElement("style");return t.type="text/css",o.appendChild(t),t}function h(t){var e,n,r=document.querySelector('style[data-vue-ssr-id~="'+t.id+'"]');if(r){if(l)return u;r.parentNode.removeChild(r)}if(f){var a=c++;r=s||(s=g()),e=b.bind(null,r,a,!1),n=b.bind(null,r,a,!0)}else r=g(),e=y.bind(null,r),n=function(){r.parentNode.removeChild(r)};return e(t),function(r){if(r){if(r.css===t.css&&r.media===t.media&&r.sourceMap===t.sourceMap)return;e(t=r)}else n()}}var m=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}();function b(t,e,n,r){var a=n?"":j(r.css);if(t.styleSheet)t.styleSheet.cssText=m(e,a);else{var i=document.createTextNode(a),o=t.childNodes;o[e]&&t.removeChild(o[e]),o.length?t.insertBefore(i,o[e]):t.appendChild(i)}}function y(t,e){var n=j(e.css),r=e.media,a=e.sourceMap;if(r&&t.setAttribute("media",r),d.ssrId&&t.setAttribute("data-vue-ssr-id",e.id),a&&(n+="\n/*# sourceURL="+a.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),t.styleSheet)t.styleSheet.cssText=n;else{while(t.firstChild)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}var w=/%\?([+-]?\d+(\.\d+)?)\?%/g,x=/\.\?%PAGE\?%/g,k=/\?%PAGE\?%\[data-v-[a-z0-9]{8}\]/g,C=/uni-page-body\[data-v-[a-z0-9]{8}\]/g,_=/var\(--status-bar-height\)/gi,T=/var\(--window-top\)/gi,S=/var\(--window-bottom\)/gi,M=/var\(--window-left\)/gi,A=/var\(--window-right\)/gi;function j(t){var e=function(){var t="function"===typeof getApp&&getApp();return t&&t.$route&&t.$route.meta&&t.$route.meta.name||""}();if("undefined"!==typeof uni&&!uni.canIUse("css.var")){var n=function(){var t="function"===typeof getApp&&getApp();if(t&&t.$route&&t.$route.meta&&t.$route.meta.name)return{top:t.$route.meta.windowTop,bottom:t.$route.meta.isTabBar?50:0};return{top:0,bottom:0}}();t=t.replace(_,"0px").replace(T,n.top+"px").replace(S,n.bottom+"px").replace(M,"0px").replace(A,"0px")}return t.replace(k,e).replace(x,"").replace(C,"body."+e+" uni-page-body").replace(/\{[\s\S]+?\}|@media.+?\{/g,(function(t){return"undefined"===typeof uni?t:t.replace(w,(function(t,e){return uni.upx2px(e)+"px"}))}))}},c03a:function(t,e,n){"use strict";n("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default={data:function(){return{}},props:{},methods:{},created:function(){}}},c86c:function(t,e,n){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=function(t,e){var n=t[1]||"",r=t[3];if(!r)return n;if(e&&"function"===typeof btoa){var a=function(t){var e=btoa(unescape(encodeURIComponent(JSON.stringify(t)))),n="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(e);return"/*# ".concat(n," */")}(r),i=r.sources.map((function(t){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(t," */")}));return[n].concat(i).concat([a]).join("\n")}return[n].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n,r){"string"===typeof t&&(t=[[null,t,""]]);var a={};if(r)for(var i=0;i<this.length;i++){var o=this[i][0];null!=o&&(a[o]=!0)}for(var s=0;s<t.length;s++){var c=[].concat(t[s]);r&&a[c[0]]||(n&&(c[2]?c[2]="".concat(n," and ").concat(c[2]):c[2]=n),e.push(c))}},e}},d189:function(t,e,n){var r=n("e2db"),a=n("2774"),i=n("79b7"),o=n("9376");t.exports=function(t){return r(t)||a(t)||i(t)||o()},t.exports.__esModule=!0,t.exports["default"]=t.exports},d2fc:function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){}));var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"container"},[n("v-uni-view",{staticClass:"search-header"},[n("v-uni-view",{staticClass:"search-input-container"},[n("v-uni-view",{staticClass:"search-icon"},[t._v("🔍")]),n("v-uni-input",{staticClass:"search-input",attrs:{placeholder:"搜索帖子...",value:t.searchKeyword,focus:!0,"confirm-type":"search"},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.onSearchInput.apply(void 0,arguments)},confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.onSearchConfirm.apply(void 0,arguments)}}}),t.searchKeyword?n("v-uni-view",{staticClass:"clear-btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.clearSearch.apply(void 0,arguments)}}},[t._v("×")]):t._e()],1),n("v-uni-view",{staticClass:"cancel-btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goBack.apply(void 0,arguments)}}},[t._v("取消")])],1),t.searchKeyword&&!t.isSearching&&t.searchResults.length>0?n("v-uni-view",{staticClass:"search-results"},[n("v-uni-view",{staticClass:"results-header"},[n("v-uni-text",{staticClass:"results-count"},[t._v("找到 "+t._s(t.searchResults.length)+" 个结果")])],1),n("v-uni-view",{staticClass:"post-list"},t._l(t.searchResults,(function(e,r){return n("v-uni-view",{key:r,staticClass:"post-item-wrapper"},[n("v-uni-view",{staticClass:"author-info-outside"},[e.authorAvatar?n("v-uni-image",{staticClass:"author-avatar",attrs:{src:e.authorAvatar,mode:"aspectFill","data-user-id":e._openid},on:{error:function(e){arguments[0]=e=t.$handleEvent(e),t.onAvatarError.apply(void 0,arguments)},click:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.navigateToUserProfile.apply(void 0,arguments)}}}):t._e(),n("v-uni-text",{staticClass:"author-name"},[t._v(t._s(e.authorName))])],1),n("v-uni-view",{staticClass:"post-item",attrs:{"data-postid":e._id},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onPostTap.apply(void 0,arguments)}}},[n("v-uni-view",{staticClass:"post-title"},[t._v(t._s(e.title))]),e.imageUrls&&e.imageUrls.length>0?n("v-uni-view",{staticClass:"image-container-wrapper",style:e.imageStyle,attrs:{"data-src":e.imageUrls[0],"data-original-image-urls":e.originalImageUrls||e.imageUrls},on:{click:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.handlePreview.apply(void 0,arguments)}}},[1===e.imageUrls.length?[n("v-uni-image",{staticClass:"post-image",attrs:{src:e.imageUrls[0],mode:"aspectFill","lazy-load":!0,"data-src":e.imageUrls[0],"data-original-image-urls":e.originalImageUrls||e.imageUrls},on:{error:function(e){arguments[0]=e=t.$handleEvent(e),t.onImageError.apply(void 0,arguments)},click:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.handlePreview.apply(void 0,arguments)}}})]:e.imageUrls.length>1?[n("v-uni-swiper",{staticClass:"image-swiper",attrs:{"indicator-dots":!0,circular:!0}},[t._l(e.imageUrls,(function(r,a){return[n("v-uni-swiper-item",[n("v-uni-image",{staticClass:"post-image",attrs:{src:r,mode:"aspectFill","lazy-load":!0,"data-src":r,"data-original-image-urls":e.originalImageUrls||e.imageUrls},on:{error:function(e){arguments[0]=e=t.$handleEvent(e),t.onImageError.apply(void 0,arguments)},click:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.handlePreview.apply(void 0,arguments)}}})],1)]}))],2)]:t._e()],2):t._e(),e.content?n("v-uni-view",{staticClass:"post-content",staticStyle:{"white-space":"pre-wrap"}},[t._v(t._s(e.content))]):t._e(),e.tags&&e.tags.length>0?n("v-uni-view",{staticClass:"post-tags"},t._l(e.tags,(function(e,r){return n("v-uni-text",{key:r,staticClass:"post-tag",attrs:{"data-tag":e},on:{click:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.onTagClick.apply(void 0,arguments)}}},[t._v("#"+t._s(e))])})),1):t._e()],1),n("v-uni-view",{staticClass:"vote-section"},[n("v-uni-view",{staticClass:"actions-left"}),n("v-uni-view",{staticClass:"actions-right"},[n("v-uni-view",{staticClass:"action-item",attrs:{"data-postid":e._id},on:{click:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.onCommentClick.apply(void 0,arguments)}}},[n("v-uni-text",{staticClass:"action-emoji"},[t._v("💬")]),n("v-uni-text",{staticClass:"action-text"},[t._v(t._s(e.commentCount||0))])],1),n("v-uni-view",{staticClass:"action-item"},[n("v-uni-text",{staticClass:"action-text"},[t._v(t._s(e.votes||0))])],1)],1)],1)],1)})),1)],1):t._e(),t.searchKeyword&&!t.isSearching&&0===t.searchResults.length?n("v-uni-view",{staticClass:"empty-state"},[n("v-uni-view",{staticClass:"empty-icon"},[t._v("🔍")]),n("v-uni-view",{staticClass:"empty-text"},[t._v("没有找到相关帖子")]),n("v-uni-view",{staticClass:"empty-subtext"},[t._v("试试其他关键词吧")])],1):t._e(),!t.searchKeyword&&!t.isSearching&&t.searchHistory.length>0?n("v-uni-view",{staticClass:"search-suggestions"},[n("v-uni-view",{staticClass:"suggestions-header"},[n("v-uni-text",{staticClass:"suggestions-title"},[t._v("搜索历史")]),n("v-uni-text",{staticClass:"clear-history",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.clearHistory.apply(void 0,arguments)}}},[t._v("清空")])],1),n("v-uni-view",{staticClass:"suggestions-list"},t._l(t.searchHistory,(function(e,r){return n("v-uni-view",{key:r,staticClass:"suggestion-item",attrs:{"data-keyword":e},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.selectHistoryKeyword.apply(void 0,arguments)}}},[n("v-uni-text",{staticClass:"suggestion-text"},[t._v(t._s(e))])],1)})),1)],1):t._e(),t.searchKeyword||t.isSearching||0!==t.searchHistory.length?t._e():n("v-uni-view",{staticClass:"hot-searches"},[n("v-uni-view",{staticClass:"hot-header"},[n("v-uni-text",{staticClass:"hot-title"},[t._v("热门搜索")])],1),n("v-uni-view",{staticClass:"hot-list"},t._l(t.hotSearches,(function(e,r){return n("v-uni-view",{key:r,staticClass:"hot-item",attrs:{"data-keyword":e},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.selectHotKeyword.apply(void 0,arguments)}}},[n("v-uni-text",{staticClass:"hot-text"},[t._v(t._s(e))])],1)})),1)],1),t.isSearching?n("v-uni-view",{staticClass:"loading-state"},[n("v-uni-view",{staticClass:"loading-text"},[t._v("搜索中...")])],1):t._e()],1)},a=[]},db04:function(t,e,n){"use strict";var r=n("bb80"),a=n("c435"),i=n("9e70"),o=n("f298"),s=n("862c"),c=r(o),l=r("".slice),u=Math.ceil,d=function(t){return function(e,n,r){var o,d,f=i(s(e)),v=a(n),p=f.length,g=void 0===r?" ":i(r);return v<=p||""===g?f:(o=v-p,d=c(g,u(o/g.length)),d.length>o&&(d=l(d,0,o)),t?f+d:d+f)}};t.exports={start:d(!1),end:d(!0)}},e2db:function(t,e,n){var r=n("e476");t.exports=function(t){if(Array.isArray(t))return r(t)},t.exports.__esModule=!0,t.exports["default"]=t.exports},edf3:function(t,e,n){function r(t){if(!t)return{current:"",urls:[]};if(t.currentTarget&&t.currentTarget.dataset){var e=t.currentTarget.dataset,n=e.src||e.current||e.url||Array.isArray(e.urls)&&e.urls[0]||"",r=e.originalImageUrls||e.urls||e.urlList,a=Array.isArray(r)?r.filter(Boolean):"string"===typeof r&&r?[r]:[];return{current:n,urls:a}}var i=t.current||t.src||Array.isArray(t.urls)&&t.urls[0]||Array.isArray(t.list)&&t.list[0]||"",o=Array.isArray(t.urls)?t.urls.filter(Boolean):Array.isArray(t.list)?t.list.filter(Boolean):[];return{current:i,urls:o}}function a(t){"undefined"!==typeof uni&&uni.showToast&&uni.showToast({title:t,icon:"none"})}n("8f71"),n("bf0f"),t.exports={previewImage:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.fallbackToast,i=void 0===n||n,o=r(t);if(!o.current&&0===o.urls.length)return i&&a("图片数据缺失"),!1;var s=o.urls.length?o.urls:[o.current],c=o.current||s[0];return c&&0!==s.length?uni.previewImage({current:c,urls:s}):(i&&a("图片不可预览"),!1)}}}}]);