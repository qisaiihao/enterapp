(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-favorite-folders-favorite-folders"],{"234e":function(n,r,e){"use strict";var t=e("fe7e"),o=e.n(t);o.a},"4d08":function(n,r,e){"use strict";e.d(r,"b",(function(){return t})),e.d(r,"c",(function(){return o})),e.d(r,"a",(function(){}));var t=function(){var n=this,r=n.$createElement,e=n._self._c||r;return e("v-uni-view",{staticClass:"container"},[n.isLoading?e("v-uni-view",{staticClass:"loading-container"},[e("v-uni-view",{staticClass:"loading-text"},[n._v("加载中...")])],1):n.folders.length>0?e("v-uni-view",{staticClass:"folders-container"},n._l(n.folders,(function(r,t){return e("v-uni-view",{key:t,staticClass:"folder-item",attrs:{"data-folder-id":r._id,"data-folder-name":r.name},on:{longpress:function(r){arguments[0]=r=n.$handleEvent(r),n.onFolderLongPress.apply(void 0,arguments)},click:function(r){arguments[0]=r=n.$handleEvent(r),n.enterFolder.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"folder-icon"},[n._v("📁")]),e("v-uni-view",{staticClass:"folder-info"},[e("v-uni-view",{staticClass:"folder-name"},[n._v(n._s(r.name))]),e("v-uni-view",{staticClass:"folder-meta"},[e("v-uni-text",{staticClass:"item-count"},[n._v(n._s(r.itemCount)+" 个收藏")]),e("v-uni-text",{staticClass:"create-time"},[n._v(n._s(r.createTime))])],1)],1),e("v-uni-view",{staticClass:"folder-arrow"},[n._v(">")])],1)})),1):e("v-uni-view",{staticClass:"empty-container"},[e("v-uni-view",{staticClass:"empty-icon"},[n._v("📁")]),e("v-uni-view",{staticClass:"empty-text"},[n._v("还没有收藏夹")]),e("v-uni-view",{staticClass:"empty-subtext"},[n._v("创建收藏夹来整理你的收藏吧")])],1),e("v-uni-view",{staticClass:"create-button",on:{click:function(r){arguments[0]=r=n.$handleEvent(r),n.showCreateFolder.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"create-icon"},[n._v("+")]),e("v-uni-text",[n._v("创建收藏夹")])],1),n.showCreateModal?e("v-uni-view",{staticClass:"modal-overlay"},[e("v-uni-view",{staticClass:"modal-content"},[e("v-uni-view",{staticClass:"modal-title"},[n._v("创建收藏夹")]),e("v-uni-input",{staticClass:"modal-input",attrs:{placeholder:"请输入收藏夹名称",value:n.newFolderName,maxlength:"20"},on:{input:function(r){arguments[0]=r=n.$handleEvent(r),n.onFolderNameInput.apply(void 0,arguments)},click:function(r){r.stopPropagation(),r.preventDefault(),arguments[0]=r=n.$handleEvent(r),n.trueFun.apply(void 0,arguments)}}}),e("v-uni-view",{staticClass:"modal-buttons"},[e("v-uni-button",{staticClass:"modal-btn cancel-btn",on:{click:function(r){arguments[0]=r=n.$handleEvent(r),n.hideCreateModal.apply(void 0,arguments)}}},[n._v("取消")]),e("v-uni-button",{staticClass:"modal-btn confirm-btn",on:{click:function(r){arguments[0]=r=n.$handleEvent(r),n.createFolder.apply(void 0,arguments)}}},[n._v("创建")])],1)],1)],1):n._e(),n.showEditModal?e("v-uni-view",{staticClass:"modal-overlay"},[e("v-uni-view",{staticClass:"modal-content"},[e("v-uni-view",{staticClass:"modal-title"},[n._v("重命名收藏夹")]),e("v-uni-input",{staticClass:"modal-input",attrs:{placeholder:"请输入收藏夹名称",value:n.editFolderName,maxlength:"20"},on:{input:function(r){arguments[0]=r=n.$handleEvent(r),n.onEditFolderNameInput.apply(void 0,arguments)},click:function(r){r.stopPropagation(),r.preventDefault(),arguments[0]=r=n.$handleEvent(r),n.trueFun.apply(void 0,arguments)}}}),e("v-uni-view",{staticClass:"modal-buttons"},[e("v-uni-button",{staticClass:"modal-btn cancel-btn",on:{click:function(r){arguments[0]=r=n.$handleEvent(r),n.hideEditModal.apply(void 0,arguments)}}},[n._v("取消")]),e("v-uni-button",{staticClass:"modal-btn confirm-btn",on:{click:function(r){arguments[0]=r=n.$handleEvent(r),n.updateFolderName.apply(void 0,arguments)}}},[n._v("保存")])],1)],1)],1):n._e()],1)},o=[]},"609b":function(n,r,e){"use strict";e.r(r);var t=e("4d08"),o=e("733e");for(var a in o)["default"].indexOf(a)<0&&function(n){e.d(r,n,(function(){return o[n]}))}(a);e("234e");var i=e("828b"),s=Object(i["a"])(o["default"],t["b"],t["c"],!1,null,"c9c79060",null,!1,t["a"],void 0);r["default"]=s.exports},"733e":function(n,r,e){"use strict";e.r(r);var t=e("ea99"),o=e.n(t);for(var a in t)["default"].indexOf(a)<0&&function(n){e.d(r,n,(function(){return t[n]}))}(a);r["default"]=o.a},"967d":function(n,r,e){"use strict";function t(n,r){for(var e=[],t={},o=0;o<r.length;o++){var a=r[o],i=a[0],s=a[1],c=a[2],l=a[3],d={id:n+":"+o,css:s,media:c,sourceMap:l};t[i]?t[i].parts.push(d):e.push(t[i]={id:i,parts:[d]})}return e}e.r(r),e.d(r,"default",(function(){return v}));var o="undefined"!==typeof document;if("undefined"!==typeof DEBUG&&DEBUG&&!o)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var a={},i=o&&(document.head||document.getElementsByTagName("head")[0]),s=null,c=0,l=!1,d=function(){},u=null,f="undefined"!==typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function v(n,r,e,o){l=e,u=o||{};var i=t(n,r);return p(i),function(r){for(var e=[],o=0;o<i.length;o++){var s=i[o],c=a[s.id];c.refs--,e.push(c)}r?(i=t(n,r),p(i)):i=[];for(o=0;o<e.length;o++){c=e[o];if(0===c.refs){for(var l=0;l<c.parts.length;l++)c.parts[l]();delete a[c.id]}}}}function p(n){for(var r=0;r<n.length;r++){var e=n[r],t=a[e.id];if(t){t.refs++;for(var o=0;o<t.parts.length;o++)t.parts[o](e.parts[o]);for(;o<e.parts.length;o++)t.parts.push(g(e.parts[o]));t.parts.length>e.parts.length&&(t.parts.length=e.parts.length)}else{var i=[];for(o=0;o<e.parts.length;o++)i.push(g(e.parts[o]));a[e.id]={id:e.id,refs:1,parts:i}}}}function m(){var n=document.createElement("style");return n.type="text/css",i.appendChild(n),n}function g(n){var r,e,t=document.querySelector('style[data-vue-ssr-id~="'+n.id+'"]');if(t){if(l)return d;t.parentNode.removeChild(t)}if(f){var o=c++;t=s||(s=m()),r=w.bind(null,t,o,!1),e=w.bind(null,t,o,!0)}else t=m(),r=b.bind(null,t),e=function(){t.parentNode.removeChild(t)};return r(n),function(t){if(t){if(t.css===n.css&&t.media===n.media&&t.sourceMap===n.sourceMap)return;r(n=t)}else e()}}var h=function(){var n=[];return function(r,e){return n[r]=e,n.filter(Boolean).join("\n")}}();function w(n,r,e,t){var o=e?"":L(t.css);if(n.styleSheet)n.styleSheet.cssText=h(r,o);else{var a=document.createTextNode(o),i=n.childNodes;i[r]&&n.removeChild(i[r]),i.length?n.insertBefore(a,i[r]):n.appendChild(a)}}function b(n,r){var e=L(r.css),t=r.media,o=r.sourceMap;if(t&&n.setAttribute("media",t),u.ssrId&&n.setAttribute("data-vue-ssr-id",r.id),o&&(e+="\n/*# sourceURL="+o.sources[0]+" */",e+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),n.styleSheet)n.styleSheet.cssText=e;else{while(n.firstChild)n.removeChild(n.firstChild);n.appendChild(document.createTextNode(e))}}var y=/%\?([+-]?\d+(\.\d+)?)\?%/g,C=/\.\?%PAGE\?%/g,x=/\?%PAGE\?%\[data-v-[a-z0-9]{8}\]/g,F=/uni-page-body\[data-v-[a-z0-9]{8}\]/g,_=/var\(--status-bar-height\)/gi,E=/var\(--window-top\)/gi,N=/var\(--window-bottom\)/gi,T=/var\(--window-left\)/gi,M=/var\(--window-right\)/gi;function L(n){var r=function(){var n="function"===typeof getApp&&getApp();return n&&n.$route&&n.$route.meta&&n.$route.meta.name||""}();if("undefined"!==typeof uni&&!uni.canIUse("css.var")){var e=function(){var n="function"===typeof getApp&&getApp();if(n&&n.$route&&n.$route.meta&&n.$route.meta.name)return{top:n.$route.meta.windowTop,bottom:n.$route.meta.isTabBar?50:0};return{top:0,bottom:0}}();n=n.replace(_,"0px").replace(E,e.top+"px").replace(N,e.bottom+"px").replace(T,"0px").replace(M,"0px")}return n.replace(x,r).replace(C,"").replace(F,"body."+r+" uni-page-body").replace(/\{[\s\S]+?\}|@media.+?\{/g,(function(n){return"undefined"===typeof uni?n:n.replace(y,(function(n,r){return uni.upx2px(r)+"px"}))}))}},c86c:function(n,r,e){"use strict";n.exports=function(n){var r=[];return r.toString=function(){return this.map((function(r){var e=function(n,r){var e=n[1]||"",t=n[3];if(!t)return e;if(r&&"function"===typeof btoa){var o=function(n){var r=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),e="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r);return"/*# ".concat(e," */")}(t),a=t.sources.map((function(n){return"/*# sourceURL=".concat(t.sourceRoot||"").concat(n," */")}));return[e].concat(a).concat([o]).join("\n")}return[e].join("\n")}(r,n);return r[2]?"@media ".concat(r[2]," {").concat(e,"}"):e})).join("")},r.i=function(n,e,t){"string"===typeof n&&(n=[[null,n,""]]);var o={};if(t)for(var a=0;a<this.length;a++){var i=this[a][0];null!=i&&(o[i]=!0)}for(var s=0;s<n.length;s++){var c=[].concat(n[s]);t&&o[c[0]]||(e&&(c[2]?c[2]="".concat(e," and ").concat(c[2]):c[2]=e),r.push(c))}},r}},ea99:function(n,r,e){"use strict";e("6a54"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,e("bf0f"),e("2797"),e("0c26"),e("c223");var t=e("11ca"),o=t.cloudCall,a={data:function(){return{folders:[],isLoading:!0,showCreateModal:!1,newFolderName:"",editingFolder:null,showEditModal:!1,editFolderName:""}},onLoad:function(){console.log("=== 收藏夹列表页面 onLoad ==="),this.loadFolders()},onShow:function(){console.log("=== 收藏夹列表页面 onShow ==="),this.loadFolders()},methods:{callCloudFunction:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return o(n,r,Object.assign({pageTag:"favorite-folders",context:this,requireAuth:!0},e))},loadFolders:function(){var n=this;this.setData({isLoading:!0}),this.callCloudFunction("getMyProfileData",{action:"getFavoriteFolders"}).then((function(r){if(console.log("获取收藏夹返回数据:",r),r.result&&r.result.success){var e=r.result.folders||[];console.log("收藏夹数据:",e),e.forEach((function(n,r){console.log("收藏夹".concat(r,":"),{_id:n._id,name:n.name,itemCount:n.itemCount,createTime:n.createTime})})),n.setData({folders:e,isLoading:!1})}else{var t;console.error("获取收藏夹失败:",r.result),uni.showToast({title:(null===(t=r.result)||void 0===t?void 0:t.message)||"加载失败",icon:"none"}),n.setData({isLoading:!1,folders:[]})}})).catch((function(r){console.error("获取收藏夹失败:",r),uni.showToast({title:"网络错误",icon:"none"}),n.setData({isLoading:!1})}))},showCreateFolder:function(){this.setData({showCreateModal:!0,newFolderName:""})},hideCreateModal:function(){this.setData({showCreateModal:!1})},onFolderNameInput:function(n){this.setData({newFolderName:n.detail.value})},createFolder:function(){var n=this,r=this.newFolderName.trim();r?(console.log("开始创建收藏夹，名称:",r),uni.showLoading({title:"创建中..."}),this.callCloudFunction("getMyProfileData",{action:"createFavoriteFolder",folderName:r}).then((function(r){uni.hideLoading(),console.log("创建收藏夹云函数返回:",r),r&&r.result?r.result.success?(uni.showToast({title:"创建成功"}),n.setData({showCreateModal:!1,newFolderName:""}),setTimeout((function(){n.loadFolders()}),300)):(console.error("创建收藏夹业务失败:",r.result),uni.showToast({title:r.result.message||"创建失败",icon:"none"})):(console.error("创建收藏夹返回格式异常:",r),uni.showToast({title:"创建失败：返回格式错误",icon:"none"}))})).catch((function(n){uni.hideLoading(),console.error("创建收藏夹云函数调用失败:",n),uni.showToast({title:"网络错误："+(n.errMsg||"未知错误"),icon:"none"})}))):uni.showToast({title:"请输入收藏夹名称",icon:"none"})},enterFolder:function(n){console.log("=== 点击收藏夹项 ==="),console.log("事件对象:",n),console.log("dataset:",n.currentTarget.dataset);var r=n.currentTarget.dataset.folderId,e=n.currentTarget.dataset.folderName;if(console.log("提取的folderId:",r),console.log("提取的folderName:",e),!r)return console.error("错误：folderId 为空"),void uni.showToast({title:"收藏夹ID为空",icon:"none"});var t="/pages/favorite-content/favorite-content?folderId=".concat(r,"&folderName=").concat(encodeURIComponent(e||""));console.log("跳转URL:",t),uni.navigateTo({url:t,success:function(){console.log("跳转成功")},fail:function(n){console.error("跳转失败:",n)}})},onFolderLongPress:function(n){var r=this,e=n.currentTarget.dataset.folderId,t=n.currentTarget.dataset.folderName;uni.showActionSheet({itemList:["重命名","删除"],success:function(n){0===n.tapIndex?r.showEditFolder(e,t):1===n.tapIndex&&r.deleteFolder(e,t)}})},showEditFolder:function(n,r){this.setData({showEditModal:!0,editingFolder:n,editFolderName:r})},hideEditModal:function(){this.setData({showEditModal:!1,editingFolder:null,editFolderName:""})},onEditFolderNameInput:function(n){this.setData({editFolderName:n.detail.value})},updateFolderName:function(){var n=this.editFolderName.trim();n?(uni.showToast({title:"重命名功能待实现",icon:"none"}),this.hideEditModal()):uni.showToast({title:"请输入收藏夹名称",icon:"none"})},deleteFolder:function(n,r){uni.showModal({title:"确认删除",content:'确定要删除收藏夹"'.concat(r,'"吗？删除后其中的所有收藏内容也会被删除。'),success:function(n){n.confirm&&uni.showToast({title:"删除功能待实现",icon:"none"})}})},trueFun:function(){console.log("占位：函数 true 未声明")}}};r.default=a},f84b:function(n,r,e){var t=e("c86c");r=t(!1),r.push([n.i,"\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/* pages/favorite-folders/favorite-folders.wxss */.container[data-v-c9c79060]{min-height:100vh;background-color:#f5f5f5;padding:%?20?%}.loading-container[data-v-c9c79060]{display:flex;justify-content:center;align-items:center;height:%?400?%}.loading-text[data-v-c9c79060]{color:#999;font-size:%?28?%}.folders-container[data-v-c9c79060]{padding-bottom:%?120?%}.folder-item[data-v-c9c79060]{display:flex;align-items:center;background:#fff;border-radius:%?16?%;padding:%?30?%;margin-bottom:%?20?%;box-shadow:0 %?2?% %?8?% rgba(0,0,0,.1)}.folder-icon[data-v-c9c79060]{font-size:%?48?%;margin-right:%?24?%}.folder-info[data-v-c9c79060]{flex:1}.folder-name[data-v-c9c79060]{font-size:%?32?%;font-weight:500;color:#333;margin-bottom:%?8?%}.folder-meta[data-v-c9c79060]{display:flex;align-items:center;font-size:%?24?%;color:#999}.item-count[data-v-c9c79060]{margin-right:%?20?%}.folder-arrow[data-v-c9c79060]{font-size:%?32?%;color:#ccc}.empty-container[data-v-c9c79060]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:%?400?%}.empty-icon[data-v-c9c79060]{font-size:%?80?%;margin-bottom:%?20?%;opacity:.5}.empty-text[data-v-c9c79060]{font-size:%?32?%;color:#666;margin-bottom:%?12?%}.empty-subtext[data-v-c9c79060]{font-size:%?26?%;color:#999}.create-button[data-v-c9c79060]{position:fixed;bottom:%?40?%;right:%?40?%;display:flex;align-items:center;background:#9ed7ee;color:#fff;padding:%?20?% %?30?%;border-radius:%?50?%;box-shadow:0 %?4?% %?12?% rgba(7,193,96,.3);font-size:%?28?%}.create-icon[data-v-c9c79060]{font-size:%?32?%;margin-right:%?8?%}\r\n/* 弹窗样式 */.modal-overlay[data-v-c9c79060]{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.5);display:flex;align-items:center;justify-content:center;z-index:1000}.modal-content[data-v-c9c79060]{background:#fff;border-radius:%?16?%;padding:%?40?%;margin:%?40?%;width:calc(100% - %?80?%);max-width:%?500?%;position:relative;z-index:1001}.modal-title[data-v-c9c79060]{font-size:%?36?%;font-weight:500;color:#333;margin-bottom:%?30?%;text-align:center}.modal-input[data-v-c9c79060]{width:100%;height:%?80?%;border:%?2?% solid #e0e0e0;border-radius:%?8?%;padding:0 %?20?%;font-size:%?28?%;margin-bottom:%?30?%;box-sizing:border-box}.modal-input[data-v-c9c79060]:focus{border-color:#9ed7ee}.modal-buttons[data-v-c9c79060]{display:flex;gap:%?20?%}.modal-btn[data-v-c9c79060]{flex:1;height:%?80?%;border-radius:%?8?%;font-size:%?28?%;border:none;position:relative;z-index:1002}.cancel-btn[data-v-c9c79060]{background:#f5f5f5;color:#666}.confirm-btn[data-v-c9c79060]{background:#9ed7ee;color:#fff}",""]),n.exports=r},fe7e:function(n,r,e){var t=e("f84b");t.__esModule&&(t=t.default),"string"===typeof t&&(t=[[n.i,t,""]]),t.locals&&(n.exports=t.locals);var o=e("967d").default;o("0af47ae8",t,!0,{sourceMap:!1,shadowMode:!1})}}]);