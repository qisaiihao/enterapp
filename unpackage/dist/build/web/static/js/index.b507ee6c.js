(function(e){function n(n){for(var a,i,s=n[0],u=n[1],l=n[2],f=0,p=[];f<s.length;f++)i=s[f],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&p.push(r[i][0]),r[i]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(e[a]=u[a]);c&&c(n);while(p.length)p.shift()();return o.push.apply(o,l||[]),t()}function t(){for(var e,n=0;n<o.length;n++){for(var t=o[n],a=!0,s=1;s<t.length;s++){var u=t[s];0!==r[u]&&(a=!1)}a&&(o.splice(n--,1),e=i(i.s=t[0]))}return e}var a={},r={index:0},o=[];function i(n){if(a[n])return a[n].exports;var t=a[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,i),t.l=!0,t.exports}i.e=function(e){var n=[],t=r[e];if(0!==t)if(t)n.push(t[2]);else{var a=new Promise((function(n,a){t=r[e]=[n,a]}));n.push(t[2]=a);var o,s=document.createElement("script");s.charset="utf-8",s.timeout=120,i.nc&&s.setAttribute("nonce",i.nc),s.src=function(e){return i.p+"static/js/"+({"pages-add-add":"pages-add-add","pages-create-discussion-create-discussion":"pages-create-discussion-create-discussion","pages-draft-box-draft-box":"pages-draft-box-draft-box","pages-fans-fans":"pages-fans-fans","pages-favorite-content-favorite-content":"pages-favorite-content-favorite-content","pages-favorite-folders-favorite-folders":"pages-favorite-folders-favorite-folders","pages-feedback-admin-feedback-admin":"pages-feedback-admin-feedback-admin","pages-feedback-feedback":"pages-feedback-feedback","pages-following-following":"pages-following-following","pages-image-manager-image-manager":"pages-image-manager-image-manager","pages-index-index~pages-post-detail-post-detail~pages-user-profile-user-profile":"pages-index-index~pages-post-detail-post-detail~pages-user-profile-user-profile","pages-index-index":"pages-index-index","pages-post-detail-post-detail":"pages-post-detail-post-detail","pages-user-profile-user-profile":"pages-user-profile-user-profile","pages-login-login":"pages-login-login","pages-messages-messages":"pages-messages-messages","pages-mountain-mountain~pages-poem-square-poem-square":"pages-mountain-mountain~pages-poem-square-poem-square","pages-mountain-mountain":"pages-mountain-mountain","pages-poem-square-poem-square":"pages-poem-square-poem-square","pages-my-likes-my-likes":"pages-my-likes-my-likes","pages-portfolio-detail-portfolio-detail":"pages-portfolio-detail-portfolio-detail","pages-portfolio-portfolio":"pages-portfolio-portfolio","pages-preview-preview":"pages-preview-preview","pages-profile-edit-profile-edit":"pages-profile-edit-profile-edit","pages-profile-profile":"pages-profile-profile","pages-register-register":"pages-register-register","pages-search-search":"pages-search-search","pages-splash-splash":"pages-splash-splash","pages-tag-filter-tag-filter":"pages-tag-filter-tag-filter"}[e]||e)+"."+{"pages-add-add":"be8e705f","pages-create-discussion-create-discussion":"71dbe1e4","pages-draft-box-draft-box":"849830d1","pages-fans-fans":"4255368c","pages-favorite-content-favorite-content":"5128ff60","pages-favorite-folders-favorite-folders":"26fb96c9","pages-feedback-admin-feedback-admin":"4200f9f6","pages-feedback-feedback":"4ee50cb8","pages-following-following":"d7e4df0e","pages-image-manager-image-manager":"ba522c40","pages-index-index~pages-post-detail-post-detail~pages-user-profile-user-profile":"d5e804ea","pages-index-index":"d5c1e3b4","pages-post-detail-post-detail":"924fa5a1","pages-user-profile-user-profile":"3afcdcbf","pages-login-login":"74cfa999","pages-messages-messages":"6013ddb4","pages-mountain-mountain~pages-poem-square-poem-square":"6bd95e25","pages-mountain-mountain":"c9f77ff2","pages-poem-square-poem-square":"04b065ae","pages-my-likes-my-likes":"9d152a82","pages-portfolio-detail-portfolio-detail":"83081623","pages-portfolio-portfolio":"df128762","pages-preview-preview":"b99eb71b","pages-profile-edit-profile-edit":"e1bb4af4","pages-profile-profile":"d131e25d","pages-register-register":"aca8d8ae","pages-search-search":"ad94459c","pages-splash-splash":"c85ebbca","pages-tag-filter-tag-filter":"64603bd0"}[e]+".js"}(e);var u=new Error;o=function(n){s.onerror=s.onload=null,clearTimeout(l);var t=r[e];if(0!==t){if(t){var a=n&&("load"===n.type?"missing":n.type),o=n&&n.target&&n.target.src;u.message="Loading chunk "+e+" failed.\n("+a+": "+o+")",u.name="ChunkLoadError",u.type=a,u.request=o,t[1](u)}r[e]=void 0}};var l=setTimeout((function(){o({type:"timeout",target:s})}),12e4);s.onerror=s.onload=o,document.head.appendChild(s)}return Promise.all(n)},i.m=e,i.c=a,i.d=function(e,n,t){i.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,n){if(1&n&&(e=i(e)),8&n)return e;if(4&n&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(i.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var a in e)i.d(t,a,function(n){return e[n]}.bind(null,a));return t},i.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(n,"a",n),n},i.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},i.p="/",i.oe=function(e){throw console.error(e),e};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],u=s.push.bind(s);s.push=n,s=s.slice();for(var l=0;l<s.length;l++)n(s[l]);var c=u;o.push([0,"chunk-vendors"]),t()})({0:function(e,n,t){e.exports=t("cce8")},"0312":function(e,n,t){"use strict";t.r(n);var a=t("f6b7"),r=t("c040");for(var o in r)["default"].indexOf(o)<0&&function(e){t.d(n,e,(function(){return r[e]}))}(o);t("279a");var i=t("828b"),s=Object(i["a"])(r["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],void 0);n["default"]=s.exports},"0592":function(e,n,t){"use strict";t("6a54"),Object.defineProperty(n,"__esModule",{value:!0}),n.handleDataset=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e&&!e.currentTarget&&(n.tagId?e.currentTarget={id:n.tagId}:e.currentTarget={dataset:n})}},"0797":function(e,n,t){"use strict";t("6a54");var a=t("f5bd").default;Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,t("d4b5"),t("7a76"),t("c9b5");var r=a(t("2634")),o=a(t("2fdc")),i={data:function(){return{globalData:{userInfo:null,openid:null}}},onLaunch:function(){uni.removeStorageSync("cachedPostList"),this.loginAndCheckUser(),this.globalData._loginProcessStarted=!0},methods:{loginAndCheckUser:function(){var e=this;return(0,o.default)((0,r.default)().mark((function n(){var t,a,o,i,s,u,l,c,f,p,d,g,m,h;return(0,r.default)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.$tcb){n.next=3;break}return console.error("致命错误：this.$tcb 未定义！请检查 main.js 的初始化代码是否执行！"),n.abrupt("return");case 3:if(t=uni.getStorageSync("userInfo"),!t||!t._openid){n.next=35;break}if(n.prev=5,a=e.$tcb.auth().currentUser,a){n.next=10;break}return n.next=10,e.$tcb.auth().signInAnonymously();case 10:return n.next=12,e.$tcb.callFunction({name:"getUserProfile",data:{userId:t._openid}});case 12:if(o=n.sent,!(o.result&&o.result.success&&o.result.userInfo)){n.next=26;break}return i=o.result.userInfo,e.globalData.userInfo=i,e.globalData.openid=i._openid,s=getApp(),s&&(s.globalData=s.globalData||{},s.globalData.userInfo=i,s.globalData.openid=i._openid,console.log("✅ [登录流程] getApp().globalData 已更新:",s.globalData)),uni.setStorageSync("userInfo",i),e.globalData._loginProcessCompleted=!0,s&&(s.globalData._loginProcessCompleted=!0),console.log("✅ [登录流程] 缓存验证成功，用户已登录"),n.abrupt("return");case 26:console.log("⚠️ [登录流程] 云端验证失败，用户账户不存在，将重新注册"),uni.removeStorageSync("userInfo");case 28:n.next=35;break;case 30:n.prev=30,n.t0=n["catch"](5),console.error("❌ [登录流程] 云端验证失败:",n.t0),console.log("⚠️ [登录流程] 验证失败，将重新注册"),uni.removeStorageSync("userInfo");case 35:if(console.log("🤔 [登录流程] 缓存未命中，开始执行云端登录..."),n.prev=36,u=e.$tcb.auth().currentUser,u){n.next=46;break}return console.log("🔐 [认证] 尝试匿名登录..."),n.next=42,e.$tcb.auth().signInAnonymously();case 42:l=n.sent,console.log("✅ [认证] 匿名登录成功:",l),n.next=47;break;case 46:console.log("✅ [认证] 用户已登录，跳过匿名登录");case 47:return n.next=49,e.$tcb.callFunction({name:"login"});case 49:if(c=n.sent,console.log("🔍 [调试] login云函数完整返回数据:",c),console.log("🔍 [调试] loginRes.result:",c.result),console.log("🔍 [调试] loginRes.openid:",c.openid),f=null,!c.result||!c.result.openid){n.next=59;break}f=c.result.openid,console.log("✅ [调试] 从result.openid获取到openid:",f),n.next=72;break;case 59:if(!c.openid){n.next=64;break}f=c.openid,console.log("✅ [调试] 从根级别openid获取到openid:",f),n.next=72;break;case 64:if(!c.result||!c.result.uid){n.next=69;break}f=c.result.uid,console.log("✅ [调试] 从result.uid获取到openid:",f),n.next=72;break;case 69:throw console.error("❌ [登录流程] 无法从login云函数返回数据中获取openid"),console.error("❌ [登录流程] 完整返回数据:",JSON.stringify(c,null,2)),new Error("云函数 login 未返回 openid");case 72:return console.log("✅ [云函数 login] 调用成功, openid: ",f),e.globalData.openid=f,uni.setStorageSync("userOpenId",f),p=e.$tcb.database(),n.next=78,p.collection("users").where({_openid:f}).get();case 78:d=n.sent,d.data.length>0?(g=d.data[0],console.log("✅ [数据库查询] 用户已注册, 登录成功: ",g),e.globalData.userInfo=g,uni.setStorageSync("userInfo",g)):(console.log("🤔 [数据库查询] 新用户，尚未注册"),e.globalData.userInfo=null),m=getApp(),m&&(m.globalData=m.globalData||{},m.globalData.userInfo=e.globalData.userInfo,m.globalData.openid=e.globalData.openid,m.globalData._loginProcessCompleted=!0,console.log("✅ [登录流程] getApp().globalData 已更新:",m.globalData)),n.next=89;break;case 84:n.prev=84,n.t1=n["catch"](36),h=getApp(),h&&(h.globalData=h.globalData||{},h.globalData._loginProcessCompleted=!0),uni.showToast({icon:"none",title:"登录失败，请稍后重试"});case 89:case"end":return n.stop()}}),n,null,[[5,30],[36,84]])})))()}}};n.default=i},"11d0":function(e,n,t){"use strict";t("6a54"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=null,r=function(e,n,t){null!==a&&clearTimeout(a),a=setTimeout((function(){e[n]()}),t)};n.default=r},"1ae8":function(e,n,t){var a=t("dd7e").default,r=t("46c5").default,o=t("4cf1").default,i=["userOpenId","openid"];function s(){if("function"===typeof getApp)try{return getApp()}catch(e){console.warn("[auth] 获取 App 实例失败",e)}return null}function u(){if("undefined"===typeof uni||"function"!==typeof uni.getStorageSync)return null;var e,n=o(i);try{for(n.s();!(e=n.n()).done;){var t=e.value;try{var a=uni.getStorageSync(t);if(a)return a}catch(r){console.warn("[auth] 读取本地 openid(".concat(t,") 失败"),r)}}}catch(s){n.e(s)}finally{n.f()}return null}function l(e){if(e){var n=s();if(n&&(n.globalData=n.globalData||{},n.globalData.openid=e),"undefined"!==typeof uni&&"function"===typeof uni.setStorageSync)try{uni.setStorageSync("userOpenId",e)}catch(t){console.warn("[auth] 缓存 openid 失败",t)}}}function c(){return c=r(a().mark((function e(){var n,t,r;return a().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=s(),t=n&&n.globalData&&n.globalData.openid,!t){e.next=4;break}return e.abrupt("return",t);case 4:if(r=u(),!r){e.next=8;break}return l(r),e.abrupt("return",r);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}e.exports={getOpenId:function(){return c.apply(this,arguments)},setLoginState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=s();t&&(t.globalData=t.globalData||{},n&&(t.globalData.openid=n,l(n)),e&&(t.globalData.userInfo=Object.assign({},t.globalData.userInfo||{},e)),t.globalData._loginProcessCompleted=!0)}}},"23c8":function(e,n,t){"use strict";t("6a54");var a=t("f5bd").default;Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=a(t("9b1b")),o=t("7e19"),i=t("70cf"),s=t("0592"),u=t("c038"),l=t("69c7"),c=t("74b5"),f=t("5f66"),p=t("fb82"),d=t("c57a"),g={install:function(e,n){e.mixin((0,r.default)((0,r.default)({},o.pageLifetimes),{},{methods:{clone:i.clone,handleDataset:s.handleDataset,escape2Html:u.escape2Html,html2Escape:u.html2Escape,parseEventDynamicCode:l.parseEventDynamicCode,getTabBar:c.getTabBar,getRelationNodes:f.getRelationNodes,zpSelectComponent:p.selectComponent,zpSelectAllComponents:p.selectAllComponents,setData:d.setData}}))}};n.default=g},2729:function(e,n,t){"use strict";t("6a54"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.EVENTS=void 0,n.emitAvatarUpdated=r,n.emitFavoriteChanged=i,n.emitPostCreated=o;var a={AVATAR_UPDATED:"avatar-updated",POST_CREATED:"post-created",FAVORITE_CHANGED:"favorite-changed"};function r(e){try{e&&uni&&uni.$emit&&uni.$emit(a.AVATAR_UPDATED,{userId:e})}catch(n){}}function o(e){try{e&&uni&&uni.$emit&&uni.$emit(a.POST_CREATED,{userId:e})}catch(n){}}function i(e){var n=e.userId,t=e.postId,r=e.favored;try{n&&uni&&uni.$emit&&uni.$emit(a.FAVORITE_CHANGED,{userId:n,postId:t,favored:!!r})}catch(o){}}n.EVENTS=a;var s={EVENTS:a,emitAvatarUpdated:r,emitPostCreated:o,emitFavoriteChanged:i};n.default=s},"279a":function(e,n,t){"use strict";var a=t("7d83"),r=t.n(a);r.a},"38db":function(e,n,t){(function(n){var a=t("dd7e").default,r=t("46c5").default,o=t("bdbb").default;t("f7a5"),t("7a76"),t("c9b5"),t("bf0f"),t("4626"),t("c223"),t("e966");var i=t("f3c3"),s=t("1ae8");function u(e){return e&&"object"===o(e)?Array.isArray(e)?e.slice():Object.assign({},e):{}}function l(e,n,t){var a=t instanceof Error?t:new Error(n||e);return a.code=e,t&&t!==a&&(a.originalError=t),a}function c(e){if(e&&e.$tcb&&"function"===typeof e.$tcb.callFunction)return e.$tcb;if("function"===typeof getApp){var n=getApp();if(n&&n.$tcb&&"function"===typeof n.$tcb.callFunction)return n.$tcb}return"undefined"!==typeof uni&&uni.$tcb&&"function"===typeof uni.$tcb.callFunction?uni.$tcb:null}function f(e,n){return p.apply(this,arguments)}function p(){return p=r(a().mark((function e(t,r){var o;return a().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("tcb"!==t){e.next=5;break}if(o=c(r.context),o){e.next=4;break}throw l("TCB_NOT_AVAILABLE","TCB 实例不可用");case 4:return e.abrupt("return",o.callFunction(r.options));case 5:if("wx-cloud"!==t||"undefined"===typeof wx||!wx.cloud||"function"!==typeof wx.cloud.callFunction){e.next=7;break}return e.abrupt("return",wx.cloud.callFunction(r.options));case 7:if("undefined"===typeof n||"function"!==typeof n.callFunction){e.next=9;break}return e.abrupt("return",n.callFunction(r.options));case 9:throw l("NO_CLOUD_METHOD","当前环境不支持云函数调用");case 10:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}function d(){return d=r(a().mark((function e(n){var t,r,o,c,p,d,g,m,h,y,_,b,v,C,x,w,k,S,P,T,A,D,I,O=arguments;return a().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=O.length>1&&void 0!==O[1]?O[1]:{},r=O.length>2&&void 0!==O[2]?O[2]:{},n&&"string"===typeof n){e.next=4;break}return e.abrupt("return",Promise.reject(l("INVALID_NAME","云函数名称无效")));case 4:if(o=r.pageTag,c=void 0===o?"global":o,p=r.retry,d=void 0===p?0:p,g=r.retryDelay,m=void 0===g?300:g,h=r.context,y=r.injectOpenId,_=r.requireAuth,b=void 0!==_&&_,v="boolean"===typeof y?y:!["login","getOpenId"].includes(n),C=u(t),x=null,!v){e.next=29;break}return e.prev=9,e.next=12,s.getOpenId();case 12:x=e.sent,e.next=19;break;case 15:throw e.prev=15,e.t0=e["catch"](9),console.error("[cloudCall][".concat(c,"] 获取 openid 失败"),e.t0),l("NO_OPENID","获取 openid 失败",e.t0);case 19:if(x){e.next=28;break}if(!b){e.next=25;break}throw w=l("NO_OPENID","用户未登录或 openid 缺失"),"undefined"!==typeof uni&&uni.showToast&&uni.showToast({title:"请先登录",icon:"none"}),console.warn("[cloudCall][".concat(c,'] openid 缺失，调用 "').concat(n,'" 失败')),w;case 25:console.warn("[cloudCall][".concat(c,'] openid 缺失，调用 "').concat(n,'" 将不注入 openid')),e.next=29;break;case 28:C.openid||(C.openid=x);case 29:k=i.getCloudFunctionMethod(),S=Math.max(0,parseInt(d,10))+1,P=1;case 32:if(!(P<=S)){e.next=59;break}return e.prev=33,console.log("[cloudCall][".concat(c,'] 调用云函数 "').concat(n,'"（尝试 ').concat(P,"/").concat(S,"）"),C),e.next=37,f(k,{context:h,options:{name:n,data:C}});case 37:return T=e.sent,console.log("[cloudCall][".concat(c,'] 云函数 "').concat(n,'" 调用成功'),T),e.abrupt("return",T);case 42:if(e.prev=42,e.t1=e["catch"](33),A=P===S,D=e.t1&&e.t1.code?e.t1.code:null===e.t1||void 0===e.t1?void 0:e.t1.errCode,console.error("[cloudCall][".concat(c,'] 云函数 "').concat(n,'" 调用失败（尝试 ').concat(P,"/").concat(S,"）"),e.t1),"NO_OPENID"!==D){e.next=49;break}throw l("NO_OPENID","用户未登录或 openid 缺失",e.t1);case 49:if(!A){e.next=53;break}throw I=l(D||"CLOUD_CALL_FAILED","云函数调用失败",e.t1),"undefined"!==typeof uni&&uni.showToast&&uni.showToast({title:"网络异常，请稍后再试",icon:"none"}),I;case 53:if(!(m>0)){e.next=56;break}return e.next=56,new Promise((function(e){return setTimeout(e,m)}));case 56:P+=1,e.next=32;break;case 59:throw l("CLOUD_CALL_FAILED","云函数调用失败");case 60:case"end":return e.stop()}}),e,null,[[9,15],[33,42]])}))),d.apply(this,arguments)}e.exports={cloudCall:function(e){return d.apply(this,arguments)}}}).call(this,t("861b")["uniCloud"])},"406c":function(e,n,t){"use strict";t("6a54"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;n.default={pages:[{path:"pages/splash/splash",style:{usingComponents:{},navigationStyle:"custom"}},{path:"pages/preview/preview",style:{navigationStyle:"custom",usingComponents:{}}},{path:"pages/login/login",style:{navigationStyle:"custom",usingComponents:{}}},{path:"pages/register/register",style:{navigationStyle:"custom",usingComponents:{}}},{path:"pages/my-likes/my-likes",style:{navigationBarTitleText:"我的点赞",enablePullDownRefresh:!0,usingComponents:{}}},{path:"pages/index/index",style:{navigationStyle:"custom",enablePullDownRefresh:!0,usingComponents:{skeleton:"/components/skeleton/skeleton"}}},{path:"pages/mountain/mountain",style:{navigationStyle:"custom",usingComponents:{skeleton:"/components/skeleton/skeleton","folder-selector":"/components/folder-selector/folder-selector"},enablePullDownRefresh:!0}},{path:"pages/profile/profile",style:{navigationStyle:"custom",enablePullDownRefresh:!0,backgroundTextStyle:"dark",usingComponents:{}}},{path:"pages/following/following",style:{navigationBarTitleText:"我关注的人",enablePullDownRefresh:!0,usingComponents:{}}},{path:"pages/fans/fans",style:{navigationBarTitleText:"我的粉丝",enablePullDownRefresh:!0,usingComponents:{}}},{path:"pages/user-profile/user-profile",style:{usingComponents:{},navigationBarTitleText:"用户主页",enablePullDownRefresh:!0,onReachBottomDistance:50}},{path:"pages/profile-edit/profile-edit",style:{navigationBarTitleText:"编辑个人资料",usingComponents:{}}},{path:"pages/post-detail/post-detail",style:{navigationStyle:"custom",usingComponents:{"cloud-tip-modal":"/components/cloudTipModal/index","folder-selector":"/components/folder-selector/folder-selector"}}},{path:"pages/add/add",style:{navigationStyle:"custom",usingComponents:{}}},{path:"pages/favorite-folders/favorite-folders",style:{usingComponents:{},navigationBarTitleText:"我的收藏夹"}},{path:"pages/favorite-content/favorite-content",style:{usingComponents:{},enablePullDownRefresh:!0,onReachBottomDistance:50}},{path:"pages/messages/messages",style:{navigationBarTitleText:"消息通知",enablePullDownRefresh:!0,backgroundColor:"#f8f9fa",backgroundTextStyle:"dark",usingComponents:{}}},{path:"pages/image-manager/image-manager",style:{navigationBarTitleText:"图片管理",usingComponents:{}}},{path:"pages/tag-filter/tag-filter",style:{usingComponents:{skeleton:"/components/skeleton/skeleton"},enablePullDownRefresh:!0,onReachBottomDistance:50}},{path:"pages/search/search",style:{usingComponents:{skeleton:"/components/skeleton/skeleton"},navigationBarTitleText:"搜索",navigationBarBackgroundColor:"#ffffff",navigationBarTextStyle:"black",backgroundColor:"#f7f8fa"}},{path:"pages/portfolio/portfolio",style:{usingComponents:{},navigationBarTitleText:"作品集",enablePullDownRefresh:!0}},{path:"pages/portfolio-detail/portfolio-detail",style:{usingComponents:{},navigationBarTitleText:"作品集详情",enablePullDownRefresh:!0}},{path:"pages/draft-box/draft-box",style:{usingComponents:{},navigationBarTitleText:"草稿箱"}},{path:"pages/feedback/feedback",style:{navigationBarTitleText:"意见反馈",navigationStyle:"custom",backgroundColor:"#f5f5f5",usingComponents:{}}},{path:"pages/feedback-admin/feedback-admin",style:{navigationBarTitleText:"反馈管理",navigationStyle:"custom",backgroundColor:"#f5f5f5",enablePullDownRefresh:!0,usingComponents:{}}},{path:"pages/poem-square/poem-square",style:{navigationStyle:"custom",enablePullDownRefresh:!0,usingComponents:{skeleton:"/components/skeleton/skeleton"}}},{path:"pages/create-discussion/create-discussion",style:{navigationStyle:"custom",backgroundColor:"#f5f5f5",usingComponents:{}}}],tabBar:{color:"#999999",selectedColor:"#9ed7ee",backgroundColor:"#ffffff",borderStyle:"black",list:[{pagePath:"pages/index/index",text:"广场",iconPath:"static/images/market.png",selectedIconPath:"static/images/market.png"},{pagePath:"pages/poem-square/poem-square",text:"路",iconPath:"static/images/road.png",selectedIconPath:"static/images/road.png"},{pagePath:"pages/mountain/mountain",text:"山",iconPath:"static/images/mountain.png",selectedIconPath:"static/images/mountain.png"},{pagePath:"pages/profile/profile",text:"湖",iconPath:"static/images/pools.png",selectedIconPath:"static/images/pools.png"}]},sitemapLocation:"sitemap.json",style:"v2",lazyCodeLoading:"requiredComponents",globalStyle:{backgroundColor:"#F6F6F6",backgroundTextStyle:"light",navigationBarBackgroundColor:"#F6F6F6",navigationBarTitleText:"回车键",navigationBarTextStyle:"black"},subPackages:[]}},"51f0":function(e,n,t){var a=t("c86c");n=a(!1),n.push([e.i,"\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/* 全局样式：修改下拉刷新的loading转圈圈颜色为黑色 */\r\n/* 针对微信小程序 */\r\n\r\n\r\n/* 针对H5 */\n.uni-pull-refresh{color:#000!important}.uni-pull-refresh .uni-pull-refresh-spinner{color:#000!important}.uni-pull-refresh .uni-pull-refresh-spinner::before{color:#000!important}\r\n\r\n/* 针对App */\r\n\r\n\r\n/* 通用样式：修改所有下拉刷新的loading颜色 */.uni-pull-refresh,\r\n.wx-pull-refresh,\r\n.pull-refresh{color:#000!important}.uni-pull-refresh .uni-pull-refresh-spinner,\r\n.wx-pull-refresh .wx-pull-refresh-spinner,\r\n.pull-refresh .pull-refresh-spinner{color:#000!important;border-color:#000!important}.uni-pull-refresh .uni-pull-refresh-spinner::before,\r\n.wx-pull-refresh .wx-pull-refresh-spinner::before,\r\n.pull-refresh .pull-refresh-spinner::before{color:#000!important;border-color:#000!important}\r\n/* 修改下拉刷新指示器的颜色 */.uni-pull-refresh-indicator,\r\n.wx-pull-refresh-indicator{color:#000!important}.uni-pull-refresh-indicator .uni-pull-refresh-spinner,\r\n.wx-pull-refresh-indicator .wx-pull-refresh-spinner{color:#000!important;border-color:#000!important}",""]),e.exports=n},"5f66":function(e,n,t){"use strict";t("6a54"),Object.defineProperty(n,"__esModule",{value:!0}),n.getRelationNodes=function(e){if(!this.$unicom)throw"this.getRelationNodes()需与p-f-unicom配合使用！";return this.$unicom("@"+e)}},"61db":function(e,n,t){"use strict";t("6a54"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,n.setupCacheEventBridges=s,t("4085");var a=t("2729"),r=t("894e"),o=t("db44"),i=t("a1cb");function s(){try{var e="undefined"!==typeof globalThis?globalThis:window;if(e.__CACHE_EVENTS_BRIDGED__)return;if(!uni||"function"!==typeof uni.$on)return;uni.$on(a.EVENTS.POST_CREATED,(function(){try{(0,r.invalidateHomePosts)({})}catch(e){}try{(0,o.clearDiscoverCache)()}catch(e){}})),uni.$on(a.EVENTS.AVATAR_UPDATED,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e&&(e.userId||e.userID||e.uid);if(n){try{(0,i.invalidateUserInfo)(n)}catch(t){}try{(0,i.invalidateUserPosts)(n)}catch(t){}}})),e.__CACHE_EVENTS_BRIDGED__=!0}catch(n){}}var u={setupCacheEventBridges:s};n.default=u},"69c7":function(e,n,t){"use strict";t("6a54"),Object.defineProperty(n,"__esModule",{value:!0}),n.parseEventDynamicCode=function(e,n){"function"===typeof this[n]&&this[n](e)}},"70cf":function(e,n,t){"use strict";t("6a54"),Object.defineProperty(n,"__esModule",{value:!0}),n.clone=function(e){return JSON.parse(JSON.stringify(e))},t("d4b5")},"74b5":function(e,n,t){"use strict";t("6a54"),Object.defineProperty(n,"__esModule",{value:!0}),n.getTabBar=function(){return{setData:function(e){var n,t,a,r;"function"===typeof(null===(n=this.$mp)||void 0===n||null===(t=n.page)||void 0===t?void 0:t.getTabBar)&&null!==(a=this.$mp)&&void 0!==a&&null!==(r=a.page)&&void 0!==r&&r.getTabBar()?this.$mp.page.getTabBar().setData(e):console.log("当前平台不支持getTabBar()，已稍作处理，详细请参见相关文档。")}}}},"7d83":function(e,n,t){var a=t("51f0");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var r=t("967d").default;r("6c2ae56b",a,!0,{sourceMap:!1,shadowMode:!1})},"7e19":function(e,n,t){"use strict";function a(e,n){e.$children.map((function(e){"function"==typeof e[n]&&e[n](),a(e,n)}))}t("6a54"),Object.defineProperty(n,"__esModule",{value:!0}),n.pageLifetimes=void 0,t("fd3c");var r={onLoad:function(){var e=this;uni.onWindowResize((function(n){a(e,"handlePageResize")}))},onShow:function(){a(this,"handlePageShow")},onHide:function(){a(this,"handlePageHide")},onResize:function(){}};n.pageLifetimes=r},"7eed":function(e,n,t){"use strict";(function(e){var n=t("f5bd").default;t("473f"),t("bf0f"),t("de6c"),t("5c47"),t("a1c1");var a=n(t("9b8e")),r={keys:function(){return[]}};e["____E0A1A41____"]=!0,delete e["____E0A1A41____"],e.__uniConfig={tabBar:{color:"#999999",selectedColor:"#9ed7ee",backgroundColor:"#ffffff",borderStyle:"black",list:[{pagePath:"pages/index/index",text:"广场",iconPath:"static/images/market.png",selectedIconPath:"static/images/market.png",redDot:!1,badge:""},{pagePath:"pages/poem-square/poem-square",text:"路",iconPath:"static/images/road.png",selectedIconPath:"static/images/road.png",redDot:!1,badge:""},{pagePath:"pages/mountain/mountain",text:"山",iconPath:"static/images/mountain.png",selectedIconPath:"static/images/mountain.png",redDot:!1,badge:""},{pagePath:"pages/profile/profile",text:"湖",iconPath:"static/images/pools.png",selectedIconPath:"static/images/pools.png",redDot:!1,badge:""}]},sitemapLocation:"sitemap.json",style:"v2",lazyCodeLoading:"requiredComponents",globalStyle:{backgroundColor:"#F6F6F6",backgroundTextStyle:"light",navigationBarBackgroundColor:"#F6F6F6",navigationBarTitleText:"回车键",navigationBarTextStyle:"black"}},e.__uniConfig.compilerVersion="4.76",e.__uniConfig.darkmode=!1,e.__uniConfig.themeConfig={},e.__uniConfig.uniPlatform="h5",e.__uniConfig.appId="__UNI__E0A1A41",e.__uniConfig.appName="poementer",e.__uniConfig.appVersion="1.0.0",e.__uniConfig.appVersionCode="100",e.__uniConfig.router={mode:"hash",base:"/"},e.__uniConfig.publicPath="/",e.__uniConfig["async"]={loading:"AsyncLoading",error:"AsyncError",delay:200,timeout:6e4},e.__uniConfig.debug=!1,e.__uniConfig.networkTimeout={request:6e4,connectSocket:6e4,uploadFile:6e4,downloadFile:6e4},e.__uniConfig.sdkConfigs={},e.__uniConfig.qqMapKey=void 0,e.__uniConfig.googleMapKey=void 0,e.__uniConfig.aMapKey=void 0,e.__uniConfig.aMapSecurityJsCode=void 0,e.__uniConfig.aMapServiceHost=void 0,e.__uniConfig.locale="",e.__uniConfig.fallbackLocale="zh-Hans",e.__uniConfig.locales=r.keys().reduce((function(e,n){var t=n.replace(/\.\/(uni-app.)?(.*).json/,"$2"),a=r(n);return Object.assign(e[t]||(e[t]={}),a.common||a),e}),{}),e.__uniConfig.nvue={"flex-direction":"column"},e.__uniConfig.__webpack_chunk_load__=t.e,a.default.component("pages-splash-splash",(function(e){var n={component:t.e("pages-splash-splash").then(function(){return e(t("cbc5"))}.bind(null,t)).catch(t.oe),delay:__uniConfig["async"].delay,timeout:__uniConfig["async"].timeout};return __uniConfig["async"]["loading"]&&(n.loading={name:"SystemAsyncLoading",render:function(e){return e(__uniConfig["async"]["loading"])}}),__uniConfig["async"]["error"]&&(n.error={name:"SystemAsyncError",render:function(e){return e(__uniConfig["async"]["error"])}}),n})),a.default.component("pages-preview-preview",(function(e){var n={component:t.e("pages-preview-preview").then(function(){return e(t("a5a9"))}.bind(null,t)).catch(t.oe),delay:__uniConfig["async"].delay,timeout:__uniConfig["async"].timeout};return __uniConfig["async"]["loading"]&&(n.loading={name:"SystemAsyncLoading",render:function(e){return e(__uniConfig["async"]["loading"])}}),__uniConfig["async"]["error"]&&(n.error={name:"SystemAsyncError",render:function(e){return e(__uniConfig["async"]["error"])}}),n})),a.default.component("pages-login-login",(function(e){var n={component:t.e("pages-login-login").then(function(){return e(t("fe38"))}.bind(null,t)).catch(t.oe),delay:__uniConfig["async"].delay,timeout:__uniConfig["async"].timeout};return __uniConfig["async"]["loading"]&&(n.loading={name:"SystemAsyncLoading",render:function(e){return e(__uniConfig["async"]["loading"])}}),__uniConfig["async"]["error"]&&(n.error={name:"SystemAsyncError",render:function(e){return e(__uniConfig["async"]["error"])}}),n})),a.default.component("pages-register-register",(function(e){var n={component:t.e("pages-register-register").then(function(){return e(t("c137"))}.bind(null,t)).catch(t.oe),delay:__uniConfig["async"].delay,timeout:__uniConfig["async"].timeout};return __uniConfig["async"]["loading"]&&(n.loading={name:"SystemAsyncLoading",render:function(e){return e(__uniConfig["async"]["loading"])}}),__uniConfig["async"]["error"]&&(n.error={name:"SystemAsyncError",render:function(e){return e(__uniConfig["async"]["error"])}}),n})),a.default.component("pages-my-likes-my-likes",(function(e){var n={component:t.e("pages-my-likes-my-likes").then(function(){return e(t("5ec8"))}.bind(null,t)).catch(t.oe),delay:__uniConfig["async"].delay,timeout:__uniConfig["async"].timeout};return __uniConfig["async"]["loading"]&&(n.loading={name:"SystemAsyncLoading",render:function(e){return e(__uniConfig["async"]["loading"])}}),__uniConfig["async"]["error"]&&(n.error={name:"SystemAsyncError",render:function(e){return e(__uniConfig["async"]["error"])}}),n})),a.default.component("pages-index-index",(function(e){var n={component:Promise.all([t.e("pages-index-index~pages-post-detail-post-detail~pages-user-profile-user-profile"),t.e("pages-index-index")]).then(function(){return e(t("8a72"))}.bind(null,t)).catch(t.oe),delay:__uniConfig["async"].delay,timeout:__uniConfig["async"].timeout};return __uniConfig["async"]["loading"]&&(n.loading={name:"SystemAsyncLoading",render:function(e){return e(__uniConfig["async"]["loading"])}}),__uniConfig["async"]["error"]&&(n.error={name:"SystemAsyncError",render:function(e){return e(__uniConfig["async"]["error"])}}),n})),a.default.component("pages-mountain-mountain",(function(e){var n={component:Promise.all([t.e("pages-mountain-mountain~pages-poem-square-poem-square"),t.e("pages-mountain-mountain")]).then(function(){return e(t("3675"))}.bind(null,t)).catch(t.oe),delay:__uniConfig["async"].delay,timeout:__uniConfig["async"].timeout};return __uniConfig["async"]["loading"]&&(n.loading={name:"SystemAsyncLoading",render:function(e){return e(__uniConfig["async"]["loading"])}}),__uniConfig["async"]["error"]&&(n.error={name:"SystemAsyncError",render:function(e){return e(__uniConfig["async"]["error"])}}),n})),a.default.component("pages-profile-profile",(function(e){var n={component:t.e("pages-profile-profile").then(function(){return e(t("5ee5"))}.bind(null,t)).catch(t.oe),delay:__uniConfig["async"].delay,timeout:__uniConfig["async"].timeout};return __uniConfig["async"]["loading"]&&(n.loading={name:"SystemAsyncLoading",render:function(e){return e(__uniConfig["async"]["loading"])}}),__uniConfig["async"]["error"]&&(n.error={name:"SystemAsyncError",render:function(e){return e(__uniConfig["async"]["error"])}}),n})),a.default.component("pages-following-following",(function(e){var n={component:t.e("pages-following-following").then(function(){return e(t("5bb4"))}.bind(null,t)).catch(t.oe),delay:__uniConfig["async"].delay,timeout:__uniConfig["async"].timeout};return __uniConfig["async"]["loading"]&&(n.loading={name:"SystemAsyncLoading",render:function(e){return e(__uniConfig["async"]["loading"])}}),__uniConfig["async"]["error"]&&(n.error={name:"SystemAsyncError",render:function(e){return e(__uniConfig["async"]["error"])}}),n})),a.default.component("pages-fans-fans",(function(e){var n={component:t.e("pages-fans-fans").then(function(){return e(t("8692"))}.bind(null,t)).catch(t.oe),delay:__uniConfig["async"].delay,timeout:__uniConfig["async"].timeout};return __uniConfig["async"]["loading"]&&(n.loading={name:"SystemAsyncLoading",render:function(e){return e(__uniConfig["async"]["loading"])}}),__uniConfig["async"]["error"]&&(n.error={name:"SystemAsyncError",render:function(e){return e(__uniConfig["async"]["error"])}}),n})),a.default.component("pages-user-profile-user-profile",(function(e){var n={component:Promise.all([t.e("pages-index-index~pages-post-detail-post-detail~pages-user-profile-user-profile"),t.e("pages-user-profile-user-profile")]).then(function(){return e(t("c045"))}.bind(null,t)).catch(t.oe),delay:__uniConfig["async"].delay,timeout:__uniConfig["async"].timeout};return __uniConfig["async"]["loading"]&&(n.loading={name:"SystemAsyncLoading",render:function(e){return e(__uniConfig["async"]["loading"])}}),__uniConfig["async"]["error"]&&(n.error={name:"SystemAsyncError",render:function(e){return e(__uniConfig["async"]["error"])}}),n})),a.default.component("pages-profile-edit-profile-edit",(function(e){var n={component:t.e("pages-profile-edit-profile-edit").then(function(){return e(t("612f"))}.bind(null,t)).catch(t.oe),delay:__uniConfig["async"].delay,timeout:__uniConfig["async"].timeout};return __uniConfig["async"]["loading"]&&(n.loading={name:"SystemAsyncLoading",render:function(e){return e(__uniConfig["async"]["loading"])}}),__uniConfig["async"]["error"]&&(n.error={name:"SystemAsyncError",render:function(e){return e(__uniConfig["async"]["error"])}}),n})),a.default.component("pages-post-detail-post-detail",(function(e){var n={component:Promise.all([t.e("pages-index-index~pages-post-detail-post-detail~pages-user-profile-user-profile"),t.e("pages-post-detail-post-detail")]).then(function(){return e(t("93b1"))}.bind(null,t)).catch(t.oe),delay:__uniConfig["async"].delay,timeout:__uniConfig["async"].timeout};return __uniConfig["async"]["loading"]&&(n.loading={name:"SystemAsyncLoading",render:function(e){return e(__uniConfig["async"]["loading"])}}),__uniConfig["async"]["error"]&&(n.error={name:"SystemAsyncError",render:function(e){return e(__uniConfig["async"]["error"])}}),n})),a.default.component("pages-add-add",(function(e){var n={component:t.e("pages-add-add").then(function(){return e(t("c85f"))}.bind(null,t)).catch(t.oe),delay:__uniConfig["async"].delay,timeout:__uniConfig["async"].timeout};return __uniConfig["async"]["loading"]&&(n.loading={name:"SystemAsyncLoading",render:function(e){return e(__uniConfig["async"]["loading"])}}),__uniConfig["async"]["error"]&&(n.error={name:"SystemAsyncError",render:function(e){return e(__uniConfig["async"]["error"])}}),n})),a.default.component("pages-favorite-folders-favorite-folders",(function(e){var n={component:t.e("pages-favorite-folders-favorite-folders").then(function(){return e(t("79a7"))}.bind(null,t)).catch(t.oe),delay:__uniConfig["async"].delay,timeout:__uniConfig["async"].timeout};return __uniConfig["async"]["loading"]&&(n.loading={name:"SystemAsyncLoading",render:function(e){return e(__uniConfig["async"]["loading"])}}),__uniConfig["async"]["error"]&&(n.error={name:"SystemAsyncError",render:function(e){return e(__uniConfig["async"]["error"])}}),n})),a.default.component("pages-favorite-content-favorite-content",(function(e){var n={component:t.e("pages-favorite-content-favorite-content").then(function(){return e(t("73da"))}.bind(null,t)).catch(t.oe),delay:__uniConfig["async"].delay,timeout:__uniConfig["async"].timeout};return __uniConfig["async"]["loading"]&&(n.loading={name:"SystemAsyncLoading",render:function(e){return e(__uniConfig["async"]["loading"])}}),__uniConfig["async"]["error"]&&(n.error={name:"SystemAsyncError",render:function(e){return e(__uniConfig["async"]["error"])}}),n})),a.default.component("pages-messages-messages",(function(e){var n={component:t.e("pages-messages-messages").then(function(){return e(t("b751"))}.bind(null,t)).catch(t.oe),delay:__uniConfig["async"].delay,timeout:__uniConfig["async"].timeout};return __uniConfig["async"]["loading"]&&(n.loading={name:"SystemAsyncLoading",render:function(e){return e(__uniConfig["async"]["loading"])}}),__uniConfig["async"]["error"]&&(n.error={name:"SystemAsyncError",render:function(e){return e(__uniConfig["async"]["error"])}}),n})),a.default.component("pages-image-manager-image-manager",(function(e){var n={component:t.e("pages-image-manager-image-manager").then(function(){return e(t("c773"))}.bind(null,t)).catch(t.oe),delay:__uniConfig["async"].delay,timeout:__uniConfig["async"].timeout};return __uniConfig["async"]["loading"]&&(n.loading={name:"SystemAsyncLoading",render:function(e){return e(__uniConfig["async"]["loading"])}}),__uniConfig["async"]["error"]&&(n.error={name:"SystemAsyncError",render:function(e){return e(__uniConfig["async"]["error"])}}),n})),a.default.component("pages-tag-filter-tag-filter",(function(e){var n={component:t.e("pages-tag-filter-tag-filter").then(function(){return e(t("2df9"))}.bind(null,t)).catch(t.oe),delay:__uniConfig["async"].delay,timeout:__uniConfig["async"].timeout};return __uniConfig["async"]["loading"]&&(n.loading={name:"SystemAsyncLoading",render:function(e){return e(__uniConfig["async"]["loading"])}}),__uniConfig["async"]["error"]&&(n.error={name:"SystemAsyncError",render:function(e){return e(__uniConfig["async"]["error"])}}),n})),a.default.component("pages-search-search",(function(e){var n={component:t.e("pages-search-search").then(function(){return e(t("9656"))}.bind(null,t)).catch(t.oe),delay:__uniConfig["async"].delay,timeout:__uniConfig["async"].timeout};return __uniConfig["async"]["loading"]&&(n.loading={name:"SystemAsyncLoading",render:function(e){return e(__uniConfig["async"]["loading"])}}),__uniConfig["async"]["error"]&&(n.error={name:"SystemAsyncError",render:function(e){return e(__uniConfig["async"]["error"])}}),n})),a.default.component("pages-portfolio-portfolio",(function(e){var n={component:t.e("pages-portfolio-portfolio").then(function(){return e(t("6276"))}.bind(null,t)).catch(t.oe),delay:__uniConfig["async"].delay,timeout:__uniConfig["async"].timeout};return __uniConfig["async"]["loading"]&&(n.loading={name:"SystemAsyncLoading",render:function(e){return e(__uniConfig["async"]["loading"])}}),__uniConfig["async"]["error"]&&(n.error={name:"SystemAsyncError",render:function(e){return e(__uniConfig["async"]["error"])}}),n})),a.default.component("pages-portfolio-detail-portfolio-detail",(function(e){var n={component:t.e("pages-portfolio-detail-portfolio-detail").then(function(){return e(t("65c4"))}.bind(null,t)).catch(t.oe),delay:__uniConfig["async"].delay,timeout:__uniConfig["async"].timeout};return __uniConfig["async"]["loading"]&&(n.loading={name:"SystemAsyncLoading",render:function(e){return e(__uniConfig["async"]["loading"])}}),__uniConfig["async"]["error"]&&(n.error={name:"SystemAsyncError",render:function(e){return e(__uniConfig["async"]["error"])}}),n})),a.default.component("pages-draft-box-draft-box",(function(e){var n={component:t.e("pages-draft-box-draft-box").then(function(){return e(t("9fa5"))}.bind(null,t)).catch(t.oe),delay:__uniConfig["async"].delay,timeout:__uniConfig["async"].timeout};return __uniConfig["async"]["loading"]&&(n.loading={name:"SystemAsyncLoading",render:function(e){return e(__uniConfig["async"]["loading"])}}),__uniConfig["async"]["error"]&&(n.error={name:"SystemAsyncError",render:function(e){return e(__uniConfig["async"]["error"])}}),n})),a.default.component("pages-feedback-feedback",(function(e){var n={component:t.e("pages-feedback-feedback").then(function(){return e(t("8c97"))}.bind(null,t)).catch(t.oe),delay:__uniConfig["async"].delay,timeout:__uniConfig["async"].timeout};return __uniConfig["async"]["loading"]&&(n.loading={name:"SystemAsyncLoading",render:function(e){return e(__uniConfig["async"]["loading"])}}),__uniConfig["async"]["error"]&&(n.error={name:"SystemAsyncError",render:function(e){return e(__uniConfig["async"]["error"])}}),n})),a.default.component("pages-feedback-admin-feedback-admin",(function(e){var n={component:t.e("pages-feedback-admin-feedback-admin").then(function(){return e(t("e0d6"))}.bind(null,t)).catch(t.oe),delay:__uniConfig["async"].delay,timeout:__uniConfig["async"].timeout};return __uniConfig["async"]["loading"]&&(n.loading={name:"SystemAsyncLoading",render:function(e){return e(__uniConfig["async"]["loading"])}}),__uniConfig["async"]["error"]&&(n.error={name:"SystemAsyncError",render:function(e){return e(__uniConfig["async"]["error"])}}),n})),a.default.component("pages-poem-square-poem-square",(function(e){var n={component:Promise.all([t.e("pages-mountain-mountain~pages-poem-square-poem-square"),t.e("pages-poem-square-poem-square")]).then(function(){return e(t("f432"))}.bind(null,t)).catch(t.oe),delay:__uniConfig["async"].delay,timeout:__uniConfig["async"].timeout};return __uniConfig["async"]["loading"]&&(n.loading={name:"SystemAsyncLoading",render:function(e){return e(__uniConfig["async"]["loading"])}}),__uniConfig["async"]["error"]&&(n.error={name:"SystemAsyncError",render:function(e){return e(__uniConfig["async"]["error"])}}),n})),a.default.component("pages-create-discussion-create-discussion",(function(e){var n={component:t.e("pages-create-discussion-create-discussion").then(function(){return e(t("e709"))}.bind(null,t)).catch(t.oe),delay:__uniConfig["async"].delay,timeout:__uniConfig["async"].timeout};return __uniConfig["async"]["loading"]&&(n.loading={name:"SystemAsyncLoading",render:function(e){return e(__uniConfig["async"]["loading"])}}),__uniConfig["async"]["error"]&&(n.error={name:"SystemAsyncError",render:function(e){return e(__uniConfig["async"]["error"])}}),n})),e.__uniRoutes=[{path:"/",alias:"/pages/splash/splash",component:{render:function(e){return e("Page",{props:Object.assign({isQuit:!0,isEntry:!0},__uniConfig.globalStyle,{usingComponents:{},navigationStyle:"custom"})},[e("pages-splash-splash",{slot:"page"})])}},meta:{id:1,name:"pages-splash-splash",isNVue:!1,maxWidth:0,pagePath:"pages/splash/splash",isQuit:!0,isEntry:!0,windowTop:0}},{path:"/pages/preview/preview",component:{render:function(e){return e("Page",{props:Object.assign({},__uniConfig.globalStyle,{navigationStyle:"custom",usingComponents:{}})},[e("pages-preview-preview",{slot:"page"})])}},meta:{name:"pages-preview-preview",isNVue:!1,maxWidth:0,pagePath:"pages/preview/preview",windowTop:0}},{path:"/pages/login/login",component:{render:function(e){return e("Page",{props:Object.assign({},__uniConfig.globalStyle,{navigationStyle:"custom",usingComponents:{}})},[e("pages-login-login",{slot:"page"})])}},meta:{name:"pages-login-login",isNVue:!1,maxWidth:0,pagePath:"pages/login/login",windowTop:0}},{path:"/pages/register/register",component:{render:function(e){return e("Page",{props:Object.assign({},__uniConfig.globalStyle,{navigationStyle:"custom",usingComponents:{}})},[e("pages-register-register",{slot:"page"})])}},meta:{name:"pages-register-register",isNVue:!1,maxWidth:0,pagePath:"pages/register/register",windowTop:0}},{path:"/pages/my-likes/my-likes",component:{render:function(e){return e("Page",{props:Object.assign({},__uniConfig.globalStyle,{navigationBarTitleText:"我的点赞",enablePullDownRefresh:!0,usingComponents:{}})},[e("pages-my-likes-my-likes",{slot:"page"})])}},meta:{name:"pages-my-likes-my-likes",isNVue:!1,maxWidth:0,pagePath:"pages/my-likes/my-likes",windowTop:44}},{path:"/pages/index/index",component:{render:function(e){return e("Page",{props:Object.assign({isQuit:!0,isTabBar:!0,tabBarIndex:0},__uniConfig.globalStyle,{navigationStyle:"custom",enablePullDownRefresh:!0,usingComponents:{skeleton:"/components/skeleton/skeleton"}})},[e("pages-index-index",{slot:"page"})])}},meta:{id:2,name:"pages-index-index",isNVue:!1,maxWidth:0,pagePath:"pages/index/index",isQuit:!0,isTabBar:!0,tabBarIndex:0,windowTop:0}},{path:"/pages/mountain/mountain",component:{render:function(e){return e("Page",{props:Object.assign({isQuit:!0,isTabBar:!0,tabBarIndex:2},__uniConfig.globalStyle,{navigationStyle:"custom",usingComponents:{skeleton:"/components/skeleton/skeleton","folder-selector":"/components/folder-selector/folder-selector"},enablePullDownRefresh:!0})},[e("pages-mountain-mountain",{slot:"page"})])}},meta:{id:3,name:"pages-mountain-mountain",isNVue:!1,maxWidth:0,pagePath:"pages/mountain/mountain",isQuit:!0,isTabBar:!0,tabBarIndex:2,windowTop:0}},{path:"/pages/profile/profile",component:{render:function(e){return e("Page",{props:Object.assign({isQuit:!0,isTabBar:!0,tabBarIndex:3},__uniConfig.globalStyle,{navigationStyle:"custom",enablePullDownRefresh:!0,backgroundTextStyle:"dark",usingComponents:{}})},[e("pages-profile-profile",{slot:"page"})])}},meta:{id:4,name:"pages-profile-profile",isNVue:!1,maxWidth:0,pagePath:"pages/profile/profile",isQuit:!0,isTabBar:!0,tabBarIndex:3,windowTop:0}},{path:"/pages/following/following",component:{render:function(e){return e("Page",{props:Object.assign({},__uniConfig.globalStyle,{navigationBarTitleText:"我关注的人",enablePullDownRefresh:!0,usingComponents:{}})},[e("pages-following-following",{slot:"page"})])}},meta:{name:"pages-following-following",isNVue:!1,maxWidth:0,pagePath:"pages/following/following",windowTop:44}},{path:"/pages/fans/fans",component:{render:function(e){return e("Page",{props:Object.assign({},__uniConfig.globalStyle,{navigationBarTitleText:"我的粉丝",enablePullDownRefresh:!0,usingComponents:{}})},[e("pages-fans-fans",{slot:"page"})])}},meta:{name:"pages-fans-fans",isNVue:!1,maxWidth:0,pagePath:"pages/fans/fans",windowTop:44}},{path:"/pages/user-profile/user-profile",component:{render:function(e){return e("Page",{props:Object.assign({},__uniConfig.globalStyle,{usingComponents:{},navigationBarTitleText:"用户主页",enablePullDownRefresh:!0,onReachBottomDistance:50})},[e("pages-user-profile-user-profile",{slot:"page"})])}},meta:{name:"pages-user-profile-user-profile",isNVue:!1,maxWidth:0,pagePath:"pages/user-profile/user-profile",windowTop:44}},{path:"/pages/profile-edit/profile-edit",component:{render:function(e){return e("Page",{props:Object.assign({},__uniConfig.globalStyle,{navigationBarTitleText:"编辑个人资料",usingComponents:{}})},[e("pages-profile-edit-profile-edit",{slot:"page"})])}},meta:{name:"pages-profile-edit-profile-edit",isNVue:!1,maxWidth:0,pagePath:"pages/profile-edit/profile-edit",windowTop:44}},{path:"/pages/post-detail/post-detail",component:{render:function(e){return e("Page",{props:Object.assign({},__uniConfig.globalStyle,{navigationStyle:"custom",usingComponents:{"cloud-tip-modal":"/components/cloudTipModal/index","folder-selector":"/components/folder-selector/folder-selector"}})},[e("pages-post-detail-post-detail",{slot:"page"})])}},meta:{name:"pages-post-detail-post-detail",isNVue:!1,maxWidth:0,pagePath:"pages/post-detail/post-detail",windowTop:0}},{path:"/pages/add/add",component:{render:function(e){return e("Page",{props:Object.assign({},__uniConfig.globalStyle,{navigationStyle:"custom",usingComponents:{}})},[e("pages-add-add",{slot:"page"})])}},meta:{name:"pages-add-add",isNVue:!1,maxWidth:0,pagePath:"pages/add/add",windowTop:0}},{path:"/pages/favorite-folders/favorite-folders",component:{render:function(e){return e("Page",{props:Object.assign({},__uniConfig.globalStyle,{usingComponents:{},navigationBarTitleText:"我的收藏夹"})},[e("pages-favorite-folders-favorite-folders",{slot:"page"})])}},meta:{name:"pages-favorite-folders-favorite-folders",isNVue:!1,maxWidth:0,pagePath:"pages/favorite-folders/favorite-folders",windowTop:44}},{path:"/pages/favorite-content/favorite-content",component:{render:function(e){return e("Page",{props:Object.assign({},__uniConfig.globalStyle,{usingComponents:{},enablePullDownRefresh:!0,onReachBottomDistance:50})},[e("pages-favorite-content-favorite-content",{slot:"page"})])}},meta:{name:"pages-favorite-content-favorite-content",isNVue:!1,maxWidth:0,pagePath:"pages/favorite-content/favorite-content",windowTop:44}},{path:"/pages/messages/messages",component:{render:function(e){return e("Page",{props:Object.assign({},__uniConfig.globalStyle,{navigationBarTitleText:"消息通知",enablePullDownRefresh:!0,backgroundColor:"#f8f9fa",backgroundTextStyle:"dark",usingComponents:{}})},[e("pages-messages-messages",{slot:"page"})])}},meta:{name:"pages-messages-messages",isNVue:!1,maxWidth:0,pagePath:"pages/messages/messages",windowTop:44}},{path:"/pages/image-manager/image-manager",component:{render:function(e){return e("Page",{props:Object.assign({},__uniConfig.globalStyle,{navigationBarTitleText:"图片管理",usingComponents:{}})},[e("pages-image-manager-image-manager",{slot:"page"})])}},meta:{name:"pages-image-manager-image-manager",isNVue:!1,maxWidth:0,pagePath:"pages/image-manager/image-manager",windowTop:44}},{path:"/pages/tag-filter/tag-filter",component:{render:function(e){return e("Page",{props:Object.assign({},__uniConfig.globalStyle,{usingComponents:{skeleton:"/components/skeleton/skeleton"},enablePullDownRefresh:!0,onReachBottomDistance:50})},[e("pages-tag-filter-tag-filter",{slot:"page"})])}},meta:{name:"pages-tag-filter-tag-filter",isNVue:!1,maxWidth:0,pagePath:"pages/tag-filter/tag-filter",windowTop:44}},{path:"/pages/search/search",component:{render:function(e){return e("Page",{props:Object.assign({},__uniConfig.globalStyle,{usingComponents:{skeleton:"/components/skeleton/skeleton"},navigationBarTitleText:"搜索",navigationBarBackgroundColor:"#ffffff",navigationBarTextStyle:"black",backgroundColor:"#f7f8fa"})},[e("pages-search-search",{slot:"page"})])}},meta:{name:"pages-search-search",isNVue:!1,maxWidth:0,pagePath:"pages/search/search",windowTop:44}},{path:"/pages/portfolio/portfolio",component:{render:function(e){return e("Page",{props:Object.assign({},__uniConfig.globalStyle,{usingComponents:{},navigationBarTitleText:"作品集",enablePullDownRefresh:!0})},[e("pages-portfolio-portfolio",{slot:"page"})])}},meta:{name:"pages-portfolio-portfolio",isNVue:!1,maxWidth:0,pagePath:"pages/portfolio/portfolio",windowTop:44}},{path:"/pages/portfolio-detail/portfolio-detail",component:{render:function(e){return e("Page",{props:Object.assign({},__uniConfig.globalStyle,{usingComponents:{},navigationBarTitleText:"作品集详情",enablePullDownRefresh:!0})},[e("pages-portfolio-detail-portfolio-detail",{slot:"page"})])}},meta:{name:"pages-portfolio-detail-portfolio-detail",isNVue:!1,maxWidth:0,pagePath:"pages/portfolio-detail/portfolio-detail",windowTop:44}},{path:"/pages/draft-box/draft-box",component:{render:function(e){return e("Page",{props:Object.assign({},__uniConfig.globalStyle,{usingComponents:{},navigationBarTitleText:"草稿箱"})},[e("pages-draft-box-draft-box",{slot:"page"})])}},meta:{name:"pages-draft-box-draft-box",isNVue:!1,maxWidth:0,pagePath:"pages/draft-box/draft-box",windowTop:44}},{path:"/pages/feedback/feedback",component:{render:function(e){return e("Page",{props:Object.assign({},__uniConfig.globalStyle,{navigationBarTitleText:"意见反馈",navigationStyle:"custom",backgroundColor:"#f5f5f5",usingComponents:{}})},[e("pages-feedback-feedback",{slot:"page"})])}},meta:{name:"pages-feedback-feedback",isNVue:!1,maxWidth:0,pagePath:"pages/feedback/feedback",windowTop:0}},{path:"/pages/feedback-admin/feedback-admin",component:{render:function(e){return e("Page",{props:Object.assign({},__uniConfig.globalStyle,{navigationBarTitleText:"反馈管理",navigationStyle:"custom",backgroundColor:"#f5f5f5",enablePullDownRefresh:!0,usingComponents:{}})},[e("pages-feedback-admin-feedback-admin",{slot:"page"})])}},meta:{name:"pages-feedback-admin-feedback-admin",isNVue:!1,maxWidth:0,pagePath:"pages/feedback-admin/feedback-admin",windowTop:0}},{path:"/pages/poem-square/poem-square",component:{render:function(e){return e("Page",{props:Object.assign({isQuit:!0,isTabBar:!0,tabBarIndex:1},__uniConfig.globalStyle,{navigationStyle:"custom",enablePullDownRefresh:!0,usingComponents:{skeleton:"/components/skeleton/skeleton"}})},[e("pages-poem-square-poem-square",{slot:"page"})])}},meta:{id:5,name:"pages-poem-square-poem-square",isNVue:!1,maxWidth:0,pagePath:"pages/poem-square/poem-square",isQuit:!0,isTabBar:!0,tabBarIndex:1,windowTop:0}},{path:"/pages/create-discussion/create-discussion",component:{render:function(e){return e("Page",{props:Object.assign({},__uniConfig.globalStyle,{navigationStyle:"custom",backgroundColor:"#f5f5f5",usingComponents:{}})},[e("pages-create-discussion-create-discussion",{slot:"page"})])}},meta:{name:"pages-create-discussion-create-discussion",isNVue:!1,maxWidth:0,pagePath:"pages/create-discussion/create-discussion",windowTop:0}},{path:"/choose-location",component:{render:function(e){return e("Page",{props:{navigationStyle:"custom"}},[e("system-choose-location",{slot:"page"})])}},meta:{name:"choose-location",pagePath:"/choose-location"}},{path:"/open-location",component:{render:function(e){return e("Page",{props:{navigationStyle:"custom"}},[e("system-open-location",{slot:"page"})])}},meta:{name:"open-location",pagePath:"/open-location"}}],e.UniApp&&new e.UniApp}).call(this,t("0ee4"))},"7ef8":function(e,n,t){"use strict";t("6a54");var a=t("f5bd").default;Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,t("c1a3"),t("bf0f"),t("18f7"),t("de6c"),t("c223"),t("08eb"),t("f3f7"),t("d4b5"),t("4626"),t("5ac7"),t("aa9c"),t("8f71"),t("4100"),t("2797");var r=a(t("9b1b")),o=a(t("2634")),i=a(t("2fdc")),s=a(t("80b1")),u=a(t("efe5"));function l(){return Date.now()}var c=function(){function e(n,t){(0,s.default)(this,e),this.name=n,this.maxItems=t&&t.maxItems||800,this.persistent=!(!t||!t.persistent),this.mem=new Map,this._useUni=function(){try{return"undefined"!==typeof uni&&"function"===typeof uni.getStorageSync&&"function"===typeof uni.setStorageSync}catch(e){return!1}}(),this._ls=this._useUni?null:function(){try{return"undefined"!==typeof localStorage?localStorage:null}catch(e){return null}}(),this.stats={hits:0,misses:0,evictions:0,gets:0,sets:0}}return(0,u.default)(e,[{key:"_k",value:function(e){return"__cm__:".concat(this.name,":").concat(e)}},{key:"_idxKey",value:function(){return"__cm__:".concat(this.name,":__keys__")}},{key:"_listPersistKeys",value:function(){if(!this.persistent)return[];try{if(this._useUni){var e=uni.getStorageSync(this._idxKey());return e?JSON.parse(e):[]}if(this._ls){var n=this._ls.getItem(this._idxKey());return n?JSON.parse(n):[]}}catch(t){}return[]}},{key:"keys",value:function(){var e=Array.from(this.mem.keys()),n=this._listPersistKeys(),t=new Set(e.concat(n));return Array.from(t)}},{key:"_readPersist",value:function(e){if(!this.persistent)return null;try{if(this._useUni){var n=uni.getStorageSync(this._k(e));return n?JSON.parse(n):null}if(this._ls){var t=this._ls.getItem(this._k(e));return t?JSON.parse(t):null}}catch(a){}return null}},{key:"_writePersist",value:function(e,n){if(this.persistent)try{var t=JSON.stringify(n);if(this._useUni){uni.setStorageSync(this._k(e),t);var a=uni.getStorageSync(this._idxKey()),r=a?JSON.parse(a):[];r.includes(e)||r.push(e),uni.setStorageSync(this._idxKey(),JSON.stringify(r))}else if(this._ls){this._ls.setItem(this._k(e),t);var o=this._ls.getItem(this._idxKey()),i=o?JSON.parse(o):[];i.includes(e)||i.push(e),this._ls.setItem(this._idxKey(),JSON.stringify(i))}}catch(s){}}},{key:"_removePersist",value:function(e){if(this.persistent)try{if(this._useUni){uni.removeStorageSync(this._k(e));var n=uni.getStorageSync(this._idxKey()),t=n?JSON.parse(n):[],a=t.filter((function(n){return n!==e}));uni.setStorageSync(this._idxKey(),JSON.stringify(a))}else if(this._ls){this._ls.removeItem(this._k(e));var r=this._ls.getItem(this._idxKey()),o=r?JSON.parse(r):[],i=o.filter((function(n){return n!==e}));this._ls.setItem(this._idxKey(),JSON.stringify(i))}}catch(s){}}},{key:"_trimLRU",value:function(){if(!(this.mem.size<=this.maxItems)){var e=Array.from(this.mem.entries());e.sort((function(e,n){return(e[1].la||0)-(n[1].la||0)}));for(var n=this.mem.size-this.maxItems,t=0;t<n;t++){var a=e[t]&&e[t][0];a&&(this.mem.delete(a),this.stats.evictions++)}}}},{key:"get",value:function(e){var n=l();this.stats.gets++;var t=this.mem.get(e);if(t||(t=this._readPersist(e),t&&this.mem.set(e,t)),t)return"number"===typeof t.e&&t.e>0&&t.e<=n?(this.mem.delete(e),this._removePersist(e),void this.stats.misses++):(t.la=n,this.stats.hits++,t.v);this.stats.misses++}},{key:"set",value:function(e,n,t){var a=t&&t.ttlMs||0,r=a>0?l()+a:0,o={v:n,e:r,la:l()};this.mem.set(e,o),this._trimLRU(),this._writePersist(e,o),this.stats.sets++}},{key:"update",value:function(e,n){try{var t=l(),a=this.mem.get(e);if(!a&&this.persistent&&(a=this._readPersist(e),a&&this.mem.set(e,a)),!a)return!1;var r=a.e>0?Math.max(0,a.e-t):0,o=a.v,i="function"===typeof n?n(o):o;return void 0!==i&&(this.set(e,i,{ttlMs:r}),!0)}catch(s){return!1}}},{key:"delete",value:function(e){this.mem.delete(e),this._removePersist(e)}},{key:"clear",value:function(){var e=this;if(this.mem.clear(),this.persistent)try{if(this._useUni){var n=uni.getStorageSync(this._idxKey()),t=n?JSON.parse(n):[];t.forEach((function(n){return uni.removeStorageSync(e._k(n))})),uni.removeStorageSync(this._idxKey())}else if(this._ls){var a=this._ls.getItem(this._idxKey()),r=a?JSON.parse(a):[];r.forEach((function(n){return e._ls.removeItem(e._k(n))})),this._ls.removeItem(this._idxKey())}}catch(o){}}},{key:"getOrFetch",value:function(){var e=(0,i.default)((0,o.default)().mark((function e(n,t,a){var r,i,s,u,c,f,p,d=this;return(0,o.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=a&&a.ttlMs||0,i=a&&a.swrMs||0,s=l(),u=this.mem.get(n),!u&&this.persistent&&(u=this._readPersist(n),u&&this.mem.set(n,u)),c=u&&(0===u.e||u.e>s),f=u&&u.e>0&&u.e<=s,!c){e.next=10;break}return u.la=s,e.abrupt("return",u.v);case 10:if(!(f&&i>0&&s-u.e<=i)){e.next=14;break}return u.la=s,t().then((function(e){d.set(n,e,{ttlMs:r})})).catch((function(){})),e.abrupt("return",u.v);case 14:return e.next=16,t();case 16:return p=e.sent,this.set(n,p,{ttlMs:r}),e.abrupt("return",p);case 19:case"end":return e.stop()}}),e,this)})));return function(n,t,a){return e.apply(this,arguments)}}()}]),e}(),f=function(){function e(){(0,s.default)(this,e),this._nss=new Map,this._debug=!1}return(0,u.default)(e,[{key:"namespace",value:function(e,n){return this._nss.has(e)||this._nss.set(e,new c(e,n||{})),this._nss.get(e)}},{key:"setDebug",value:function(e){this._debug=!!e}},{key:"getStats",value:function(){var e={};return this._nss.forEach((function(n,t){e[t]=(0,r.default)((0,r.default)({},n.stats),{},{size:n.mem.size,persistent:n.persistent,maxItems:n.maxItems})})),e}},{key:"keys",value:function(e){var n=this.namespace(e);return n&&n.keys?n.keys():[]}},{key:"update",value:function(e,n,t){var a=this.namespace(e);return!(!a||!a.update)&&a.update(n,t)}}]),e}(),p=new f,d=p;n.default=d},"894e":function(e,n,t){"use strict";t("6a54");var a=t("f5bd").default;Object.defineProperty(n,"__esModule",{value:!0}),n.getHomePosts=function(){return c.apply(this,arguments)},n.invalidateHomePosts=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.page,t=e.pageSize,a=void 0===t?10:t;"number"===typeof n?l.delete("page:".concat(n,":size:").concat(a)):l.clear()},t("c223");var r=a(t("2634")),o=a(t("2fdc")),i=a(t("7ef8")),s=t("38db"),u=s.cloudCall,l=i.default.namespace("posts:home",{persistent:!0,maxItems:128});function c(){return c=(0,o.default)((0,r.default)().mark((function e(){var n,t,a,i,s,c,f,p=arguments;return(0,r.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=p.length>0&&void 0!==p[0]?p[0]:{},t=n.page,a=void 0===t?0:t,i=n.pageSize,s=void 0===i?10:i,c=n.context,f="page:".concat(a,":size:").concat(s),e.abrupt("return",l.getOrFetch(f,(0,o.default)((0,r.default)().mark((function e(){var n;return(0,r.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u("getPostList",{skip:a*s,limit:s},{pageTag:"home",context:c});case 2:if(n=e.sent,!(n&&n.result&&n.result.success)){e.next=5;break}return e.abrupt("return",n.result.posts||[]);case 5:return e.abrupt("return",[]);case 6:case"end":return e.stop()}}),e)}))),{ttlMs:9e4,swrMs:45e3}));case 3:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}},9384:function(e,n,t){"use strict";(function(e){t("6a54");var a=t("f5bd").default;Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=a(t("9b1b")),o=a(t("2634")),i=a(t("2fdc")),s=a(t("80b1")),u=a(t("efe5"));t("9db6"),t("c1a3"),t("bf0f"),t("18f7"),t("de6c"),t("f3f7"),t("2797"),t("8f71"),t("aa9c"),t("08eb"),t("f7a5"),t("fd3c");var l=a(t("7ef8"));function c(){return Date.now()}function f(e){return"string"===typeof e&&e.startsWith("cloud://")}var p=function(){function n(){(0,s.default)(this,n),this._cache=new Map,this._ns=null,this._pendingIds=new Set,this._waiters=[],this._timer=null,this._resolver=null,this._batchDelay=200,this._defaultTtl=33e5;try{this._ns=l.default&&l.default.namespace?l.default.namespace("fileUrls",{persistent:!1,maxItems:2e3}):null}catch(e){this._ns=null}}return(0,u.default)(n,[{key:"setResolver",value:function(e){this._resolver=e}},{key:"setBatchDelay",value:function(e){this._batchDelay=e}},{key:"setDefaultTtl",value:function(e){this._defaultTtl=e}},{key:"invalidate",value:function(e){var n=this;if(e)(Array.isArray(e)?e:[e]).forEach((function(e){if(n._cache.delete(e),n._ns)try{n._ns.delete(e)}catch(t){}}));else if(this._cache.clear(),this._ns)try{this._ns.clear()}catch(t){}}},{key:"getTempUrl",value:function(){var e=(0,i.default)((0,o.default)().mark((function e(n){var t;return(0,o.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getTempUrls([n]);case 2:return t=e.sent,e.abrupt("return",t[n]||n);case 4:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}()},{key:"getTempUrls",value:function(){var e=(0,i.default)((0,o.default)().mark((function e(n){var t,a,i,s,u,l,p=this;return(0,o.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=(n||[]).filter(Boolean),0!==t.length){e.next=3;break}return e.abrupt("return",{});case 3:if(a={},i=[],s=c(),t.forEach((function(e){if(f(e)){var n=p._cache.get(e);if(!n&&p._ns){var t=p._ns.get(e);t&&"string"===typeof t.url&&(n=t,p._cache.set(e,n))}n&&n.url&&n.expireAt-6e4>s?a[e]=n.url:i.push(e)}else a[e]=e})),0!==i.length){e.next=9;break}return e.abrupt("return",a);case 9:return i.forEach((function(e){return p._pendingIds.add(e)})),u=new Promise((function(e,n){p._waiters.push({ids:new Set(t),resolve:e,reject:n})})),this._scheduleFlush(),e.next=14,u;case 14:return l=e.sent,e.abrupt("return",(0,r.default)((0,r.default)({},a),l));case 16:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}()},{key:"warm",value:function(e){var n=this,t=(e||[]).filter(f);0!==t.length&&(t.forEach((function(e){return n._pendingIds.add(e)})),this._scheduleFlush())}},{key:"_scheduleFlush",value:function(){var e=this;this._timer||(this._timer=setTimeout((function(){return e._flush().catch((function(){}))}),this._batchDelay))}},{key:"_flush",value:function(){var e=(0,i.default)((0,o.default)().mark((function e(){var n,t,a,r,i=this;return(0,o.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=Array.from(this._pendingIds),this._pendingIds.clear(),clearTimeout(this._timer),this._timer=null,0!==n.length){e.next=6;break}return e.abrupt("return");case 6:return t={},e.prev=7,e.next=10,this._resolve(n);case 10:t=e.sent,e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](7),t={};case 16:a=c(),n.forEach((function(e){var n=t[e];if(n&&n.url){var r="number"===typeof n.maxAgeSec?1e3*n.maxAgeSec:i._defaultTtl,o=a+Math.max(1e4,r),s={url:n.url,expireAt:o};if(i._cache.set(e,s),i._ns)try{i._ns.set(e,s,{ttlMs:Math.max(5e3,r)})}catch(u){}}})),r=this._waiters,this._waiters=[],r.forEach((function(e){var n=e.ids,t=e.resolve,a={};n.forEach((function(e){var n=i._cache.get(e);if(!n&&i._ns){var t=i._ns.get(e);t&&"string"===typeof t.url&&(n=t,i._cache.set(e,n))}n&&n.url&&(a[e]=n.url)})),t(a)}));case 21:case"end":return e.stop()}}),e,this,[[7,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_resolve",value:function(){var n=(0,i.default)((0,o.default)().mark((function n(t){var a,r,s,u,l,c,f,p,d,g,m;return(0,o.default)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if("function"!==typeof this._resolver){n.next=4;break}return n.next=3,this._resolver(t);case 3:return n.abrupt("return",n.sent);case 4:if(n.prev=4,a="function"===typeof getApp?getApp():null,r=a&&a.$tcb,!r||"function"!==typeof r.getTempFileURL){n.next=14;break}return n.next=10,r.getTempFileURL({fileList:t});case 10:return s=n.sent,u={},s&&Array.isArray(s.fileList)&&s.fileList.forEach((function(e){e&&e.tempFileURL&&(u[e.fileID]={url:e.tempFileURL,maxAgeSec:e.maxAge||3600})})),n.abrupt("return",u);case 14:n.next=18;break;case 16:n.prev=16,n.t0=n["catch"](4);case 18:if("undefined"===typeof wx||!wx.cloud||"function"!==typeof wx.cloud.getTempFileURL){n.next=25;break}return n.next=21,wx.cloud.getTempFileURL({fileList:t});case 21:return l=n.sent,c={},l&&Array.isArray(l.fileList)&&l.fileList.forEach((function(e){e&&e.tempFileURL&&(c[e.fileID]={url:e.tempFileURL,maxAgeSec:e.maxAge||3600})})),n.abrupt("return",c);case 25:f=3,p={},d=function(){var n=(0,i.default)((0,o.default)().mark((function n(t){var a,r,i;return(0,o.default)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,a="undefined"!==typeof e&&e.callFunction?function(n){return e.callFunction(n)}:function(e){var n="function"===typeof getApp?getApp():null,t=n&&n.$tcb;return t.callFunction(e)},n.next=4,a({name:"imageManager",data:{action:"getImageUrl",fileID:t}});case 4:r=n.sent,i=r.result,i&&i.success&&i.url&&(p[t]={url:i.url,maxAgeSec:i.expireTime||3600}),n.next=11;break;case 9:n.prev=9,n.t0=n["catch"](0);case 11:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e){return n.apply(this,arguments)}}(),g=0;case 29:if(!(g<t.length)){n.next=36;break}return m=t.slice(g,g+f),n.next=33,Promise.all(m.map(d));case 33:g+=f,n.next=29;break;case 36:return n.abrupt("return",p);case 37:case"end":return n.stop()}}),n,this,[[4,16]])})));return function(e){return n.apply(this,arguments)}}()}]),n}(),d=new p,g=d;n.default=g}).call(this,t("861b")["uniCloud"])},a1cb:function(e,n,t){"use strict";t("6a54");var a=t("f5bd").default;Object.defineProperty(n,"__esModule",{value:!0}),n.getUserInfo=function(e,n){return c.apply(this,arguments)},n.getUserPosts=function(e){return p.apply(this,arguments)},n.invalidateUserInfo=function(e){l.delete("".concat(e))},n.invalidateUserPosts=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,a=f(e);"number"===typeof n?a.delete("page:".concat(n,":size:").concat(t)):a.clear()},t("c223");var r=a(t("2634")),o=a(t("2fdc")),i=a(t("7ef8")),s=t("38db"),u=s.cloudCall,l=i.default.namespace("profiles:user",{persistent:!0,maxItems:512});function c(){return c=(0,o.default)((0,r.default)().mark((function e(n,t){var a;return(0,r.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a="".concat(n),e.abrupt("return",l.getOrFetch(a,(0,o.default)((0,r.default)().mark((function e(){var a;return(0,r.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u("getUserProfile",{userId:n,skip:0,limit:1},{pageTag:"user-profile:info",context:t,injectOpenId:!0});case 2:if(a=e.sent,!(a&&a.result&&a.result.success)){e.next=5;break}return e.abrupt("return",a.result.userInfo||{});case 5:return e.abrupt("return",{});case 6:case"end":return e.stop()}}),e)}))),{ttlMs:0,swrMs:0}));case 2:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}function f(e){return i.default.namespace("userPosts:".concat(e),{persistent:!0,maxItems:200})}function p(){return p=(0,o.default)((0,r.default)().mark((function e(n){var t,a,i,s,l,c,p,d;return(0,r.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.userId,a=n.page,i=void 0===a?0:a,s=n.pageSize,l=void 0===s?10:s,c=n.context,p=f(t),d="page:".concat(i,":size:").concat(l),e.abrupt("return",p.getOrFetch(d,(0,o.default)((0,r.default)().mark((function e(){var n;return(0,r.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u("getUserProfile",{userId:t,skip:i*l,limit:l},{pageTag:"user-profile:posts",context:c,injectOpenId:!0});case 2:if(n=e.sent,!(n&&n.result&&n.result.success)){e.next=5;break}return e.abrupt("return",n.result.posts||[]);case 5:return e.abrupt("return",[]);case 6:case"end":return e.stop()}}),e)}))),{ttlMs:0,swrMs:0}));case 4:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}},b577:function(e,n,t){"use strict";t("6a54");var a=t("f5bd").default;Object.defineProperty(n,"__esModule",{value:!0}),n.getMyFavorites=function(e){return m.apply(this,arguments)},n.getMyInfo=function(e){return f.apply(this,arguments)},n.getMyPosts=function(e){return d.apply(this,arguments)},n.invalidateMyFavorites=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,t=g();"number"===typeof e?t.delete("page:".concat(e,":size:").concat(n)):t.clear()},n.invalidateMyInfo=function(){c.delete("me")},n.invalidateMyPosts=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,t=p();"number"===typeof e?t.delete("page:".concat(e,":size:").concat(n)):t.clear()},t("c223"),t("9db6");var r=a(t("2634")),o=a(t("2fdc")),i=a(t("7ef8")),s=a(t("9384")),u=t("38db"),l=u.cloudCall,c=i.default.namespace("me:info",{persistent:!0,maxItems:8});function f(){return f=(0,o.default)((0,r.default)().mark((function e(n){return(0,r.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",c.getOrFetch("me",(0,o.default)((0,r.default)().mark((function e(){var t,a,o,i,u,c;return(0,r.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l("getMyProfileData",{},{pageTag:"me:info",context:n,injectOpenId:!0});case 2:if(t=e.sent,a=t&&t.result||{},o=a.userInfo||a.profile||a.data||{},e.prev=5,i=o&&o.avatarUrl,"string"!==typeof i||!i.startsWith("cloud://")){e.next=13;break}return e.next=10,s.default.getTempUrl(i);case 10:u=e.sent,c=o.updatedAt||o.updateTime||o._updateTime||"",o.avatarUrl=c?"".concat(u,"?v=").concat(encodeURIComponent(c)):u;case 13:e.next=17;break;case 15:e.prev=15,e.t0=e["catch"](5);case 17:return e.abrupt("return",o);case 18:case"end":return e.stop()}}),e,null,[[5,15]])}))),{ttlMs:18e5,swrMs:3e5}));case 1:case"end":return e.stop()}}),e)}))),f.apply(this,arguments)}function p(){return i.default.namespace("me:posts",{persistent:!0,maxItems:200})}function d(){return d=(0,o.default)((0,r.default)().mark((function e(n){var t,a,i,s,u,c,f;return(0,r.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.page,a=void 0===t?0:t,i=n.pageSize,s=void 0===i?10:i,u=n.context,c=p(),f="page:".concat(a,":size:").concat(s),e.abrupt("return",c.getOrFetch(f,(0,o.default)((0,r.default)().mark((function e(){var n;return(0,r.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l("getMyProfileData",{skip:a*s,limit:s},{pageTag:"me:posts",context:u,injectOpenId:!0});case 2:if(n=e.sent,!(n&&n.result&&n.result.success)){e.next=5;break}return e.abrupt("return",n.result.posts||[]);case 5:return e.abrupt("return",[]);case 6:case"end":return e.stop()}}),e)}))),{ttlMs:0,swrMs:0}));case 4:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}function g(){return i.default.namespace("me:favorites",{persistent:!0,maxItems:200})}function m(){return m=(0,o.default)((0,r.default)().mark((function e(n){var t,a,i,s,u,c,f;return(0,r.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.page,a=void 0===t?0:t,i=n.pageSize,s=void 0===i?10:i,u=n.context,c=g(),f="page:".concat(a,":size:").concat(s),e.abrupt("return",c.getOrFetch(f,(0,o.default)((0,r.default)().mark((function e(){var n;return(0,r.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l("getMyProfileData",{action:"getAllFavorites",skip:a*s,limit:s},{pageTag:"me:favorites",context:u,injectOpenId:!0});case 2:if(n=e.sent,!(n&&n.result&&n.result.success)){e.next=5;break}return e.abrupt("return",n.result.favorites||[]);case 5:return e.abrupt("return",[]);case 6:case"end":return e.stop()}}),e)}))),{ttlMs:0,swrMs:0}));case 4:case"end":return e.stop()}}),e)}))),m.apply(this,arguments)}},c038:function(e,n,t){"use strict";t("6a54"),Object.defineProperty(n,"__esModule",{value:!0}),n.escape2Html=function(e){if(!e)return e;var n={lt:"<",gt:">",nbsp:" ",amp:"&",quot:'"'};return e.replace(/&(lt|gt|nbsp|amp|quot);/gi,(function(e,t){return n[t]}))},n.html2Escape=function(e){return e?e.replace(/[<>&"]/g,(function(e){return{"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;"}[e]})):e},t("5c47"),t("a1c1")},c040:function(e,n,t){"use strict";t.r(n);var a=t("0797"),r=t.n(a);for(var o in a)["default"].indexOf(o)<0&&function(e){t.d(n,e,(function(){return a[e]}))}(o);n["default"]=r.a},c57a:function(e,n,t){"use strict";var a=t("f5bd").default;Object.defineProperty(n,"__esModule",{value:!0}),n.setData=function(e){var n=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Object.keys(e).forEach((function(t){if((0,r.default)(n,t,e[t]),o.test(t)&&t.endsWith("Clone")){var a=t.replace(/Clone$/,"");n.$options&&n.$options.propsData[a]&&n.$emit("update:".concat(a),e[t])}})),this.$forceUpdate(),"function"==typeof t&&this.$nextTick(t)},t("bf0f"),t("2797"),t("5c47"),t("0506"),t("dc8a"),t("a1c1"),t("20f3"),t("f7a5"),t("6a54"),t("9327");var r=a(t("d129"));a(t("11d0"));var o=/^([^\x00-\xff]|[a-zA-Z_$])([^\x00-\xff]|[a-zA-Z0-9_$])*$/},cce8:function(e,n,t){"use strict";(function(e){var n=t("f5bd").default,a=n(t("9b1b"));t("bf0f"),t("2797"),t("7a76"),t("c9b5");var r=n(t("2634")),o=n(t("2fdc"));t("3dde"),t("a8b2"),t("1480"),t("6e4a"),t("7eed"),t("9337");var i,s=n(t("0312")),u=n(t("9384")),l=t("61db"),c=t("b577"),f=n(t("23c8")),p=n(t("9b8e")),d=n(t("d6fc")),g=d.default.init({env:"cloud1-5gb0pbyl400845f5",auth:{persistence:"local"}});p.default.prototype.$tcb=g;try{u.default.setResolver(function(){var e=(0,o.default)((0,r.default)().mark((function e(n){var t,a;return(0,r.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(Array.isArray(n)&&0!==n.length){e.next=2;break}return e.abrupt("return",{});case 2:return e.next=4,g.getTempFileURL({fileList:n});case 4:return t=e.sent,a={},t&&Array.isArray(t.fileList)&&t.fileList.forEach((function(e){e&&e.tempFileURL&&(a[e.fileID]={url:e.tempFileURL,maxAgeSec:e.maxAge||3600})})),e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())}catch(x){}console.log("🔧 [TCB初始化] TCB实例已创建:",g),console.log("🔧 [TCB初始化] 环境ID:",null===(i=g.config)||void 0===i?void 0:i.env),console.log("🔧 [TCB初始化] 数据库方法可用:","function"===typeof g.database),p.default.prototype.$requireOpenid=function(){var e=getApp(),n=e&&e.globalData&&e.globalData.openid;if(!n)try{n=uni.getStorageSync("userOpenId")||uni.getStorageSync("openid"),n&&(e.globalData=e.globalData||{},e.globalData.openid=n)}catch(x){}if(!n){var t=!e.globalData||!e.globalData._loginProcessCompleted;t||uni.showToast({title:"用户未登录",icon:"none"})}return n};try{(0,l.setupCacheEventBridges)()}catch(x){console.warn("setupCacheEventBridges failed",x)}try{(function(e){var n=Date.now(),t=setInterval((function(){try{var a=getApp&&getApp(),r=a&&a.globalData&&a.globalData._loginProcessCompleted,o=a&&a.globalData&&a.globalData.openid;(r&&o||Date.now()-n>5e3)&&(clearInterval(t),e&&e())}catch(i){clearInterval(t)}}),120)})((0,o.default)((0,r.default)().mark((function e(){var n;return(0,r.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,n={$tcb:p.default&&p.default.prototype&&p.default.prototype.$tcb?p.default.prototype.$tcb:"undefined"!==typeof uni&&uni.$tcb?uni.$tcb:null},e.next=4,(0,c.getMyInfo)(n);case 4:console.log("🔰 [prewarm] getMyInfo done"),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),console.warn("🔰 [prewarm] getMyInfo failed",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))))}catch(x){console.warn("prewarm setup failed",x)}try{var m=t("7ef8").default,h=!1;try{var y=uni.getStorageSync&&uni.getStorageSync("CACHE_DEBUG");h=!0===y||"1"===y||1===y||"true"===y}catch(w){}m.setDebug(!!h),"undefined"!==typeof uni&&(uni.$cacheStats=function(){try{console.log("[CacheStats]",m.getStats())}catch(x){console.log("[CacheStats] failed",x)}},uni.$cacheDebug=function(e){try{m.setDebug(!!e),console.log("[CacheDebug] =",!!e)}catch(x){}})}catch(x){console.warn("cache debug setup failed",x)}function _(e){if("login"===e||"getOpenId"===e)return{openid:null,allowed:!0};var n=getApp(),t=n&&n.globalData&&n.globalData.openid;if(!t)try{t=uni.getStorageSync("userOpenId")||uni.getStorageSync("openid"),t&&(n.globalData=n.globalData||{},n.globalData.openid=t)}catch(x){}if(!t){var a=!n.globalData||!n.globalData._loginProcessCompleted;return a||uni.showToast({title:"用户未登录",icon:"none"}),{openid:null,allowed:!1}}return{openid:t,allowed:!0}}var b=e.callFunction.bind(e);e.callFunction=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.name;if(!n)return b(e);var t=_(n),a=t.openid,r=t.allowed;if(!r){var o=new Error("NO_OPENID");return o.code="NO_OPENID","function"===typeof e.fail&&e.fail(o),"function"===typeof e.complete&&e.complete(o),Promise.reject(o)}var i=Object.assign({},e.data||{});a&&(i.openid=a);var s=Object.assign({},e,{data:i});return b(s)};var v=g.callFunction.bind(g);g.callFunction=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.name;if(!n)return v(e);var t=_(n),a=t.openid,r=t.allowed;if(!r){var o=new Error("NO_OPENID");return o.code="NO_OPENID","function"===typeof e.fail&&e.fail(o),"function"===typeof e.complete&&e.complete(o),Promise.reject(o)}var i=Object.assign({},e.data||{});a&&(i.openid=a);var s=Object.assign({},e,{data:i});return v(s)},p.default.use(f.default),p.default.config.productionTip=!1,s.default.mpType="app";var C=new p.default((0,a.default)({},s.default));C.$mount()}).call(this,t("861b")["uniCloud"])},d129:function(e,n,t){"use strict";t("6a54"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,t("5c47"),t("2c10"),t("c9b5"),t("bf0f"),t("ab80"),t("473f"),t("f7a5");var a=function(e,n,t){return Object(e)!==e||(Array.isArray(n)||(n=n.toString().match(/[^.[\]]+/g)||[]),n.slice(0,-1).reduce((function(e,t,a){return Object(e[t])===e[t]?e[t]:e[t]=Math.abs(n[a+1])>>0===+n[a+1]?[]:{}}),e)[n[n.length-1]]=t),e};n.default=a},d16c:function(e,n,t){"use strict";t("6a54"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;n.default={appid:"__UNI__E0A1A41"}},db44:function(e,n,t){"use strict";t("6a54");var a=t("f5bd").default;Object.defineProperty(n,"__esModule",{value:!0}),n.clearDiscoverCache=function(){l.clear()},n.getDiscoverFeed=function(){return f.apply(this,arguments)},n.invalidateDiscover=function(){l.clear()};var r=a(t("2634")),o=a(t("2fdc"));t("08eb"),t("18f7"),t("bf0f"),t("f3f7"),t("de6c"),t("fd3c"),t("4100"),t("f7a5"),t("c223");var i=a(t("7ef8")),s=t("38db"),u=s.cloudCall,l=i.default.namespace("posts:discover",{persistent:!0,maxItems:64});function c(e){if(!Array.isArray(e)||0===e.length)return"ex:none";try{var n=Array.from(new Set(e.map(String)));n.sort();var t=n.slice(0,50);return"ex:"+t.join(",")}catch(a){return"ex:err"}}function f(){return f=(0,o.default)((0,r.default)().mark((function e(){var n,t,a,i,s,f,p,d,g,m=arguments;return(0,r.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=m.length>0&&void 0!==m[0]?m[0]:{},t=n.excludePostIds,a=void 0===t?[]:t,i=n.page,s=void 0===i?0:i,f=n.pageSize,p=void 0===f?5:f,d=n.context,g="page:".concat(s,":").concat(c(a)),e.abrupt("return",l.getOrFetch(g,(0,o.default)((0,r.default)().mark((function e(){var n;return(0,r.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u("getRecommendationFeed",{limit:p,personalizedLimit:3,hotLimit:2,skip:0,excludePostIds:a||[]},{pageTag:"discover",context:d});case 2:if(n=e.sent,!(n&&n.result&&n.result.success)){e.next=5;break}return e.abrupt("return",{posts:n.result.posts||[],hasMore:!!n.result.hasMore});case 5:return e.abrupt("return",{posts:[],hasMore:!1});case 6:case"end":return e.stop()}}),e)}))),{ttlMs:9e4,swrMs:45e3}));case 3:case"end":return e.stop()}}),e)}))),f.apply(this,arguments)}},f3c3:function(e,n){function t(){var e={platform:"unknown",isH5:!1,isApp:!1,isMiniProgram:!1,isAndroid:!1,isIOS:!1,isWeixin:!1,details:{}};try{if("undefined"!==typeof window&&"undefined"!==typeof document){e.platform="h5",e.isH5=!0;try{e.details.userAgent=navigator.userAgent||"unknown"}catch(o){e.details.userAgent="unknown"}return e}if("undefined"!==typeof uni)try{var n=uni.getSystemInfoSync();if(e.details.systemInfo=n,"undefined"!==typeof wx&&wx.getAccountInfoSync)try{var t=wx.getAccountInfoSync();if(t.miniProgram)return e.platform="mp-weixin",e.isMiniProgram=!0,e.isWeixin=!0,e.details.accountInfo=t,e}catch(o){}if("undefined"!==typeof plus||n.platform)return e.platform="app",e.isApp=!0,"android"===n.platform?e.isAndroid=!0:"ios"===n.platform&&(e.isIOS=!0),e}catch(o){console.warn("获取系统信息失败:",o)}if("undefined"!==typeof wx&&wx.getSystemInfoSync)try{var a=wx.getSystemInfoSync(),r=wx.getAccountInfoSync();if(r.miniProgram)return e.platform="mp-weixin",e.isMiniProgram=!0,e.isWeixin=!0,e.details.systemInfo=a,e.details.accountInfo=r,e}catch(o){}}catch(i){console.error("平台检测失败:",i)}return e}e.exports={getPlatformInfo:t,getCurrentPlatform:function(){var e=t();return e.platform},isPlatform:function(e){var n=t();return n.platform===e},supportsCloudFunction:function(){var e=t();return e.isH5||e.isApp?"undefined"!==typeof getApp&&getApp().$tcb:!!e.isMiniProgram&&("undefined"!==typeof wx&&wx.cloud)},getCloudFunctionMethod:function(){var e=t();return e.isH5||e.isApp?"tcb":e.isMiniProgram?"wx-cloud":"none"},logPlatformInfo:function(){}}},f6b7:function(e,n,t){"use strict";t.d(n,"b",(function(){return a})),t.d(n,"c",(function(){return r})),t.d(n,"a",(function(){}));var a=function(){var e=this.$createElement,n=this._self._c||e;return n("App",{attrs:{keepAliveInclude:this.keepAliveInclude}})},r=[]},fb82:function(e,n,t){"use strict";t("6a54");var a=t("f5bd").default;Object.defineProperty(n,"__esModule",{value:!0}),n.selectAllComponents=function(e){return f.call(this,e)},n.selectComponent=function(e){return c.call(this,e)};var r=a(t("b7c7")),o=a(t("80b1")),i=a(t("efe5"));a(t("fcf3"));t("d4b5"),t("5ef2"),t("aa9c"),t("0c26"),t("473f"),t("bf0f"),t("4626"),t("5ac7"),t("5c47"),t("a1c1"),t("fd3c"),t("2797"),t("8f71"),t("aa77"),t("c223");var s=function(e,n){var t,a,r,o=e._vnode;if(o=null!==(t=null===(a=o)||void 0===a||null===(r=a.context)||void 0===r?void 0:r.$vnode)&&void 0!==t?t:"",!o||!o.data)return!1;var i=o.data.attrs||{},s=o.data.staticClass||"",u=i.id||"";return"#"===n[0]?n.substr(1)===u:(s=s.trim().split(" "),n=n.substr(1).split("."),n.reduce((function(e,n){return e&&s.includes(n)}),!0))},u=function(e){return e&&"string"===typeof e?(e=e.replace(/>>>/g,">"),e=e.split(">").map((function(e){return e.trim().split(" ").join("').descendant('")})).join("').child('"),function(n,t,a){return new n(t,a).descendant(e)}):function(){return[]}},l=function(){function e(n){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(0,o.default)(this,e),this.nodes=[n],this.all=t}return(0,i.default)(e,[{key:"child",value:function(e){var n=[];if(this.all)this.nodes.forEach((function(t){var a;(a=n).push.apply(a,(0,r.default)(t.$children.filter((function(n){return s(n,e)}))))}));else if(this.nodes.length>0){var t=this.nodes[0].$children.find((function(n){return s(n,e)}));n=t?[t]:[]}return this.nodes=n,this}},{key:"descendant",value:function(e){var n=this,t=[];return this.nodes.forEach((function(a){(function(){var e=!1;return function n(t,a){if(!e&&"function"===typeof a)for(var r=t.$children,o=0;!e&&o<r.length;o++){var i=r[o];e=!0===a(i),n(i,a)}}})()(a,(function(a){if(s(a,e))return t.push(a),!n.all}))})),this.nodes=t,this}}]),e}();function c(e){var n=e.split(",").map((function(e){return e.trim()}));if(!n[0])return null;var t=u(n[0]);return t(l,this,!1,e).nodes[0]}function f(e){var n=this,t=e.split(",").map((function(e){return e.trim()})),a=[];return t.forEach((function(e){var t=u(e);a=a.concat(t(l,n,!0,e).nodes)})),a}}});