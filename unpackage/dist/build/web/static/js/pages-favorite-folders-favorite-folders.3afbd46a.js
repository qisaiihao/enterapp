(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-favorite-folders-favorite-folders"],{"234e":function(n,t,e){"use strict";var o=e("fe7e"),a=e.n(o);a.a},"4d08":function(n,t,e){"use strict";e.d(t,"b",(function(){return o})),e.d(t,"c",(function(){return a})),e.d(t,"a",(function(){}));var o=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("v-uni-view",{staticClass:"container"},[n.isLoading?e("v-uni-view",{staticClass:"loading-container"},[e("v-uni-view",{staticClass:"loading-text"},[n._v("加载中...")])],1):n.folders.length>0?e("v-uni-view",{staticClass:"folders-container"},n._l(n.folders,(function(t,o){return e("v-uni-view",{key:o,staticClass:"folder-item",attrs:{"data-folder-id":t._id,"data-folder-name":t.name},on:{longpress:function(t){arguments[0]=t=n.$handleEvent(t),n.onFolderLongPress.apply(void 0,arguments)},click:function(t){arguments[0]=t=n.$handleEvent(t),n.enterFolder.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"folder-icon"},[n._v("📁")]),e("v-uni-view",{staticClass:"folder-info"},[e("v-uni-view",{staticClass:"folder-name"},[n._v(n._s(t.name))]),e("v-uni-view",{staticClass:"folder-meta"},[e("v-uni-text",{staticClass:"item-count"},[n._v(n._s(t.itemCount)+" 个收藏")]),e("v-uni-text",{staticClass:"create-time"},[n._v(n._s(t.createTime))])],1)],1),e("v-uni-view",{staticClass:"folder-arrow"},[n._v(">")])],1)})),1):e("v-uni-view",{staticClass:"empty-container"},[e("v-uni-view",{staticClass:"empty-icon"},[n._v("📁")]),e("v-uni-view",{staticClass:"empty-text"},[n._v("还没有收藏夹")]),e("v-uni-view",{staticClass:"empty-subtext"},[n._v("创建收藏夹来整理你的收藏吧")])],1),e("v-uni-view",{staticClass:"create-button",on:{click:function(t){arguments[0]=t=n.$handleEvent(t),n.showCreateFolder.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"create-icon"},[n._v("+")]),e("v-uni-text",[n._v("创建收藏夹")])],1),n.showCreateModal?e("v-uni-view",{staticClass:"modal-overlay"},[e("v-uni-view",{staticClass:"modal-content"},[e("v-uni-view",{staticClass:"modal-title"},[n._v("创建收藏夹")]),e("v-uni-input",{staticClass:"modal-input",attrs:{placeholder:"请输入收藏夹名称",value:n.newFolderName,maxlength:"20"},on:{input:function(t){arguments[0]=t=n.$handleEvent(t),n.onFolderNameInput.apply(void 0,arguments)},click:function(t){t.stopPropagation(),t.preventDefault(),arguments[0]=t=n.$handleEvent(t),n.trueFun.apply(void 0,arguments)}}}),e("v-uni-view",{staticClass:"modal-buttons"},[e("v-uni-button",{staticClass:"modal-btn cancel-btn",on:{click:function(t){arguments[0]=t=n.$handleEvent(t),n.hideCreateModal.apply(void 0,arguments)}}},[n._v("取消")]),e("v-uni-button",{staticClass:"modal-btn confirm-btn",on:{click:function(t){arguments[0]=t=n.$handleEvent(t),n.createFolder.apply(void 0,arguments)}}},[n._v("创建")])],1)],1)],1):n._e(),n.showEditModal?e("v-uni-view",{staticClass:"modal-overlay"},[e("v-uni-view",{staticClass:"modal-content"},[e("v-uni-view",{staticClass:"modal-title"},[n._v("重命名收藏夹")]),e("v-uni-input",{staticClass:"modal-input",attrs:{placeholder:"请输入收藏夹名称",value:n.editFolderName,maxlength:"20"},on:{input:function(t){arguments[0]=t=n.$handleEvent(t),n.onEditFolderNameInput.apply(void 0,arguments)},click:function(t){t.stopPropagation(),t.preventDefault(),arguments[0]=t=n.$handleEvent(t),n.trueFun.apply(void 0,arguments)}}}),e("v-uni-view",{staticClass:"modal-buttons"},[e("v-uni-button",{staticClass:"modal-btn cancel-btn",on:{click:function(t){arguments[0]=t=n.$handleEvent(t),n.hideEditModal.apply(void 0,arguments)}}},[n._v("取消")]),e("v-uni-button",{staticClass:"modal-btn confirm-btn",on:{click:function(t){arguments[0]=t=n.$handleEvent(t),n.updateFolderName.apply(void 0,arguments)}}},[n._v("保存")])],1)],1)],1):n._e()],1)},a=[]},"609b":function(n,t,e){"use strict";e.r(t);var o=e("4d08"),a=e("733e");for(var i in a)["default"].indexOf(i)<0&&function(n){e.d(t,n,(function(){return a[n]}))}(i);e("234e");var l=e("828b"),s=Object(l["a"])(a["default"],o["b"],o["c"],!1,null,"c9c79060",null,!1,o["a"],void 0);t["default"]=s.exports},"733e":function(n,t,e){"use strict";e.r(t);var o=e("ea99"),a=e.n(o);for(var i in o)["default"].indexOf(i)<0&&function(n){e.d(t,n,(function(){return o[n]}))}(i);t["default"]=a.a},ea99:function(n,t,e){"use strict";e("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,e("bf0f"),e("2797"),e("0c26"),e("c223");var o=e("11ca"),a=o.cloudCall,i={data:function(){return{folders:[],isLoading:!0,showCreateModal:!1,newFolderName:"",editingFolder:null,showEditModal:!1,editFolderName:""}},onLoad:function(){console.log("=== 收藏夹列表页面 onLoad ==="),this.loadFolders()},onShow:function(){console.log("=== 收藏夹列表页面 onShow ==="),this.loadFolders()},methods:{callCloudFunction:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return a(n,t,Object.assign({pageTag:"favorite-folders",context:this,requireAuth:!0},e))},loadFolders:function(){var n=this;this.setData({isLoading:!0}),this.callCloudFunction("getMyProfileData",{action:"getFavoriteFolders"}).then((function(t){if(console.log("获取收藏夹返回数据:",t),t.result&&t.result.success){var e=t.result.folders||[];console.log("收藏夹数据:",e),e.forEach((function(n,t){console.log("收藏夹".concat(t,":"),{_id:n._id,name:n.name,itemCount:n.itemCount,createTime:n.createTime})})),n.setData({folders:e,isLoading:!1})}else{var o;console.error("获取收藏夹失败:",t.result),uni.showToast({title:(null===(o=t.result)||void 0===o?void 0:o.message)||"加载失败",icon:"none"}),n.setData({isLoading:!1,folders:[]})}})).catch((function(t){console.error("获取收藏夹失败:",t),uni.showToast({title:"网络错误",icon:"none"}),n.setData({isLoading:!1})}))},showCreateFolder:function(){this.setData({showCreateModal:!0,newFolderName:""})},hideCreateModal:function(){this.setData({showCreateModal:!1})},onFolderNameInput:function(n){this.setData({newFolderName:n.detail.value})},createFolder:function(){var n=this,t=this.newFolderName.trim();t?(console.log("开始创建收藏夹，名称:",t),uni.showLoading({title:"创建中..."}),this.callCloudFunction("getMyProfileData",{action:"createFavoriteFolder",folderName:t}).then((function(t){uni.hideLoading(),console.log("创建收藏夹云函数返回:",t),t&&t.result?t.result.success?(uni.showToast({title:"创建成功"}),n.setData({showCreateModal:!1,newFolderName:""}),setTimeout((function(){n.loadFolders()}),300)):(console.error("创建收藏夹业务失败:",t.result),uni.showToast({title:t.result.message||"创建失败",icon:"none"})):(console.error("创建收藏夹返回格式异常:",t),uni.showToast({title:"创建失败：返回格式错误",icon:"none"}))})).catch((function(n){uni.hideLoading(),console.error("创建收藏夹云函数调用失败:",n),uni.showToast({title:"网络错误："+(n.errMsg||"未知错误"),icon:"none"})}))):uni.showToast({title:"请输入收藏夹名称",icon:"none"})},enterFolder:function(n){console.log("=== 点击收藏夹项 ==="),console.log("事件对象:",n),console.log("dataset:",n.currentTarget.dataset);var t=n.currentTarget.dataset.folderId,e=n.currentTarget.dataset.folderName;if(console.log("提取的folderId:",t),console.log("提取的folderName:",e),!t)return console.error("错误：folderId 为空"),void uni.showToast({title:"收藏夹ID为空",icon:"none"});var o="/pages/favorite-content/favorite-content?folderId=".concat(t,"&folderName=").concat(encodeURIComponent(e||""));console.log("跳转URL:",o),uni.navigateTo({url:o,success:function(){console.log("跳转成功")},fail:function(n){console.error("跳转失败:",n)}})},onFolderLongPress:function(n){var t=this,e=n.currentTarget.dataset.folderId,o=n.currentTarget.dataset.folderName;uni.showActionSheet({itemList:["重命名","删除"],success:function(n){0===n.tapIndex?t.showEditFolder(e,o):1===n.tapIndex&&t.deleteFolder(e,o)}})},showEditFolder:function(n,t){this.setData({showEditModal:!0,editingFolder:n,editFolderName:t})},hideEditModal:function(){this.setData({showEditModal:!1,editingFolder:null,editFolderName:""})},onEditFolderNameInput:function(n){this.setData({editFolderName:n.detail.value})},updateFolderName:function(){var n=this.editFolderName.trim();n?(uni.showToast({title:"重命名功能待实现",icon:"none"}),this.hideEditModal()):uni.showToast({title:"请输入收藏夹名称",icon:"none"})},deleteFolder:function(n,t){uni.showModal({title:"确认删除",content:'确定要删除收藏夹"'.concat(t,'"吗？删除后其中的所有收藏内容也会被删除。'),success:function(n){n.confirm&&uni.showToast({title:"删除功能待实现",icon:"none"})}})},trueFun:function(){console.log("占位：函数 true 未声明")}}};t.default=i},f84b:function(n,t,e){var o=e("c86c");t=o(!1),t.push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/* pages/favorite-folders/favorite-folders.wxss */.container[data-v-c9c79060]{min-height:100vh;background-color:#f5f5f5;padding:%?20?%}.loading-container[data-v-c9c79060]{display:flex;justify-content:center;align-items:center;height:%?400?%}.loading-text[data-v-c9c79060]{color:#999;font-size:%?28?%}.folders-container[data-v-c9c79060]{padding-bottom:%?120?%}.folder-item[data-v-c9c79060]{display:flex;align-items:center;background:#fff;border-radius:%?16?%;padding:%?30?%;margin-bottom:%?20?%;box-shadow:0 %?2?% %?8?% rgba(0,0,0,.1)}.folder-icon[data-v-c9c79060]{font-size:%?48?%;margin-right:%?24?%}.folder-info[data-v-c9c79060]{flex:1}.folder-name[data-v-c9c79060]{font-size:%?32?%;font-weight:500;color:#333;margin-bottom:%?8?%}.folder-meta[data-v-c9c79060]{display:flex;align-items:center;font-size:%?24?%;color:#999}.item-count[data-v-c9c79060]{margin-right:%?20?%}.folder-arrow[data-v-c9c79060]{font-size:%?32?%;color:#ccc}.empty-container[data-v-c9c79060]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:%?400?%}.empty-icon[data-v-c9c79060]{font-size:%?80?%;margin-bottom:%?20?%;opacity:.5}.empty-text[data-v-c9c79060]{font-size:%?32?%;color:#666;margin-bottom:%?12?%}.empty-subtext[data-v-c9c79060]{font-size:%?26?%;color:#999}.create-button[data-v-c9c79060]{position:fixed;bottom:%?40?%;right:%?40?%;display:flex;align-items:center;background:#9ed7ee;color:#fff;padding:%?20?% %?30?%;border-radius:%?50?%;box-shadow:0 %?4?% %?12?% rgba(7,193,96,.3);font-size:%?28?%}.create-icon[data-v-c9c79060]{font-size:%?32?%;margin-right:%?8?%}\n/* 弹窗样式 */.modal-overlay[data-v-c9c79060]{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.5);display:flex;align-items:center;justify-content:center;z-index:1000}.modal-content[data-v-c9c79060]{background:#fff;border-radius:%?16?%;padding:%?40?%;margin:%?40?%;width:calc(100% - %?80?%);max-width:%?500?%;position:relative;z-index:1001}.modal-title[data-v-c9c79060]{font-size:%?36?%;font-weight:500;color:#333;margin-bottom:%?30?%;text-align:center}.modal-input[data-v-c9c79060]{width:100%;height:%?80?%;border:%?2?% solid #e0e0e0;border-radius:%?8?%;padding:0 %?20?%;font-size:%?28?%;margin-bottom:%?30?%;box-sizing:border-box}.modal-input[data-v-c9c79060]:focus{border-color:#9ed7ee}.modal-buttons[data-v-c9c79060]{display:flex;gap:%?20?%}.modal-btn[data-v-c9c79060]{flex:1;height:%?80?%;border-radius:%?8?%;font-size:%?28?%;border:none;position:relative;z-index:1002}.cancel-btn[data-v-c9c79060]{background:#f5f5f5;color:#666}.confirm-btn[data-v-c9c79060]{background:#9ed7ee;color:#fff}",""]),n.exports=t},fe7e:function(n,t,e){var o=e("f84b");o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[n.i,o,""]]),o.locals&&(n.exports=o.locals);var a=e("967d").default;a("0af47ae8",o,!0,{sourceMap:!1,shadowMode:!1})}}]);