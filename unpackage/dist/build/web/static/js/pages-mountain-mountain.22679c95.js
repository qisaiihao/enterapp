(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-mountain-mountain"],{"0c27":function(n,t,e){"use strict";e.r(t);var a=e("16c7"),o=e.n(a);for(var i in a)["default"].indexOf(i)<0&&function(n){e.d(t,n,(function(){return a[n]}))}(i);t["default"]=o.a},"16c7":function(n,t,e){"use strict";e("6a54");var a=e("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(e("39d8"));e("bf0f"),e("2797"),e("c223"),e("4626"),e("5ac7");var i=a(e("8cb3")),r=a(e("84be")),s=a(e("8cb3")),l=a(e("84be")),d=e("2b90"),c={components:{skeleton:i.default,folderSelector:r.default},mixins:[d],data:function(){return{isLoading:!0,postList:[],currentPostIndex:0,touchStartX:0,touchEndX:0,touchStartY:0,touchEndY:0,hasMore:!0,page:0,backgroundImage:"",isTransitioning:!1,preloadedImages:{},hasFirstLoad_var:!1,currentPost:null,bgLayers:[{url:"",visible:!1},{url:"",visible:!1}],activeLayerIndex:0,swiperHeights:{},imageClampHeights:{},selected:0,url:"",visible:!1}},onLoad:function(){console.log("Mountain é¡µé¢ onLoad");var n=getApp();n.globalData.preloadedMountainData&&n.globalData.preloadedMountainData.length>0?(console.log("Mountain: ä½¿ç”¨é¢„åŠ è½½æ•°æ®"),this.setData({postList:n.globalData.preloadedMountainData,isLoading:!1,page:1,hasFirstLoad_var:!0}),this.updatePostDisplay(0),n.globalData.preloadedMountainData=null):(console.log("Mountain: æ— é¢„åŠ è½½æ•°æ®ï¼Œå¼€å§‹è¯·æ±‚"),this.getMountainData())},onShow:function(){var n=e("d87a"),t=n.updateTabBarStatus;t(this,2);try{var a=uni.getStorageSync("shouldRefreshMountain");if(a)return console.log("ã€mountainã€‘æ£€æµ‹åˆ°å‘å¸ƒæ ‡è®°ï¼Œåˆ·æ–°æ•°æ®"),uni.removeStorageSync("shouldRefreshMountain"),void this.refreshMountainData()}catch(o){console.log("CatchClause",o),console.log("CatchClause",o),console.error("æ£€æŸ¥åˆ·æ–°æ ‡è®°å¤±è´¥:",o)}this._hasFirstLoad?console.log("ã€mountainã€‘å†æ¬¡è¿›å…¥ï¼Œä¿æŒä¹‹å‰å†…å®¹"):(console.log("ã€mountainã€‘é¦–æ¬¡è¿›å…¥ï¼Œåˆ·æ–°æ•°æ®"),this.refreshMountainData())},methods:{refreshMountainData:function(){console.log("ã€mountainã€‘å¼€å§‹åˆ·æ–°mountainæ•°æ®"),this.setData({postList:[],currentPostIndex:0,page:0,hasMore:!0,bgLayers:[{url:"",visible:!1},{url:"",visible:!1}],activeLayerIndex:0}),this.getMountainData()},getMountainData:function(){var n=this;this.$tcb&&this.$tcb.callFunction&&this.$tcb.callFunction({name:"getPostList",data:{isPoem:!0,isOriginal:!1}}).then((function(t){console.log("Mountainæ•°æ®è·å–æˆåŠŸ:",t);var e=t.result.posts||[];n.setData({postList:e,isLoading:!1,hasFirstLoad_var:!0}),n.postList.length>0&&(n.setData({currentPost:n.postList[0]}),n.updatePostDisplay())})).catch((function(t){console.error("Mountainæ•°æ®è·å–å¤±è´¥:",t),n.setData({isLoading:!1})}))},getPostList:function(n){var t=this;if(!this.isLoading){this.setData({isLoading:!0});var e=5*this.page;console.log("å¼€å§‹è·å–å±±è¯—æ­Œåˆ—è¡¨ï¼Œskip:",e,"page:",this.page),this.$tcb&&this.$tcb.callFunction&&this.$tcb.callFunction({name:"getPostList",data:{skip:e,limit:5,isPoem:!0,isOriginal:!1}}).then((function(n){if(console.log("è·å–å±±è¯—æ­Œåˆ—è¡¨ç»“æœ:",n),n.result&&n.result.success){var e=n.result.posts||[];console.log("è·å–åˆ°å±±è¯—æ­Œæ•°é‡:",e.length),e.forEach((function(n,t){console.log("å±±è¯—æ­Œ".concat(t+1,":"),{title:n.title,isPoem:n.isPoem,isOriginal:n.isOriginal,content:n.content?n.content.substring(0,50)+"...":"æ— å†…å®¹"})})),e.forEach((function(n){n.imageUrls&&0!==n.imageUrls.length||(n.imageUrls=n.imageUrl?[n.imageUrl]:[])}));var a=0===t.page?e:t.postList.concat(e);console.log("å±±postList:",a),t.setData({postList:a,page:t.page+1,hasMore:5===e.length}),1===t.page&&a.length>0?(console.log("ç¬¬ä¸€ä¸ªå±±è¯—æ­Œå¸–å­æ•°æ®:",{title:a[0].title,imageUrls:a[0].imageUrls,poemBgImage:a[0].poemBgImage,hasBgImage:!!a[0].poemBgImage}),t.updatePostDisplay(0),a.length>1&&t.loadImageForIndex(1),a.length>2&&t.loadImageForIndex(2)):console.log("æœªè·å–åˆ°å±±è¯—æ­Œå¸–å­æ•°æ®")}else uni.showToast({title:"åŠ è½½å¤±è´¥",icon:"none"})})).catch((function(n){console.error("è·å–å±±è¯—æ­Œåˆ—è¡¨å¤±è´¥:",n),uni.showToast({title:"ç½‘ç»œé”™è¯¯",icon:"none"})})).finally((function(){t.setData({isLoading:!1}),"function"===typeof n&&n()}))}},touchStart:function(n){this.setData({touchStartX:n.touches[0].clientX,touchStartY:n.touches[0].clientY})},touchEnd:function(n){var t=n.changedTouches[0].clientX,e=n.changedTouches[0].clientY,a=this.touchStartX-t,o=this.touchStartY-e,i=Math.sqrt(a*a+o*o),r=Math.abs(180*Math.atan2(Math.abs(o),Math.abs(a))/Math.PI);i>80&&Math.abs(a)>50&&r<45&&(a>0?this.nextPost():this.prevPost())},nextPost:function(){var n=this;this.currentPostIndex<this.postList.length-1?(this.setData({isTransitioning:!0}),this.updatePostDisplay(this.currentPostIndex+1),setTimeout((function(){n.setData({isTransitioning:!1})}),500)):this.hasMore&&!this.isLoading&&this.loadMorePosts((function(){n.postList.length>n.currentPostIndex+1&&n.updatePostDisplay(n.currentPostIndex+1)}))},prevPost:function(){var n=this;this.currentPostIndex>0&&(this.setData({isTransitioning:!0}),this.updatePostDisplay(this.currentPostIndex-1),setTimeout((function(){n.setData({isTransitioning:!1})}),500))},onSinglePostTap:function(n){var t=n.currentTarget.dataset.postid;uni.navigateTo({url:"/pages/post-detail/post-detail?id=".concat(t)})},onImageError:function(n){console.error("å±±å›¾ç‰‡åŠ è½½å¤±è´¥",n.detail)},loadMorePosts:function(n){var t=this;if(!this.isLoading){var e=5*this.page;console.log("å¼€å§‹åŠ è½½æ›´å¤šå±±è¯—æ­Œï¼Œskip:",e,"page:",this.page),this.$tcb&&this.$tcb.callFunction&&this.$tcb.callFunction({name:"getPostList",data:{skip:e,limit:5,isPoem:!0,isOriginal:!1}}).then((function(n){if(console.log("åŠ è½½æ›´å¤šå±±è¯—æ­Œç»“æœ:",n),n.result&&n.result.success){var e=n.result.posts||[];console.log("è·å–åˆ°æ›´å¤šå±±è¯—æ­Œæ•°é‡:",e.length),e.forEach((function(n){n.imageUrls&&0!==n.imageUrls.length||(n.imageUrls=n.imageUrl?[n.imageUrl]:[])}));var a=t.postList.concat(e);t.setData({postList:a,page:t.page+1,hasMore:5===e.length});var o=t.postList.length-e.length;e.forEach((function(n,e){t.loadImageForIndex(o+e)}))}})).catch((function(n){console.error("åŠ è½½æ›´å¤šå±±è¯—æ­Œå¤±è´¥:",n)})).finally((function(){"function"===typeof n&&n()}))}},preloadNextBackgroundImage:function(n){var t=this,e=n+1;e>=this.postList.length?this.hasMore&&!this.isLoading&&this.loadMorePosts((function(){e<t.postList.length&&t.loadImageForIndex(e)})):this.loadImageForIndex(e)},updatePostDisplay:function(n){var t=this;if(!(n<0||n>=this.postList.length)){var e=this.postList[n];if(e){this.setData({currentPost:e,currentPostIndex:n});var a=e.poemBgImage||e.imageUrls&&e.imageUrls[0]||"",i=this.preloadedImages[a];if(!i){var r=getApp();r.globalData.preloadedImages&&r.globalData.preloadedImages[a]?(i=r.globalData.preloadedImages[a],this.setData((0,o.default)({},"preloadedImages.".concat(a),i))):i=a}var s=""===this.bgLayers[0].url&&""===this.bgLayers[1].url;s?(console.log("é¦–æ¬¡æ˜¾ç¤ºèƒŒæ™¯å›¾ï¼Œç›´æ¥è®¾ç½®ç¬¬ä¸€ä¸ªå›¾å±‚"),this.setData({"bgLayers[0].url":i,"bgLayers[0].visible":!0,"bgLayers[1].visible":!1,activeLayerIndex:0}),console.log("é¦–æ¬¡æ˜¾ç¤ºå®Œæˆï¼Œç«‹å³é¢„åŠ è½½ç¬¬äºŒå¼ å›¾ç‰‡"),this.preloadNextBackgroundImage(n)):(setTimeout((function(){t.switchBackgroundImage(i)}),100),this.preloadNextBackgroundImage(n))}}},switchBackgroundImage:function(n){var t;if(n){var e=this.preloadedImages[n],a=e||n;console.log("åˆ‡æ¢èƒŒæ™¯å›¾:",{originalUrl:n,preloadedUrl:e,finalUrl:a,hasPreloaded:!!e});var i=this.activeLayerIndex,r=(i+1)%2;this.pendingLayerIndex=r,this.pendingCurrentIndex=i,this.setData((t={},(0,o.default)(t,"bgLayers[".concat(r,"].url"),a),(0,o.default)(t,"bgLayers[".concat(r,"].visible"),!1),t))}},onBackgroundImageLoad:function(n){var t,e=n.currentTarget.dataset.layerIndex;(console.log("å›¾å±‚".concat(e,"å›¾ç‰‡åŠ è½½å®Œæˆ")),this.pendingLayerIndex===e)&&(console.log("å¾…åˆ‡æ¢å›¾å±‚å›¾ç‰‡åŠ è½½å®Œæˆï¼Œå¼€å§‹åˆ‡æ¢é€æ˜åº¦"),this.setData((t={},(0,o.default)(t,"bgLayers[".concat(this.pendingCurrentIndex,"].visible"),!1),(0,o.default)(t,"bgLayers[".concat(this.pendingLayerIndex,"].visible"),!0),(0,o.default)(t,"activeLayerIndex",this.pendingLayerIndex),t)),this.pendingLayerIndex=null,this.pendingCurrentIndex=null)},loadImageForIndex:function(n,t){var e=this,a=this.postList[n];if(a){var i=a.poemBgImage||a.imageUrls&&a.imageUrls[0]||"";if(i){var r=getApp();if(r.globalData.preloadedImages&&r.globalData.preloadedImages[i])return console.log("ä½¿ç”¨å…¨å±€é¢„åŠ è½½ç¼“å­˜:",i),this.setData((0,o.default)({},"preloadedImages.".concat(i),r.globalData.preloadedImages[i])),void("function"===typeof t&&t(r.globalData.preloadedImages[i]));if(!this.preloadedImages[i]){console.log("å¼€å§‹é¢„åŠ è½½å±±å›¾ç‰‡:",i);var s="undefined"!==typeof window;if(s&&(i.includes("tcb.qcloud.la")||i.includes("cloudbase")))return console.log("ğŸ” [H5] å±±é¡µé¢æ£€æµ‹åˆ°è…¾è®¯äº‘å­˜å‚¨URLï¼Œç›´æ¥ä½¿ç”¨:",i),this.setData((0,o.default)({},"preloadedImages.".concat(i),i)),void("function"===typeof t&&t(i));uni.downloadFile({url:i,success:function(n){200===n.statusCode&&(console.log("å±±å›¾ç‰‡é¢„åŠ è½½æˆåŠŸ:",i),e.setData((0,o.default)({},"preloadedImages.".concat(i),n.tempFilePath)),"function"===typeof t&&t(n.tempFilePath))},fail:function(n){console.error("å±±å›¾ç‰‡é¢„åŠ è½½å¤±è´¥:",i,n),s&&(console.log("ğŸ” [H5] å±±é¡µé¢é¢„åŠ è½½å¤±è´¥ï¼Œä½¿ç”¨åŸURL:",i),e.setData((0,o.default)({},"preloadedImages.".concat(i),i)),"function"===typeof t&&t(i))}})}}}},testImageUrls:function(){console.log("å ä½ï¼šå‡½æ•° testImageUrls æœªå£°æ˜")}}};t.default=c,t.default.components=Object.assign({skeleton:s.default,"folder-selector":l.default},t.default.components||{})},27748:function(n,t,e){"use strict";e.d(t,"b",(function(){return o})),e.d(t,"c",(function(){return i})),e.d(t,"a",(function(){return a}));var a={skeleton:e("8cb3").default},o=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("v-uni-view",[e("v-uni-view",{staticClass:"container"},[e("v-uni-view",{staticClass:"background-wrapper"},n._l(n.bgLayers,(function(t,a){return e("v-uni-image",{key:a,class:"bg-image "+(t.visible?"visible":""),attrs:{src:t.url,mode:"aspectFill","data-layer-index":a},on:{load:function(t){arguments[0]=t=n.$handleEvent(t),n.onBackgroundImageLoad.apply(void 0,arguments)}}})})),1),e("v-uni-view",{staticClass:"blur-background-wrapper"},n._l(n.bgLayers,(function(t,a){return e("v-uni-image",{key:a,class:"bg-image blur-image "+(t.visible?"visible":""),attrs:{src:t.url,mode:"aspectFill","data-layer-index":a},on:{load:function(t){arguments[0]=t=n.$handleEvent(t),n.onBackgroundImageLoad.apply(void 0,arguments)}}})})),1),n.isLoading?e("v-uni-view",[e("skeleton")],1):e("v-uni-view",[n.postList.length>0?e("v-uni-view",{staticClass:"poem-mode-container",on:{touchstart:function(t){arguments[0]=t=n.$handleEvent(t),n.touchStart.apply(void 0,arguments)},touchend:function(t){arguments[0]=t=n.$handleEvent(t),n.touchEnd.apply(void 0,arguments)}}},[e("v-uni-view",{class:"single-post-content "+(n.isTransitioning?"is-transitioning":""),attrs:{"data-postid":n.currentPost._id},on:{click:function(t){t.stopPropagation(),t.preventDefault(),arguments[0]=t=n.$handleEvent(t),n.onSinglePostTap.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"single-author-info"},[n.currentPost.authorAvatar?e("v-uni-image",{staticClass:"single-author-avatar",attrs:{src:n.currentPost.authorAvatar,mode:"aspectFill"}}):n._e(),e("v-uni-text",{staticClass:"single-author-name"},[n._v(n._s(n.currentPost.authorName))])],1),n.currentPost.title?e("v-uni-view",{staticClass:"single-post-title"},[n._v(n._s(n.currentPost.title))]):n._e(),n.currentPost.isPoem&&n.currentPost.author?e("v-uni-view",{staticClass:"single-poem-author"},[n._v(n._s(n.currentPost.author))]):n._e(),n.currentPost.content?e("v-uni-view",{staticClass:"single-post-content-text",staticStyle:{"white-space":"pre-wrap"}},[n._v(n._s(n.currentPost.content))]):n._e()],1),0!==n.postList.length||n.isLoading?n._e():e("v-uni-view",{staticClass:"empty-state"},[e("v-uni-view",{staticClass:"empty-icon"},[n._v("â›°ï¸")]),e("v-uni-view",{staticClass:"empty-text"},[n._v("è¿˜æ²¡æœ‰å±±è¯—å“¦ï½")]),e("v-uni-view",{staticClass:"empty-subtext"},[n._v("å¿«å»å¹¿åœºå‘ç°å¥½è¯—å§ï¼")])],1)],1):n._e(),n._e()],1)],1)],1)},i=[]},"2b90":function(n,t,e){var a=e("bdbb").default,o=e("4550").default;e("5c47"),e("a1c1"),e("c223"),e("64aa");function i(n){return"undefined"===typeof uni||"function"!==typeof uni.createSelectorQuery?null:uni.createSelectorQuery().in(n)}function r(n,t,e){if("function"!==typeof n.setData){for(var i=t.replace(/\[(.*?)\]/g,".$1").replace(/^\./,""),r=i.split("."),s=n,l=0;l<r.length-1;l+=1){var d=r[l];s[d]&&"object"===a(s[d])||(s[d]={}),s=s[d]}s[r[r.length-1]]=e}else n.setData(o({},t,e))}n.exports={data:function(){return{__galleryImageMeta:{}}},created:function(){"undefined"===typeof this.swiperHeights&&(this.swiperHeights={}),"undefined"===typeof this.imageClampHeights&&(this.imageClampHeights={}),"undefined"===typeof this.imageCache&&(this.imageCache={})},methods:{onImageLoad:function(n){if(n&&n.detail&&n.currentTarget){var t=n.currentTarget.dataset||{},e=n.detail,a=e.width,o=e.height;if(a&&o){var i=function(n){return void 0!==n.galleryKey&&null!==n.galleryKey?n.galleryKey:void 0!==n.postindex&&null!==n.postindex?n.postindex:void 0!==n.postIndex&&null!==n.postIndex?n.postIndex:void 0!==n.index&&null!==n.index?n.index:void 0!==n.postid&&null!==n.postid?n.postid:void 0!==n.postId&&null!==n.postId?n.postId:void 0!==n.imgindex?"gallery-".concat(n.imgindex):"gallery"}(t),r="undefined"!==typeof t.imgindex?t.imgindex:t.imgIndex||0,s=t.type||t.imageType||"single",l="".concat(i,"_").concat(r);this.__galleryImageMeta&&(this.__galleryImageMeta[l]={width:a,height:o}),this.imageCache&&(this.imageCache[l]={width:a,height:o});var d=Number(this.galleryMinImageRatio)||9/16,c=Number(this.galleryMaxImageRatio)||16/9;if("multi"===s&&0===Number(r)){var u=t.swiperSelector||t.gallerySelector||"#swiper-".concat(i);this.__updateSwiperHeight({key:i,selector:u,originalWidth:a,originalHeight:o,minRatio:d,maxRatio:c})}if("single"===s){var g=t.singleSelector||t.imageSelector||"#single-image-".concat(i);this.__updateClampHeight({key:i,selector:g,originalWidth:a,originalHeight:o,minRatio:d})}}}},__updateSwiperHeight:function(n){var t=this,e=n.key,a=n.selector,o=n.originalWidth,s=n.originalHeight,l=n.minRatio,d=n.maxRatio;if(a){var c=i(this);c&&c.select(a).boundingClientRect((function(n){if(n&&n.width){var a=o/s,i=function(n,t,e){return n>e?e:n<t?t:n}(a,l,d),c=n.width/i;r(t,"swiperHeights[".concat(e,"]"),c)}})).exec()}},__updateClampHeight:function(n){var t=this,e=n.key,a=n.selector,o=n.originalWidth,s=n.originalHeight,l=n.minRatio,d=o/s;if(!(d>=l)){var c=a?i(this):null;if(a&&c)c.select(a).boundingClientRect((function(n){if(n&&n.width){var a=n.width/l;r(t,"imageClampHeights.".concat(e),a)}})).exec();else if(this.galleryFallbackWidth){var u=this.galleryFallbackWidth/l;r(this,"imageClampHeights.".concat(e),u)}}}}}},"3a6e":function(n,t,e){"use strict";e.r(t);var a=e("27748"),o=e("0c27");for(var i in o)["default"].indexOf(i)<0&&function(n){e.d(t,n,(function(){return o[n]}))}(i);e("b80a");var r=e("828b"),s=Object(r["a"])(o["default"],a["b"],a["c"],!1,null,"501ba716",null,!1,a["a"],void 0);t["default"]=s.exports},"3c3d":function(n,t,e){"use strict";e.d(t,"b",(function(){return a})),e.d(t,"c",(function(){return o})),e.d(t,"a",(function(){}));var a=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("v-uni-view",[n.showClone?e("v-uni-view",{staticClass:"modal-overlay"},[e("v-uni-view",{staticClass:"modal-content"},[e("v-uni-view",{staticClass:"modal-header"},[e("v-uni-view",{staticClass:"modal-title"},[n._v("é€‰æ‹©æ”¶è—å¤¹")]),e("v-uni-view",{staticClass:"close-btn",on:{click:function(t){arguments[0]=t=n.$handleEvent(t),n.hideModal.apply(void 0,arguments)}}},[n._v("Ã—")])],1),e("v-uni-view",{staticClass:"modal-body"},[n.isLoading?e("v-uni-view",{staticClass:"loading-container"},[e("v-uni-view",{staticClass:"loading-text"},[n._v("åŠ è½½ä¸­...")])],1):n.folders.length>0?e("v-uni-view",{staticClass:"folders-list"},n._l(n.folders,(function(t,a){return e("v-uni-view",{key:a,class:"folder-item "+(n.selectedFolderId===t._id?"selected":""),attrs:{"data-folder-id":t._id},on:{click:function(t){arguments[0]=t=n.$handleEvent(t),n.selectFolder.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"folder-icon"},[n._v("ğŸ“")]),e("v-uni-view",{staticClass:"folder-info"},[e("v-uni-view",{staticClass:"folder-name"},[n._v(n._s(t.name))]),e("v-uni-view",{staticClass:"folder-count"},[n._v(n._s(t.itemCount)+" ä¸ªæ”¶è—")])],1),n.selectedFolderId===t._id?e("v-uni-view",{staticClass:"selected-icon"},[n._v("âœ“")]):n._e()],1)})),1):e("v-uni-view",{staticClass:"empty-state"},[e("v-uni-view",{staticClass:"empty-icon"},[n._v("ğŸ“")]),e("v-uni-view",{staticClass:"empty-text"},[n._v("è¿˜æ²¡æœ‰æ”¶è—å¤¹")]),e("v-uni-view",{staticClass:"empty-subtext"},[n._v("å…ˆåˆ›å»ºä¸€ä¸ªæ”¶è—å¤¹å§")])],1)],1),e("v-uni-view",{staticClass:"modal-footer"},[e("v-uni-button",{staticClass:"modal-btn secondary-btn",on:{click:function(t){arguments[0]=t=n.$handleEvent(t),n.createFolder.apply(void 0,arguments)}}},[n._v("åˆ›å»ºæ”¶è—å¤¹")]),e("v-uni-button",{staticClass:"modal-btn primary-btn",attrs:{disabled:!n.selectedFolderId},on:{click:function(t){arguments[0]=t=n.$handleEvent(t),n.confirmFavorite.apply(void 0,arguments)}}},[n._v("ç¡®è®¤æ”¶è—")])],1)],1)],1):n._e(),n.showCreateModal?e("v-uni-view",{staticClass:"modal-overlay"},[e("v-uni-view",{staticClass:"modal-content create-modal"},[e("v-uni-view",{staticClass:"modal-header"},[e("v-uni-view",{staticClass:"modal-title"},[n._v("åˆ›å»ºæ”¶è—å¤¹")]),e("v-uni-view",{staticClass:"close-btn",on:{click:[function(t){arguments[0]=t=n.$handleEvent(t),n.hideCreateModal.apply(void 0,arguments)},function(t){t.stopPropagation(),t.preventDefault(),arguments[0]=t=n.$handleEvent(t),n.trueFun.apply(void 0,arguments)}]}},[n._v("Ã—")])],1),e("v-uni-view",{staticClass:"modal-body"},[e("v-uni-input",{staticClass:"folder-name-input",attrs:{placeholder:"è¯·è¾“å…¥æ”¶è—å¤¹åç§°",value:n.newFolderName,focus:!0},on:{input:function(t){arguments[0]=t=n.$handleEvent(t),n.onFolderNameInput.apply(void 0,arguments)},click:function(t){t.stopPropagation(),t.preventDefault(),arguments[0]=t=n.$handleEvent(t),n.trueFun.apply(void 0,arguments)}}})],1),e("v-uni-view",{staticClass:"modal-footer"},[e("v-uni-button",{staticClass:"modal-btn secondary-btn",on:{click:function(t){arguments[0]=t=n.$handleEvent(t),n.hideCreateModal.apply(void 0,arguments)}}},[n._v("å–æ¶ˆ")]),e("v-uni-button",{staticClass:"modal-btn primary-btn",attrs:{disabled:!n.newFolderName},on:{click:function(t){arguments[0]=t=n.$handleEvent(t),n.createNewFolder.apply(void 0,arguments)}}},[n._v("åˆ›å»º")])],1)],1)],1):n._e()],1)},o=[]},4238:function(n,t,e){"use strict";var a=e("7292"),o=e.n(a);o.a},4550:function(n,t,e){e("6a54");var a=e("8bcf");n.exports=function(n,t,e){return t=a(t),t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n},n.exports.__esModule=!0,n.exports["default"]=n.exports},"465f":function(n,t,e){var a=e("c86c");t=a(!1),t.push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/* mountain.wxss */uni-page-body[data-v-501ba716]{background:transparent;padding:0}body.?%PAGE?%[data-v-501ba716]{background:transparent}.container[data-v-501ba716]{\n    /* ç§»é™¤ background-image, background-size ç­‰éƒ½åˆ æ‰ */position:relative;overflow:hidden;min-height:100vh}\n/* å±±æ¨¡å¼å®¹å™¨ */.poem-mode-container[data-v-501ba716]{position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:1;overflow:hidden}\n/* æ–°å¢ï¼šèƒŒæ™¯å›¾çš„å®¹å™¨å’Œæ ·å¼ */.background-wrapper[data-v-501ba716],\n.blur-background-wrapper[data-v-501ba716]{position:fixed;top:0;left:0;width:100%;height:100%;z-index:-2 /* ç¡®ä¿åœ¨æœ€åº•å±‚ */}.bg-image[data-v-501ba716]{position:absolute;top:0;left:0;width:100%;height:100%;opacity:0; /* é»˜è®¤éšè— */transition:opacity .5s ease-in-out /* å…³é”®ï¼šå¹³æ»‘çš„é€æ˜åº¦è¿‡æ¸¡ */}.bg-image.visible[data-v-501ba716]{opacity:1 /* æ˜¾ç¤º */}\n/* æ–°å¢ï¼šæ¨¡ç³ŠèƒŒæ™¯çš„å®¹å™¨å’Œæ ·å¼ */.blur-background-wrapper[data-v-501ba716]{z-index:-1;-webkit-filter:blur(30px) brightness(.7);filter:blur(30px) brightness(.7);-webkit-transform:scale(1.1);transform:scale(1.1)}\n/* æ”¶è—æŒ‰é’® */.favorite-btn[data-v-501ba716]{position:absolute;top:%?60?%;right:%?60?%;width:%?80?%;height:%?80?%;background:hsla(0,0%,100%,.9);border-radius:50%;display:flex;align-items:center;justify-content:center;box-shadow:0 %?4?% %?12?% rgba(0,0,0,.15);z-index:999;transition:all .3s ease}.favorite-btn[data-v-501ba716]:active{-webkit-transform:scale(.95);transform:scale(.95)}.favorite-icon[data-v-501ba716]{font-size:%?36?%}\n/* å•å¸–å†…å®¹åŒºåŸŸ */.single-post-content[data-v-501ba716]{width:calc(100% - %?40?%);height:calc(100% - %?80?%);display:flex;flex-direction:column;padding:%?40?% %?20?%;box-sizing:border-box;background:hsla(0,0%,100%,.8); /* ç»Ÿä¸€ä½¿ç”¨ç™½è‰²èƒŒæ™¯ï¼Œä¸è·¯é¡µé¢ä¸€è‡´ */margin:%?40?% %?20?%;border-radius:%?24?%;box-shadow:0 %?8?% %?32?% rgba(0,0,0,.15);position:relative;transition:-webkit-transform .3s ease-in-out;transition:transform .3s ease-in-out;transition:transform .3s ease-in-out,-webkit-transform .3s ease-in-out;-webkit-transform:translateX(0);transform:translateX(0)}\n/* åˆ‡æ¢åŠ¨ç”»çŠ¶æ€ */.single-post-content.is-transitioning[data-v-501ba716]{\n    /* å¯ä»¥å°è¯•åªæ”¹å˜é€æ˜åº¦ï¼Œè€Œä¸æ˜¯ä½ç§» */opacity:.95;-webkit-transform:scale(.99);transform:scale(.99)}\n/* å±±è¯—æ­Œç‰¹æ®Šæ ·å¼ */.mountain-poem[data-v-501ba716]{background:rgba(232,224,208,.95); /* å±±ä¸»é¢˜ï¼šå¤§åœ°è‰²ç³» */border:%?2?% solid #8b7355}\n/* å±±æ ‡è¯† */.mountain-badge[data-v-501ba716]{position:absolute;top:%?20?%;right:%?20?%;background:#8b7355;color:#fff;padding:%?8?% %?16?%;border-radius:%?20?%;font-size:%?24?%;font-weight:700;box-shadow:0 %?2?% %?8?% rgba(139,115,85,.3);z-index:10}\n/* ä½œè€…ä¿¡æ¯ */.single-author-info[data-v-501ba716]{display:flex;align-items:center;margin-bottom:%?15?%;padding-bottom:%?10?%;border-bottom:%?1?% solid rgba(139,115,85,.3)}.single-author-avatar[data-v-501ba716]{width:%?80?%;height:%?80?%;border-radius:50%;margin-right:%?20?%;background-color:#f5f5f5;border:%?4?% solid #fff;box-shadow:0 %?4?% %?12?% rgba(0,0,0,.1)}.single-author-name[data-v-501ba716]{font-size:%?32?%;color:#000;font-weight:600;text-shadow:0 %?1?% %?2?% hsla(0,0%,100%,.8)}\n/* æ ‡é¢˜ */.single-post-title[data-v-501ba716]{font-size:%?36?%;font-weight:700;color:#000;margin-bottom:%?10?%;line-height:1.4;text-align:center;text-shadow:0 %?1?% %?2?% hsla(0,0%,100%,.8)}\n/* è¯—æ­Œä½œè€…æ ·å¼ */.single-poem-author[data-v-501ba716]{font-size:%?32?%;color:#000;text-align:center;margin:%?5?% 0 %?15?% 0;text-shadow:0 %?1?% %?2?% hsla(0,0%,100%,.8);letter-spacing:%?2?%}\n/* å†…å®¹æ–‡å­— */.single-post-content-text[data-v-501ba716]{font-size:%?32?%;color:#000;line-height:1.8;margin-top:%?20?%;padding:%?30?% %?40?%;background:transparent;border-radius:0;max-height:62vh;overflow-y:auto;font-family:-apple-system-font,PingFang SC,Helvetica Neue,Arial,sans-serif;letter-spacing:%?1?%;text-shadow:0 %?1?% %?2?% hsla(0,0%,100%,.8)}\n/* éª¨æ¶å±å®¹å™¨ */.skeleton-container[data-v-501ba716]{position:absolute;top:0;left:0;width:100%;height:100%;background:hsla(0,0%,100%,.95); /* ç»Ÿä¸€ä½¿ç”¨ç™½è‰²èƒŒæ™¯ */z-index:999}\n/* ç©ºçŠ¶æ€ */.empty-state[data-v-501ba716]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:%?100?% %?40?%;text-align:center}.empty-icon[data-v-501ba716]{font-size:%?80?%;margin-bottom:%?20?%;opacity:.7}.empty-text[data-v-501ba716]{font-size:%?32?%;color:#666;margin-bottom:%?10?%}.empty-subtext[data-v-501ba716]{font-size:%?28?%;color:#999}\n/* æ‚¬æµ®å‘å¸ƒæŒ‰é’® */.add-button[data-v-501ba716]{position:fixed;bottom:%?120?%;right:%?30?%;width:%?100?%;height:%?100?%;background-color:#8b7355;border-radius:50%;display:flex;align-items:center;justify-content:center;color:#fff;font-size:%?48?%;box-shadow:0 %?4?% %?16?% rgba(139,115,85,.3);z-index:1000}",""]),n.exports=t},"4d97":function(n,t,e){"use strict";e.r(t);var a=e("aee5"),o=e.n(a);for(var i in a)["default"].indexOf(i)<0&&function(n){e.d(t,n,(function(){return a[n]}))}(i);t["default"]=o.a},"515a":function(n,t,e){"use strict";var a=e("b52c"),o=e.n(a);o.a},"52d1":function(n,t,e){"use strict";e.d(t,"b",(function(){return a})),e.d(t,"c",(function(){return o})),e.d(t,"a",(function(){}));var a=function(){var n=this.$createElement,t=this._self._c||n;return t("v-uni-view",{staticClass:"skeleton-wrapper"},[t("v-uni-view",{staticClass:"skeleton-poem-card"},[t("v-uni-view",{staticClass:"skeleton-original-badge skeleton-animate"}),t("v-uni-view",{staticClass:"skeleton-author-info"},[t("v-uni-view",{staticClass:"skeleton-avatar skeleton-animate"}),t("v-uni-view",{staticClass:"skeleton-name skeleton-animate"})],1),t("v-uni-view",{staticClass:"skeleton-title skeleton-animate"}),t("v-uni-view",{staticClass:"skeleton-content-large skeleton-animate"}),t("v-uni-view",{staticClass:"skeleton-content-large skeleton-animate"}),t("v-uni-view",{staticClass:"skeleton-content-large skeleton-animate",staticStyle:{width:"70%"}})],1),t("v-uni-view",{staticClass:"skeleton-poem-card skeleton-secondary"},[t("v-uni-view",{staticClass:"skeleton-author-info"},[t("v-uni-view",{staticClass:"skeleton-avatar skeleton-animate"}),t("v-uni-view",{staticClass:"skeleton-name skeleton-animate"})],1),t("v-uni-view",{staticClass:"skeleton-title skeleton-animate"}),t("v-uni-view",{staticClass:"skeleton-content-large skeleton-animate"}),t("v-uni-view",{staticClass:"skeleton-content-large skeleton-animate",staticStyle:{width:"80%"}})],1)],1)},o=[]},"56c9":function(n,t,e){e("9e15"),e("884b"),e("01a2"),e("e39c"),e("bf0f"),e("7a76"),e("c9b5"),e("64aa");var a=e("bdbb")["default"];n.exports=function(n,t){if("object"!==a(n)||null===n)return n;var e=n[Symbol.toPrimitive];if(void 0!==e){var o=e.call(n,t||"default");if("object"!==a(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)},n.exports.__esModule=!0,n.exports["default"]=n.exports},7292:function(n,t,e){var a=e("8774");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals);var o=e("967d").default;o("8625021a",a,!0,{sourceMap:!1,shadowMode:!1})},"84be":function(n,t,e){"use strict";e.r(t);var a=e("3c3d"),o=e("daaa");for(var i in o)["default"].indexOf(i)<0&&function(n){e.d(t,n,(function(){return o[n]}))}(i);e("4238");var r=e("828b"),s=Object(r["a"])(o["default"],a["b"],a["c"],!1,null,"5e1631f9",null,!1,a["a"],void 0);t["default"]=s.exports},8774:function(n,t,e){var a=e("c86c");t=a(!1),t.push([n.i,"\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/* components/folder-selector/folder-selector.wxss */.modal-overlay[data-v-5e1631f9]{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.5);display:flex;align-items:center;justify-content:center;z-index:1000}.modal-content[data-v-5e1631f9]{background:#fff;border-radius:%?16?%;margin:%?40?%;width:calc(100% - %?80?%);max-width:%?600?%;max-height:80vh;display:flex;flex-direction:column}.modal-header[data-v-5e1631f9]{display:flex;align-items:center;justify-content:space-between;padding:%?30?% %?40?%;border-bottom:%?1?% solid #f0f0f0}.modal-title[data-v-5e1631f9]{font-size:%?36?%;font-weight:500;color:#333}.close-btn[data-v-5e1631f9]{font-size:%?48?%;color:#999;line-height:1;position:relative;z-index:1001}.modal-body[data-v-5e1631f9]{flex:1;padding:%?20?% 0;max-height:60vh;overflow-y:auto}.loading-container[data-v-5e1631f9]{display:flex;justify-content:center;align-items:center;height:%?200?%}.loading-text[data-v-5e1631f9]{color:#999;font-size:%?28?%}.folders-list[data-v-5e1631f9]{padding:0 %?40?%}.folder-item[data-v-5e1631f9]{display:flex;align-items:center;padding:%?24?% 0;border-bottom:%?1?% solid #f8f8f8}.folder-item[data-v-5e1631f9]:last-child{border-bottom:none}.folder-item.selected[data-v-5e1631f9]{background:rgba(7,193,96,.1);border-radius:%?8?%;padding:%?24?% %?20?%;margin:0 %?-20?%}.folder-icon[data-v-5e1631f9]{font-size:%?40?%;margin-right:%?20?%}.folder-info[data-v-5e1631f9]{flex:1}.folder-name[data-v-5e1631f9]{font-size:%?30?%;color:#333;font-weight:500;margin-bottom:%?4?%}.folder-count[data-v-5e1631f9]{font-size:%?24?%;color:#999}.selected-icon[data-v-5e1631f9]{font-size:%?32?%;color:#9ed7ee;font-weight:700}.empty-state[data-v-5e1631f9]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:%?200?%;padding:%?40?%}.empty-icon[data-v-5e1631f9]{font-size:%?60?%;margin-bottom:%?16?%;opacity:.5}.empty-text[data-v-5e1631f9]{font-size:%?28?%;color:#666;margin-bottom:%?8?%}.empty-subtext[data-v-5e1631f9]{font-size:%?24?%;color:#999}.modal-footer[data-v-5e1631f9]{display:flex;gap:%?20?%;padding:%?30?% %?40?%;border-top:%?1?% solid #f0f0f0}.modal-btn[data-v-5e1631f9]{flex:1;height:%?80?%;border-radius:%?8?%;font-size:%?28?%;border:none;display:flex;align-items:center;justify-content:center;position:relative;z-index:1001}.secondary-btn[data-v-5e1631f9]{background:#f5f5f5;color:#666}.primary-btn[data-v-5e1631f9]{background:#9ed7ee;color:#fff}.primary-btn[data-v-5e1631f9]:disabled{background:#ccc;color:#999}\r\n/* åˆ›å»ºæ”¶è—å¤¹å¼¹çª—æ ·å¼ */.create-modal .modal-body[data-v-5e1631f9]{padding:%?40?%}.folder-name-input[data-v-5e1631f9]{width:100%;height:%?80?%;padding:0 %?20?%;border:%?2?% solid #e0e0e0;border-radius:%?8?%;font-size:%?30?%;box-sizing:border-box}.folder-name-input[data-v-5e1631f9]:focus{border-color:#9ed7ee}",""]),n.exports=t},"8bcf":function(n,t,e){var a=e("bdbb")["default"],o=e("56c9");n.exports=function(n){var t=o(n,"string");return"symbol"===a(t)?t:String(t)},n.exports.__esModule=!0,n.exports["default"]=n.exports},"8cb3":function(n,t,e){"use strict";e.r(t);var a=e("52d1"),o=e("4d97");for(var i in o)["default"].indexOf(i)<0&&function(n){e.d(t,n,(function(){return o[n]}))}(i);e("515a");var r=e("828b"),s=Object(r["a"])(o["default"],a["b"],a["c"],!1,null,"a51e8920",null,!1,a["a"],void 0);t["default"]=s.exports},"9d3a":function(n,t,e){"use strict";e("6a54");var a=e("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,e("bf0f"),e("0c26");var o=a(e("39d8")),i=e("11ca"),r=i.cloudCall,s={data:function(){return{folders:[],isLoading:!0,selectedFolderId:"",showCreateModal:!1,newFolderName:"",showClone:!1}},props:{show:{type:Boolean,default:!1},postId:{type:String,default:""}},watch:(0,o.default)({show:function(n){n&&this.loadFolders()}},"show",{handler:function(n,t){this.showClone=n},immediate:!0}),methods:{callCloudFunction:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r(n,t,Object.assign({pageTag:"folder-selector",context:this,requireAuth:!0},e))},loadFolders:function(){var n=this;console.log("å¼€å§‹åŠ è½½æ”¶è—å¤¹åˆ—è¡¨..."),this.setData({isLoading:!0});var t=this.$requireOpenid&&this.$requireOpenid();t?this.callCloudFunction("getMyProfileData",{action:"getFavoriteFolders",openid:t}).then((function(t){if(console.log("folder-selectorè·å–æ”¶è—å¤¹:",t),t.result&&t.result.success){var e=t.result.folders||[];console.log("è·å–åˆ°æ”¶è—å¤¹æ•°é‡:",e.length);var a=n.selectedFolderId;a&&!e.some((function(n){return n._id===a}))&&(console.log("æ¸…ç©ºå¤±æ•ˆçš„é€‰ä¸­çŠ¶æ€"),n.setData({selectedFolderId:""})),n.setData({folders:e,isLoading:!1})}else{var o;uni.showToast({title:(null===(o=t.result)||void 0===o?void 0:o.message)||"åŠ è½½å¤±è´¥",icon:"none"}),n.setData({isLoading:!1,folders:[],selectedFolderId:""})}})).catch((function(t){console.error("è·å–æ”¶è—å¤¹å¤±è´¥:",t),uni.showToast({title:"ç½‘ç»œé”™è¯¯",icon:"none"}),n.setData({isLoading:!1,folders:[],selectedFolderId:""})})):this.setData({isLoading:!1,folders:[],selectedFolderId:""})},selectFolder:function(n){var t=n.currentTarget.dataset.folderId;this.setData({selectedFolderId:t})},confirmFavorite:function(){var n=this,t=this.selectedFolderId,e=this.postId;if(console.log("ç¡®è®¤æ”¶è—ï¼ŒpostId:",e,"folderId:",t),t){if(!e)return console.error("postId ä¸ºç©ºï¼Œæ— æ³•æ”¶è—"),void uni.showToast({title:"å‚æ•°é”™è¯¯ï¼šå¸–å­IDä¸ºç©º",icon:"none"});var a=this.$requireOpenid&&this.$requireOpenid();a&&(uni.showLoading({title:"æ”¶è—ä¸­..."}),this.callCloudFunction("getMyProfileData",{action:"addToFavorite",postId:e,folderId:t,openid:a}).then((function(t){uni.hideLoading(),console.log("ç¡®è®¤æ”¶è—è¿”å›ç»“æœ:",t),t&&t.result?t.result.success?(uni.showToast({title:"æ”¶è—æˆåŠŸ"}),console.log("æ”¶è—æˆåŠŸï¼Œå¼€å§‹å…³é—­å¼¹çª—"),n.setData({selectedFolderId:""}),setTimeout((function(){n.hideModal()}),1500),n.$emit("favoriteSuccess")):(console.error("æ”¶è—ä¸šåŠ¡å¤±è´¥:",t.result),uni.showToast({title:t.result.message||"æ”¶è—å¤±è´¥",icon:"none"})):(console.error("æ”¶è—è¿”å›æ ¼å¼å¼‚å¸¸:",t),uni.showToast({title:"æ”¶è—å¤±è´¥ï¼šè¿”å›æ ¼å¼é”™è¯¯",icon:"none"}))})).catch((function(n){uni.hideLoading(),console.error("æ”¶è—äº‘å‡½æ•°è°ƒç”¨å¤±è´¥:",n),uni.showToast({title:"ç½‘ç»œé”™è¯¯ï¼š"+(n.errMsg||"æœªçŸ¥é”™è¯¯"),icon:"none"})})))}else uni.showToast({title:"è¯·é€‰æ‹©æ”¶è—å¤¹",icon:"none"})},createFolder:function(){this.setData({showCreateModal:!0,newFolderName:""})},hideCreateModal:function(){this.setData({showCreateModal:!1,newFolderName:""})},onFolderNameInput:function(n){var t=n.detail.value;this.setData({newFolderName:t})},createNewFolder:function(){var n=this,t=this.newFolderName.trim();if(t){this.setData({newFolderName:t}),console.log("ç»„ä»¶å¼€å§‹åˆ›å»ºæ”¶è—å¤¹ï¼Œåç§°:",t);var e=this.$requireOpenid&&this.$requireOpenid();e&&(uni.showLoading({title:"åˆ›å»ºä¸­..."}),this.callCloudFunction("getMyProfileData",{action:"createFavoriteFolder",folderName:t,openid:e}).then((function(t){uni.hideLoading(),console.log("ç»„ä»¶åˆ›å»ºæ”¶è—å¤¹è¿”å›ç»“æœ:",t),t&&t.result?t.result.success?(uni.showToast({title:"åˆ›å»ºæˆåŠŸ",duration:2e3}),n.setData({showCreateModal:!1}),setTimeout((function(){n.loadFolders()}),300)):(console.error("ç»„ä»¶åˆ›å»ºæ”¶è—å¤¹ä¸šåŠ¡å¤±è´¥:",t.result),uni.showToast({title:t.result.message||"åˆ›å»ºå¤±è´¥",icon:"none",duration:3e3})):(console.error("ç»„ä»¶åˆ›å»ºæ”¶è—å¤¹è¿”å›æ ¼å¼å¼‚å¸¸:",t),uni.showToast({title:"åˆ›å»ºå¤±è´¥ï¼šè¿”å›æ ¼å¼é”™è¯¯",icon:"none",duration:3e3}))})).catch((function(n){uni.hideLoading(),console.error("ç»„ä»¶åˆ›å»ºæ”¶è—å¤¹äº‘å‡½æ•°è°ƒç”¨å¤±è´¥:",n),uni.showToast({title:"åˆ›å»ºå¤±è´¥: "+(n.errMsg||"ç½‘ç»œé”™è¯¯"),icon:"none",duration:3e3})})))}else uni.showToast({title:"è¯·è¾“å…¥æ”¶è—å¤¹åç§°",icon:"none"})},hideModal:function(){console.log("=== ç‚¹å‡»å…³é—­æŒ‰é’®ï¼Œå¼€å§‹éšè—å¼¹çª— ==="),console.log("å½“å‰çŠ¶æ€ï¼š",{show:this.show,showCreateModal:this.showCreateModal,selectedFolderId:this.selectedFolderId}),this.setData({selectedFolderId:"",showClone:!1,showCreateModal:!1,newFolderName:""}),console.log("=== å¼¹çª—å·²éšè—ï¼ŒçŠ¶æ€å·²é‡ç½® ==="),this.$emit("hide")},trueFun:function(){console.log("å ä½ï¼šå‡½æ•° true æœªå£°æ˜")}},created:function(){}};t.default=s},aee5:function(n,t,e){"use strict";e("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={data:function(){return{}},props:{},methods:{},created:function(){}}},b52c:function(n,t,e){var a=e("ee16");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals);var o=e("967d").default;o("77236fde",a,!0,{sourceMap:!1,shadowMode:!1})},b80a:function(n,t,e){"use strict";var a=e("eff5"),o=e.n(a);o.a},d87a:function(n,t,e){"use strict";e("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.getCurrentTabBarStatus=function(n){try{if("function"===typeof n.getTabBar&&n.getTabBar()){var t,e=n.getTabBar();return(null===(t=e.data)||void 0===t?void 0:t.selected)||null}}catch(i){console.log("æ— æ³•ä»åŸç”ŸgetTabBarè·å–çŠ¶æ€")}try{var a,o=null===(a=n.$refs)||void 0===a?void 0:a.customTabBar;if(o&&o.data)return o.data.selected||null}catch(i){console.log("æ— æ³•ä»è‡ªå®šä¹‰ç»„ä»¶è·å–çŠ¶æ€")}try{return uni.getStorageSync("currentTabIndex")||null}catch(i){console.log("æ— æ³•ä»å­˜å‚¨è·å–çŠ¶æ€")}return null},t.isTabBarSupported=function(){try{return!("undefined"===typeof wx||!wx.getTabBar)||!("undefined"===typeof uni||!uni.getTabBar)}catch(n){return!1}},t.updateTabBarStatus=function(n,t){try{if("function"===typeof n.getTabBar&&n.getTabBar())return n.getTabBar().setData({selected:t}),console.log("TabBarçŠ¶æ€æ›´æ–°æˆåŠŸ (åŸç”ŸAPI): selected=".concat(t)),!0}catch(e){console.log("åŸç”ŸgetTabBar APIä¸å¯ç”¨:",e.message)}try{return uni.setStorageSync("currentTabIndex",t),console.log("TabBarçŠ¶æ€å·²ä¿å­˜åˆ°å­˜å‚¨: selected=".concat(t)),!0}catch(e){console.log("å­˜å‚¨æœºåˆ¶ä¸å¯ç”¨:",e.message)}return console.warn("åŸç”ŸgetTabBar APIä¸å¯ç”¨ï¼Œå½“å‰å¹³å°å¯èƒ½ä¸æ”¯æŒgetTabBar()"),!1}},daaa:function(n,t,e){"use strict";e.r(t);var a=e("9d3a"),o=e.n(a);for(var i in a)["default"].indexOf(i)<0&&function(n){e.d(t,n,(function(){return a[n]}))}(i);t["default"]=o.a},ee16:function(n,t,e){var a=e("c86c");t=a(!1),t.push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/* components/skeleton/skeleton.wxss */.skeleton-wrapper[data-v-a51e8920]{width:100%;height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:%?20?%;box-sizing:border-box}\n/* è¯»è¯—é¡µéª¨æ¶å±å¡ç‰‡æ ·å¼ - åŒ¹é…è¯»è¯—é¡µè®¾è®¡ */.skeleton-poem-card[data-v-a51e8920]{width:calc(100% - %?40?%);height:calc(100% - %?80?%);display:flex;flex-direction:column;padding:%?40?% %?20?%;box-sizing:border-box;background:hsla(0,0%,100%,.95);margin:%?40?% %?20?%;border-radius:%?24?%;box-shadow:0 %?8?% %?32?% rgba(0,0,0,.1);position:relative}\n/* ç¬¬äºŒä¸ªå¡ç‰‡é€æ˜åº¦é™ä½ */.skeleton-poem-card.skeleton-secondary[data-v-a51e8920]{opacity:.6;position:absolute;top:%?20?%;left:%?20?%;right:%?20?%;bottom:%?20?%;z-index:-1;-webkit-transform:scale(.95);transform:scale(.95)}\n/* åŸåˆ›æ ‡è¯†éª¨æ¶ */.skeleton-original-badge[data-v-a51e8920]{position:absolute;top:%?20?%;right:%?20?%;width:%?80?%;height:%?40?%;border-radius:%?20?%}\n/* ä½œè€…ä¿¡æ¯éª¨æ¶ */.skeleton-author-info[data-v-a51e8920]{display:flex;align-items:center;margin-bottom:%?15?%;padding-bottom:%?10?%}.skeleton-avatar[data-v-a51e8920]{width:%?80?%;height:%?80?%;border-radius:50%;margin-right:%?20?%}.skeleton-name[data-v-a51e8920]{width:%?200?%;height:%?32?%;border-radius:%?16?%}\n/* å±…ä¸­æ ‡é¢˜éª¨æ¶ */.skeleton-title[data-v-a51e8920]{width:60%;height:%?40?%;margin:0 auto %?20?% auto; /* å±…ä¸­å¹¶å¢åŠ ä¸‹è¾¹è· */border-radius:%?20?%;text-align:center}\n/* å¤§å†…å®¹åŒºåŸŸéª¨æ¶ */.skeleton-content-large[data-v-a51e8920]{width:100%;height:%?40?%;margin-bottom:%?20?%;border-radius:%?20?%}.skeleton-animate[data-v-a51e8920]{background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0 50%,#f0f0f0 75%);background-size:200% 100%;-webkit-animation:skeleton-loading-data-v-a51e8920 1.5s infinite linear;animation:skeleton-loading-data-v-a51e8920 1.5s infinite linear}@-webkit-keyframes skeleton-loading-data-v-a51e8920{0%{background-position:200% 0}100%{background-position:-200% 0}}@keyframes skeleton-loading-data-v-a51e8920{0%{background-position:200% 0}100%{background-position:-200% 0}}",""]),n.exports=t},eff5:function(n,t,e){var a=e("465f");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals);var o=e("967d").default;o("354ccd4e",a,!0,{sourceMap:!1,shadowMode:!1})}}]);