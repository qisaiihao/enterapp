(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-portfolio-portfolio"],{"0e01":function(e,t,a){var n=a("a662");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var o=a("967d").default;o("d6e9fa16",n,!0,{sourceMap:!1,shadowMode:!1})},"2ac0":function(e,t,a){"use strict";var n=a("0e01"),o=a.n(n);o.a},6276:function(e,t,a){"use strict";a.r(t);var n=a("8b6b"),o=a("eade");for(var i in o)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return o[e]}))}(i);a("2ac0");var r=a("828b"),c=Object(r["a"])(o["default"],n["b"],n["c"],!1,null,"0865a7bc",null,!1,n["a"],void 0);t["default"]=c.exports},"8b6b":function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){}));var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"portfolio-page"},[a("v-uni-view",{staticClass:"header"},[a("v-uni-view",{staticClass:"header-left",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.goBack.apply(void 0,arguments)}}},[a("v-uni-text",{staticClass:"back-icon"},[e._v("←")])],1),a("v-uni-text",{staticClass:"header-title"},[e._v("作品集")]),a("v-uni-view",{staticClass:"header-right"},[a("v-uni-text",{staticClass:"create-btn",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.openCreateModal.apply(void 0,arguments)}}},[e._v("+ 新建")])],1)],1),a("v-uni-scroll-view",{staticClass:"portfolio-list",attrs:{"scroll-y":"true"},on:{scrolltolower:function(t){arguments[0]=t=e.$handleEvent(t),e.loadMore.apply(void 0,arguments)}}},[e.loading?a("v-uni-view",{staticClass:"loading"},[a("v-uni-text",[e._v("加载中...")])],1):0===e.folders.length?a("v-uni-view",{staticClass:"empty-state"},[a("v-uni-text",{staticClass:"empty-icon"},[e._v("📁")]),a("v-uni-text",{staticClass:"empty-text"},[e._v("暂无作品集")]),a("v-uni-text",{staticClass:"empty-subtext"},[e._v("创建您的第一个作品集吧")])],1):a("v-uni-view",{staticClass:"folder-grid"},e._l(e.folders,(function(t){return a("v-uni-view",{key:t._id,staticClass:"folder-item",on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.openFolder(t)}}},[a("v-uni-view",{staticClass:"folder-cover"},[t.coverUrl?a("v-uni-image",{staticClass:"cover-image",attrs:{src:t.coverUrl,mode:"aspectFill"}}):a("v-uni-view",{staticClass:"default-cover"},[a("v-uni-text",{staticClass:"folder-icon"},[e._v("📚")])],1)],1),a("v-uni-view",{staticClass:"folder-info"},[a("v-uni-text",{staticClass:"folder-name"},[e._v(e._s(t.name))]),a("v-uni-text",{staticClass:"folder-count"},[e._v(e._s(t.itemCount)+" 个作品")])],1),a("v-uni-view",{staticClass:"folder-actions"},[a("v-uni-text",{staticClass:"action-btn delete",on:{click:function(a){a.stopPropagation(),arguments[0]=a=e.$handleEvent(a),e.deleteFolder(t)}}},[e._v("删除")])],1)],1)})),1),e.hasMore&&!e.loading?a("v-uni-view",{staticClass:"load-more"},[a("v-uni-text",[e._v("加载更多...")])],1):e._e()],1),e.showCreateModal?a("v-uni-view",{staticClass:"modal-overlay",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.hideCreateModal.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"modal-content",on:{click:function(t){t.stopPropagation(),arguments[0]=t=e.$handleEvent(t)}}},[a("v-uni-view",{staticClass:"modal-header"},[a("v-uni-text",{staticClass:"modal-title"},[e._v("新建作品集")]),a("v-uni-text",{staticClass:"close-btn",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.hideCreateModal.apply(void 0,arguments)}}},[e._v("×")])],1),a("v-uni-view",{staticClass:"modal-body"},[a("v-uni-input",{staticClass:"folder-name-input",attrs:{placeholder:"请输入作品集名称",maxlength:"20"},model:{value:e.newFolderName,callback:function(t){e.newFolderName=t},expression:"newFolderName"}})],1),a("v-uni-view",{staticClass:"modal-footer"},[a("v-uni-button",{staticClass:"modal-btn cancel",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.hideCreateModal.apply(void 0,arguments)}}},[e._v("取消")]),a("v-uni-button",{staticClass:"modal-btn confirm",attrs:{disabled:!e.newFolderName.trim()},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.createFolder.apply(void 0,arguments)}}},[e._v("创建")])],1)],1)],1):e._e()],1)},o=[]},"967d":function(e,t,a){"use strict";function n(e,t){for(var a=[],n={},o=0;o<t.length;o++){var i=t[o],r=i[0],c=i[1],l=i[2],s=i[3],d={id:e+":"+o,css:c,media:l,sourceMap:s};n[r]?n[r].parts.push(d):a.push(n[r]={id:r,parts:[d]})}return a}a.r(t),a.d(t,"default",(function(){return v}));var o="undefined"!==typeof document;if("undefined"!==typeof DEBUG&&DEBUG&&!o)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var i={},r=o&&(document.head||document.getElementsByTagName("head")[0]),c=null,l=0,s=!1,d=function(){},u=null,f="undefined"!==typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function v(e,t,a,o){s=a,u=o||{};var r=n(e,t);return p(r),function(t){for(var a=[],o=0;o<r.length;o++){var c=r[o],l=i[c.id];l.refs--,a.push(l)}t?(r=n(e,t),p(r)):r=[];for(o=0;o<a.length;o++){l=a[o];if(0===l.refs){for(var s=0;s<l.parts.length;s++)l.parts[s]();delete i[l.id]}}}}function p(e){for(var t=0;t<e.length;t++){var a=e[t],n=i[a.id];if(n){n.refs++;for(var o=0;o<n.parts.length;o++)n.parts[o](a.parts[o]);for(;o<a.parts.length;o++)n.parts.push(b(a.parts[o]));n.parts.length>a.parts.length&&(n.parts.length=a.parts.length)}else{var r=[];for(o=0;o<a.parts.length;o++)r.push(b(a.parts[o]));i[a.id]={id:a.id,refs:1,parts:r}}}}function h(){var e=document.createElement("style");return e.type="text/css",r.appendChild(e),e}function b(e){var t,a,n=document.querySelector('style[data-vue-ssr-id~="'+e.id+'"]');if(n){if(s)return d;n.parentNode.removeChild(n)}if(f){var o=l++;n=c||(c=h()),t=m.bind(null,n,o,!1),a=m.bind(null,n,o,!0)}else n=h(),t=w.bind(null,n),a=function(){n.parentNode.removeChild(n)};return t(e),function(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap)return;t(e=n)}else a()}}var g=function(){var e=[];return function(t,a){return e[t]=a,e.filter(Boolean).join("\n")}}();function m(e,t,a,n){var o=a?"":$(n.css);if(e.styleSheet)e.styleSheet.cssText=g(t,o);else{var i=document.createTextNode(o),r=e.childNodes;r[t]&&e.removeChild(r[t]),r.length?e.insertBefore(i,r[t]):e.appendChild(i)}}function w(e,t){var a=$(t.css),n=t.media,o=t.sourceMap;if(n&&e.setAttribute("media",n),u.ssrId&&e.setAttribute("data-vue-ssr-id",t.id),o&&(a+="\n/*# sourceURL="+o.sources[0]+" */",a+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),e.styleSheet)e.styleSheet.cssText=a;else{while(e.firstChild)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(a))}}var x=/%\?([+-]?\d+(\.\d+)?)\?%/g,y=/\.\?%PAGE\?%/g,C=/\?%PAGE\?%\[data-v-[a-z0-9]{8}\]/g,k=/uni-page-body\[data-v-[a-z0-9]{8}\]/g,_=/var\(--status-bar-height\)/gi,M=/var\(--window-top\)/gi,F=/var\(--window-bottom\)/gi,z=/var\(--window-left\)/gi,N=/var\(--window-right\)/gi;function $(e){var t=function(){var e="function"===typeof getApp&&getApp();return e&&e.$route&&e.$route.meta&&e.$route.meta.name||""}();if("undefined"!==typeof uni&&!uni.canIUse("css.var")){var a=function(){var e="function"===typeof getApp&&getApp();if(e&&e.$route&&e.$route.meta&&e.$route.meta.name)return{top:e.$route.meta.windowTop,bottom:e.$route.meta.isTabBar?50:0};return{top:0,bottom:0}}();e=e.replace(_,"0px").replace(M,a.top+"px").replace(F,a.bottom+"px").replace(z,"0px").replace(N,"0px")}return e.replace(C,t).replace(y,"").replace(k,"body."+t+" uni-page-body").replace(/\{[\s\S]+?\}|@media.+?\{/g,(function(e){return"undefined"===typeof uni?e:e.replace(x,(function(e,t){return uni.upx2px(t)+"px"}))}))}},a662:function(e,t,a){var n=a("c86c");t=n(!1),t.push([e.i,".portfolio-page[data-v-0865a7bc]{height:100vh;background:#f8f9fa;display:flex;flex-direction:column}.header[data-v-0865a7bc]{display:flex;align-items:center;justify-content:space-between;padding:%?20?% %?30?%;background:#fff;border-bottom:%?1?% solid #e9ecef}.header-left[data-v-0865a7bc]{width:%?60?%;height:%?60?%;display:flex;align-items:center;justify-content:center}.back-icon[data-v-0865a7bc]{font-size:%?36?%;color:#333;font-weight:700}.header-title[data-v-0865a7bc]{font-size:%?36?%;font-weight:600;color:#333}.header-right[data-v-0865a7bc]{width:%?100?%;display:flex;justify-content:flex-end}.create-btn[data-v-0865a7bc]{font-size:%?28?%;color:#9ed7ee;font-weight:500}.portfolio-list[data-v-0865a7bc]{flex:1;padding:%?30?%}.loading[data-v-0865a7bc]{text-align:center;padding:%?60?% 0;color:#666;font-size:%?28?%}.empty-state[data-v-0865a7bc]{text-align:center;padding:%?120?% 0}.empty-icon[data-v-0865a7bc]{font-size:%?120?%;margin-bottom:%?30?%;display:block}.empty-text[data-v-0865a7bc]{font-size:%?32?%;color:#333;margin-bottom:%?20?%;display:block}.empty-subtext[data-v-0865a7bc]{font-size:%?28?%;color:#666;display:block}.folder-grid[data-v-0865a7bc]{display:flex;flex-direction:column;gap:%?30?%}.folder-item[data-v-0865a7bc]{background:#fff;border-radius:%?20?%;padding:%?30?%;box-shadow:0 %?4?% %?20?% rgba(0,0,0,.08);display:flex;align-items:center;gap:%?30?%}.folder-cover[data-v-0865a7bc]{width:%?120?%;height:%?120?%;border-radius:%?16?%;overflow:hidden;flex-shrink:0}.cover-image[data-v-0865a7bc]{width:100%;height:100%}.default-cover[data-v-0865a7bc]{width:100%;height:100%;background:linear-gradient(135deg,#667eea,#764ba2);display:flex;align-items:center;justify-content:center}.folder-icon[data-v-0865a7bc]{font-size:%?60?%;color:#fff}.folder-info[data-v-0865a7bc]{flex:1;display:flex;flex-direction:column;gap:%?10?%}.folder-name[data-v-0865a7bc]{font-size:%?32?%;font-weight:600;color:#333}.folder-count[data-v-0865a7bc]{font-size:%?26?%;color:#666}.folder-actions[data-v-0865a7bc]{display:flex;gap:%?20?%}.action-btn[data-v-0865a7bc]{font-size:%?26?%;color:#9ed7ee;padding:%?10?% %?20?%;border-radius:%?12?%;background:rgba(158,215,238,.1)}.action-btn.delete[data-v-0865a7bc]{color:#ff6b6b;background:hsla(0,100%,71%,.1)}.load-more[data-v-0865a7bc]{text-align:center;padding:%?40?% 0;color:#666;font-size:%?28?%}\r\n\r\n/* 弹窗样式 */.modal-overlay[data-v-0865a7bc]{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.5);display:flex;align-items:center;justify-content:center;z-index:1000}.modal-content[data-v-0865a7bc]{background:#fff;border-radius:%?20?%;width:%?600?%;padding:0}.modal-header[data-v-0865a7bc]{display:flex;align-items:center;justify-content:space-between;padding:%?40?% %?40?% %?30?%;border-bottom:%?1?% solid #f0f0f0}.modal-title[data-v-0865a7bc]{font-size:%?32?%;font-weight:600;color:#333}.close-btn[data-v-0865a7bc]{font-size:%?40?%;color:#999;width:%?60?%;height:%?60?%;display:flex;align-items:center;justify-content:center}.modal-body[data-v-0865a7bc]{padding:%?40?%}.folder-name-input[data-v-0865a7bc]{width:100%;height:%?80?%;border:%?2?% solid #e9ecef;border-radius:%?12?%;padding:0 %?20?%;font-size:%?28?%;color:#333;box-sizing:border-box}.folder-name-input[data-v-0865a7bc]:focus{border-color:#9ed7ee}.modal-footer[data-v-0865a7bc]{display:flex;gap:%?20?%;padding:%?30?% %?40?% %?40?%}.modal-btn[data-v-0865a7bc]{flex:1;height:%?80?%;border-radius:%?12?%;font-size:%?28?%;font-weight:500;border:none}.modal-btn.cancel[data-v-0865a7bc]{background:#f8f9fa;color:#666}.modal-btn.confirm[data-v-0865a7bc]{background:#9ed7ee;color:#fff}.modal-btn.confirm[disabled][data-v-0865a7bc]{background:#ccc;color:#999}",""]),e.exports=t},c86c:function(e,t,a){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var a=function(e,t){var a=e[1]||"",n=e[3];if(!n)return a;if(t&&"function"===typeof btoa){var o=function(e){var t=btoa(unescape(encodeURIComponent(JSON.stringify(e)))),a="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(t);return"/*# ".concat(a," */")}(n),i=n.sources.map((function(e){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(e," */")}));return[a].concat(i).concat([o]).join("\n")}return[a].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(a,"}"):a})).join("")},t.i=function(e,a,n){"string"===typeof e&&(e=[[null,e,""]]);var o={};if(n)for(var i=0;i<this.length;i++){var r=this[i][0];null!=r&&(o[r]=!0)}for(var c=0;c<e.length;c++){var l=[].concat(e[c]);n&&o[l[0]]||(a&&(l[2]?l[2]="".concat(a," and ").concat(l[2]):l[2]=a),t.push(l))}},t}},d46c:function(e,t,a){"use strict";a("6a54");var n=a("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("0c26"),a("c223");var o=n(a("2634")),i=n(a("2fdc")),r=a("38db"),c=r.cloudCall,l={data:function(){return{folders:[],loading:!1,hasMore:!1,showCreateModal:!1,newFolderName:""}},onLoad:function(){this.loadFolders()},methods:{callCloudFunction:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return c(e,t,Object.assign({pageTag:"portfolio",context:this,requireAuth:!0},a))},goBack:function(){uni.navigateBack()},loadFolders:function(){var e=this;return(0,i.default)((0,o.default)().mark((function t(){var a;return(0,o.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.loading){t.next=2;break}return t.abrupt("return");case 2:return e.loading=!0,t.prev=3,t.next=6,e.callCloudFunction("getPortfolioFolders",{});case 6:a=t.sent,a.result&&a.result.success?e.folders=a.result.folders||[]:uni.showToast({title:"获取作品集失败",icon:"none"}),t.next=14;break;case 10:t.prev=10,t.t0=t["catch"](3),console.error("加载作品集失败:",t.t0),uni.showToast({title:"加载失败",icon:"none"});case 14:return t.prev=14,e.loading=!1,t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[3,10,14,17]])})))()},loadMore:function(){},openCreateModal:function(){this.setData({showCreateModal:!0,newFolderName:""})},hideCreateModal:function(){this.setData({showCreateModal:!1,newFolderName:""})},createFolder:function(){var e=this;return(0,i.default)((0,o.default)().mark((function t(){var a,n;return(0,o.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.newFolderName.trim()){t.next=3;break}return uni.showToast({title:"请输入作品集名称",icon:"none"}),t.abrupt("return");case 3:return t.prev=3,uni.showLoading({title:"创建中..."}),t.next=7,e.callCloudFunction("createPortfolioFolder",{folderName:e.newFolderName.trim()});case 7:a=t.sent,a.result&&a.result.success?(uni.showToast({title:"创建成功",icon:"success"}),e.hideCreateModal(),e.loadFolders()):uni.showToast({title:(null===(n=a.result)||void 0===n?void 0:n.message)||"创建失败",icon:"none"}),t.next=15;break;case 11:t.prev=11,t.t0=t["catch"](3),console.error("创建作品集失败:",t.t0),uni.showToast({title:"创建失败",icon:"none"});case 15:return t.prev=15,uni.hideLoading(),t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[3,11,15,18]])})))()},openFolder:function(e){uni.navigateTo({url:"/pages/portfolio-detail/portfolio-detail?folderId=".concat(e._id,"&folderName=").concat(encodeURIComponent(e.name))})},deleteFolder:function(e){return(0,i.default)((0,o.default)().mark((function t(){return(0,o.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.isDefault){t.next=3;break}return uni.showToast({title:"默认作品集不能删除",icon:"none"}),t.abrupt("return");case 3:uni.showModal({title:"确认删除",content:'确定要删除作品集"'.concat(e.name,'"吗？里面的作品不会被删除。'),success:function(){var e=(0,i.default)((0,o.default)().mark((function e(t){return(0,o.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.confirm)try{uni.showLoading({title:"删除中..."}),uni.showToast({title:"删除功能开发中",icon:"none"})}catch(a){console.error("删除作品集失败:",a),uni.showToast({title:"删除失败",icon:"none"})}finally{uni.hideLoading()}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()});case 4:case"end":return t.stop()}}),t)})))()}}};t.default=l},eade:function(e,t,a){"use strict";a.r(t);var n=a("d46c"),o=a.n(n);for(var i in n)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(i);t["default"]=o.a}}]);