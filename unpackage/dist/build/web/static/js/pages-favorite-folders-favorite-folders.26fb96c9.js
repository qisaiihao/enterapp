(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-favorite-folders-favorite-folders"],{"050a":function(n,r,e){"use strict";e("6a54"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,e("bf0f"),e("2797"),e("0c26"),e("c223");var t=e("38db"),o=t.cloudCall,a={data:function(){return{folders:[],isLoading:!0,showCreateModal:!1,newFolderName:"",editingFolder:null,showEditModal:!1,editFolderName:""}},onLoad:function(){console.log("=== 收藏夹列表页面 onLoad ==="),this.loadFolders()},onShow:function(){console.log("=== 收藏夹列表页面 onShow ==="),this.loadFolders()},methods:{callCloudFunction:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return o(n,r,Object.assign({pageTag:"favorite-folders",context:this,requireAuth:!0},e))},loadFolders:function(){var n=this;this.setData({isLoading:!0}),this.callCloudFunction("getMyProfileData",{action:"getFavoriteFolders"}).then((function(r){if(console.log("获取收藏夹返回数据:",r),r.result&&r.result.success){var e=r.result.folders||[];console.log("收藏夹数据:",e),e.forEach((function(n,r){console.log("收藏夹".concat(r,":"),{_id:n._id,name:n.name,itemCount:n.itemCount,createTime:n.createTime})})),n.setData({folders:e,isLoading:!1})}else{var t;console.error("获取收藏夹失败:",r.result),uni.showToast({title:(null===(t=r.result)||void 0===t?void 0:t.message)||"加载失败",icon:"none"}),n.setData({isLoading:!1,folders:[]})}})).catch((function(r){console.error("获取收藏夹失败:",r),uni.showToast({title:"网络错误",icon:"none"}),n.setData({isLoading:!1})}))},showCreateFolder:function(){this.setData({showCreateModal:!0,newFolderName:""})},hideCreateModal:function(){this.setData({showCreateModal:!1})},onFolderNameInput:function(n){this.setData({newFolderName:n.detail.value})},createFolder:function(){var n=this,r=this.newFolderName.trim();r?(console.log("开始创建收藏夹，名称:",r),uni.showLoading({title:"创建中..."}),this.callCloudFunction("getMyProfileData",{action:"createFavoriteFolder",folderName:r}).then((function(r){uni.hideLoading(),console.log("创建收藏夹云函数返回:",r),r&&r.result?r.result.success?(uni.showToast({title:"创建成功"}),n.setData({showCreateModal:!1,newFolderName:""}),setTimeout((function(){n.loadFolders()}),300)):(console.error("创建收藏夹业务失败:",r.result),uni.showToast({title:r.result.message||"创建失败",icon:"none"})):(console.error("创建收藏夹返回格式异常:",r),uni.showToast({title:"创建失败：返回格式错误",icon:"none"}))})).catch((function(n){uni.hideLoading(),console.error("创建收藏夹云函数调用失败:",n),uni.showToast({title:"网络错误："+(n.errMsg||"未知错误"),icon:"none"})}))):uni.showToast({title:"请输入收藏夹名称",icon:"none"})},enterFolder:function(n){console.log("=== 点击收藏夹项 ==="),console.log("事件对象:",n),console.log("dataset:",n.currentTarget.dataset);var r=n.currentTarget.dataset.folderId,e=n.currentTarget.dataset.folderName;if(console.log("提取的folderId:",r),console.log("提取的folderName:",e),!r)return console.error("错误：folderId 为空"),void uni.showToast({title:"收藏夹ID为空",icon:"none"});var t="/pages/favorite-content/favorite-content?folderId=".concat(r,"&folderName=").concat(encodeURIComponent(e||""));console.log("跳转URL:",t),uni.navigateTo({url:t,success:function(){console.log("跳转成功")},fail:function(n){console.error("跳转失败:",n)}})},onFolderLongPress:function(n){var r=this,e=n.currentTarget.dataset.folderId,t=n.currentTarget.dataset.folderName;uni.showActionSheet({itemList:["重命名","删除"],success:function(n){0===n.tapIndex?r.showEditFolder(e,t):1===n.tapIndex&&r.deleteFolder(e,t)}})},showEditFolder:function(n,r){this.setData({showEditModal:!0,editingFolder:n,editFolderName:r})},hideEditModal:function(){this.setData({showEditModal:!1,editingFolder:null,editFolderName:""})},onEditFolderNameInput:function(n){this.setData({editFolderName:n.detail.value})},updateFolderName:function(){var n=this.editFolderName.trim();n?(uni.showToast({title:"重命名功能待实现",icon:"none"}),this.hideEditModal()):uni.showToast({title:"请输入收藏夹名称",icon:"none"})},deleteFolder:function(n,r){uni.showModal({title:"确认删除",content:'确定要删除收藏夹"'.concat(r,'"吗？删除后其中的所有收藏内容也会被删除。'),success:function(n){n.confirm&&uni.showToast({title:"删除功能待实现",icon:"none"})}})},trueFun:function(){console.log("占位：函数 true 未声明")}}};r.default=a},4713:function(n,r,e){var t=e("c86c");r=t(!1),r.push([n.i,"\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/* pages/favorite-folders/favorite-folders.wxss */.container[data-v-2649856e]{min-height:100vh;background-color:#f5f5f5;padding:%?20?%}.loading-container[data-v-2649856e]{display:flex;justify-content:center;align-items:center;height:%?400?%}.loading-text[data-v-2649856e]{color:#999;font-size:%?28?%}.folders-container[data-v-2649856e]{padding-bottom:%?120?%}.folder-item[data-v-2649856e]{display:flex;align-items:center;background:#fff;border-radius:%?16?%;padding:%?30?%;margin-bottom:%?20?%;box-shadow:0 %?2?% %?8?% rgba(0,0,0,.1)}.folder-icon[data-v-2649856e]{font-size:%?48?%;margin-right:%?24?%}.folder-info[data-v-2649856e]{flex:1}.folder-name[data-v-2649856e]{font-size:%?32?%;font-weight:500;color:#333;margin-bottom:%?8?%}.folder-meta[data-v-2649856e]{display:flex;align-items:center;font-size:%?24?%;color:#999}.item-count[data-v-2649856e]{margin-right:%?20?%}.folder-arrow[data-v-2649856e]{font-size:%?32?%;color:#ccc}.empty-container[data-v-2649856e]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:%?400?%}.empty-icon[data-v-2649856e]{font-size:%?80?%;margin-bottom:%?20?%;opacity:.5}.empty-text[data-v-2649856e]{font-size:%?32?%;color:#666;margin-bottom:%?12?%}.empty-subtext[data-v-2649856e]{font-size:%?26?%;color:#999}.create-button[data-v-2649856e]{position:fixed;bottom:%?40?%;right:%?40?%;display:flex;align-items:center;background:#9ed7ee;color:#fff;padding:%?20?% %?30?%;border-radius:%?50?%;box-shadow:0 %?4?% %?12?% rgba(7,193,96,.3);font-size:%?28?%}.create-icon[data-v-2649856e]{font-size:%?32?%;margin-right:%?8?%}\r\n/* 弹窗样式 */.modal-overlay[data-v-2649856e]{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.5);display:flex;align-items:center;justify-content:center;z-index:1000}.modal-content[data-v-2649856e]{background:#fff;border-radius:%?16?%;padding:%?40?%;margin:%?40?%;width:calc(100% - %?80?%);max-width:%?500?%;position:relative;z-index:1001}.modal-title[data-v-2649856e]{font-size:%?36?%;font-weight:500;color:#333;margin-bottom:%?30?%;text-align:center}.modal-input[data-v-2649856e]{width:100%;height:%?80?%;border:%?2?% solid #e0e0e0;border-radius:%?8?%;padding:0 %?20?%;font-size:%?28?%;margin-bottom:%?30?%;box-sizing:border-box}.modal-input[data-v-2649856e]:focus{border-color:#9ed7ee}.modal-buttons[data-v-2649856e]{display:flex;gap:%?20?%}.modal-btn[data-v-2649856e]{flex:1;height:%?80?%;border-radius:%?8?%;font-size:%?28?%;border:none;position:relative;z-index:1002}.cancel-btn[data-v-2649856e]{background:#f5f5f5;color:#666}.confirm-btn[data-v-2649856e]{background:#9ed7ee;color:#fff}",""]),n.exports=r},7036:function(n,r,e){var t=e("4713");t.__esModule&&(t=t.default),"string"===typeof t&&(t=[[n.i,t,""]]),t.locals&&(n.exports=t.locals);var o=e("967d").default;o("58dbe1da",t,!0,{sourceMap:!1,shadowMode:!1})},"79a7":function(n,r,e){"use strict";e.r(r);var t=e("a443"),o=e("9e1a");for(var a in o)["default"].indexOf(a)<0&&function(n){e.d(r,n,(function(){return o[n]}))}(a);e("fe09");var i=e("828b"),l=Object(i["a"])(o["default"],t["b"],t["c"],!1,null,"2649856e",null,!1,t["a"],void 0);r["default"]=l.exports},"9e1a":function(n,r,e){"use strict";e.r(r);var t=e("050a"),o=e.n(t);for(var a in t)["default"].indexOf(a)<0&&function(n){e.d(r,n,(function(){return t[n]}))}(a);r["default"]=o.a},a443:function(n,r,e){"use strict";e.d(r,"b",(function(){return t})),e.d(r,"c",(function(){return o})),e.d(r,"a",(function(){}));var t=function(){var n=this,r=n.$createElement,e=n._self._c||r;return e("v-uni-view",{staticClass:"container"},[n.folders.length>0?e("v-uni-view",{staticClass:"folders-container"},n._l(n.folders,(function(r,t){return e("v-uni-view",{key:t,staticClass:"folder-item",attrs:{"data-folder-id":r._id,"data-folder-name":r.name},on:{longpress:function(r){arguments[0]=r=n.$handleEvent(r),n.onFolderLongPress.apply(void 0,arguments)},click:function(r){arguments[0]=r=n.$handleEvent(r),n.enterFolder.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"folder-icon"},[n._v("📁")]),e("v-uni-view",{staticClass:"folder-info"},[e("v-uni-view",{staticClass:"folder-name"},[n._v(n._s(r.name))]),e("v-uni-view",{staticClass:"folder-meta"},[e("v-uni-text",{staticClass:"item-count"},[n._v(n._s(r.itemCount)+" 个收藏")]),e("v-uni-text",{staticClass:"create-time"},[n._v(n._s(r.createTime))])],1)],1),e("v-uni-view",{staticClass:"folder-arrow"},[n._v(">")])],1)})),1):e("v-uni-view",{staticClass:"empty-container"},[e("v-uni-view",{staticClass:"empty-icon"},[n._v("📁")]),e("v-uni-view",{staticClass:"empty-text"},[n._v("还没有收藏夹")]),e("v-uni-view",{staticClass:"empty-subtext"},[n._v("创建收藏夹来整理你的收藏吧")])],1),e("v-uni-view",{staticClass:"create-button",on:{click:function(r){arguments[0]=r=n.$handleEvent(r),n.showCreateFolder.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"create-icon"},[n._v("+")]),e("v-uni-text",[n._v("创建收藏夹")])],1),n.showCreateModal?e("v-uni-view",{staticClass:"modal-overlay"},[e("v-uni-view",{staticClass:"modal-content"},[e("v-uni-view",{staticClass:"modal-title"},[n._v("创建收藏夹")]),e("v-uni-input",{staticClass:"modal-input",attrs:{placeholder:"请输入收藏夹名称",value:n.newFolderName,maxlength:"20"},on:{input:function(r){arguments[0]=r=n.$handleEvent(r),n.onFolderNameInput.apply(void 0,arguments)},click:function(r){r.stopPropagation(),r.preventDefault(),arguments[0]=r=n.$handleEvent(r),n.trueFun.apply(void 0,arguments)}}}),e("v-uni-view",{staticClass:"modal-buttons"},[e("v-uni-button",{staticClass:"modal-btn cancel-btn",on:{click:function(r){arguments[0]=r=n.$handleEvent(r),n.hideCreateModal.apply(void 0,arguments)}}},[n._v("取消")]),e("v-uni-button",{staticClass:"modal-btn confirm-btn",on:{click:function(r){arguments[0]=r=n.$handleEvent(r),n.createFolder.apply(void 0,arguments)}}},[n._v("创建")])],1)],1)],1):n._e(),n.showEditModal?e("v-uni-view",{staticClass:"modal-overlay"},[e("v-uni-view",{staticClass:"modal-content"},[e("v-uni-view",{staticClass:"modal-title"},[n._v("重命名收藏夹")]),e("v-uni-input",{staticClass:"modal-input",attrs:{placeholder:"请输入收藏夹名称",value:n.editFolderName,maxlength:"20"},on:{input:function(r){arguments[0]=r=n.$handleEvent(r),n.onEditFolderNameInput.apply(void 0,arguments)},click:function(r){r.stopPropagation(),r.preventDefault(),arguments[0]=r=n.$handleEvent(r),n.trueFun.apply(void 0,arguments)}}}),e("v-uni-view",{staticClass:"modal-buttons"},[e("v-uni-button",{staticClass:"modal-btn cancel-btn",on:{click:function(r){arguments[0]=r=n.$handleEvent(r),n.hideEditModal.apply(void 0,arguments)}}},[n._v("取消")]),e("v-uni-button",{staticClass:"modal-btn confirm-btn",on:{click:function(r){arguments[0]=r=n.$handleEvent(r),n.updateFolderName.apply(void 0,arguments)}}},[n._v("保存")])],1)],1)],1):n._e()],1)},o=[]},fe09:function(n,r,e){"use strict";var t=e("7036"),o=e.n(t);o.a}}]);