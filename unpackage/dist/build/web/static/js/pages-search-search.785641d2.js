(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-search-search"],{"03c1":function(t,n,e){"use strict";var a=e("193e"),i=e.n(a);i.a},"139b":function(t,n,e){e("795c"),e("64aa"),e("5c47"),e("a1c1"),e("c223"),e("f7a5");var a=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return String(t).padStart(n,"0")},i=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy-MM-dd HH:mm:ss",e=t instanceof Date?t:new Date(t);if(Number.isNaN(e.getTime()))return"";var i={yyyy:String(e.getFullYear()),MM:a(e.getMonth()+1),dd:a(e.getDate()),HH:a(e.getHours()),mm:a(e.getMinutes()),ss:a(e.getSeconds())};return n.replace(/yyyy|MM|dd|HH|mm|ss/g,(function(t){return i[t]}))};t.exports={formatTimeAgo:function(t){var n=new Date,e=new Date(t),a=n.getTime()-e.getTime(),i=Math.floor(a/1e3),r=Math.floor(i/60),o=Math.floor(r/60),s=Math.floor(o/24);if(s>=7){var c=e.getFullYear(),l=("0"+(e.getMonth()+1)).slice(-2),u=("0"+e.getDate()).slice(-2);return"".concat(c,"-").concat(l,"-").concat(u)}return s>=1?"".concat(s,"天前"):o>=1?"".concat(o,"小时前"):r>=1?"".concat(r,"分钟前"):"刚刚"},formatRelativeTime:function(t){var n=Date.now(),e=t instanceof Date?t.getTime():new Date(t).getTime();if(Number.isNaN(e))return"";var a=n-e,r=Math.floor(Math.abs(a)/1e3),o=a>=0?"前":"后";if(r<60)return"刚刚";var s=Math.floor(r/60);if(s<60)return"".concat(s,"分钟").concat(o);var c=Math.floor(s/60);if(c<24)return"".concat(c,"小时").concat(o);var l=Math.floor(c/24);return l<7?"".concat(l,"天").concat(o):i(e,"yyyy-MM-dd")},formatDate:i}},"193e":function(t,n,e){var a=e("836b");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var i=e("967d").default;i("7d95a66c",a,!0,{sourceMap:!1,shadowMode:!1})},2774:function(t,n,e){e("01a2"),e("e39c"),e("bf0f"),e("844d"),e("18f7"),e("de6c"),e("08eb"),t.exports=function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)},t.exports.__esModule=!0,t.exports["default"]=t.exports},4550:function(t,n,e){e("6a54");var a=e("8bcf");t.exports=function(t,n,e){return n=a(n),n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t},t.exports.__esModule=!0,t.exports["default"]=t.exports},"4d97":function(t,n,e){"use strict";e.r(n);var a=e("aee5"),i=e.n(a);for(var r in a)["default"].indexOf(r)<0&&function(t){e.d(n,t,(function(){return a[t]}))}(r);n["default"]=i.a},5014:function(t,n,e){e("dc8a"),e("01a2"),e("8f71"),e("bf0f"),e("9a2c"),e("aa9c"),e("2797"),e("a644"),e("a03a"),e("6a54");var a=e("4550");function i(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,a)}return e}t.exports=function(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?i(Object(e),!0).forEach((function(n){a(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):i(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t},t.exports.__esModule=!0,t.exports["default"]=t.exports},"515a":function(t,n,e){"use strict";var a=e("b52c"),i=e.n(a);i.a},"52d1":function(t,n,e){"use strict";e.d(n,"b",(function(){return a})),e.d(n,"c",(function(){return i})),e.d(n,"a",(function(){}));var a=function(){var t=this.$createElement,n=this._self._c||t;return n("v-uni-view",{staticClass:"skeleton-wrapper"},[n("v-uni-view",{staticClass:"skeleton-poem-card"},[n("v-uni-view",{staticClass:"skeleton-original-badge skeleton-animate"}),n("v-uni-view",{staticClass:"skeleton-author-info"},[n("v-uni-view",{staticClass:"skeleton-avatar skeleton-animate"}),n("v-uni-view",{staticClass:"skeleton-name skeleton-animate"})],1),n("v-uni-view",{staticClass:"skeleton-title skeleton-animate"}),n("v-uni-view",{staticClass:"skeleton-content-large skeleton-animate"}),n("v-uni-view",{staticClass:"skeleton-content-large skeleton-animate"}),n("v-uni-view",{staticClass:"skeleton-content-large skeleton-animate",staticStyle:{width:"70%"}})],1),n("v-uni-view",{staticClass:"skeleton-poem-card skeleton-secondary"},[n("v-uni-view",{staticClass:"skeleton-author-info"},[n("v-uni-view",{staticClass:"skeleton-avatar skeleton-animate"}),n("v-uni-view",{staticClass:"skeleton-name skeleton-animate"})],1),n("v-uni-view",{staticClass:"skeleton-title skeleton-animate"}),n("v-uni-view",{staticClass:"skeleton-content-large skeleton-animate"}),n("v-uni-view",{staticClass:"skeleton-content-large skeleton-animate",staticStyle:{width:"80%"}})],1)],1)},i=[]},"56c9":function(t,n,e){e("9e15"),e("884b"),e("01a2"),e("e39c"),e("bf0f"),e("7a76"),e("c9b5"),e("64aa");var a=e("bdbb")["default"];t.exports=function(t,n){if("object"!==a(t)||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,n||"default");if("object"!==a(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)},t.exports.__esModule=!0,t.exports["default"]=t.exports},6341:function(t,n,e){"use strict";e.r(n);var a=e("f989"),i=e("a783");for(var r in i)["default"].indexOf(r)<0&&function(t){e.d(n,t,(function(){return i[t]}))}(r);e("03c1");var o=e("828b"),s=Object(o["a"])(i["default"],a["b"],a["c"],!1,null,"2b9ad9ce",null,!1,a["a"],void 0);n["default"]=s.exports},"73e1":function(t,n,e){"use strict";var a=e("29d8");t.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(a)},"795c":function(t,n,e){"use strict";var a=e("8bdb"),i=e("db04").start,r=e("73e1");a({target:"String",proto:!0,forced:r},{padStart:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},"836b":function(t,n,e){var a=e("c86c");n=a(!1),n.push([t.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/* pages/search/search.wxss */.container[data-v-2b9ad9ce]{padding:%?20?%;background-color:#f7f8fa;min-height:100vh}\n/* 搜索头部 */.search-header[data-v-2b9ad9ce]{display:flex;align-items:center;margin-bottom:%?30?%;gap:%?20?%}.search-input-container[data-v-2b9ad9ce]{flex:1;display:flex;align-items:center;background-color:#fff;border-radius:%?16?%;padding:%?20?% %?30?%;box-shadow:0 %?4?% %?12?% rgba(0,0,0,.05);border:%?1?% solid rgba(0,0,0,.05)}.search-icon[data-v-2b9ad9ce]{font-size:%?32?%;margin-right:%?20?%;color:#999}.search-input[data-v-2b9ad9ce]{flex:1;font-size:%?28?%;color:#333}.clear-btn[data-v-2b9ad9ce]{font-size:%?40?%;color:#999;margin-left:%?20?%;padding:%?10?%}.cancel-btn[data-v-2b9ad9ce]{font-size:%?28?%;color:#9ed7ee;padding:%?20?%}\n/* 搜索结果 */.search-results[data-v-2b9ad9ce]{margin-bottom:%?20?%}.results-header[data-v-2b9ad9ce]{margin-bottom:%?20?%}.results-count[data-v-2b9ad9ce]{font-size:%?24?%;color:#999}\n/* 文章列表样式 */.post-list[data-v-2b9ad9ce]{margin-bottom:%?20?%}.post-item-wrapper[data-v-2b9ad9ce]{background-color:#fff;border-radius:%?16?%;margin-bottom:%?20?%;box-shadow:0 %?4?% %?12?% rgba(0,0,0,.05);overflow:hidden}\n/* 作者信息 */.author-info-outside[data-v-2b9ad9ce]{display:flex;align-items:center;padding:%?20?% %?20?% 0 %?20?%;margin-bottom:%?15?%}.author-avatar[data-v-2b9ad9ce]{width:%?60?%;height:%?60?%;border-radius:50%;margin-right:%?15?%}.author-name[data-v-2b9ad9ce]{font-size:%?28?%;color:#333;font-weight:500}\n/* 帖子内容 */.post-item[data-v-2b9ad9ce]{padding:0 %?20?% %?20?% %?20?%}.post-title[data-v-2b9ad9ce]{font-size:%?32?%;font-weight:700;color:#333;margin-bottom:%?15?%;line-height:1.4}.post-content[data-v-2b9ad9ce]{font-size:%?28?%;color:#666;line-height:1.6;margin-bottom:%?15?%}\n/* 图片容器 */.image-container-wrapper[data-v-2b9ad9ce]{position:relative;width:100%;margin-bottom:%?15?%;background-color:#f0f0f0;overflow:hidden;border-radius:%?12?%}.image-container-wrapper .post-image[data-v-2b9ad9ce],\n.image-container-wrapper .image-swiper[data-v-2b9ad9ce]{position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover}.post-image[data-v-2b9ad9ce]{width:100%;height:100%;display:block;object-fit:cover}.image-swiper[data-v-2b9ad9ce]{width:100%;height:100%}\n/* 标签样式 */.post-tags[data-v-2b9ad9ce]{margin:%?20?% 0 %?10?% 0;line-height:1.5}.post-tag[data-v-2b9ad9ce]{color:#24375f;font-size:%?26?%;margin-right:%?10?%;transition:all .2s ease;cursor:pointer}.post-tag[data-v-2b9ad9ce]:active{color:#1a2a4a;opacity:.8}\n/* 互动区域 */.vote-section[data-v-2b9ad9ce]{display:flex;justify-content:space-between;align-items:center;padding:%?15?% %?20?% %?20?% %?20?%;border-top:%?1?% solid #f0f0f0}.actions-left[data-v-2b9ad9ce]{flex:1}.actions-right[data-v-2b9ad9ce]{display:flex;gap:%?30?%}.action-item[data-v-2b9ad9ce]{display:flex;align-items:center;gap:%?8?%}.action-emoji[data-v-2b9ad9ce]{font-size:%?24?%}.action-text[data-v-2b9ad9ce]{font-size:%?24?%;color:#999}\n/* 空状态 */.empty-state[data-v-2b9ad9ce]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:%?400?%;background-color:#fff;border-radius:%?16?%;margin:%?30?%;box-shadow:0 %?4?% %?12?% rgba(0,0,0,.05)}.empty-icon[data-v-2b9ad9ce]{font-size:%?80?%;margin-bottom:%?20?%}.empty-text[data-v-2b9ad9ce]{font-size:%?32?%;color:#333;margin-bottom:%?10?%}.empty-subtext[data-v-2b9ad9ce]{font-size:%?28?%;color:#999}\n/* 搜索建议 */.search-suggestions[data-v-2b9ad9ce]{background-color:#fff;border-radius:%?16?%;padding:%?30?%;box-shadow:0 %?4?% %?12?% rgba(0,0,0,.05)}.suggestions-header[data-v-2b9ad9ce]{display:flex;justify-content:space-between;align-items:center;margin-bottom:%?20?%}.suggestions-title[data-v-2b9ad9ce]{font-size:%?28?%;color:#333;font-weight:500}.clear-history[data-v-2b9ad9ce]{font-size:%?24?%;color:#999}.suggestions-list[data-v-2b9ad9ce]{display:flex;flex-wrap:wrap;gap:%?15?%}.suggestion-item[data-v-2b9ad9ce]{background-color:#f5f5f5;border-radius:%?20?%;padding:%?12?% %?20?%;transition:all .2s ease}.suggestion-item[data-v-2b9ad9ce]:active{background-color:#e8e8e8;-webkit-transform:scale(.95);transform:scale(.95)}.suggestion-text[data-v-2b9ad9ce]{font-size:%?26?%;color:#333}\n/* 热门搜索 */.hot-searches[data-v-2b9ad9ce]{background-color:#fff;border-radius:%?16?%;padding:%?30?%;box-shadow:0 %?4?% %?12?% rgba(0,0,0,.05)}.hot-header[data-v-2b9ad9ce]{margin-bottom:%?20?%}.hot-title[data-v-2b9ad9ce]{font-size:%?28?%;color:#333;font-weight:500}.hot-list[data-v-2b9ad9ce]{display:flex;flex-wrap:wrap;gap:%?15?%}.hot-item[data-v-2b9ad9ce]{background-color:#f0f8ff;border-radius:%?20?%;padding:%?12?% %?20?%;transition:all .2s ease}.hot-item[data-v-2b9ad9ce]:active{background-color:#e0f0ff;-webkit-transform:scale(.95);transform:scale(.95)}.hot-text[data-v-2b9ad9ce]{font-size:%?26?%;color:#9ed7ee}\n/* 加载状态 */.loading-state[data-v-2b9ad9ce]{display:flex;justify-content:center;align-items:center;padding:%?40?%}.loading-text[data-v-2b9ad9ce]{font-size:%?28?%;color:#999}",""]),t.exports=n},"8bcf":function(t,n,e){var a=e("bdbb")["default"],i=e("56c9");t.exports=function(t){var n=i(t,"string");return"symbol"===a(n)?n:String(n)},t.exports.__esModule=!0,t.exports["default"]=t.exports},"8cb3":function(t,n,e){"use strict";e.r(n);var a=e("52d1"),i=e("4d97");for(var r in i)["default"].indexOf(r)<0&&function(t){e.d(n,t,(function(){return i[t]}))}(r);e("515a");var o=e("828b"),s=Object(o["a"])(i["default"],a["b"],a["c"],!1,null,"a51e8920",null,!1,a["a"],void 0);n["default"]=s.exports},"8e86":function(t,n,e){function a(t){if(!t)return{current:"",urls:[]};if(t.currentTarget&&t.currentTarget.dataset){var n=t.currentTarget.dataset,e=n.src||n.current||n.url||Array.isArray(n.urls)&&n.urls[0]||"",a=n.originalImageUrls||n.urls||n.urlList,i=Array.isArray(a)?a.filter(Boolean):"string"===typeof a&&a?[a]:[];return{current:e,urls:i}}var r=t.current||t.src||Array.isArray(t.urls)&&t.urls[0]||Array.isArray(t.list)&&t.list[0]||"",o=Array.isArray(t.urls)?t.urls.filter(Boolean):Array.isArray(t.list)?t.list.filter(Boolean):[];return{current:r,urls:o}}function i(t){"undefined"!==typeof uni&&uni.showToast&&uni.showToast({title:t,icon:"none"})}e("8f71"),e("bf0f"),t.exports={previewImage:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=n.fallbackToast,r=void 0===e||e,o=a(t);if(!o.current&&0===o.urls.length)return r&&i("图片数据缺失"),!1;var s=o.urls.length?o.urls:[o.current],c=o.current||s[0];return c&&0!==s.length?uni.previewImage({current:c,urls:s}):(r&&i("图片不可预览"),!1)}}},"916a":function(t,n,e){"use strict";e("6a54");var a=e("f5bd").default;Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,e("0c26"),e("bf0f"),e("f7a5"),e("8f71"),e("3efd");var i=a(e("8cb3")),r=a(e("8cb3")),o=e("8e86"),s=o.previewImage,c=e("fcd5"),l=c.normalizePostList,u=e("11ca"),d=u.cloudCall,f={components:{skeleton:i.default},data:function(){return{searchKeyword:"",searchResults:[],isSearching:!1,searchHistory:[],hotSearches:["诗歌","原创","生活","感悟","旅行","美食","摄影","读书"],searchTimer:null,img:""}},onLoad:function(t){this.loadSearchHistory()},methods:{callCloudFunction:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return d(t,n,Object.assign({pageTag:"search",context:this},e))},onSearchInput:function(t){var n=this,e=t.detail.value;if(this.setData({searchKeyword:e}),this.searchTimer&&clearTimeout(this.searchTimer),e.trim()){var a=setTimeout((function(){n.performSearch(e)}),500);this.setData({searchTimer:a})}else this.setData({searchResults:[],isSearching:!1})},onSearchConfirm:function(t){var n=t.detail.value.trim();n&&(this.searchTimer&&(clearTimeout(this.searchTimer),this.setData({searchTimer:null})),this.setData({searchKeyword:n}),this.performSearch(n))},clearSearch:function(){this.searchTimer&&clearTimeout(this.searchTimer),this.setData({searchKeyword:"",searchResults:[],isSearching:!1,searchTimer:null})},performSearch:function(t){var n=this,e=t||this.searchKeyword;console.log("执行搜索，关键词:",e,"传入参数:",t,"当前数据:",this.searchKeyword),e.trim()&&(this.setData({searchResults:[],isSearching:!0,searchKeyword:e}),this.saveSearchHistory(e),this.callCloudFunction("searchPosts",{keyword:e,limit:20}).then((function(t){if(console.log("搜索结果:",t),t.result&&t.result.success){var a=l(t.result.posts||[]);console.log("设置搜索结果:",a.length,"条结果，关键词:",e),n.setData({searchResults:a})}else uni.showToast({title:"搜索失败",icon:"none"})})).catch((function(t){console.error("搜索失败:",t),uni.showToast({title:"网络错误",icon:"none"})})).finally((function(){n.setData({isSearching:!1})})))},selectHistoryKeyword:function(t){var n=this,e=t.currentTarget.dataset.keyword;this.setData({searchKeyword:e},(function(){n.performSearch(e)}))},selectHotKeyword:function(t){var n=this,e=t.currentTarget.dataset.keyword;this.setData({searchKeyword:e},(function(){n.performSearch(e)}))},clearHistory:function(){var t=this;uni.showModal({title:"确认清空",content:"确定要清空搜索历史吗？",success:function(n){n.confirm&&(uni.removeStorageSync("searchHistory"),t.setData({searchHistory:[]}))}})},loadSearchHistory:function(){try{var t=uni.getStorageSync("searchHistory")||[];this.setData({searchHistory:t.slice(0,10)})}catch(n){console.log("CatchClause",n),console.log("CatchClause",n),console.error("加载搜索历史失败:",n)}},saveSearchHistory:function(t){try{var n=uni.getStorageSync("searchHistory")||[];n=n.filter((function(n){return n!==t})),n.unshift(t),n=n.slice(0,20),uni.setStorageSync("searchHistory",n),this.setData({searchHistory:n.slice(0,10)})}catch(e){console.log("CatchClause",e),console.log("CatchClause",e),console.error("保存搜索历史失败:",e)}},goBack:function(){uni.navigateBack()},onPostTap:function(t){var n=t.currentTarget.dataset.postid;uni.navigateTo({url:"/pages/post-detail/post-detail?id=".concat(n)})},onTagClick:function(t){var n=t.currentTarget.dataset.tag;uni.navigateTo({url:"/pages/tag-filter/tag-filter?tag=".concat(encodeURIComponent(n))})},onCommentClick:function(t){var n=t.currentTarget.dataset.postid;uni.navigateTo({url:"/pages/post-detail/post-detail?id=".concat(n)})},handlePreview:function(t){return s(t,{fallbackToast:!1})},onAvatarError:function(t){console.error("头像加载失败",t.detail)},onImageError:function(t){console.error("图片加载失败",t.detail)},navigateToUserProfile:function(t){var n=t.currentTarget.dataset.userId;uni.navigateTo({url:"/pages/user-profile/user-profile?userId=".concat(n)})}}};n.default=f,n.default.components=Object.assign({skeleton:r.default},n.default.components||{})},9376:function(t,n,e){e("7a76"),e("c9b5"),t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports["default"]=t.exports},a783:function(t,n,e){"use strict";e.r(n);var a=e("916a"),i=e.n(a);for(var r in a)["default"].indexOf(r)<0&&function(t){e.d(n,t,(function(){return a[t]}))}(r);n["default"]=i.a},aee5:function(t,n,e){"use strict";e("6a54"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;n.default={data:function(){return{}},props:{},methods:{},created:function(){}}},b52c:function(t,n,e){var a=e("ee16");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var i=e("967d").default;i("77236fde",a,!0,{sourceMap:!1,shadowMode:!1})},d189:function(t,n,e){var a=e("e2db"),i=e("2774"),r=e("79b7"),o=e("9376");t.exports=function(t){return a(t)||i(t)||r(t)||o()},t.exports.__esModule=!0,t.exports["default"]=t.exports},db04:function(t,n,e){"use strict";var a=e("bb80"),i=e("c435"),r=e("9e70"),o=e("f298"),s=e("862c"),c=a(o),l=a("".slice),u=Math.ceil,d=function(t){return function(n,e,a){var o,d,f=r(s(n)),v=i(e),g=f.length,h=void 0===a?" ":r(a);return v<=g||""===h?f:(o=v-g,d=c(h,u(o/h.length)),d.length>o&&(d=l(d,0,o)),t?f+d:d+f)}};t.exports={start:d(!1),end:d(!0)}},e2db:function(t,n,e){var a=e("e476");t.exports=function(t){if(Array.isArray(t))return a(t)},t.exports.__esModule=!0,t.exports["default"]=t.exports},ee16:function(t,n,e){var a=e("c86c");n=a(!1),n.push([t.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/* components/skeleton/skeleton.wxss */.skeleton-wrapper[data-v-a51e8920]{width:100%;height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:%?20?%;box-sizing:border-box}\n/* 读诗页骨架屏卡片样式 - 匹配读诗页设计 */.skeleton-poem-card[data-v-a51e8920]{width:calc(100% - %?40?%);height:calc(100% - %?80?%);display:flex;flex-direction:column;padding:%?40?% %?20?%;box-sizing:border-box;background:hsla(0,0%,100%,.95);margin:%?40?% %?20?%;border-radius:%?24?%;box-shadow:0 %?8?% %?32?% rgba(0,0,0,.1);position:relative}\n/* 第二个卡片透明度降低 */.skeleton-poem-card.skeleton-secondary[data-v-a51e8920]{opacity:.6;position:absolute;top:%?20?%;left:%?20?%;right:%?20?%;bottom:%?20?%;z-index:-1;-webkit-transform:scale(.95);transform:scale(.95)}\n/* 原创标识骨架 */.skeleton-original-badge[data-v-a51e8920]{position:absolute;top:%?20?%;right:%?20?%;width:%?80?%;height:%?40?%;border-radius:%?20?%}\n/* 作者信息骨架 */.skeleton-author-info[data-v-a51e8920]{display:flex;align-items:center;margin-bottom:%?15?%;padding-bottom:%?10?%}.skeleton-avatar[data-v-a51e8920]{width:%?80?%;height:%?80?%;border-radius:50%;margin-right:%?20?%}.skeleton-name[data-v-a51e8920]{width:%?200?%;height:%?32?%;border-radius:%?16?%}\n/* 居中标题骨架 */.skeleton-title[data-v-a51e8920]{width:60%;height:%?40?%;margin:0 auto %?20?% auto; /* 居中并增加下边距 */border-radius:%?20?%;text-align:center}\n/* 大内容区域骨架 */.skeleton-content-large[data-v-a51e8920]{width:100%;height:%?40?%;margin-bottom:%?20?%;border-radius:%?20?%}.skeleton-animate[data-v-a51e8920]{background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0 50%,#f0f0f0 75%);background-size:200% 100%;-webkit-animation:skeleton-loading-data-v-a51e8920 1.5s infinite linear;animation:skeleton-loading-data-v-a51e8920 1.5s infinite linear}@-webkit-keyframes skeleton-loading-data-v-a51e8920{0%{background-position:200% 0}100%{background-position:-200% 0}}@keyframes skeleton-loading-data-v-a51e8920{0%{background-position:200% 0}100%{background-position:-200% 0}}",""]),t.exports=n},f989:function(t,n,e){"use strict";e.d(n,"b",(function(){return a})),e.d(n,"c",(function(){return i})),e.d(n,"a",(function(){}));var a=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("v-uni-view",{staticClass:"container"},[e("v-uni-view",{staticClass:"search-header"},[e("v-uni-view",{staticClass:"search-input-container"},[e("v-uni-view",{staticClass:"search-icon"},[t._v("🔍")]),e("v-uni-input",{staticClass:"search-input",attrs:{placeholder:"搜索帖子...",value:t.searchKeyword,focus:!0,"confirm-type":"search"},on:{input:function(n){arguments[0]=n=t.$handleEvent(n),t.onSearchInput.apply(void 0,arguments)},confirm:function(n){arguments[0]=n=t.$handleEvent(n),t.onSearchConfirm.apply(void 0,arguments)}}}),t.searchKeyword?e("v-uni-view",{staticClass:"clear-btn",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.clearSearch.apply(void 0,arguments)}}},[t._v("×")]):t._e()],1),e("v-uni-view",{staticClass:"cancel-btn",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.goBack.apply(void 0,arguments)}}},[t._v("取消")])],1),t.searchKeyword&&!t.isSearching&&t.searchResults.length>0?e("v-uni-view",{staticClass:"search-results"},[e("v-uni-view",{staticClass:"results-header"},[e("v-uni-text",{staticClass:"results-count"},[t._v("找到 "+t._s(t.searchResults.length)+" 个结果")])],1),e("v-uni-view",{staticClass:"post-list"},t._l(t.searchResults,(function(n,a){return e("v-uni-view",{key:a,staticClass:"post-item-wrapper"},[e("v-uni-view",{staticClass:"author-info-outside"},[n.authorAvatar?e("v-uni-image",{staticClass:"author-avatar",attrs:{src:n.authorAvatar,mode:"aspectFill","data-user-id":n._openid},on:{error:function(n){arguments[0]=n=t.$handleEvent(n),t.onAvatarError.apply(void 0,arguments)},click:function(n){n.stopPropagation(),n.preventDefault(),arguments[0]=n=t.$handleEvent(n),t.navigateToUserProfile.apply(void 0,arguments)}}}):t._e(),e("v-uni-text",{staticClass:"author-name"},[t._v(t._s(n.authorName))])],1),e("v-uni-view",{staticClass:"post-item",attrs:{"data-postid":n._id},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.onPostTap.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"post-title"},[t._v(t._s(n.title))]),n.imageUrls&&n.imageUrls.length>0?e("v-uni-view",{staticClass:"image-container-wrapper",style:n.imageStyle,attrs:{"data-src":n.imageUrls[0],"data-original-image-urls":n.originalImageUrls||n.imageUrls},on:{click:function(n){n.stopPropagation(),n.preventDefault(),arguments[0]=n=t.$handleEvent(n),t.handlePreview.apply(void 0,arguments)}}},[1===n.imageUrls.length?[e("v-uni-image",{staticClass:"post-image",attrs:{src:n.imageUrls[0],mode:"aspectFill","lazy-load":!0,"data-src":n.imageUrls[0],"data-original-image-urls":n.originalImageUrls||n.imageUrls},on:{error:function(n){arguments[0]=n=t.$handleEvent(n),t.onImageError.apply(void 0,arguments)},click:function(n){n.stopPropagation(),n.preventDefault(),arguments[0]=n=t.$handleEvent(n),t.handlePreview.apply(void 0,arguments)}}})]:n.imageUrls.length>1?[e("v-uni-swiper",{staticClass:"image-swiper",attrs:{"indicator-dots":!0,circular:!0}},[t._l(n.imageUrls,(function(a,i){return[e("v-uni-swiper-item",[e("v-uni-image",{staticClass:"post-image",attrs:{src:a,mode:"aspectFill","lazy-load":!0,"data-src":a,"data-original-image-urls":n.originalImageUrls||n.imageUrls},on:{error:function(n){arguments[0]=n=t.$handleEvent(n),t.onImageError.apply(void 0,arguments)},click:function(n){n.stopPropagation(),n.preventDefault(),arguments[0]=n=t.$handleEvent(n),t.handlePreview.apply(void 0,arguments)}}})],1)]}))],2)]:t._e()],2):t._e(),n.content?e("v-uni-view",{staticClass:"post-content",staticStyle:{"white-space":"pre-wrap"}},[t._v(t._s(n.content))]):t._e(),n.tags&&n.tags.length>0?e("v-uni-view",{staticClass:"post-tags"},t._l(n.tags,(function(n,a){return e("v-uni-text",{key:a,staticClass:"post-tag",attrs:{"data-tag":n},on:{click:function(n){n.stopPropagation(),n.preventDefault(),arguments[0]=n=t.$handleEvent(n),t.onTagClick.apply(void 0,arguments)}}},[t._v("#"+t._s(n))])})),1):t._e()],1),e("v-uni-view",{staticClass:"vote-section"},[e("v-uni-view",{staticClass:"actions-left"}),e("v-uni-view",{staticClass:"actions-right"},[e("v-uni-view",{staticClass:"action-item",attrs:{"data-postid":n._id},on:{click:function(n){n.stopPropagation(),n.preventDefault(),arguments[0]=n=t.$handleEvent(n),t.onCommentClick.apply(void 0,arguments)}}},[e("v-uni-text",{staticClass:"action-emoji"},[t._v("💬")]),e("v-uni-text",{staticClass:"action-text"},[t._v(t._s(n.commentCount||0))])],1),e("v-uni-view",{staticClass:"action-item"},[e("v-uni-text",{staticClass:"action-text"},[t._v(t._s(n.votes||0))])],1)],1)],1)],1)})),1)],1):t._e(),t.searchKeyword&&!t.isSearching&&0===t.searchResults.length?e("v-uni-view",{staticClass:"empty-state"},[e("v-uni-view",{staticClass:"empty-icon"},[t._v("🔍")]),e("v-uni-view",{staticClass:"empty-text"},[t._v("没有找到相关帖子")]),e("v-uni-view",{staticClass:"empty-subtext"},[t._v("试试其他关键词吧")])],1):t._e(),!t.searchKeyword&&!t.isSearching&&t.searchHistory.length>0?e("v-uni-view",{staticClass:"search-suggestions"},[e("v-uni-view",{staticClass:"suggestions-header"},[e("v-uni-text",{staticClass:"suggestions-title"},[t._v("搜索历史")]),e("v-uni-text",{staticClass:"clear-history",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.clearHistory.apply(void 0,arguments)}}},[t._v("清空")])],1),e("v-uni-view",{staticClass:"suggestions-list"},t._l(t.searchHistory,(function(n,a){return e("v-uni-view",{key:a,staticClass:"suggestion-item",attrs:{"data-keyword":n},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.selectHistoryKeyword.apply(void 0,arguments)}}},[e("v-uni-text",{staticClass:"suggestion-text"},[t._v(t._s(n))])],1)})),1)],1):t._e(),t.searchKeyword||t.isSearching||0!==t.searchHistory.length?t._e():e("v-uni-view",{staticClass:"hot-searches"},[e("v-uni-view",{staticClass:"hot-header"},[e("v-uni-text",{staticClass:"hot-title"},[t._v("热门搜索")])],1),e("v-uni-view",{staticClass:"hot-list"},t._l(t.hotSearches,(function(n,a){return e("v-uni-view",{key:a,staticClass:"hot-item",attrs:{"data-keyword":n},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.selectHotKeyword.apply(void 0,arguments)}}},[e("v-uni-text",{staticClass:"hot-text"},[t._v(t._s(n))])],1)})),1)],1),t.isSearching?e("v-uni-view",{staticClass:"loading-state"},[e("v-uni-view",{staticClass:"loading-text"},[t._v("搜索中...")])],1):t._e()],1)},i=[]},fcd5:function(t,n,e){var a=e("5014").default,i=e("d189").default,r=e("4cf1").default;e("8f71"),e("bf0f"),e("aa9c"),e("fd3c");var o=e("139b"),s=o.formatRelativeTime,c=["createTime","postCreateTime","publishTime","createdAt","updateTime"],l=function(t){return t?Array.isArray(t)?t.filter(Boolean):[t].filter(Boolean):[]},u=function(t){var n,e=r(c);try{for(e.s();!(n=e.n()).done;){var a=n.value;if(t[a])return{key:a,value:t[a]}}}catch(i){e.e(i)}finally{e.f()}return null},d=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=n.withTime,r=void 0===e||e,o=l(t.imageUrls);0===o.length&&o.push.apply(o,i(l(t.imageUrl)));var c=l(t.originalImageUrls);0===c.length&&c.push.apply(c,i(l(t.originalImageUrl))),0===c.length&&o.length>0&&c.push.apply(c,i(o));var d=a(a({},t),{},{imageUrls:o,originalImageUrls:c,authorName:t.authorName||"匿名用户",authorAvatar:"string"===typeof t.authorAvatar?t.authorAvatar:""});if(!d.imageStyle&&o.length>0&&(d.imageStyle="height: 0; padding-bottom: 75%;"),r)if(t.formattedCreateTime)d.formattedCreateTime=t.formattedCreateTime;else{var f=u(t);f&&(d.formattedCreateTime=s(f.value))}return d};t.exports={normalizePost:d,normalizePostList:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Array.isArray(t)?t.map((function(t){return d(t,n)})):[]}}}}]);