(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-index-index"],{"0b3c":function(n,r,t){var e=t("c86c");r=e(!1),r.push([n.i,"\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/* index.wxss */.page-indicator[data-v-31a58d93]{position:fixed;top:%?100?%;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);background:rgba(0,0,0,.7);color:#fff;padding:%?20?% %?40?%;border-radius:%?50?%;font-size:%?28?%;z-index:9999;-webkit-animation:pageIndicatorFadeIn-data-v-31a58d93 .3s ease-in-out;animation:pageIndicatorFadeIn-data-v-31a58d93 .3s ease-in-out}.page-indicator-text[data-v-31a58d93]{text-align:center;font-weight:500}@-webkit-keyframes pageIndicatorFadeIn-data-v-31a58d93{0%{opacity:0;-webkit-transform:translateX(-50%) translateY(%?-20?%);transform:translateX(-50%) translateY(%?-20?%)}100%{opacity:1;-webkit-transform:translateX(-50%) translateY(0);transform:translateX(-50%) translateY(0)}}@keyframes pageIndicatorFadeIn-data-v-31a58d93{0%{opacity:0;-webkit-transform:translateX(-50%) translateY(%?-20?%);transform:translateX(-50%) translateY(%?-20?%)}100%{opacity:1;-webkit-transform:translateX(-50%) translateY(0);transform:translateX(-50%) translateY(0)}}.container[data-v-31a58d93]{padding:%?255?% 0 %?100?% 0; /* ä¸ºpage-tabsç•™å‡ºç©ºé—´ï¼š188rpx(page-tabsæ€»é«˜åº¦) + 62rpx(é¢å¤–é—´è·) */background-color:#fff;min-height:100vh;padding-bottom:%?100?%; /* ä¸ºåº•éƒ¨tabBarç•™å‡ºç©ºé—´ */position:relative}\r\n/* è¯»è¯—æ¨¡å¼å®¹å™¨ */.poem-mode-container[data-v-31a58d93]{position:fixed;top:0;left:0;width:100vw;height:100vh;background:linear-gradient(135deg,#667eea,#764ba2);z-index:100;overflow:hidden}\r\n/* æ»‘åŠ¨æŒ‡ç¤ºå™¨ */.swipe-indicator[data-v-31a58d93]{position:absolute;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);color:hsla(0,0%,100%,.8);font-size:%?28?%;padding:%?20?% %?30?%;background:rgba(0,0,0,.3);border-radius:%?50?%;-webkit-backdrop-filter:blur(%?10?%);backdrop-filter:blur(%?10?%)}.swipe-indicator.left[data-v-31a58d93]{left:%?30?%}.swipe-indicator.right[data-v-31a58d93]{right:%?30?%}\r\n/* å¸–å­ç´¢å¼•æŒ‡ç¤ºå™¨ */.post-indicator[data-v-31a58d93]{position:absolute;bottom:%?60?%;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);color:hsla(0,0%,100%,.9);font-size:%?24?%;padding:%?12?% %?24?%;background:rgba(0,0,0,.4);border-radius:%?30?%;-webkit-backdrop-filter:blur(%?10?%);backdrop-filter:blur(%?10?%)}\r\n/* åˆ—è¡¨æ¨¡å¼å®¹å™¨ */.list-mode-container[data-v-31a58d93],\r\n.list-content[data-v-31a58d93]{display:block}\r\n/* å¹¿åœºæ¨¡å¼å®¹å™¨ */.square-mode-container[data-v-31a58d93]{display:block;padding-top:%?40?% /* å¢åŠ ä¸é¡¶éƒ¨æ çš„è·ç¦» */}\r\n/* æ–°å¢ï¼šå¸–å­é¡¹åŒ…è£…å™¨æ ·å¼ */.post-item-wrapper[data-v-31a58d93]{background:#fff;margin-bottom:%?20?%;padding:0;box-shadow:none;border-radius:0;border-bottom:%?1?% solid #f0f0f0}\r\n/* åŸåˆ›å¸–å­ç‰¹æ®Šæ ·å¼ */.post-item-wrapper.original-post[data-v-31a58d93]{background:linear-gradient(180deg,hsla(0,0%,100%,0),hsla(0,0%,100%,0) 90%,rgba(235,200,141,.05) 95%,rgba(235,200,141,.08));border-left:%?3?% solid #ebc88d;position:relative}\r\n/* åŸåˆ›å¸–å­å…‰å½±æ•ˆæœå·²ç§»é™¤ */\r\n/* æ–°å¢ï¼šå†…å®¹å¯¼èˆªå™¨æ ·å¼ */.post-content-navigator[data-v-31a58d93]{display:block;background:transparent}\r\n/* æ–°å¢ï¼šå¯¼èˆªå™¨ç‚¹å‡»æ•ˆæœ */.navigator-hover[data-v-31a58d93]{background-color:rgba(0,0,0,.02)}\r\n/* æ–°å¢ï¼šç‚¹èµæŒ‰é’®å®¹å™¨æ ·å¼ */.like-icon-container[data-v-31a58d93]{padding:%?10?%;border-radius:50%;transition:all .2s ease}\r\n/* æ–°å¢ï¼šç‚¹èµæŒ‰é’®ç‚¹å‡»æ•ˆæœ */.like-icon-container[data-v-31a58d93]:active{-webkit-transform:scale(.9);transform:scale(.9);background-color:hsla(0,100%,71%,.1)}\r\n/* æ–°å¢ï¼šç‚¹èµå›¾æ ‡æ ·å¼ */.like-icon[data-v-31a58d93]{width:%?40?%;height:%?40?%;transition:all .2s ease}.author-info[data-v-31a58d93]{display:flex;align-items:center;margin-bottom:%?15?%}.author-avatar[data-v-31a58d93]{width:%?60?%;height:%?60?%;border-radius:50%;margin-right:%?15?%;background-color:#f5f5f5}.author-name[data-v-31a58d93]{font-size:%?28?%;color:#333;font-weight:500}\r\n/* æ–°å¢ï¼šå›¾ç‰‡å®¹å™¨å ä½æ ·å¼ */.image-container-wrapper[data-v-31a58d93]{position:relative;width:100%;background-color:#f0f0f0; /* å ä½æ—¶çš„èƒŒæ™¯è‰²ï¼Œå¾ˆé‡è¦ */overflow:hidden;border-radius:8px; /* å¯ä»¥åŠ ä¸ªåœ†è§’ï¼Œè®©å ä½å—æ›´å¥½çœ‹ */margin:%?20?% 0 /* å›¾ç‰‡å’Œä¸‹æ–¹å†…å®¹çš„é—´è· */}\r\n/* æ–°å¢ï¼šè®©å›¾ç‰‡æˆ–Swiperå¡«å……æ•´ä¸ªå ä½å®¹å™¨ */.image-container-wrapper .post-image[data-v-31a58d93],\r\n.image-container-wrapper .image-swiper[data-v-31a58d93]{position:absolute;top:0;left:0;width:100%;height:100%}\r\n/* å¤šå›¾å®¹å™¨ */.multi-image-container[data-v-31a58d93]{width:100%;position:relative}\r\n/* å•å›¾å®¹å™¨ */.single-image-container[data-v-31a58d93]{width:100%;position:relative}\r\n/* å¤šå¼ å›¾ç‰‡çš„swiperæ ·å¼ */.image-swiper[data-v-31a58d93]{width:100%;background-color:#fff\r\n    /* é«˜åº¦ç”± style ç»‘å®šåŠ¨æ€è®¾ç½® */}.swiper-item[data-v-31a58d93]{width:100%;height:100%;display:flex;align-items:center;justify-content:center}.post-image[data-v-31a58d93]{width:100%;height:100%;display:block;object-fit:contain}.post-image[data-v-31a58d93]:active{-webkit-transform:scale(1.05);transform:scale(1.05)}.post-image.single-image[data-v-31a58d93]{width:100%;height:auto;display:block;background-color:#f5f5f5}\r\n/* å›¾ç‰‡æ•°é‡æŒ‡ç¤ºå™¨ */.image-count-indicator[data-v-31a58d93]{position:absolute;top:%?20?%;right:%?20?%;background-color:rgba(0,0,0,.6);color:#fff;padding:%?8?% %?16?%;border-radius:%?20?%;font-size:%?24?%;z-index:10;-webkit-backdrop-filter:blur(%?10?%);backdrop-filter:blur(%?10?%)}\r\n/* å¡ç‰‡é¡¹æ ·å¼ */.post-item-wrapper[data-v-31a58d93]{margin-bottom:%?20?%}\r\n/* å¤–éƒ¨ä½œè€…ä¿¡æ¯æ ·å¼ */.author-info-outside[data-v-31a58d93]{display:flex;align-items:center;padding:%?20?% %?40?% %?10?% %?40?%;background:#fff}.author-info-outside .author-avatar[data-v-31a58d93]{width:%?60?%;height:%?60?%;border-radius:50%;margin-right:%?15?%;background-color:#f5f5f5;cursor:pointer}.author-info-outside .author-name[data-v-31a58d93]{font-size:%?28?%;color:#333;font-weight:500}.post-item[data-v-31a58d93]{width:100%;background:#fff;box-shadow:none;box-sizing:border-box;padding:%?20?% %?40?% %?30?% %?40?%}\r\n/* å®šä¹‰ç‚¹å‡»æ—¶çš„æ ·å¼ - æ•´ä¸ªå¡ç‰‡ç¼©å° */.post-card-active[data-v-31a58d93]{-webkit-transform:scale(.98);transform:scale(.98)}.post-title[data-v-31a58d93]{font-size:%?36?%;font-weight:700;color:#333;margin-bottom:%?15?%;line-height:1.4;word-break:break-word;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;line-clamp:2;-webkit-box-orient:vertical}\r\n/* è¯—æ­Œä½œè€…æ ·å¼ */.poem-author[data-v-31a58d93]{font-size:%?32?%;color:#000;text-align:center;margin:%?5?% 0 %?15?% 0;letter-spacing:%?2?%}.post-content[data-v-31a58d93]{font-size:%?28?%;color:#666;line-height:1.6;margin-top:%?15?%;word-break:break-word;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:3;line-clamp:3;-webkit-box-orient:vertical}.vote-section[data-v-31a58d93]{display:flex;justify-content:space-between;align-items:center;\r\n    /* ä¸Šç§»ä¸€ç‚¹ï¼šæ”¶ç´§ä¸å†…å®¹çš„å‚ç›´é—´è· */margin-top:%?-8?%;padding:%?10?% %?60?% %?15?% %?60?%}.vote-count[data-v-31a58d93],\r\n.comment-count[data-v-31a58d93]{display:flex;align-items:center;font-size:%?28?%;color:#999;margin-left:%?10?%;transition:color .2s ease}.comment-icon[data-v-31a58d93]{width:%?40?%;height:%?40?%;margin-right:%?8?%}.vote-count[data-v-31a58d93]{margin-left:%?10?%}.vote-count.voted[data-v-31a58d93]{color:#ff4757}.actions-left[data-v-31a58d93]{display:flex;align-items:center}.action-emoji[data-v-31a58d93]{font-size:%?28?%;margin-right:%?8?%}.action-text[data-v-31a58d93]{font-size:%?28?%;color:inherit}.button-group[data-v-31a58d93]{display:flex;align-items:center}.like-icon-container[data-v-31a58d93]{display:flex;align-items:center;justify-content:center;padding:%?8?%;border-radius:%?8?%;margin-left:%?20?%;transition:all .2s ease}.like-icon-container[data-v-31a58d93]:active{-webkit-transform:scale(.95);transform:scale(.95)}.like-icon[data-v-31a58d93]{width:%?48?%;height:%?48?%}\r\n/* ç©ºçŠ¶æ€æ ·å¼ */.empty-state[data-v-31a58d93]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:%?100?% %?40?%;text-align:center}.empty-icon[data-v-31a58d93]{font-size:%?120?%;margin-bottom:%?30?%;opacity:.6}.empty-text[data-v-31a58d93]{font-size:%?32?%;color:#666;margin-bottom:%?15?%}.empty-subtext[data-v-31a58d93]{font-size:%?28?%;color:#999}\r\n/* åŠ è½½æ›´å¤šæ ·å¼ */.loading-more[data-v-31a58d93]{display:flex;justify-content:center;align-items:center;padding:%?40?%}.loading-text[data-v-31a58d93]{font-size:%?28?%;color:#999}\r\n/* åº•éƒ¨åŠ è½½çŠ¶æ€æ ·å¼ */.loading-footer[data-v-31a58d93]{text-align:center;padding:%?20?% 0;color:#999;font-size:14px}\r\n/* æ ‡ç­¾æ ·å¼ */.post-tags[data-v-31a58d93]{margin-top:%?30?%;margin-bottom:%?10?%;line-height:1.5}.post-tag[data-v-31a58d93]{color:#24375f;font-size:%?26?%;margin-right:%?10?%;transition:all .2s ease;cursor:pointer}.post-tag[data-v-31a58d93]:active{color:#1a2a4a;opacity:.8}\r\n/* å‘ç°é¡µæ¨èç›¸å…³æ ·å¼ */.discover-end-tip[data-v-31a58d93]{display:flex;flex-direction:column;align-items:center;padding:%?40?% %?20?%;color:#999}.end-text[data-v-31a58d93]{font-size:%?28?%;margin-bottom:%?20?%}.refresh-tip[data-v-31a58d93]{background:rgba(255,193,7,.1);border:%?2?% solid rgba(255,193,7,.3);border-radius:%?20?%;padding:%?16?% %?24?%}.refresh-text[data-v-31a58d93]{font-size:%?24?%;color:#ffc107;font-weight:500}",""]),n.exports=r},"182c":function(n,r,t){"use strict";var e=t("4384"),a=t.n(e);a.a},"1d0b":function(n,r,t){var e=t("d189").default,a=t("dd7e").default,i=t("46c5").default,o=t("883d").default,s=t("4db6").default;t("c1a3"),t("bf0f"),t("18f7"),t("de6c"),t("4626"),t("5ac7"),t("f7a5"),t("fd3c"),t("aa9c"),t("08eb");var c=function(){"use strict";function n(){o(this,n),this.cache=new Map,this.isH5="undefined"!==typeof window,this.isMiniProgram="undefined"!==typeof wx&&wx.cloud}return s(n,[{key:"loadImage",value:function(){var n=i(a().mark((function n(r){var t,e,i,o,s,c=arguments;return a().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t=c.length>1&&void 0!==c[1]?c[1]:{},e=t.useCache,i=void 0===e||e,o=t.timeout,void 0===o?1e4:o,s=t.fallbackToOriginal,void 0===s||s,!i||!this.cache.has(r)){n.next=4;break}return n.abrupt("return",{success:!0,url:this.cache.get(r),fromCache:!0});case 4:if(!this.isH5){n.next=8;break}return n.abrupt("return",this.loadImageH5(r,t));case 8:if(!this.isMiniProgram){n.next=12;break}return n.abrupt("return",this.loadImageMiniProgram(r,t));case 12:return n.abrupt("return",this.loadImageNative(r,t));case 13:case"end":return n.stop()}}),n,this)})));return function(r){return n.apply(this,arguments)}}()},{key:"loadImageH5",value:function(){var n=i(a().mark((function n(r,t){var e,i,o;return a().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e=t.fallbackToOriginal,i=void 0===e||e,!this.isCloudStorageUrl(r)){n.next=5;break}return console.log("ğŸ” [H5] æ£€æµ‹åˆ°è…¾è®¯äº‘å­˜å‚¨URLï¼Œç›´æ¥ä½¿ç”¨:",r),this.cache.set(r,r),n.abrupt("return",{success:!0,url:r,fromCache:!1,strategy:"direct"});case 5:return n.prev=5,n.next=8,this.downloadFileWithTimeout(r,t.timeout);case 8:if(o=n.sent,!o.success){n.next=12;break}return this.cache.set(r,o.tempFilePath),n.abrupt("return",{success:!0,url:o.tempFilePath,fromCache:!1,strategy:"download"});case 12:n.next=17;break;case 14:n.prev=14,n.t0=n["catch"](5),console.warn("ğŸ” [H5] downloadFileå¤±è´¥:",n.t0);case 17:if(!i){n.next=21;break}return console.log("ğŸ” [H5] ä½¿ç”¨é™çº§æ–¹æ¡ˆï¼Œç›´æ¥ä½¿ç”¨åŸURL:",r),this.cache.set(r,r),n.abrupt("return",{success:!0,url:r,fromCache:!1,strategy:"fallback"});case 21:return n.abrupt("return",{success:!1,error:"H5ç¯å¢ƒä¸‹å›¾ç‰‡åŠ è½½å¤±è´¥",url:r});case 22:case"end":return n.stop()}}),n,this,[[5,14]])})));return function(r,t){return n.apply(this,arguments)}}()},{key:"loadImageMiniProgram",value:function(){var n=i(a().mark((function n(r,t){var e;return a().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,this.downloadFileWithTimeout(r,t.timeout);case 3:if(e=n.sent,!e.success){n.next=7;break}return this.cache.set(r,e.tempFilePath),n.abrupt("return",{success:!0,url:e.tempFilePath,fromCache:!1,strategy:"download"});case 7:n.next=12;break;case 9:n.prev=9,n.t0=n["catch"](0),console.error("å°ç¨‹åºç¯å¢ƒå›¾ç‰‡åŠ è½½å¤±è´¥:",n.t0);case 12:return n.abrupt("return",{success:!1,error:"å°ç¨‹åºç¯å¢ƒä¸‹å›¾ç‰‡åŠ è½½å¤±è´¥",url:r});case 13:case"end":return n.stop()}}),n,this,[[0,9]])})));return function(r,t){return n.apply(this,arguments)}}()},{key:"loadImageNative",value:function(){var n=i(a().mark((function n(r,t){var e;return a().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,this.downloadFileWithTimeout(r,t.timeout);case 3:if(e=n.sent,!e.success){n.next=7;break}return this.cache.set(r,e.tempFilePath),n.abrupt("return",{success:!0,url:e.tempFilePath,fromCache:!1,strategy:"download"});case 7:n.next=12;break;case 9:n.prev=9,n.t0=n["catch"](0),console.error("åŸç”Ÿç¯å¢ƒå›¾ç‰‡åŠ è½½å¤±è´¥:",n.t0);case 12:return n.abrupt("return",{success:!1,error:"åŸç”Ÿç¯å¢ƒä¸‹å›¾ç‰‡åŠ è½½å¤±è´¥",url:r});case 13:case"end":return n.stop()}}),n,this,[[0,9]])})));return function(r,t){return n.apply(this,arguments)}}()},{key:"downloadFileWithTimeout",value:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e4;return new Promise((function(t){var e=setTimeout((function(){t({success:!1,error:"ä¸‹è½½è¶…æ—¶"})}),r);uni.downloadFile({url:n,success:function(n){clearTimeout(e),200===n.statusCode?t({success:!0,tempFilePath:n.tempFilePath}):t({success:!1,error:"HTTP ".concat(n.statusCode)})},fail:function(n){clearTimeout(e),t({success:!1,error:n.errMsg||"ä¸‹è½½å¤±è´¥"})}})}))}},{key:"isCloudStorageUrl",value:function(n){return n.includes("tcb.qcloud.la")||n.includes("cloudbase")||n.includes("cloud://")}},{key:"loadImages",value:function(){var n=i(a().mark((function n(r){var t,i,o,s,c,l,u,d=this,g=arguments;return a().wrap((function(n){while(1)switch(n.prev=n.next){case 0:t=g.length>1&&void 0!==g[1]?g[1]:{},i=t.maxConcurrent,o=void 0===i?3:i,s=[],c=0;case 4:if(!(c<r.length)){n.next=13;break}return l=r.slice(c,c+o),n.next=8,Promise.all(l.map((function(n){return d.loadImage(n,t)})));case 8:u=n.sent,s.push.apply(s,e(u));case 10:c+=o,n.next=4;break;case 13:return n.abrupt("return",s);case 14:case"end":return n.stop()}}),n)})));return function(r){return n.apply(this,arguments)}}()},{key:"clearCache",value:function(){this.cache.clear()}},{key:"getCacheStats",value:function(){return{size:this.cache.size,keys:Array.from(this.cache.keys())}}}]),n}(),l=new c;n.exports=l},"27eb":function(n,r,t){"use strict";var e=t("8af6"),a=t.n(e);a.a},"2cf2":function(n,r,t){"use strict";t("6a54");var e=t("f5bd").default;Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=e(t("39d8")),i=e(t("2634")),o=e(t("9b1b")),s=e(t("2fdc"));t("bf0f"),t("f3f7"),t("18f7"),t("de6c"),t("5c47"),t("fd3c"),t("bd06"),t("64aa"),t("f7a5"),t("8f71"),t("c223"),t("08eb"),t("2797");var c=e(t("8cb3")),l=e(t("3d29")),u=e(t("ab25")),d=(t("f117"),t("e52a")),g=t("eb63"),v=t("7386"),p=e(t("8cb3")),f=t("f806"),h=t("fe58"),m=t("df61"),b=m.togglePostLike,w=t("a7cb"),y=t("05f6"),k=t("8e86"),x=k.previewImage,P=t("fcd5"),I=P.normalizePostList,C=t("11ca"),T=C.cloudCall,_=t("2b90"),L={components:{skeleton:c.default,pageTabs:l.default,AppTabBar:u.default},mixins:[_],data:function(){return{postList:[],votingInProgress:{},page:0,hasMore:!0,isLoading:!1,openid:"",isLoadingMore:!1,swiperHeights:{},imageClampHeights:{},displayMode:"square",imageCache:{},visiblePosts:new Set,currentTab:"square",currentPage:"home",showPageIndicator:!1,pageIndicatorText:"",discoverPostList:[],discoverPage:0,discoverHasMore:!0,discoverShownPostIds:[],discoverRefreshTime:0,discoverIsLoading:!1,discoverIsLoadingMore:!1,discussionPostList:[],discussionPage:0,discussionHasMore:!0,discussionIsLoading:!1,discussionIsLoadingMore:!1,touchStartX:0,touchStartY:0,touchEndX:0,touchEndY:0,selected:0,img:"",safeAreaTop:0}},onLoad:function(n){this.debugSafeArea(),this.setData({displayMode:"square"}),this.pageLoadStartTime=Date.now(),this.initOpenid(),this.waitForLoginThenInit()},onShow:function(){try{uni.hideTabBar({animation:!1})}catch(a){}try{this.$refs.customTabBar&&this.$refs.customTabBar.syncSelected&&this.$refs.customTabBar.syncSelected()}catch(a){}var n=t("d87a"),r=n.updateTabBarStatus;r(this,0);try{var e=uni.getStorageSync("shouldRefreshIndex");e&&(console.log("ã€indexã€‘æ£€æµ‹åˆ°å‘å¸ƒæ ‡è®°ï¼Œåˆ·æ–°æ•°æ®"),uni.removeStorageSync("shouldRefreshIndex"),this.refreshIndexData())}catch(a){console.log("CatchClause",a),console.log("CatchClause",a),console.error("æ£€æŸ¥åˆ·æ–°æ ‡è®°å¤±è´¥:",a)}this.syncLikeStatusFromCache()},onPullDownRefresh:function(){var n=this;console.log("ğŸ” [é¦–é¡µ] ä¸‹æ‹‰åˆ·æ–°è§¦å‘ï¼Œå½“å‰é¡µé¢:",this.currentPage),"home"===this.currentPage?(console.log("ğŸ” [é¦–é¡µ] æ‰§è¡Œä¸»é¡µåˆ·æ–°"),this.setData({postList:[],swiperHeights:{},page:0,hasMore:!0},(function(){console.log("ğŸ” [é¦–é¡µ] çŠ¶æ€é‡ç½®å®Œæˆï¼Œå¼€å§‹è·å–æ•°æ®"),n.getPostList((function(){console.log("âœ… [é¦–é¡µ] ä¸‹æ‹‰åˆ·æ–°å®Œæˆ"),uni.stopPullDownRefresh()}))}))):"discover"===this.currentPage?(console.log("ğŸ” [é¦–é¡µ] æ‰§è¡Œå‘ç°é¡µåˆ·æ–°"),this.refreshDiscoverPosts(),uni.stopPullDownRefresh()):"discussion"===this.currentPage&&(console.log("ğŸ” [é¦–é¡µ] æ‰§è¡Œè®¨è®ºé¡µåˆ·æ–°"),this.refreshDiscussionPosts(),uni.stopPullDownRefresh())},onPageScroll:function(n){var r=this;this.scrollTimer&&clearTimeout(this.scrollTimer),this.scrollTimer=setTimeout((function(){var t,e,a="home"===r.currentPage,i="discover"===r.currentPage,o="discussion"===r.currentPage;if(a||i||o)if(a?(t=r.hasMore,e=r.isLoading||r.isLoadingMore):i?(t=r.discoverHasMore,e=r.discoverIsLoading||r.discoverIsLoadingMore):o&&(t=r.discussionHasMore,e=r.discussionIsLoading||r.discussionIsLoadingMore),t&&!e){var s=uni.getWindowInfo(),c=s.windowHeight;console.log("ã€é¦–é¡µã€‘æ»šåŠ¨æ£€æµ‹ - page:",r.currentPage,"scrollTop:",n.scrollTop,"windowHeight:",c),uni.createSelectorQuery().in(r).select("#post-list-container").boundingClientRect((function(t){if(t&&t.height>0){var e=t.height,s=n.scrollTop,l=e-s-c,u=1.5*c;console.log("ã€é¦–é¡µã€‘æ»šåŠ¨è®¡ç®—:",{scrollHeight:e,scrollTop:s,windowHeight:c,distanceToBottom:l,preloadThreshold:u}),l<u&&(console.log("ã€é¦–é¡µã€‘è§¦å‘é¢„åŠ è½½ï¼Œé¡µé¢:",r.currentPage),a?r.getPostList():i?r.loadRecommendationPosts():o&&r.loadDiscussionPosts())}else console.log("ã€é¦–é¡µã€‘å®¹å™¨é«˜åº¦è·å–å¤±è´¥")})).exec()}else console.log("ã€é¦–é¡µã€‘æ»šåŠ¨æ£€æµ‹è¢«é˜»æ­¢:",{page:r.currentPage,hasMore:t,loadingFlag:e})}),100)},methods:{debugSafeArea:function(){try{var n=uni.getSystemInfoSync();if(console.log("ã€indexã€‘ç³»ç»Ÿä¿¡æ¯:",{statusBarHeight:n.statusBarHeight,safeAreaInsets:n.safeAreaInsets,safeArea:n.safeArea,windowHeight:n.windowHeight,screenHeight:n.screenHeight,platform:n.platform}),n.statusBarHeight){var r=n.statusBarHeight;console.log("ã€indexã€‘ä½¿ç”¨çŠ¶æ€æ é«˜åº¦ä½œä¸ºå®‰å…¨åŒºåŸŸ:",r),this.setData({safeAreaTop:r});try{"undefined"!==typeof document&&document.documentElement&&(document.documentElement.style.setProperty("--safe-area-inset-top",r+"px"),console.log("ã€indexã€‘CSSå˜é‡è®¾ç½®æˆåŠŸ"))}catch(t){console.log("ã€indexã€‘CSSå˜é‡è®¾ç½®å¤±è´¥ï¼Œä½¿ç”¨æ•°æ®ç»‘å®šæ–¹å¼:",t)}}}catch(e){console.error("ã€indexã€‘å®‰å…¨åŒºåŸŸè°ƒè¯•å¤±è´¥:",e)}},onTabChange:function(n){var r=this;switch(console.log("åˆ‡æ¢æ ‡ç­¾é¡µ:",n),this.setData({currentTab:n,showPageIndicator:!0}),n){case"square":this.setData({currentPage:"home",pageIndicatorText:"å¹¿åœº"});break;case"discover":this.setData({currentPage:"discover",pageIndicatorText:"å‘ç°"}),0===this.discoverPostList.length&&this.loadDiscoverPosts();break;case"discussion":this.setData({currentPage:"discussion",pageIndicatorText:"è®¨è®º"}),0===this.discussionPostList.length&&this.loadDiscussionPosts();break}setTimeout((function(){r.setData({showPageIndicator:!1})}),3e3)},waitForLoginThenInit:function(){var n=this,r=Date.now();(function t(){try{var e=getApp(),a=e&&e.globalData&&e.globalData._loginProcessCompleted,i=e&&e.globalData&&e.globalData.openid;if(a&&i)return console.log("ğŸ” [é¦–é¡µ] æ£€æµ‹åˆ°ç™»å½•å®Œæˆä¸”å·²è·å– openidï¼Œå¼€å§‹æ‹‰å–æ•°æ®"),void n.getIndexData()}catch(o){console.log("ğŸ” [é¦–é¡µ] ç™»å½•æ£€æµ‹å¼‚å¸¸ï¼ˆå¿½ç•¥ç»§ç»­ç­‰å¾…ï¼‰",o)}if(Date.now()-r>=5e3)return console.log("â±ï¸ [é¦–é¡µ] ç™»å½•ç­‰å¾…è¶…æ—¶ï¼Œå…œåº•ç›´æ¥æ‹‰å–æ•°æ®"),void n.getIndexData();setTimeout(t,100)})()},getIndexData:function(){var n=this;this.setData({isLoading:!0,postList:[],page:0,hasMore:!0}),(0,g.getHomePosts)({page:0,pageSize:5,context:this}).then(function(){var r=(0,s.default)((0,i.default)().mark((function r(t){var e,a,s;return(0,i.default)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e=Array.isArray(t)?t:[],a=I(e).map((function(n){return(0,o.default)((0,o.default)({},n),{},{likeIcon:h.getLikeIcon(n.votes||0,n.isVoted||!1)})})),r.next=4,(0,v.hydrateTempUrls)(a);case 4:a=r.sent,(0,v.warmTempUrlsFromPosts)(a),n.setData({postList:a,page:1,isLoading:!1,hasMore:5===a.length}),s=n,setTimeout((function(){s.preloadUserData&&"function"===typeof s.preloadUserData&&s.preloadUserData(a)}),500);case 9:case"end":return r.stop()}}),r)})));return function(n){return r.apply(this,arguments)}}()).catch((function(r){console.error("ã€é¦–é¡µã€‘getIndexDataï¼ˆç¼“å­˜å°è£…ï¼‰å¤±è´¥:",r),n.setData({isLoading:!1}),uni.showToast({title:"ç½‘ç»œé”™è¯¯",icon:"none"})}))},refreshData:function(){var n=this;this.setData({postList:[],swiperHeights:{},imageClampHeights:{},page:0,hasMore:!0},(function(){n.getPostList()}))},handlePreview:function(n){console.log("ã€å›¾ç‰‡é¢„è§ˆã€‘handlePreviewäº‹ä»¶è§¦å‘");var r=n&&n.currentTarget?n.currentTarget.dataset:{};console.log("ã€å›¾ç‰‡é¢„è§ˆã€‘event.currentTarget.dataset:",r);var t=x(n);return t||console.error("ã€å›¾ç‰‡é¢„è§ˆã€‘é¢„è§ˆæ¡ä»¶ä¸æ»¡è¶³",r),t},onVote:function(n){var r=this;console.log("ã€ç‚¹èµã€‘onVoteäº‹ä»¶è§¦å‘",n.currentTarget.dataset);var t=n.currentTarget.dataset.postid,e=n.currentTarget.dataset.index,i=n.currentTarget.dataset.listType;i||(i="discover"===this.currentPage?"discover":"discussion"===this.currentPage?"discussion":"home");var s="discover"===i?"discoverPostList":"discussion"===i?"discussionPostList":"postList",c="discover"===i?"discover":"discussion"===i?"discussion":"index",l=this[s]||[],u=e;if(l[u]&&l[u]._id===t||(u=l.findIndex((function(n){return n._id===t}))),u<0)console.warn("ã€ç‚¹èµã€‘æœªæ‰¾åˆ°å¯¹åº”çš„å¸–å­ï¼ŒpostId:",t,"listType:",i);else if(console.log("ã€ç‚¹èµã€‘postId:",t,"index:",e),this.votingInProgress[t])console.log("ã€ç‚¹èµã€‘æ­£åœ¨æŠ•ç¥¨ä¸­ï¼Œè·³è¿‡");else{this.setData((0,a.default)({},"votingInProgress.".concat(t),!0));var d=l[u]||{},g=Number(d.votes)||0,v=!!d.isVoted;console.log("ã€ç‚¹èµã€‘åŸå§‹çŠ¶æ€ - votes:",g,"isVoted:",v);var p=v?Math.max(0,g-1):g+1,f=(0,o.default)((0,o.default)({},d),{},{votes:p,isVoted:!v,likeIcon:h.getLikeIcon(p,!v)}),m=l.slice();m[u]=f,this.setData((0,a.default)({},s,m)),b(t,{pageTag:c,context:this,currentVotes:g,currentIsLiked:v,requireAuth:!0}).then((function(n){if(console.log("ã€ç‚¹èµã€‘æœåŠ¡è¿”å›ç»“æœ:",n),n.success){var e=r[s]||[],i=e.findIndex((function(n){return n._id===t}));if(i>-1){var c=(0,o.default)((0,o.default)({},e[i]),{},{votes:n.votes,isVoted:n.isLiked,likeIcon:n.likeIcon}),l=e.slice();l[i]=c,r.setData((0,a.default)({},s,l))}console.log("ã€ç‚¹èµã€‘æœåŠ¡è°ƒç”¨æˆåŠŸï¼Œæ•°æ®å·²åŒæ­¥")}else{var u=n.rollback||{votes:g,isLiked:v,likeIcon:h.getLikeIcon(g,v)};console.warn("ã€ç‚¹èµã€‘æœåŠ¡è¿”å›å¤±è´¥ï¼Œå›æ»šUI");var d=r[s]||[],p=d.findIndex((function(n){return n._id===t}));if(p>-1){var f=(0,o.default)((0,o.default)({},d[p]),{},{votes:u.votes,isVoted:u.isLiked,likeIcon:u.likeIcon}),m=d.slice();m[p]=f,r.setData((0,a.default)({},s,m))}}})).catch((function(n){console.error("ã€ç‚¹èµã€‘è°ƒç”¨ likeService å¤±è´¥:",n);var e=r[s]||[],i=e.findIndex((function(n){return n._id===t}));if(i>-1){var c=(0,o.default)((0,o.default)({},e[i]),{},{votes:g,isVoted:v,likeIcon:h.getLikeIcon(g,v)}),l=e.slice();l[i]=c,r.setData((0,a.default)({},s,l))}})).finally((function(){console.log("ã€ç‚¹èµã€‘æœåŠ¡è°ƒç”¨å®Œæˆ"),r.setData((0,a.default)({},"votingInProgress.".concat(t),!1))}))}},updatePostCommentCount:function(n,r){var t=this.postList,e=t.findIndex((function(r){return r._id===n}));e>-1&&this.setData((0,a.default)({},"postList[".concat(e,"].commentCount"),r))},onImageError:function(n){console.error("å›¾ç‰‡åŠ è½½å¤±è´¥",n.detail)},onAvatarError:function(n){console.error("å¤´åƒåŠ è½½å¤±è´¥",n.detail)},onAvatarLoad:function(n){console.log("å¤´åƒåŠ è½½æˆåŠŸ",n.detail)},onLikeIconError:function(n){console.error("ç‚¹èµå›¾æ ‡åŠ è½½å¤±è´¥",n.detail,"å›¾æ ‡è·¯å¾„:",n.currentTarget.dataset.src)},preloadImages:function(n){var r=n.filter((function(n){return n.imageUrls&&n.imageUrls.length>0})).map((function(n){return n.imageUrls[0]})).slice(0,3);r.length>0&&f.preloadImages(r,(function(n,r){r&&console.log("å›¾ç‰‡é¢„åŠ è½½æˆåŠŸ:",n)}))},preloadUserData:function(n){if(n&&0!==n.length){var r=this.getCurrentUserId();r&&(w.preloadAvatarsFromPosts(n),y.preloadFollowStatusFromPosts(n,r))}},initOpenid:function(){var n=getApp(),r=n&&n.globalData&&n.globalData.openid;if(r)this.setData({openid:r});else{var t=uni.getStorageSync("openid")||uni.getStorageSync("userOpenId");t&&this.setData({openid:t})}},getCurrentUserId:function(){return this.openid||uni.getStorageSync("openid")||uni.getStorageSync("userOpenId")},navigateToUserProfile:function(n){console.log("ã€å¤´åƒç‚¹å‡»ã€‘äº‹ä»¶è§¦å‘",n),console.log("ã€å¤´åƒç‚¹å‡»ã€‘dataset:",n.currentTarget.dataset);var r=n.currentTarget.dataset.userId;if(console.log("ã€å¤´åƒç‚¹å‡»ã€‘æå–çš„userId:",r),r){var t=this.openid;r===t?(console.log("ã€å¤´åƒç‚¹å‡»ã€‘ç‚¹å‡»çš„æ˜¯è‡ªå·±å¤´åƒï¼Œåˆ‡æ¢åˆ°æˆ‘çš„é¡µé¢"),uni.switchTab({url:"/pages/profile/profile"})):(console.log("ã€å¤´åƒç‚¹å‡»ã€‘ç‚¹å‡»çš„æ˜¯ä»–äººå¤´åƒï¼Œè·³è½¬åˆ°ç”¨æˆ·ä¸»é¡µ"),uni.navigateTo({url:"/pages/user-profile/user-profile?userId=".concat(r),success:function(){console.log("ã€å¤´åƒç‚¹å‡»ã€‘è·³è½¬æˆåŠŸ")},fail:function(n){console.error("ã€å¤´åƒç‚¹å‡»ã€‘è·³è½¬å¤±è´¥:",n),uni.showToast({title:"è·³è½¬å¤±è´¥",icon:"none"})}}))}else console.error("ã€å¤´åƒç‚¹å‡»ã€‘userIdä¸ºç©ºï¼Œæ— æ³•è·³è½¬"),uni.showToast({title:"ç”¨æˆ·ä¿¡æ¯è·å–å¤±è´¥",icon:"none"})},getPostList:function(n){var r=this;if(console.log("ğŸ” [é¦–é¡µ] getPostList å¼€å§‹è°ƒç”¨"),console.log("ğŸ” [é¦–é¡µ] å½“å‰çŠ¶æ€:",{isLoading:this.isLoading,isLoadingMore:this.isLoadingMore,hasMore:this.hasMore,page:this.page,postListLength:this.postList.length}),this.isLoading||this.isLoadingMore||!this.hasMore)return console.log("ã€é¦–é¡µã€‘getPostListè¢«é˜»æ­¢ï¼šæ­£åœ¨åŠ è½½ä¸­æˆ–æ²¡æœ‰æ›´å¤šæ•°æ®"),void("function"===typeof n&&n());var t=5*this.page,e=0===this.page;console.log("ğŸ” [é¦–é¡µ] è¯·æ±‚å‚æ•°:",{skip:t,page:this.page,isFirstLoad:e,PAGE_SIZE:5}),e?this.setData({isLoading:!0}):this.setData({isLoadingMore:!0});Date.now();(0,g.getHomePosts)({page:this.page,pageSize:5,context:this}).then(function(){var n=(0,s.default)((0,i.default)().mark((function n(t){var a,s,c,l,u,d,g;return(0,i.default)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=Array.isArray(t)?t:[],console.log("âœ… [é¦–é¡µ] è·å–åˆ°å¸–å­æ•°é‡ï¼ˆç¼“å­˜å°è£…ï¼‰:",a.length),s=I(a).map((function(n){return(0,o.default)((0,o.default)({},n),{},{likeIcon:h.getLikeIcon(n.votes||0,n.isVoted||!1)})})),n.next=5,(0,v.hydrateTempUrls)(s);case 5:s=n.sent,(0,v.warmTempUrlsFromPosts)(s),c=r,setTimeout((function(){c.preloadUserData&&"function"===typeof c.preloadUserData&&c.preloadUserData(s)}),500),l=s.length,u=r.postList,d=u.concat(s),g={postList:d,page:r.page+1,hasMore:5===l},console.log("âœ… [é¦–é¡µ] æ›´æ–°æ•°æ®ï¼ˆç¼“å­˜å°è£…ï¼‰:",{newPostListLength:d.length,currentPage:r.page,newPage:r.page+1,hasMore:g.hasMore,newPostsCount:l}),r.setData(g),e&&r.preloadImages(s);case 16:case"end":return n.stop()}}),n)})));return function(r){return n.apply(this,arguments)}}()).catch((function(n){console.error("ã€é¦–é¡µã€‘getPostListï¼ˆç¼“å­˜å°è£…ï¼‰å¤±è´¥:",n),e&&uni.showToast({title:"ç½‘ç»œé”™è¯¯",icon:"none"})})).finally((function(){e?r.setData({isLoading:!1}):r.setData({isLoadingMore:!1}),"function"===typeof n&&n()}))},syncLikeStatusFromCache:function(){console.log("ã€é¦–é¡µã€‘åŒæ­¥ç‚¹èµçŠ¶æ€ï¼šCacheManager æ¥ç®¡ï¼Œè·³è¿‡ dataCache åŒæ­¥")},onTagClick:function(n){var r=n.currentTarget.dataset.tag;console.log("ç‚¹å‡»æ ‡ç­¾:",r),uni.navigateTo({url:"/pages/tag-filter/tag-filter?tag=".concat(encodeURIComponent(r)),success:function(){console.log("è·³è½¬åˆ°æ ‡ç­¾ç­›é€‰é¡µé¢æˆåŠŸ")},fail:function(n){console.error("è·³è½¬åˆ°æ ‡ç­¾ç­›é€‰é¡µé¢å¤±è´¥:",n),uni.showToast({title:"è·³è½¬å¤±è´¥",icon:"none"})}})},onCommentClick:function(n){var r=n.currentTarget.dataset.postid;console.log("ç‚¹å‡»è¯„è®ºï¼Œè·³è½¬åˆ°è¯¦æƒ…é¡µ:",r),uni.navigateTo({url:"/pages/post-detail/post-detail?id=".concat(r),success:function(){console.log("è·³è½¬åˆ°è¯¦æƒ…é¡µæˆåŠŸ")},fail:function(n){console.error("è·³è½¬åˆ°è¯¦æƒ…é¡µå¤±è´¥:",n),uni.showToast({title:"è·³è½¬å¤±è´¥",icon:"none"})}})},touchStart:function(n){this.setData({touchStartX:n.touches[0].clientX,touchStartY:n.touches[0].clientY})},touchEnd:function(n){var r=n.changedTouches[0].clientX,t=n.changedTouches[0].clientY,e=this.touchStartX-r,a=this.touchStartY-t,i=Math.sqrt(e*e+a*a),o=Math.abs(180*Math.atan2(Math.abs(a),Math.abs(e))/Math.PI);i>80&&Math.abs(e)>50&&o<45&&(e>0?(console.log("å·¦æ»‘åˆ‡æ¢å›ä¸»é¡µ"),this.switchToHome()):(console.log("å³æ»‘åˆ‡æ¢åˆ°å‘ç°é¡µ"),this.switchToDiscover()))},switchToDiscover:function(){var n=this;"discover"!==this.currentPage?(console.log("åˆ‡æ¢åˆ°å‘ç°é¡µ"),this.setData({currentPage:"discover",showPageIndicator:!0,pageIndicatorText:"å‘ç°é¡µ"}),0===this.discoverPostList.length?(console.log("å¼€å§‹åŠ è½½å‘ç°é¡µæ•°æ®"),this.loadDiscoverPosts()):console.log("å‘ç°é¡µå·²æœ‰æ•°æ®ï¼Œç›´æ¥åˆ‡æ¢"),setTimeout((function(){n.setData({showPageIndicator:!1})}),3e3)):console.log("å·²ç»åœ¨å‘ç°é¡µï¼Œæ— éœ€åˆ‡æ¢")},switchToHome:function(){var n=this;"home"!==this.currentPage?(console.log("åˆ‡æ¢å›ä¸»é¡µ"),this.setData({currentPage:"home",showPageIndicator:!0,pageIndicatorText:"ä¸»é¡µ"}),setTimeout((function(){n.setData({showPageIndicator:!1})}),3e3)):console.log("å·²ç»åœ¨ä¸»é¡µï¼Œæ— éœ€åˆ‡æ¢")},loadDiscoverPosts:function(){console.log("å¼€å§‹åŠ è½½å‘ç°é¡µæ¨èæ•°æ®"),this.loadRecommendationPosts()},loadRecommendationPosts:function(){var n=(0,s.default)((0,i.default)().mark((function n(){var r,t,e,a,s,c,l,u,g,p,f,m,b,w,y,k;return(0,i.default)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!this.discoverIsLoading&&!this.discoverIsLoadingMore){n.next=3;break}return console.log("å‘ç°é¡µæ­£åœ¨åŠ è½½ä¸­ï¼Œè·³è¿‡é‡å¤è¯·æ±‚"),n.abrupt("return");case 3:if(this.discoverHasMore||!(this.discoverPage>0)){n.next=6;break}return console.log("å‘ç°é¡µå·²æ— æ›´å¤šæ¨èï¼Œè·³è¿‡åŠ è½½"),n.abrupt("return");case 6:return r=0===this.discoverPage&&0===this.discoverPostList.length,this.setData({discoverIsLoading:r,discoverIsLoadingMore:!r}),n.prev=8,t=Array.from(new Set(Array.isArray(this.discoverShownPostIds)?this.discoverShownPostIds:[])),e=new Set(t),a=this.discoverPage,n.next=14,(0,d.getDiscoverFeed)({excludePostIds:t,page:a,pageSize:5,context:this});case 14:return s=n.sent,c=Array.isArray(null===s||void 0===s?void 0:s.posts)?s.posts:[],console.log("è·å–æ¨èæ•°æ®ç»“æœï¼ˆåˆ†é¡µï¼‰: page=",a,"æ¡æ•°=",c.length,"hasMore=",null===s||void 0===s?void 0:s.hasMore),l=I(c).map((function(n){return(0,o.default)((0,o.default)({},n),{},{likeIcon:h.getLikeIcon(n.votes||0,n.isVoted||!1)})})),l=l.filter((function(n){return n&&n._id&&!e.has(n._id)})),n.next=21,(0,v.hydrateTempUrls)(l);case 21:if(l=n.sent,(0,v.warmTempUrlsFromPosts)(l),l.length){n.next=29;break}return console.log("æš‚æ— æ–°çš„æ¨èå†…å®¹"),u=!(!s||!s.hasMore),this.setData({discoverPostList:0===a?[]:this.discoverPostList,discoverHasMore:u,discoverRefreshTime:Date.now(),discoverIsLoading:!1,discoverIsLoadingMore:!1,discoverPage:u?a+1:a}),u?(console.log("æœåŠ¡å™¨æç¤ºä»æœ‰æ›´å¤šï¼Œç»§ç»­å°è¯•è·å–ä¸‹ä¸€é¡µ"),this.loadRecommendationPosts()):(g=r?"æš‚æ—¶æ²¡æœ‰æ–°çš„æ¨è":"æ²¡æœ‰æ›´å¤šæ¨èäº†",uni.showToast({title:g,icon:"none"})),n.abrupt("return");case 29:p=Array.isArray(this.discoverPostList)?this.discoverPostList.slice():[],f=0===a?l:p.concat(l),m=l.map((function(n){return n._id})).filter(Boolean),b=new Set(t),m.forEach((function(n){return b.add(n)})),w=Array.from(b).slice(-200),y=!(!s||!s.hasMore),k=l.length>=5||y,this.setData({discoverPostList:f,discoverPage:a+1,discoverHasMore:l.length>=5||k,discoverShownPostIds:w,discoverRefreshTime:Date.now()}),console.log("å‘ç°é¡µæ¨èæ•°æ®è®¾ç½®å®Œæˆï¼Œå¸–å­æ•°é‡:",l.length,"ç´¯è®¡:",f.length,"hasMore:",k),n.next=45;break;case 41:n.prev=41,n.t0=n["catch"](8),console.error("æ¨èæ•°æ®è¯·æ±‚å¤±è´¥ï¼ˆåˆ†é¡µï¼‰:",n.t0),uni.showToast({title:"æ¨èåŠ è½½å¤±è´¥",icon:"none"});case 45:return n.prev=45,this.setData({discoverIsLoading:!1,discoverIsLoadingMore:!1}),n.finish(45);case 48:case"end":return n.stop()}}),n,this,[[8,41,45,48]])})));return function(){return n.apply(this,arguments)}}(),refreshDiscoverPosts:function(){console.log("åˆ·æ–°å‘ç°é¡µæ¨è");try{(0,d.invalidateDiscover)()}catch(n){console.warn("æ¸…ç†å‘ç°é¡µç¼“å­˜å¤±è´¥:",n)}this.setData({discoverPostList:[],discoverPage:0,discoverHasMore:!0,discoverRefreshTime:Date.now(),discoverIsLoading:!1,discoverIsLoadingMore:!1}),this.loadRecommendationPosts()},loadDiscussionPosts:function(){var n=this;if(console.log("å¼€å§‹åŠ è½½è®¨è®ºé¡µæ•°æ®"),this.discussionIsLoading||this.discussionIsLoadingMore)console.log("è®¨è®ºé¡µæ­£åœ¨åŠ è½½ä¸­ï¼Œè·³è¿‡é‡å¤è¯·æ±‚");else if(!this.discussionHasMore&&this.discussionPage>0)console.log("è®¨è®ºé¡µå·²æ— æ›´å¤šæ•°æ®ï¼Œè·³è¿‡åŠ è½½");else{var r=0===this.discussionPage&&0===this.discussionPostList.length;this.setData({discussionIsLoading:r,discussionIsLoadingMore:!r});var t=5*this.discussionPage;this.callCloudFunction("getDiscussionPosts",{skip:t,limit:5},{requireAuth:!1}).then(function(){var t=(0,s.default)((0,i.default)().mark((function t(e){var a,s,c;return(0,i.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(e.result&&e.result.success&&e.result.posts)){t.next=13;break}return a=e.result.posts.map((function(n){return(0,o.default)((0,o.default)({},n),{},{likeIcon:h.getLikeIcon(n.votes||0,n.isVoted||!1)})})),t.next=4,(0,v.hydrateTempUrls)(a);case 4:a=t.sent,(0,v.warmTempUrlsFromPosts)(a),s=0===n.discussionPage?[]:n.discussionPostList,c=s.concat(a),n.setData({discussionPostList:c,discussionPage:n.discussionPage+1,discussionHasMore:5===a.length,discussionIsLoading:!1,discussionIsLoadingMore:!1}),console.log("è®¨è®ºé¡µæ•°æ®åŠ è½½å®Œæˆï¼Œå¸–å­æ•°é‡:",a.length,"ç´¯è®¡:",c.length),r&&setTimeout((function(){n.preloadUserData&&"function"===typeof n.preloadUserData&&n.preloadUserData(a)}),500),t.next=15;break;case 13:n.setData({discussionIsLoading:!1,discussionIsLoadingMore:!1,discussionHasMore:!1}),r&&uni.showToast({title:"æš‚æ— è®¨è®ºå†…å®¹",icon:"none"});case 15:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}()).catch((function(r){console.error("åŠ è½½è®¨è®ºé¡µæ•°æ®å¤±è´¥:",r),n.setData({discussionIsLoading:!1,discussionIsLoadingMore:!1}),uni.showToast({title:"åŠ è½½å¤±è´¥",icon:"none"})}))}},getMockDiscussionPosts:function(){return[{_id:"discussion_1",_openid:"user_1",title:"å¤§å®¶è§‰å¾—ç°ä»£è¯—æ­Œåº”è¯¥å¦‚ä½•å‘å±•ï¼Ÿ",content:"æœ€è¿‘çœ‹åˆ°å¾ˆå¤šç°ä»£è¯—ä½œå“ï¼Œæ„Ÿè§‰é£æ ¼å„å¼‚ã€‚æƒ³å¬å¬å¤§å®¶å¯¹ç°ä»£è¯—æ­Œæœªæ¥å‘å±•çš„çœ‹æ³•ã€‚",authorName:"è¯—å‹å°ç‹",authorAvatar:"/static/images/avatar.png",votes:15,commentCount:8,isVoted:!1,tags:["è¯—æ­Œè®¨è®º","ç°ä»£è¯—"],imageUrls:[],createdAt:(new Date).toISOString()},{_id:"discussion_2",_openid:"user_2",title:"åˆ†äº«ä¸€é¦–æœ€å–œæ¬¢çš„å¤è¯—",content:"æœ€è¿‘é‡è¯»äº†æç™½çš„ã€Šå°†è¿›é…’ã€‹ï¼Œæ¯æ¬¡è¯»éƒ½æœ‰æ–°çš„æ„Ÿæ‚Ÿã€‚å¤§å®¶æœ€å–œæ¬¢å“ªé¦–å¤è¯—å‘¢ï¼Ÿ",authorName:"å¤é£çˆ±å¥½è€…",authorAvatar:"/static/images/avatar.png",votes:23,commentCount:12,isVoted:!0,tags:["å¤è¯—","æç™½","ç»å…¸"],imageUrls:[],createdAt:(new Date).toISOString()},{_id:"discussion_3",_openid:"user_3",title:"å†™ä½œçµæ„Ÿæ¯ç«­æ€ä¹ˆåŠï¼Ÿ",content:"æœ€è¿‘ä¸€æ®µæ—¶é—´æ€»æ˜¯æ„Ÿè§‰å†™ä¸å‡ºä¸œè¥¿ï¼Œçµæ„Ÿå¥½åƒæ¯ç«­äº†ã€‚å¤§å®¶æœ‰ä»€ä¹ˆå¥½çš„å»ºè®®å—ï¼Ÿ",authorName:"å†™ä½œæ–°æ‰‹",authorAvatar:"/static/images/avatar.png",votes:8,commentCount:6,isVoted:!1,tags:["å†™ä½œ","çµæ„Ÿ","æ±‚åŠ©"],imageUrls:[],createdAt:(new Date).toISOString()}]},refreshDiscussionPosts:function(){console.log("åˆ·æ–°è®¨è®ºé¡µæ•°æ®"),this.setData({discussionPostList:[],discussionPage:0,discussionHasMore:!0,discussionIsLoading:!1,discussionIsLoadingMore:!1}),this.loadDiscussionPosts()},refreshIndexData:function(){console.log("ã€indexã€‘å¼€å§‹åˆ·æ–°å¹¿åœºé¡µæ•°æ®"),this.setData({postList:[],page:0,hasMore:!0,isLoading:!1}),this.getIndexData()},callCloudFunction:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return T(n,r,Object.assign({pageTag:"index",context:this},t))}}};r.default=L,r.default.components=Object.assign({skeleton:p.default},r.default.components||{})},"3d29":function(n,r,t){"use strict";t.r(r);var e=t("7359"),a=t("4d13");for(var i in a)["default"].indexOf(i)<0&&function(n){t.d(r,n,(function(){return a[n]}))}(i);t("182c");var o=t("828b"),s=Object(o["a"])(a["default"],e["b"],e["c"],!1,null,"152cec0b",null,!1,e["a"],void 0);r["default"]=s.exports},4384:function(n,r,t){var e=t("dc7c");e.__esModule&&(e=e.default),"string"===typeof e&&(e=[[n.i,e,""]]),e.locals&&(n.exports=e.locals);var a=t("967d").default;a("58f86360",e,!0,{sourceMap:!1,shadowMode:!1})},"4ba6":function(n,r,t){"use strict";t.d(r,"b",(function(){return a})),t.d(r,"c",(function(){return i})),t.d(r,"a",(function(){return e}));var e={pageTabs:t("3d29").default,skeleton:t("8cb3").default},a=function(){var n=this,r=n.$createElement,t=n._self._c||r;return t("v-uni-view",[t("v-uni-view",{staticClass:"container",on:{touchstart:function(r){arguments[0]=r=n.$handleEvent(r),n.touchStart.apply(void 0,arguments)},touchend:function(r){arguments[0]=r=n.$handleEvent(r),n.touchEnd.apply(void 0,arguments)}}},[n.showPageIndicator?t("v-uni-view",{staticClass:"page-indicator"},[t("v-uni-view",{staticClass:"page-indicator-text"},[n._v(n._s(n.pageIndicatorText))])],1):n._e(),t("page-tabs",{ref:"pageTabs",attrs:{"current-tab":n.currentTab},on:{"tab-change":function(r){arguments[0]=r=n.$handleEvent(r),n.onTabChange.apply(void 0,arguments)}}}),n.isLoading?t("v-uni-view",[t("skeleton")],1):t("v-uni-view",{staticClass:"square-mode-container"},[0!==n.postList.length||n.isLoading?n._e():t("v-uni-view",{staticClass:"empty-state"},[t("v-uni-view",{staticClass:"empty-icon"},[n._v("ğŸ“")]),t("v-uni-view",{staticClass:"empty-text"},[n._v("è¿˜æ²¡æœ‰å¸–å­å“¦ï½")]),t("v-uni-view",{staticClass:"empty-subtext"},[n._v("å¿«æ¥å‘å¸ƒç¬¬ä¸€æ¡å¸–å­å§ï¼")])],1),t("v-uni-view",{attrs:{id:"post-list-container"}},["home"===n.currentPage?t("v-uni-view",n._l(n.postList,(function(r,e){return t("v-uni-view",{key:e,class:"post-item-wrapper "+(r.isOriginal?"original-post":"")},[t("v-uni-view",{staticClass:"author-info-outside"},[r.authorAvatar?t("v-uni-image",{staticClass:"author-avatar",attrs:{src:r.authorAvatar,mode:"aspectFill","data-postindex":e,"data-user-id":r._openid},on:{error:function(r){arguments[0]=r=n.$handleEvent(r),n.onAvatarError.apply(void 0,arguments)},load:function(r){arguments[0]=r=n.$handleEvent(r),n.onAvatarLoad.apply(void 0,arguments)},click:function(r){r.stopPropagation(),r.preventDefault(),arguments[0]=r=n.$handleEvent(r),n.navigateToUserProfile.apply(void 0,arguments)}}}):n._e(),t("v-uni-text",{staticClass:"author-name"},[n._v(n._s(r.authorName))])],1),t("v-uni-navigator",{staticClass:"post-content-navigator",attrs:{url:"/pages/post-detail/post-detail?id="+r._id,"hover-class":"navigator-hover"}},[t("v-uni-view",{staticClass:"post-item"},[t("v-uni-view",{staticClass:"post-title"},[n._v(n._s(r.title))]),r.isPoem&&r.author?t("v-uni-view",{staticClass:"poem-author"},[n._v(n._s(r.author))]):n._e(),r.imageUrls&&r.imageUrls.length>0?t("v-uni-view",{staticClass:"image-container-wrapper",style:r.imageStyle,attrs:{"data-src":r.imageUrls[0],"data-original-image-urls":r.originalImageUrls||r.imageUrls},on:{click:function(r){r.stopPropagation(),r.preventDefault(),arguments[0]=r=n.$handleEvent(r),n.handlePreview.apply(void 0,arguments)}}},[1===r.imageUrls.length?[t("v-uni-image",{staticClass:"post-image",attrs:{src:r.imageUrls[0],mode:"aspectFill","lazy-load":!0,"data-src":r.imageUrls[0],"data-original-image-urls":r.originalImageUrls||r.imageUrls},on:{error:function(r){arguments[0]=r=n.$handleEvent(r),n.onImageError.apply(void 0,arguments)},click:function(r){r.stopPropagation(),r.preventDefault(),arguments[0]=r=n.$handleEvent(r),n.handlePreview.apply(void 0,arguments)}}})]:r.imageUrls.length>1?[t("v-uni-swiper",{staticClass:"image-swiper",attrs:{"indicator-dots":!0,circular:!0}},[n._l(r.imageUrls,(function(e,a){return[t("v-uni-swiper-item",[t("v-uni-image",{staticClass:"post-image",attrs:{src:e,mode:"aspectFill","lazy-load":!0,"data-src":e,"data-original-image-urls":r.originalImageUrls||r.imageUrls},on:{error:function(r){arguments[0]=r=n.$handleEvent(r),n.onImageError.apply(void 0,arguments)},click:function(r){r.stopPropagation(),r.preventDefault(),arguments[0]=r=n.$handleEvent(r),n.handlePreview.apply(void 0,arguments)}}})],1)]}))],2)]:n._e()],2):n._e(),r.content?t("v-uni-view",{staticClass:"post-content",staticStyle:{"white-space":"pre-wrap"}},[n._v(n._s(r.content))]):n._e(),r.tags&&r.tags.length>0?t("v-uni-view",{staticClass:"post-tags"},n._l(r.tags,(function(r,e){return t("v-uni-text",{key:e,staticClass:"post-tag",attrs:{"data-tag":r},on:{click:function(r){r.stopPropagation(),r.preventDefault(),arguments[0]=r=n.$handleEvent(r),n.onTagClick.apply(void 0,arguments)}}},[n._v("#"+n._s(r))])})),1):n._e()],1)],1),t("v-uni-view",{staticClass:"vote-section"},[t("v-uni-view",{staticClass:"actions-left"}),t("v-uni-view",{staticClass:"button-group"},[t("v-uni-view",{staticClass:"comment-count",attrs:{"data-postid":r._id},on:{click:function(r){r.stopPropagation(),r.preventDefault(),arguments[0]=r=n.$handleEvent(r),n.onCommentClick.apply(void 0,arguments)}}},[t("v-uni-image",{staticClass:"comment-icon",attrs:{src:"/static/images/comment.png",mode:"aspectFit"}}),t("v-uni-text",{staticClass:"action-text"},[n._v(n._s(r.commentCount||0))])],1),t("v-uni-view",{staticClass:"like-icon-container",attrs:{"data-postid":r._id,"data-index":e,"data-list-type":"home"},on:{click:function(r){r.stopPropagation(),r.preventDefault(),arguments[0]=r=n.$handleEvent(r),n.onVote.apply(void 0,arguments)}}},[t("v-uni-image",{staticClass:"like-icon",attrs:{src:r.likeIcon||"/static/images/seed.png",mode:"aspectFit"},on:{error:function(r){arguments[0]=r=n.$handleEvent(r),n.onLikeIconError.apply(void 0,arguments)}}})],1),t("v-uni-view",{class:"vote-count "+(r.isVoted?"voted":"")},[t("v-uni-text",{staticClass:"action-text"},[n._v(n._s(r.votes||0))])],1)],1)],1)],1)})),1):"discover"===n.currentPage?t("v-uni-view",[0!==n.discoverPostList.length||n.isLoading?n._e():t("v-uni-view",{staticClass:"empty-state"},[t("v-uni-view",{staticClass:"empty-icon"},[n._v("ğŸ”")]),t("v-uni-view",{staticClass:"empty-text"},[n._v("å‘ç°é¡µæš‚æ— å†…å®¹")]),t("v-uni-view",{staticClass:"empty-subtext"},[n._v("æ¨èç®—æ³•æ­£åœ¨å­¦ä¹ ä¸­...")])],1),n._l(n.discoverPostList,(function(r,e){return t("v-uni-view",{key:e,class:"post-item-wrapper "+(r.isOriginal?"original-post":"")},[t("v-uni-view",{staticClass:"author-info-outside"},[r.authorAvatar?t("v-uni-image",{staticClass:"author-avatar",attrs:{src:r.authorAvatar,mode:"aspectFill","data-postindex":e,"data-user-id":r._openid},on:{error:function(r){arguments[0]=r=n.$handleEvent(r),n.onAvatarError.apply(void 0,arguments)},load:function(r){arguments[0]=r=n.$handleEvent(r),n.onAvatarLoad.apply(void 0,arguments)},click:function(r){r.stopPropagation(),r.preventDefault(),arguments[0]=r=n.$handleEvent(r),n.navigateToUserProfile.apply(void 0,arguments)}}}):n._e(),t("v-uni-text",{staticClass:"author-name"},[n._v(n._s(r.authorName))])],1),t("v-uni-navigator",{staticClass:"post-content-navigator",attrs:{url:"/pages/post-detail/post-detail?id="+r._id,"hover-class":"navigator-hover"}},[t("v-uni-view",{staticClass:"post-item"},[t("v-uni-view",{staticClass:"post-title"},[n._v(n._s(r.title))]),r.isPoem&&r.author?t("v-uni-view",{staticClass:"poem-author"},[n._v(n._s(r.author))]):n._e(),r.imageUrls&&r.imageUrls.length>0?t("v-uni-view",{staticClass:"image-container-wrapper",style:r.imageStyle,attrs:{"data-src":r.imageUrls[0],"data-original-image-urls":r.originalImageUrls||r.imageUrls},on:{click:function(r){r.stopPropagation(),r.preventDefault(),arguments[0]=r=n.$handleEvent(r),n.handlePreview.apply(void 0,arguments)}}},[1===r.imageUrls.length?[t("v-uni-image",{staticClass:"post-image",attrs:{src:r.imageUrls[0],mode:"aspectFill","lazy-load":!0,"data-src":r.imageUrls[0],"data-original-image-urls":r.originalImageUrls||r.imageUrls},on:{error:function(r){arguments[0]=r=n.$handleEvent(r),n.onImageError.apply(void 0,arguments)},click:function(r){r.stopPropagation(),r.preventDefault(),arguments[0]=r=n.$handleEvent(r),n.handlePreview.apply(void 0,arguments)}}})]:r.imageUrls.length>1?[t("v-uni-swiper",{staticClass:"image-swiper",attrs:{"indicator-dots":!0,circular:!0}},[n._l(r.imageUrls,(function(e,a){return[t("v-uni-swiper-item",[t("v-uni-image",{staticClass:"post-image",attrs:{src:e,mode:"aspectFill","lazy-load":!0,"data-src":e,"data-original-image-urls":r.originalImageUrls||r.imageUrls},on:{error:function(r){arguments[0]=r=n.$handleEvent(r),n.onImageError.apply(void 0,arguments)},click:function(r){r.stopPropagation(),r.preventDefault(),arguments[0]=r=n.$handleEvent(r),n.handlePreview.apply(void 0,arguments)}}})],1)]}))],2)]:n._e()],2):n._e(),r.content?t("v-uni-view",{staticClass:"post-content",staticStyle:{"white-space":"pre-wrap"}},[n._v(n._s(r.content))]):n._e(),r.tags&&r.tags.length>0?t("v-uni-view",{staticClass:"post-tags"},n._l(r.tags,(function(r,e){return t("v-uni-text",{key:e,staticClass:"post-tag",attrs:{"data-tag":r},on:{click:function(r){r.stopPropagation(),r.preventDefault(),arguments[0]=r=n.$handleEvent(r),n.onTagClick.apply(void 0,arguments)}}},[n._v("#"+n._s(r))])})),1):n._e()],1)],1),t("v-uni-view",{staticClass:"vote-section"},[t("v-uni-view",{staticClass:"actions-left"}),t("v-uni-view",{staticClass:"button-group"},[t("v-uni-view",{staticClass:"comment-count",attrs:{"data-postid":r._id},on:{click:function(r){r.stopPropagation(),r.preventDefault(),arguments[0]=r=n.$handleEvent(r),n.onCommentClick.apply(void 0,arguments)}}},[t("v-uni-image",{staticClass:"comment-icon",attrs:{src:"/static/images/comment.png",mode:"aspectFit"}}),t("v-uni-text",{staticClass:"action-text"},[n._v(n._s(r.commentCount||0))])],1),t("v-uni-view",{staticClass:"like-icon-container",attrs:{"data-postid":r._id,"data-index":e,"data-list-type":"discover"},on:{click:function(r){r.stopPropagation(),r.preventDefault(),arguments[0]=r=n.$handleEvent(r),n.onVote.apply(void 0,arguments)}}},[t("v-uni-image",{staticClass:"like-icon",attrs:{src:r.likeIcon||"/static/images/seed.png",mode:"aspectFit"},on:{error:function(r){arguments[0]=r=n.$handleEvent(r),n.onLikeIconError.apply(void 0,arguments)}}})],1),t("v-uni-view",{class:"vote-count "+(r.isVoted?"voted":"")},[t("v-uni-text",{staticClass:"action-text"},[n._v(n._s(r.votes||0))])],1)],1)],1)],1)}))],2):"discussion"===n.currentPage?t("v-uni-view",[0!==n.discussionPostList.length||n.discussionIsLoading?n._e():t("v-uni-view",{staticClass:"empty-state"},[t("v-uni-view",{staticClass:"empty-icon"},[n._v("ğŸ’¬")]),t("v-uni-view",{staticClass:"empty-text"},[n._v("è®¨è®ºåŒºæš‚æ— å†…å®¹")]),t("v-uni-view",{staticClass:"empty-subtext"},[n._v("å¿«æ¥å‘èµ·ç¬¬ä¸€ä¸ªè¯é¢˜å§ï¼")])],1),n._l(n.discussionPostList,(function(r,e){return t("v-uni-view",{key:e,class:"post-item-wrapper "+(r.isOriginal?"original-post":"")},[t("v-uni-view",{staticClass:"author-info-outside"},[r.authorAvatar?t("v-uni-image",{staticClass:"author-avatar",attrs:{src:r.authorAvatar,mode:"aspectFill","data-postindex":e,"data-user-id":r._openid},on:{error:function(r){arguments[0]=r=n.$handleEvent(r),n.onAvatarError.apply(void 0,arguments)},load:function(r){arguments[0]=r=n.$handleEvent(r),n.onAvatarLoad.apply(void 0,arguments)},click:function(r){r.stopPropagation(),r.preventDefault(),arguments[0]=r=n.$handleEvent(r),n.navigateToUserProfile.apply(void 0,arguments)}}}):n._e(),t("v-uni-text",{staticClass:"author-name"},[n._v(n._s(r.authorName))])],1),t("v-uni-navigator",{staticClass:"post-content-navigator",attrs:{url:"/pages/post-detail/post-detail?id="+r._id,"hover-class":"navigator-hover"}},[t("v-uni-view",{staticClass:"post-item"},[t("v-uni-view",{staticClass:"post-title"},[n._v(n._s(r.title))]),r.isPoem&&r.author?t("v-uni-view",{staticClass:"poem-author"},[n._v(n._s(r.author))]):n._e(),r.imageUrls&&r.imageUrls.length>0?t("v-uni-view",{staticClass:"image-container-wrapper",style:r.imageStyle,attrs:{"data-src":r.imageUrls[0],"data-original-image-urls":r.originalImageUrls||r.imageUrls},on:{click:function(r){r.stopPropagation(),r.preventDefault(),arguments[0]=r=n.$handleEvent(r),n.handlePreview.apply(void 0,arguments)}}},[1===r.imageUrls.length?[t("v-uni-image",{staticClass:"post-image",attrs:{src:r.imageUrls[0],mode:"aspectFill","lazy-load":!0,"data-src":r.imageUrls[0],"data-original-image-urls":r.originalImageUrls||r.imageUrls},on:{error:function(r){arguments[0]=r=n.$handleEvent(r),n.onImageError.apply(void 0,arguments)},click:function(r){r.stopPropagation(),r.preventDefault(),arguments[0]=r=n.$handleEvent(r),n.handlePreview.apply(void 0,arguments)}}})]:r.imageUrls.length>1?[t("v-uni-swiper",{staticClass:"image-swiper",attrs:{"indicator-dots":!0,circular:!0}},[n._l(r.imageUrls,(function(e,a){return[t("v-uni-swiper-item",[t("v-uni-image",{staticClass:"post-image",attrs:{src:e,mode:"aspectFill","lazy-load":!0,"data-src":e,"data-original-image-urls":r.originalImageUrls||r.imageUrls},on:{error:function(r){arguments[0]=r=n.$handleEvent(r),n.onImageError.apply(void 0,arguments)},click:function(r){r.stopPropagation(),r.preventDefault(),arguments[0]=r=n.$handleEvent(r),n.handlePreview.apply(void 0,arguments)}}})],1)]}))],2)]:n._e()],2):n._e(),r.content?t("v-uni-view",{staticClass:"post-content",staticStyle:{"white-space":"pre-wrap"}},[n._v(n._s(r.content))]):n._e(),r.tags&&r.tags.length>0?t("v-uni-view",{staticClass:"post-tags"},n._l(r.tags,(function(r,e){return t("v-uni-text",{key:e,staticClass:"post-tag",attrs:{"data-tag":r},on:{click:function(r){r.stopPropagation(),r.preventDefault(),arguments[0]=r=n.$handleEvent(r),n.onTagClick.apply(void 0,arguments)}}},[n._v("#"+n._s(r))])})),1):n._e()],1)],1),t("v-uni-view",{staticClass:"vote-section"},[t("v-uni-view",{staticClass:"actions-left"}),t("v-uni-view",{staticClass:"button-group"},[t("v-uni-view",{staticClass:"comment-count",attrs:{"data-postid":r._id},on:{click:function(r){r.stopPropagation(),r.preventDefault(),arguments[0]=r=n.$handleEvent(r),n.onCommentClick.apply(void 0,arguments)}}},[t("v-uni-image",{staticClass:"comment-icon",attrs:{src:"/static/images/comment.png",mode:"aspectFit"}}),t("v-uni-text",{staticClass:"action-text"},[n._v(n._s(r.commentCount||0))])],1),t("v-uni-view",{staticClass:"like-icon-container",attrs:{"data-postid":r._id,"data-index":e,"data-list-type":"discussion"},on:{click:function(r){r.stopPropagation(),r.preventDefault(),arguments[0]=r=n.$handleEvent(r),n.onVote.apply(void 0,arguments)}}},[t("v-uni-image",{staticClass:"like-icon",attrs:{src:r.likeIcon||"/static/images/seed.png",mode:"aspectFit"},on:{error:function(r){arguments[0]=r=n.$handleEvent(r),n.onLikeIconError.apply(void 0,arguments)}}})],1),t("v-uni-view",{class:"vote-count "+(r.isVoted?"voted":"")},[t("v-uni-text",{staticClass:"action-text"},[n._v(n._s(r.votes||0))])],1)],1)],1)],1)}))],2):n._e()],1),t("v-uni-view",{staticClass:"loading-footer"},["home"===n.currentPage&&!n.hasMore&&n.postList.length>0?[t("v-uni-text",[n._v("--- æˆ‘æ˜¯æœ‰åº•çº¿çš„ ---")])]:"discover"===n.currentPage&&!n.discoverHasMore&&n.discoverPostList.length>0?[t("v-uni-view",{staticClass:"discover-end-tip"},[t("v-uni-text",{staticClass:"end-text"},[n._v("--- æ²¡æœ‰æ›´å¤šäº† ---")]),t("v-uni-view",{staticClass:"refresh-tip"},[t("v-uni-text",{staticClass:"refresh-text"},[n._v("ä¸‹æ‹‰åˆ·æ–°è·å–æ–°çš„æ¨è")])],1)],1)]:"discussion"===n.currentPage&&!n.discussionHasMore&&n.discussionPostList.length>0?[t("v-uni-text",[n._v("--- æ²¡æœ‰æ›´å¤šè®¨è®ºäº† ---")])]:n._e()],2)],1)],1),t("app-tab-bar",{ref:"customTabBar"})],1)},i=[]},"4d13":function(n,r,t){"use strict";t.r(r);var e=t("5b4c"),a=t.n(e);for(var i in e)["default"].indexOf(i)<0&&function(n){t.d(r,n,(function(){return e[n]}))}(i);r["default"]=a.a},"5b4c":function(n,r,t){"use strict";t("6a54"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var e=t("f117"),a={name:"PageTabs",props:{currentTab:{type:String,default:"square"}},data:function(){return{unreadMessageCount:0,safeAreaTop:0,tabs:[{label:"å¹¿åœº",value:"square"},{label:"å‘ç°",value:"discover"},{label:"è®¨è®º",value:"discussion"}]}},mounted:function(){this.checkUnreadMessageCount(),this.getSafeAreaTop()},methods:{getSafeAreaTop:function(){try{var n=uni.getSystemInfoSync();console.log("ã€page-tabsã€‘è·å–ç³»ç»Ÿä¿¡æ¯:",{statusBarHeight:n.statusBarHeight,platform:n.platform});var r=n.statusBarHeight||0;console.log("ã€page-tabsã€‘è®¾ç½®å®‰å…¨åŒºåŸŸé«˜åº¦:",r),this.safeAreaTop=r}catch(t){console.error("ã€page-tabsã€‘è·å–å®‰å…¨åŒºåŸŸå¤±è´¥:",t),this.safeAreaTop=44}},switchTab:function(n){n!==this.currentTab&&this.$emit("tab-change",n)},navigateToAdd:function(){console.log("ç‚¹å‡»å†™è¯—æŒ‰é’®ï¼Œè·³è½¬åˆ°addé¡µé¢"),uni.navigateTo({url:"/pages/add/add",success:function(){console.log("è·³è½¬åˆ°addé¡µé¢æˆåŠŸ")},fail:function(n){console.error("è·³è½¬åˆ°addé¡µé¢å¤±è´¥:",n),uni.showToast({title:"è·³è½¬å¤±è´¥",icon:"none"})}})},navigateToSearch:function(){console.log("ç‚¹å‡»æœç´¢æ¡†ï¼Œè·³è½¬åˆ°æœç´¢é¡µé¢"),uni.navigateTo({url:"/pages/search/search",success:function(){console.log("è·³è½¬åˆ°æœç´¢é¡µé¢æˆåŠŸ")},fail:function(n){console.error("è·³è½¬åˆ°æœç´¢é¡µé¢å¤±è´¥:",n),uni.showToast({title:"è·³è½¬å¤±è´¥",icon:"none"})}})},navigateToMessages:function(){uni.navigateTo({url:"/pages/messages/messages",success:function(){console.log("è·³è½¬åˆ°æ¶ˆæ¯é¡µé¢æˆåŠŸ")},fail:function(n){console.error("è·³è½¬åˆ°æ¶ˆæ¯é¡µé¢å¤±è´¥:",n),uni.showToast({title:"è·³è½¬å¤±è´¥",icon:"none"})}})},checkUnreadMessageCount:function(){var n=this;(0,e.getUnreadCount)(this).then((function(r){n.unreadMessageCount=r||0})).catch((function(){}))}}};r.default=a},7359:function(n,r,t){"use strict";t.d(r,"b",(function(){return e})),t.d(r,"c",(function(){return a})),t.d(r,"a",(function(){}));var e=function(){var n=this,r=n.$createElement,t=n._self._c||r;return t("v-uni-view",{staticClass:"page-tabs-container",style:{top:n.safeAreaTop+"px"}},[t("v-uni-view",{staticClass:"custom-top-bar"},[t("v-uni-view",{staticClass:"top-left",on:{click:function(r){arguments[0]=r=n.$handleEvent(r),n.navigateToAdd.apply(void 0,arguments)}}},[t("v-uni-image",{staticClass:"top-icon",attrs:{src:"/static/images/create_post.png",mode:"aspectFit"}})],1),t("v-uni-view",{staticClass:"top-right"},[t("v-uni-view",{staticClass:"top-item",on:{click:function(r){arguments[0]=r=n.$handleEvent(r),n.navigateToSearch.apply(void 0,arguments)}}},[t("v-uni-image",{staticClass:"top-icon",attrs:{src:"/static/images/search.png",mode:"aspectFit"}})],1),t("v-uni-view",{staticClass:"top-item",on:{click:function(r){arguments[0]=r=n.$handleEvent(r),n.navigateToMessages.apply(void 0,arguments)}}},[t("v-uni-image",{staticClass:"top-icon",attrs:{src:"/static/images/messages.png",mode:"aspectFit"}})],1)],1)],1),t("v-uni-view",{staticClass:"tabs-container"},[t("v-uni-view",{staticClass:"tabs-list"},n._l(n.tabs,(function(r,e){return t("v-uni-view",{key:e,class:["tab-item",{active:n.currentTab===r.value}],on:{click:function(t){arguments[0]=t=n.$handleEvent(t),n.switchTab(r.value)}}},[t("v-uni-text",{staticClass:"tab-text"},[n._v(n._s(r.label))]),n.currentTab===r.value?t("v-uni-view",{staticClass:"tab-indicator"}):n._e()],1)})),1)],1)],1)},a=[]},7386:function(n,r,t){"use strict";t("6a54");var e=t("f5bd").default;Object.defineProperty(r,"__esModule",{value:!0}),r.hydrateTempUrls=function(){return c.apply(this,arguments)},r.warmTempUrlsFromPosts=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=new Set;n.forEach((function(n){return s(n).forEach((function(n){return r.add(n)}))})),r.size>0&&o.default.warm(Array.from(r))};var a=e(t("2634")),i=e(t("2fdc"));t("9db6"),t("aa9c"),t("bf0f"),t("2797"),t("f3f7"),t("18f7"),t("de6c"),t("08eb"),t("fd3c");var o=e(t("c605"));function s(n){var r=[],t=function(n){"string"===typeof n&&n.startsWith("cloud://")&&r.push(n)};return t(n.imageUrl),t(n.originalImageUrl),t(n.authorAvatar),t(n.poemBgImage),Array.isArray(n.imageUrls)&&n.imageUrls.forEach(t),Array.isArray(n.originalImageUrls)&&n.originalImageUrls.forEach(t),r}function c(){return c=(0,i.default)((0,a.default)().mark((function n(){var r,t,e,i,c=arguments;return(0,a.default)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=c.length>0&&void 0!==c[0]?c[0]:[],Array.isArray(r)&&0!==r.length){n.next=3;break}return n.abrupt("return",r);case 3:if(t=new Set,r.forEach((function(n){return s(n).forEach((function(n){return t.add(n)}))})),0!==t.size){n.next=7;break}return n.abrupt("return",r);case 7:return n.next=9,o.default.getTempUrls(Array.from(t));case 9:return e=n.sent,i=function(n){return"string"===typeof n&&e[n]?e[n]:n},r.forEach((function(n){n.imageUrl&&(n.imageUrl=i(n.imageUrl)),n.originalImageUrl&&(n.originalImageUrl=i(n.originalImageUrl)),n.authorAvatar&&(n.authorAvatar=i(n.authorAvatar)),n.poemBgImage&&(n.poemBgImage=i(n.poemBgImage)),Array.isArray(n.imageUrls)&&(n.imageUrls=n.imageUrls.map(i)),Array.isArray(n.originalImageUrls)&&(n.originalImageUrls=n.originalImageUrls.map(i))})),n.abrupt("return",r);case 13:case"end":return n.stop()}}),n)}))),c.apply(this,arguments)}},"8af6":function(n,r,t){var e=t("0b3c");e.__esModule&&(e=e.default),"string"===typeof e&&(e=[[n.i,e,""]]),e.locals&&(n.exports=e.locals);var a=t("967d").default;a("101e0c46",e,!0,{sourceMap:!1,shadowMode:!1})},9066:function(n,r,t){"use strict";t.r(r);var e=t("4ba6"),a=t("da71");for(var i in a)["default"].indexOf(i)<0&&function(n){t.d(r,n,(function(){return a[n]}))}(i);t("27eb");var o=t("828b"),s=Object(o["a"])(a["default"],e["b"],e["c"],!1,null,"31a58d93",null,!1,e["a"],void 0);r["default"]=s.exports},d87a:function(n,r,t){"use strict";t("6a54"),Object.defineProperty(r,"__esModule",{value:!0}),r.getCurrentTabBarStatus=function(n){try{if("function"===typeof n.getTabBar&&n.getTabBar()){var r,t=n.getTabBar();return(null===(r=t.data)||void 0===r?void 0:r.selected)||null}}catch(i){console.log("æ— æ³•ä»åŸç”ŸgetTabBarè·å–çŠ¶æ€")}try{var e,a=null===(e=n.$refs)||void 0===e?void 0:e.customTabBar;if(a&&a.data)return a.data.selected||null}catch(i){console.log("æ— æ³•ä»è‡ªå®šä¹‰ç»„ä»¶è·å–çŠ¶æ€")}try{return uni.getStorageSync("currentTabIndex")||null}catch(i){console.log("æ— æ³•ä»å­˜å‚¨è·å–çŠ¶æ€")}return null},r.isTabBarSupported=function(){try{return!("undefined"===typeof wx||!wx.getTabBar)||!("undefined"===typeof uni||!uni.getTabBar)}catch(n){return!1}},r.updateTabBarStatus=function(n,r){try{if("function"===typeof n.getTabBar&&n.getTabBar())return n.getTabBar().setData({selected:r}),console.log("TabBarçŠ¶æ€æ›´æ–°æˆåŠŸ (åŸç”ŸAPI): selected=".concat(r)),!0}catch(t){console.log("åŸç”ŸgetTabBar APIä¸å¯ç”¨:",t.message)}try{return uni.setStorageSync("currentTabIndex",r),console.log("TabBarçŠ¶æ€å·²ä¿å­˜åˆ°å­˜å‚¨: selected=".concat(r)),!0}catch(t){console.log("å­˜å‚¨æœºåˆ¶ä¸å¯ç”¨:",t.message)}return console.warn("åŸç”ŸgetTabBar APIä¸å¯ç”¨ï¼Œå½“å‰å¹³å°å¯èƒ½ä¸æ”¯æŒgetTabBar()"),!1}},da71:function(n,r,t){"use strict";t.r(r);var e=t("2cf2"),a=t.n(e);for(var i in e)["default"].indexOf(i)<0&&function(n){t.d(r,n,(function(){return e[n]}))}(i);r["default"]=a.a},dc7c:function(n,r,t){var e=t("c86c");r=e(!1),r.push([n.i,'.page-tabs-container[data-v-152cec0b]{position:fixed;left:0;right:0;background:#fff;z-index:1000;box-shadow:0 %?2?% %?10?% rgba(0,0,0,.05)\r\n  /* top å€¼é€šè¿‡ JavaScript åŠ¨æ€è®¾ç½® */\r\n  /* æ·»åŠ ä¼ªå…ƒç´ ä½œä¸ºçŠ¶æ€æ åŒºåŸŸçš„ç™½è‰²èƒŒæ™¯ */}.page-tabs-container[data-v-152cec0b]::before{content:"";position:absolute;top:-100vh; /* å‘ä¸Šå»¶ä¼¸è¦†ç›–çŠ¶æ€æ åŒºåŸŸ */left:0;right:0;height:100vh;background:#fff;z-index:-1}\r\n\r\n/* è‡ªå®šä¹‰é¡¶éƒ¨æ æ ·å¼ */.custom-top-bar[data-v-152cec0b]{height:%?100?%;display:flex;justify-content:space-between;align-items:center;padding:%?20?% %?40?% 0 %?40?%;background:#fff}.top-left[data-v-152cec0b]{display:flex;align-items:center;cursor:pointer;transition:all .2s ease;padding:%?10?%}.top-left[data-v-152cec0b]:active{-webkit-transform:scale(.95);transform:scale(.95)}.top-right[data-v-152cec0b]{display:flex;align-items:center;gap:%?40?%}.top-item[data-v-152cec0b]{display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s ease;padding:%?10?%}.top-item[data-v-152cec0b]:active{-webkit-transform:scale(.95);transform:scale(.95)}.top-icon[data-v-152cec0b]{width:%?80?%;height:%?80?%;-webkit-filter:drop-shadow(0 %?2?% %?4?% rgba(0,0,0,.1));filter:drop-shadow(0 %?2?% %?4?% rgba(0,0,0,.1))}\r\n\r\n/* æ ‡ç­¾æ æ ·å¼ */.tabs-container[data-v-152cec0b]{height:%?88?%}.tabs-list[data-v-152cec0b]{display:flex;height:100%;align-items:center}.tab-item[data-v-152cec0b]{flex:1;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;position:relative;transition:all .2s ease}.tab-item[data-v-152cec0b]:active{background-color:rgba(0,0,0,.02)}.tab-text[data-v-152cec0b]{font-size:%?30?%;color:#666;font-weight:500;transition:color .2s ease}.tab-item.active .tab-text[data-v-152cec0b]{color:#24375f;font-weight:600}.tab-indicator[data-v-152cec0b]{position:absolute;bottom:0;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);width:%?60?%;height:%?6?%;background:#24375f;border-radius:%?3?%;transition:all .3s ease}',""]),n.exports=r},df61:function(n,r,t){var e=t("dd7e").default,a=t("46c5").default;t("64aa"),t("dc8a"),t("8f71"),t("bf0f"),t("9db6"),t("2797"),t("de6c"),t("7a76"),t("c9b5");var i=t("11ca"),o=i.cloudCall,s=t("fe58"),c=t("3ab8").default;function l(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=Number(n);return Number.isFinite(t)?t:r}function u(n,r,t){if("function"===typeof n)try{return n(r,t)}catch(e){console.warn("[likeService] likeIcon resolver æ‰§è¡Œå¤±è´¥",e)}return s.getLikeIcon(r,t)}function d(n){var r=n.votes,t=n.isLiked,e=n.icon;return{votes:r,isLiked:t,likeIcon:e}}function g(n,r,t,e){try{if(!n)return;var a=c.getStats?c.getStats():{},i=Object.keys(a),o=i.filter((function(n){return"posts:home"===n||"posts:discover"===n||n.startsWith("posts:tag:")||n.startsWith("me:posts")||n.startsWith("userPosts:")}));o.forEach((function(a){try{var i=c.namespace(a),o=i.keys&&i.keys()||[];o.forEach((function(a){try{i.update(a,(function(a){if(!Array.isArray(a))return a;for(var i=0;i<a.length;i+=1){var o=a[i];!o||o._id!==n&&o.id!==n||(o.votes=r,o.isVoted=t,o.likeIcon=e,!0)}return a}))}catch(o){}}))}catch(s){}}))}catch(s){console.warn("[likeService] updatePostInCaches failed",s)}}function v(n){if("undefined"!==typeof uni&&"function"===typeof uni.showToast)try{uni.showToast({title:n||"æ“ä½œå¤±è´¥ï¼Œè¯·ç¨åé‡è¯•",icon:"none"})}catch(r){console.warn("[likeService] showToast è°ƒç”¨å¤±è´¥",r)}}function p(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.pageTag,t=void 0===r?"like-service":r,e=n.context,a=void 0===e?null:e,i=n.currentVotes,o=void 0===i?0:i,c=n.currentIsLiked,u=void 0!==c&&c,d=n.likeIconResolver,g=void 0===d?s.getLikeIcon:d,v=n.requireAuth,p=void 0===v||v,f=n.retry,h=void 0===f?0:f,m=n.updateCache,b=void 0===m||m,w=n.showErrorToast,y=void 0===w||w,k=n.cloudOptions,x=void 0===k?{}:k;return{pageTag:t,context:a,currentVotes:l(o,0),currentIsLiked:Boolean(u),likeIconResolver:g,requireAuth:p,retry:h,updateCache:b,showErrorToast:y,cloudOptions:x}}function f(){return f=a(e().mark((function n(r){var t,a,i,s,c,f,h,m,b,w,y,k,x,P,I,C,T,_,L,D,U,S,A,M=arguments;return e().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t=M.length>1&&void 0!==M[1]?M[1]:{},r){n.next=3;break}return n.abrupt("return",Promise.reject(new Error("[likeService] postId ä¸èƒ½ä¸ºç©º")));case 3:return a=p(t),i=a.pageTag,s=a.context,c=a.currentVotes,f=a.currentIsLiked,h=a.likeIconResolver,m=a.requireAuth,b=a.retry,w=a.updateCache,y=a.showErrorToast,k=a.cloudOptions,x=l(c,0),P=Boolean(f),I=u(h,x,P),C=d({votes:x,isLiked:P,icon:I}),n.prev=8,n.next=11,o("vote",{postId:r},Object.assign({pageTag:"likeService:".concat(i),context:s,requireAuth:m,retry:b},k));case 11:T=n.sent,n.next=19;break;case 14:return n.prev=14,n.t0=n["catch"](8),console.error("[likeService] è°ƒç”¨äº‘å‡½æ•°å¤±è´¥",n.t0),y&&v(n.t0&&n.t0.message),n.abrupt("return",{success:!1,error:n.t0,rollback:C});case 19:if(_=T&&T.result?T.result:T,L=_&&!0===_.success,L){n.next=26;break}return D=_&&_.message?_.message:"æ“ä½œå¤±è´¥ï¼Œè¯·ç¨åé‡è¯•",console.warn("[likeService] äº‘å‡½æ•°è¿”å›å¤±è´¥ç»“æœ",_),y&&v(D),n.abrupt("return",{success:!1,error:_,rollback:C});case 26:return U=l(_.votes,x),S=Boolean(_.isLiked),A=u(h,U,S),w&&g(r,U,S,A),n.abrupt("return",{success:!0,votes:U,isLiked:S,likeIcon:A,response:_});case 31:case"end":return n.stop()}}),n,null,[[8,14]])}))),f.apply(this,arguments)}n.exports={togglePostLike:function(n){return f.apply(this,arguments)}}},f806:function(n,r,t){var e=t("dd7e").default,a=t("4cf1").default,i=t("46c5").default,o=t("883d").default,s=t("4db6").default;t("c1a3"),t("bf0f"),t("18f7"),t("de6c"),t("f7a5");var c=t("1d0b"),l=function(){"use strict";function n(){o(this,n),this.cache=new Map,this.preloadQueue=[],this.maxPreloadCount=3,this.isH5="undefined"!==typeof window}return s(n,[{key:"preloadImages",value:function(){var n=i(e().mark((function n(r,t){var i,o,s,l,u;return e().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(Array.isArray(r)&&0!==r.length){n.next=2;break}return n.abrupt("return");case 2:i=r.slice(0,this.maxPreloadCount),o=a(i),n.prev=4,o.s();case 6:if((s=o.n()).done){n.next=24;break}if(l=s.value,!this.cache.has(l)){n.next=11;break}return t&&t(l,!0),n.abrupt("continue",22);case 11:return n.prev=11,n.next=14,c.loadImage(l,{useCache:!0,fallbackToOriginal:!0});case 14:u=n.sent,u.success?(this.cache.set(l,u.url),t&&t(l,!0)):(console.error("å›¾ç‰‡é¢„åŠ è½½å¤±è´¥:",l,u.error),t&&t(l,!1)),n.next=22;break;case 18:n.prev=18,n.t0=n["catch"](11),console.error("å›¾ç‰‡é¢„åŠ è½½å¼‚å¸¸:",l,n.t0),t&&t(l,!1);case 22:n.next=6;break;case 24:n.next=29;break;case 26:n.prev=26,n.t1=n["catch"](4),o.e(n.t1);case 29:return n.prev=29,o.f(),n.finish(29);case 32:case"end":return n.stop()}}),n,this,[[4,26,29,32],[11,18]])})));return function(r,t){return n.apply(this,arguments)}}()},{key:"getCachedImage",value:function(n){return this.cache.get(n)||n}},{key:"clearCache",value:function(){this.cache.clear()}},{key:"getCacheSize",value:function(){return this.cache.size}}]),n}(),u=new l;n.exports=u},fcd5:function(n,r,t){var e=t("5014").default,a=t("d189").default,i=t("4cf1").default;t("8f71"),t("bf0f"),t("aa9c"),t("fd3c");var o=t("139b"),s=o.formatRelativeTime,c=["createTime","postCreateTime","publishTime","createdAt","updateTime"],l=function(n){return n?Array.isArray(n)?n.filter(Boolean):[n].filter(Boolean):[]},u=function(n){var r,t=i(c);try{for(t.s();!(r=t.n()).done;){var e=r.value;if(n[e])return{key:e,value:n[e]}}}catch(a){t.e(a)}finally{t.f()}return null},d=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=r.withTime,i=void 0===t||t,o=l(n.imageUrls);0===o.length&&o.push.apply(o,a(l(n.imageUrl)));var c=l(n.originalImageUrls);0===c.length&&c.push.apply(c,a(l(n.originalImageUrl))),0===c.length&&o.length>0&&c.push.apply(c,a(o));var d=e(e({},n),{},{imageUrls:o,originalImageUrls:c,authorName:n.authorName||"åŒ¿åç”¨æˆ·",authorAvatar:"string"===typeof n.authorAvatar?n.authorAvatar:""});if(!d.imageStyle&&o.length>0&&(d.imageStyle="height: 0; padding-bottom: 75%;"),i)if(n.formattedCreateTime)d.formattedCreateTime=n.formattedCreateTime;else{var g=u(n);g&&(d.formattedCreateTime=s(g.value))}return d};n.exports={normalizePost:d,normalizePostList:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Array.isArray(n)?n.map((function(n){return d(n,r)})):[]}}}}]);