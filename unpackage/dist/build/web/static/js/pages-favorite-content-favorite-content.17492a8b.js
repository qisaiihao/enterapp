(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-favorite-content-favorite-content"],{"0efe":function(t,n,e){var a=e("dd7e").default,i=e("46c5").default,r=e("bdbb").default,o=e("5014").default;e("dc8a"),e("bf0f"),e("2797"),e("7a76"),e("c9b5");var s={page:0,hasMore:!0,isLoading:!1,isLoadingMore:!1},l=Object.keys(s);function c(t){return t.__paginationState||(t.__paginationState=o({},s)),"object"!==r(t.pagination)||null===t.pagination?t.pagination=o({},s):t.pagination=o(o({},s),t.pagination),l.forEach((function(n){"undefined"===typeof t[n]&&(t[n]=s[n])})),t.__paginationState}function d(t,n){var e=c(t);Object.assign(e,n),function(t,n){if(n&&"object"===r(n)){var e={};if(l.forEach((function(a){Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a],t.pagination&&"object"===r(t.pagination)&&(t.pagination[a]=n[a]),t[a]=n[a])})),"function"===typeof t.setData){var a={};return Object.keys(e).forEach((function(t){a[t]=e[t],a["pagination.".concat(t)]=e[t]})),void t.setData(a)}Object.assign(t,e)}}(t,n)}function u(t,n,e){var a=e.pageSize,i=e.isRefresh,r=e.fallback;if(n&&"boolean"===typeof n.hasMore)return n.hasMore;var o=t.__paginationConfig||{};if("function"===typeof o.computeHasMore)try{var s=o.computeHasMore.call(t,n,{page:t.__paginationState.page,pageSize:a,isRefresh:i});if("boolean"===typeof s)return s}catch(l){console.warn("[pagination] computeHasMore 执行失败",l)}return n&&Array.isArray(n.list)?"number"===typeof a?n.list.length>=a:n.list.length>0:n&&Array.isArray(n.items)?"number"===typeof a?n.items.length>=a:n.items.length>0:"boolean"!==typeof r||r}function f(t){return p.apply(this,arguments)}function p(){return p=i(a().mark((function t(n){var e,i,r,o,s,l,f,p,g,v,m,h,b,y,w=arguments;return a().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=w.length>1&&void 0!==w[1]?w[1]:{},i=e.isRefresh,r=e.extra,o=void 0===r?{}:r,s=e.fromPullDown,l=void 0!==s&&s,f=n.__paginationConfig,f&&"function"===typeof f.loader){t.next=5;break}return console.warn("[pagination] 尚未通过 initPagination 注册加载函数"),t.abrupt("return",null);case 5:if(c(n),p=n.__paginationState,i||!1!==p.hasMore){t.next=9;break}return t.abrupt("return",null);case 9:if(!p.isLoading&&!p.isLoadingMore){t.next=11;break}return t.abrupt("return",null);case 11:return g=i?0:p.page,v=0===g,d(n,{isLoading:v,isLoadingMore:!v}),m={page:g,pageSize:f.pageSize,isRefresh:i,isFirstPage:v,extra:o},t.prev=15,"function"===typeof f.beforeLoad&&f.beforeLoad.call(n,m),t.next=19,f.loader.call(n,m);case 19:h=t.sent,b=g+1,y=u(n,h,{pageSize:f.pageSize,isRefresh:i,fallback:!!i||p.hasMore}),d(n,{page:b,hasMore:y}),"function"===typeof f.afterLoad&&f.afterLoad.call(n,h,m),t.next=30;break;case 26:throw t.prev=26,t.t0=t["catch"](15),"function"===typeof f.onError?f.onError.call(n,t.t0,m):console.error("[pagination] 加载数据失败",t.t0),t.t0;case 30:if(t.prev=30,d(n,{isLoading:!1,isLoadingMore:!1}),i&&!1!==f.autoStopPullDown&&l&&"undefined"!==typeof uni&&"function"===typeof uni.stopPullDownRefresh)try{uni.stopPullDownRefresh()}catch(a){console.warn("[pagination] stopPullDownRefresh 调用失败",a)}return t.finish(30);case 34:return t.abrupt("return",h);case 35:case"end":return t.stop()}}),t,null,[[15,26,30,34]])}))),p.apply(this,arguments)}t.exports={data:function(){return o({pagination:o({},s)},s)},created:function(){c(this)},onReachBottom:function(){this.__paginationConfig&&this.loadNext().catch((function(){}))},onPullDownRefresh:function(){this.__paginationConfig&&this.refresh({fromPullDown:!0}).catch((function(){}))},methods:{initPagination:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("function"!==typeof t)throw new TypeError("[pagination] initPagination 需要传入函数类型的 loader");var e=n.pageSize,a=void 0===e?10:e,i=n.immediate,r=void 0===i||i,l=n.autoStopPullDown,c=void 0===l||l,u=n.computeHasMore,f=n.beforeLoad,p=n.afterLoad,g=n.onError;return this.__paginationConfig={loader:t,pageSize:a,immediate:r,autoStopPullDown:c,computeHasMore:u,beforeLoad:f,afterLoad:p,onError:g},d(this,o({},s)),r?this.refresh({fromPullDown:!1}):Promise.resolve()},refresh:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c(this),d(this,{page:0,hasMore:!0}),f(this,o({isRefresh:!0},t))},loadNext:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f(this,o({isRefresh:!1},t))},getPaginationState:function(){return c(this),o({},this.__paginationState)}}}},"139b":function(t,n,e){e("795c"),e("64aa"),e("5c47"),e("a1c1"),e("c223"),e("f7a5");var a=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return String(t).padStart(n,"0")},i=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy-MM-dd HH:mm:ss",e=t instanceof Date?t:new Date(t);if(Number.isNaN(e.getTime()))return"";var i={yyyy:String(e.getFullYear()),MM:a(e.getMonth()+1),dd:a(e.getDate()),HH:a(e.getHours()),mm:a(e.getMinutes()),ss:a(e.getSeconds())};return n.replace(/yyyy|MM|dd|HH|mm|ss/g,(function(t){return i[t]}))};t.exports={formatTimeAgo:function(t){var n=new Date,e=new Date(t),a=n.getTime()-e.getTime(),i=Math.floor(a/1e3),r=Math.floor(i/60),o=Math.floor(r/60),s=Math.floor(o/24);if(s>=7){var l=e.getFullYear(),c=("0"+(e.getMonth()+1)).slice(-2),d=("0"+e.getDate()).slice(-2);return"".concat(l,"-").concat(c,"-").concat(d)}return s>=1?"".concat(s,"天前"):o>=1?"".concat(o,"小时前"):r>=1?"".concat(r,"分钟前"):"刚刚"},formatRelativeTime:function(t){var n=Date.now(),e=t instanceof Date?t.getTime():new Date(t).getTime();if(Number.isNaN(e))return"";var a=n-e,r=Math.floor(Math.abs(a)/1e3),o=a>=0?"前":"后";if(r<60)return"刚刚";var s=Math.floor(r/60);if(s<60)return"".concat(s,"分钟").concat(o);var l=Math.floor(s/60);if(l<24)return"".concat(l,"小时").concat(o);var c=Math.floor(l/24);return c<7?"".concat(c,"天").concat(o):i(e,"yyyy-MM-dd")},formatDate:i}},"18c6":function(t,n,e){"use strict";e("6a54");var a=e("f5bd").default;Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,e("7a76"),e("c9b5"),e("bf0f"),e("18f7"),e("de6c"),e("fd3c"),e("c223"),e("8f71");var i=a(e("2634")),r=a(e("9b1b")),o=a(e("2fdc")),s=e("139b"),l=s.formatRelativeTime,c=e("8e86"),d=c.previewImage,u=e("11ca"),f=u.cloudCall,p=e("2b90"),g=e("0efe"),v=e("fcd5"),m=v.normalizePostList,h={mixins:[g,p],data:function(){return{folderId:"",folderName:"",favorites:[],pageSize:10,swiperHeights:{},imageClampHeights:{},imgindex:0,img:""}},onLoad:function(t){var n=t.folderId,e=t.folderName||"";if(n){var a=e;try{a=decodeURIComponent(e||"")}catch(i){console.log("CatchClause",i),console.log("CatchClause",i),a=e}this.setData({folderId:n,folderName:a,favorites:[]}),uni.setNavigationBarTitle({title:a||"收藏夹"}),this.initPagination(this.loadFavorites,{pageSize:this.pageSize})}else uni.showToast({title:"参数错误：收藏夹ID为空",icon:"none"})},onShow:function(){},methods:{callCloudFunction:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return f(t,n,Object.assign({pageTag:"favorite-content",context:this,requireAuth:!0},e))},loadFavorites:function(t){var n=this;return(0,o.default)((0,i.default)().mark((function e(){var a,o,s,l,c,d,u,f,p,g,v;return(0,i.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.page,o=t.isRefresh,n.folderId){e.next=6;break}throw s=new Error("参数错误：收藏夹ID为空"),s.__toastShown=!0,uni.showToast({title:"参数错误：收藏夹ID为空",icon:"none"}),s;case 6:return o&&n.setData({favorites:[],swiperHeights:{},imageClampHeights:{}}),l=a*n.pageSize,1e4,c=null,d=new Promise((function(t,n){c=setTimeout((function(){var t=new Error("加载超时，请重试");t.code="LOAD_TIMEOUT",t.__toastShown=!0,uni.showToast({title:"加载超时，请重试",icon:"none"}),n(t)}),1e4)})),e.prev=11,e.next=14,Promise.race([n.callCloudFunction("getMyProfileData",{action:"getFavoritesByFolder",folderId:n.folderId,skip:l,limit:n.pageSize}),d]);case 14:if(u=e.sent,c&&clearTimeout(c),console.log("云函数调用成功，返回结果:",u),u.result&&!0===u.result.success){e.next=23;break}throw f=u.result&&u.result.message||"加载失败",uni.showToast({title:f,icon:"none"}),p=new Error(f),p.__toastShown=!0,p;case 23:return g=m(u.result.favorites||[]).map((function(t,e){var a=(0,r.default)({},t);return!a.formattedCreateTime&&a.createTime&&(a.formattedCreateTime=n.formatTime(a.createTime)),a.postCreateTime&&!a.formattedPostCreateTime&&(a.formattedPostCreateTime=n.formatTime(a.postCreateTime)),a.favoriteTime&&!a.formattedFavoriteTime&&(a.formattedFavoriteTime=n.formatTime(a.favoriteTime)),!a.postTitle&&a.title&&(a.postTitle=a.title),!a.postContent&&a.content&&(a.postContent=a.content),!a.postImageUrls&&a.imageUrls&&(a.postImageUrls=a.imageUrls),!a.postOriginalImageUrls&&a.originalImageUrls&&(a.postOriginalImageUrls=a.originalImageUrls),!a.postAuthorAvatar&&a.authorAvatar&&(a.postAuthorAvatar=a.authorAvatar),!a.postAuthorName&&a.authorName&&(a.postAuthorName=a.authorName),!a.imageStyle&&a.imageUrls&&a.imageUrls.length>0&&(a.imageStyle="height: 0; padding-bottom: 75%;"),console.log("【收藏夹】帖子".concat(e,"图片数据:"),{postId:a._id,postTitle:a.title||a.postTitle,imageUrls:a.imageUrls,originalImageUrls:a.originalImageUrls,hasImageUrls:!!(a.imageUrls&&a.imageUrls.length>0)}),a})),v=0===a||o?g:n.favorites.concat(g),n.setData({favorites:v}),e.abrupt("return",{list:g,hasMore:g.length===n.pageSize});case 29:throw e.prev=29,e.t0=e["catch"](11),c&&clearTimeout(c),console.error("加载收藏数据失败:",e.t0),e.t0&&e.t0.__toastShown||uni.showToast({title:"网络错误",icon:"none"}),e.t0;case 35:return e.prev=35,c&&clearTimeout(c),e.finish(35);case 38:case"end":return e.stop()}}),e,null,[[11,29,35,38]])})))()},manualLoad:function(){this.folderId?this.refresh():uni.showToast({title:"收藏夹ID为空",icon:"none"})},onFavoriteTap:function(t){var n=t.currentTarget.dataset.postId;uni.navigateTo({url:"/pages/post-detail/post-detail?id=".concat(n)})},onFavoriteLongPress:function(t){var n=this,e=t.currentTarget.dataset.favoriteId,a=t.currentTarget.dataset.postTitle;uni.showActionSheet({itemList:["取消收藏"],success:function(t){0===t.tapIndex&&n.removeFavorite(e,a)}})},removeFavorite:function(t){var n=this,e=t.currentTarget.dataset.favoriteId,a=t.currentTarget.dataset.index,i=this.favorites[a],r=i?i.postTitle:"未知标题";uni.showModal({title:"确认取消收藏",content:'确定要取消收藏"'.concat(r,'"吗？'),success:function(t){t.confirm&&(uni.showLoading({title:"处理中..."}),n.callCloudFunction("getMyProfileData",{action:"removeFromFavorite",favoriteId:e}).then((function(t){if(uni.hideLoading(),t.result&&t.result.success){uni.showToast({title:"取消收藏成功"});var a=n.favorites.filter((function(t){return t._id!==e}));n.setData({favorites:a})}else uni.showToast({title:t.result.message||"操作失败",icon:"none"})})).catch((function(t){uni.hideLoading(),console.error("取消收藏失败:",t),uni.showToast({title:"网络错误",icon:"none"})})))}})},onImagePreview:function(t){return d(t,{fallbackToast:!1})},handlePreview:function(t){var n=d(t,{fallbackToast:!1});return n||uni.showToast({title:"图片加载失败",icon:"none"}),n},onImageError:function(t){console.error("【收藏夹】图片加载失败",t);var n=t.detail.src;console.error("【收藏夹】失败的图片URL:",n);var e=t.currentTarget.dataset,a=e.postindex,i=e.imgindex;if(void 0!==a&&void 0!==i){var r=this.favorites[a];console.error("【收藏夹】图片加载失败的上下文:",{postId:r?r._id:"unknown",postTitle:r?r.title:"unknown",imageIndex:i,imageUrl:n,allImageUrls:r?r.imageUrls:"unknown"})}console.error("【收藏夹】图片加载失败详情:",{error:t.detail,src:n,dataset:t.currentTarget.dataset})},formatTime:function(t){return l(t)},onAvatarError:function(t){console.error("头像加载失败:",t);var n=t.currentTarget.dataset.postindex;if(void 0!==n){var e=this.favorites;e[n]&&(e[n].postAuthorAvatar="/static/images/avatar.png",this.setData({favorites:e}))}},onAvatarLoad:function(t){},navigateToUserProfile:function(t){var n=t.currentTarget.dataset.userId;n&&uni.navigateTo({url:"/pages/user-profile/user-profile?userId=".concat(n)})},onTagClick:function(t){var n=t.currentTarget.dataset.tag;n&&uni.navigateTo({url:"/pages/search/search?keyword=".concat(encodeURIComponent(n))})}}};n.default=h},2774:function(t,n,e){e("01a2"),e("e39c"),e("bf0f"),e("844d"),e("18f7"),e("de6c"),e("08eb"),t.exports=function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)},t.exports.__esModule=!0,t.exports["default"]=t.exports},"2b90":function(t,n,e){var a=e("bdbb").default,i=e("4550").default;e("5c47"),e("a1c1"),e("c223"),e("64aa");function r(t){return"undefined"===typeof uni||"function"!==typeof uni.createSelectorQuery?null:uni.createSelectorQuery().in(t)}function o(t,n,e){if("function"!==typeof t.setData){for(var r=n.replace(/\[(.*?)\]/g,".$1").replace(/^\./,""),o=r.split("."),s=t,l=0;l<o.length-1;l+=1){var c=o[l];s[c]&&"object"===a(s[c])||(s[c]={}),s=s[c]}s[o[o.length-1]]=e}else t.setData(i({},n,e))}t.exports={data:function(){return{__galleryImageMeta:{}}},created:function(){"undefined"===typeof this.swiperHeights&&(this.swiperHeights={}),"undefined"===typeof this.imageClampHeights&&(this.imageClampHeights={}),"undefined"===typeof this.imageCache&&(this.imageCache={})},methods:{onImageLoad:function(t){if(t&&t.detail&&t.currentTarget){var n=t.currentTarget.dataset||{},e=t.detail,a=e.width,i=e.height;if(a&&i){var r=function(t){return void 0!==t.galleryKey&&null!==t.galleryKey?t.galleryKey:void 0!==t.postindex&&null!==t.postindex?t.postindex:void 0!==t.postIndex&&null!==t.postIndex?t.postIndex:void 0!==t.index&&null!==t.index?t.index:void 0!==t.postid&&null!==t.postid?t.postid:void 0!==t.postId&&null!==t.postId?t.postId:void 0!==t.imgindex?"gallery-".concat(t.imgindex):"gallery"}(n),o="undefined"!==typeof n.imgindex?n.imgindex:n.imgIndex||0,s=n.type||n.imageType||"single",l="".concat(r,"_").concat(o);this.__galleryImageMeta&&(this.__galleryImageMeta[l]={width:a,height:i}),this.imageCache&&(this.imageCache[l]={width:a,height:i});var c=Number(this.galleryMinImageRatio)||9/16,d=Number(this.galleryMaxImageRatio)||16/9;if("multi"===s&&0===Number(o)){var u=n.swiperSelector||n.gallerySelector||"#swiper-".concat(r);this.__updateSwiperHeight({key:r,selector:u,originalWidth:a,originalHeight:i,minRatio:c,maxRatio:d})}if("single"===s){var f=n.singleSelector||n.imageSelector||"#single-image-".concat(r);this.__updateClampHeight({key:r,selector:f,originalWidth:a,originalHeight:i,minRatio:c})}}}},__updateSwiperHeight:function(t){var n=this,e=t.key,a=t.selector,i=t.originalWidth,s=t.originalHeight,l=t.minRatio,c=t.maxRatio;if(a){var d=r(this);d&&d.select(a).boundingClientRect((function(t){if(t&&t.width){var a=i/s,r=function(t,n,e){return t>e?e:t<n?n:t}(a,l,c),d=t.width/r;o(n,"swiperHeights[".concat(e,"]"),d)}})).exec()}},__updateClampHeight:function(t){var n=this,e=t.key,a=t.selector,i=t.originalWidth,s=t.originalHeight,l=t.minRatio,c=i/s;if(!(c>=l)){var d=a?r(this):null;if(a&&d)d.select(a).boundingClientRect((function(t){if(t&&t.width){var a=t.width/l;o(n,"imageClampHeights.".concat(e),a)}})).exec();else if(this.galleryFallbackWidth){var u=this.galleryFallbackWidth/l;o(this,"imageClampHeights.".concat(e),u)}}}}}},"32dc":function(t,n,e){"use strict";e.d(n,"b",(function(){return a})),e.d(n,"c",(function(){return i})),e.d(n,"a",(function(){}));var a=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("v-uni-view",{staticClass:"container"},[t.isLoading&&0===t.favorites.length?e("v-uni-view",{staticClass:"loading-container"},[e("v-uni-view",{staticClass:"loading-text"},[t._v("加载中...")])],1):t.favorites.length>0?e("v-uni-view",{staticClass:"favorites-container"},t._l(t.favorites,(function(n,a){return e("v-uni-view",{key:a,class:"post-item-wrapper "+(n.isOriginal?"original-post":"")},[e("v-uni-view",{staticClass:"author-info-outside"},[n.postAuthorAvatar?e("v-uni-image",{staticClass:"author-avatar",attrs:{src:n.postAuthorAvatar,mode:"aspectFill","data-postindex":a,"data-user-id":n.postAuthorOpenid},on:{error:function(n){arguments[0]=n=t.$handleEvent(n),t.onAvatarError.apply(void 0,arguments)},load:function(n){arguments[0]=n=t.$handleEvent(n),t.onAvatarLoad.apply(void 0,arguments)},click:function(n){n.stopPropagation(),n.preventDefault(),arguments[0]=n=t.$handleEvent(n),t.navigateToUserProfile.apply(void 0,arguments)}}}):t._e(),e("v-uni-text",{staticClass:"author-name"},[t._v(t._s(n.postAuthorName))])],1),e("v-uni-navigator",{staticClass:"post-content-navigator",attrs:{url:"/pages/post-detail/post-detail?id="+n.postId,"hover-class":"navigator-hover"}},[e("v-uni-view",{staticClass:"post-item"},[e("v-uni-view",{staticClass:"post-title"},[t._v(t._s(n.postTitle))]),n.postIsPoem&&n.postAuthor?e("v-uni-view",{staticClass:"poem-author"},[t._v(t._s(n.postAuthor))]):t._e(),n.imageUrls&&n.imageUrls.length>0?e("v-uni-view",{staticClass:"image-container-wrapper",style:n.imageStyle,attrs:{"data-src":n.imageUrls[0],"data-original-image-urls":n.originalImageUrls||n.imageUrls},on:{click:function(n){n.stopPropagation(),n.preventDefault(),arguments[0]=n=t.$handleEvent(n),t.handlePreview.apply(void 0,arguments)}}},[1===n.imageUrls.length?[e("v-uni-image",{staticClass:"post-image",attrs:{id:"single-image-"+n.postId,src:n.imageUrls[0],mode:"aspectFill","lazy-load":!0,"data-postid":n.postId,"data-postindex":a,"data-imgindex":"0","data-type":"single"},on:{error:function(n){arguments[0]=n=t.$handleEvent(n),t.onImageError.apply(void 0,arguments)},load:function(n){arguments[0]=n=t.$handleEvent(n),t.onImageLoad.apply(void 0,arguments)}}})]:n.imageUrls.length>1?[e("v-uni-swiper",{staticClass:"image-swiper",style:"height: "+(t.swiperHeights[a]?t.swiperHeights[a]+"px":"220px")+";",attrs:{id:"swiper-"+n.postId,"indicator-dots":!0,circular:!0}},[t._l(n.imageUrls,(function(i,r){return[e("v-uni-swiper-item",[e("v-uni-image",{staticClass:"post-image",attrs:{src:i,mode:"aspectFill","lazy-load":!0,"data-src":i,"data-original-image-urls":n.originalImageUrls||n.imageUrls,"data-postid":n.postId,"data-postindex":a,"data-imgindex":r,"data-type":"multi"},on:{error:function(n){arguments[0]=n=t.$handleEvent(n),t.onImageError.apply(void 0,arguments)},load:function(n){arguments[0]=n=t.$handleEvent(n),t.onImageLoad.apply(void 0,arguments)},click:function(n){n.stopPropagation(),n.preventDefault(),arguments[0]=n=t.$handleEvent(n),t.handlePreview.apply(void 0,arguments)}}})],1)]}))],2)]:t._e()],2):t._e(),n.postContent?e("v-uni-view",{staticClass:"post-content",staticStyle:{"white-space":"pre-wrap"}},[t._v(t._s(n.postContent))]):t._e(),n.postTags&&n.postTags.length>0?e("v-uni-view",{staticClass:"post-tags"},t._l(n.postTags,(function(n,a){return e("v-uni-text",{key:a,staticClass:"post-tag",attrs:{"data-tag":n},on:{click:function(n){n.stopPropagation(),n.preventDefault(),arguments[0]=n=t.$handleEvent(n),t.onTagClick.apply(void 0,arguments)}}},[t._v("#"+t._s(n))])})),1):t._e()],1)],1),e("v-uni-view",{staticClass:"delete-section"},[e("v-uni-view",{staticClass:"time-left"},[e("v-uni-text",{staticClass:"favorite-time"},[t._v("收藏于 "+t._s(n.formattedCreateTime||"未知时间"))])],1),e("v-uni-view",{staticClass:"button-group"},[e("v-uni-button",{staticClass:"remove-favorite-btn",attrs:{size:"mini","data-favorite-id":n._id,"data-index":a},on:{click:function(n){n.stopPropagation(),n.preventDefault(),arguments[0]=n=t.$handleEvent(n),t.removeFavorite.apply(void 0,arguments)}}},[t._v("取消收藏")])],1)],1)],1)})),1):e("v-uni-view",{staticClass:"empty-container"},[e("v-uni-view",{staticClass:"empty-icon"},[t._v("📖")]),e("v-uni-view",{staticClass:"empty-text"},[t._v("收藏夹是空的")]),e("v-uni-view",{staticClass:"empty-subtext"},[t._v("去发现一些好诗收藏起来吧")]),e("v-uni-button",{staticStyle:{"margin-top":"20rpx",padding:"15rpx 30rpx",background:"#9ed7ee",color:"white","border-radius":"8rpx","font-size":"26rpx"},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.manualLoad.apply(void 0,arguments)}}},[t._v("刷新")])],1),t.favorites.length>0&&t.isLoading?e("v-uni-view",{staticClass:"loading-more"},[e("v-uni-view",{staticClass:"loading-text"},[t._v("加载中...")])],1):t._e(),t.favorites.length>0&&!t.hasMore&&!t.isLoading?e("v-uni-view",{staticClass:"no-more"},[e("v-uni-text",[t._v("没有更多了")])],1):t._e()],1)},i=[]},4550:function(t,n,e){e("6a54");var a=e("8bcf");t.exports=function(t,n,e){return n=a(n),n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t},t.exports.__esModule=!0,t.exports["default"]=t.exports},4933:function(t,n,e){"use strict";e.r(n);var a=e("18c6"),i=e.n(a);for(var r in a)["default"].indexOf(r)<0&&function(t){e.d(n,t,(function(){return a[t]}))}(r);n["default"]=i.a},5014:function(t,n,e){e("dc8a"),e("01a2"),e("8f71"),e("bf0f"),e("9a2c"),e("aa9c"),e("2797"),e("a644"),e("a03a"),e("6a54");var a=e("4550");function i(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,a)}return e}t.exports=function(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?i(Object(e),!0).forEach((function(n){a(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):i(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t},t.exports.__esModule=!0,t.exports["default"]=t.exports},"55a0":function(t,n,e){"use strict";var a=e("a00c"),i=e.n(a);i.a},"56c9":function(t,n,e){e("9e15"),e("884b"),e("01a2"),e("e39c"),e("bf0f"),e("7a76"),e("c9b5"),e("64aa");var a=e("bdbb")["default"];t.exports=function(t,n){if("object"!==a(t)||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,n||"default");if("object"!==a(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)},t.exports.__esModule=!0,t.exports["default"]=t.exports},"73e1":function(t,n,e){"use strict";var a=e("29d8");t.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(a)},"795c":function(t,n,e){"use strict";var a=e("8bdb"),i=e("db04").start,r=e("73e1");a({target:"String",proto:!0,forced:r},{padStart:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},"8bcf":function(t,n,e){var a=e("bdbb")["default"],i=e("56c9");t.exports=function(t){var n=i(t,"string");return"symbol"===a(n)?n:String(n)},t.exports.__esModule=!0,t.exports["default"]=t.exports},"8e86":function(t,n,e){function a(t){if(!t)return{current:"",urls:[]};if(t.currentTarget&&t.currentTarget.dataset){var n=t.currentTarget.dataset,e=n.src||n.current||n.url||Array.isArray(n.urls)&&n.urls[0]||"",a=n.originalImageUrls||n.urls||n.urlList,i=Array.isArray(a)?a.filter(Boolean):"string"===typeof a&&a?[a]:[];return{current:e,urls:i}}var r=t.current||t.src||Array.isArray(t.urls)&&t.urls[0]||Array.isArray(t.list)&&t.list[0]||"",o=Array.isArray(t.urls)?t.urls.filter(Boolean):Array.isArray(t.list)?t.list.filter(Boolean):[];return{current:r,urls:o}}function i(t){"undefined"!==typeof uni&&uni.showToast&&uni.showToast({title:t,icon:"none"})}e("8f71"),e("bf0f"),t.exports={previewImage:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=n.fallbackToast,r=void 0===e||e,o=a(t);if(!o.current&&0===o.urls.length)return r&&i("图片数据缺失"),!1;var s=o.urls.length?o.urls:[o.current],l=o.current||s[0];return l&&0!==s.length?uni.previewImage({current:l,urls:s}):(r&&i("图片不可预览"),!1)}}},9376:function(t,n,e){e("7a76"),e("c9b5"),t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports["default"]=t.exports},a00c:function(t,n,e){var a=e("c2c5");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var i=e("967d").default;i("1e4e5524",a,!0,{sourceMap:!1,shadowMode:!1})},c2c5:function(t,n,e){var a=e("c86c");n=a(!1),n.push([t.i,'\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/* pages/favorite-content/favorite-content.wxss */.container[data-v-8de6d532]{padding:%?20?%;background-color:#f7f8fa;min-height:100vh}.loading-container[data-v-8de6d532]{display:flex;justify-content:center;align-items:center;height:%?400?%;background-color:#fff;border-radius:%?16?%;margin:%?30?%;box-shadow:0 %?4?% %?12?% rgba(0,0,0,.05)}.loading-text[data-v-8de6d532]{color:#999;font-size:%?28?%}.favorites-container[data-v-8de6d532]{margin:0 %?30?% %?30?% %?30?%}\n/* 新增：帖子项包装器样式 */.post-item-wrapper[data-v-8de6d532]{background:#fff;border-radius:%?16?%;margin-bottom:%?20?%;padding:%?30?%;box-shadow:0 %?2?% %?12?% rgba(0,0,0,.06)}\n/* 原创帖子特殊样式 */.post-item-wrapper.original-post[data-v-8de6d532]{border:%?3?% solid #ebc88d;box-shadow:0 %?4?% %?20?% rgba(235,200,141,.3),0 %?2?% %?12?% rgba(0,0,0,.06);position:relative}\n/* 原创帖子光影效果 */.post-item-wrapper.original-post[data-v-8de6d532]::before{content:"";position:absolute;top:%?-2?%;left:%?-2?%;right:%?-2?%;bottom:%?-2?%;background:linear-gradient(45deg,#ebc88d,#f4d03f,#ebc88d);border-radius:%?18?%;z-index:-1;opacity:.6;-webkit-filter:blur(%?8?%);filter:blur(%?8?%)}\n/* 新增：内容导航器样式 */.post-content-navigator[data-v-8de6d532]{display:block;background:transparent}\n/* 新增：导航器点击效果 */.navigator-hover[data-v-8de6d532]{opacity:.8}\n/* 作者信息样式 */.author-info-outside[data-v-8de6d532]{display:flex;align-items:center;margin-bottom:%?20?%}.author-avatar[data-v-8de6d532]{width:%?60?%;height:%?60?%;border-radius:50%;margin-right:%?15?%;background-color:#f5f5f5}.author-name[data-v-8de6d532]{font-size:%?28?%;color:#333;font-weight:500}.post-title[data-v-8de6d532]{font-size:%?32?%;font-weight:700;color:#333;margin-bottom:%?10?%;line-height:1.4;word-break:break-word;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}\n/* 诗歌作者信息 */.poem-author[data-v-8de6d532]{font-size:%?26?%;color:#666;font-style:italic;margin-bottom:%?10?%}.post-content[data-v-8de6d532]{font-size:%?26?%;color:#666;line-height:1.5;margin-bottom:%?15?%;word-break:break-word;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;white-space:pre-wrap}\n/* 图片容器样式 - 与首页保持一致 */.image-container-wrapper[data-v-8de6d532]{position:relative;width:100%;background-color:#f0f0f0; /* 占位时的背景色，很重要 */overflow:hidden;border-radius:8px; /* 可以加个圆角，让占位块更好看 */margin:%?20?% 0 /* 图片和下方内容的间距 */}\n/* 让图片或Swiper填充整个占位容器 */.image-container-wrapper .post-image[data-v-8de6d532],\n.image-container-wrapper .image-swiper[data-v-8de6d532]{position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover}.post-image[data-v-8de6d532]{transition:-webkit-transform .3s ease;transition:transform .3s ease;transition:transform .3s ease,-webkit-transform .3s ease}.post-image[data-v-8de6d532]:active{-webkit-transform:scale(1.05);transform:scale(1.05)}.image-swiper[data-v-8de6d532]{width:100%;border-radius:%?12?%;overflow:hidden}\n/* 标签样式 - 与首页和详情页保持一致 */.post-tags[data-v-8de6d532]{margin-top:%?30?%;margin-bottom:%?10?%;line-height:1.5}.post-tag[data-v-8de6d532]{color:#24375f;font-size:%?26?%;margin-right:%?10?%;transition:all .2s ease;cursor:pointer}.post-tag[data-v-8de6d532]:active{color:#1a2a4a;opacity:.8}\n/* 删除/操作按钮区域 */.delete-section[data-v-8de6d532]{display:flex;justify-content:space-between;align-items:center;margin-top:%?20?%;padding-top:%?20?%;border-top:%?1?% solid #f0f0f0}.time-left[data-v-8de6d532]{flex:1}.favorite-time[data-v-8de6d532]{font-size:%?24?%;color:#999}.button-group[data-v-8de6d532]{display:flex;gap:%?10?%}.remove-favorite-btn[data-v-8de6d532]{background:#ff4757;color:#fff;border:none;border-radius:%?8?%;font-size:%?24?%;padding:%?8?% %?16?%}.remove-favorite-btn[data-v-8de6d532]:active{background:#ff3742}\n/* 加载更多样式 */.loading-more[data-v-8de6d532]{display:flex;justify-content:center;align-items:center;padding:%?30?%;color:#999;font-size:%?28?%}.no-more[data-v-8de6d532]{display:flex;justify-content:center;align-items:center;padding:%?30?%;color:#999;font-size:%?28?%}\n/* 空状态样式 */.empty-container[data-v-8de6d532]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:%?100?% %?30?%;text-align:center}.empty-icon[data-v-8de6d532]{font-size:%?80?%;margin-bottom:%?20?%;opacity:.5}.empty-text[data-v-8de6d532]{font-size:%?32?%;color:#666;margin-bottom:%?10?%}.empty-subtext[data-v-8de6d532]{font-size:%?26?%;color:#999}',""]),t.exports=n},d189:function(t,n,e){var a=e("e2db"),i=e("2774"),r=e("79b7"),o=e("9376");t.exports=function(t){return a(t)||i(t)||r(t)||o()},t.exports.__esModule=!0,t.exports["default"]=t.exports},d604:function(t,n,e){"use strict";e.r(n);var a=e("32dc"),i=e("4933");for(var r in i)["default"].indexOf(r)<0&&function(t){e.d(n,t,(function(){return i[t]}))}(r);e("55a0");var o=e("828b"),s=Object(o["a"])(i["default"],a["b"],a["c"],!1,null,"8de6d532",null,!1,a["a"],void 0);n["default"]=s.exports},db04:function(t,n,e){"use strict";var a=e("bb80"),i=e("c435"),r=e("9e70"),o=e("f298"),s=e("862c"),l=a(o),c=a("".slice),d=Math.ceil,u=function(t){return function(n,e,a){var o,u,f=r(s(n)),p=i(e),g=f.length,v=void 0===a?" ":r(a);return p<=g||""===v?f:(o=p-g,u=l(v,d(o/v.length)),u.length>o&&(u=c(u,0,o)),t?f+u:u+f)}};t.exports={start:u(!1),end:u(!0)}},e2db:function(t,n,e){var a=e("e476");t.exports=function(t){if(Array.isArray(t))return a(t)},t.exports.__esModule=!0,t.exports["default"]=t.exports},fcd5:function(t,n,e){var a=e("5014").default,i=e("d189").default,r=e("4cf1").default;e("8f71"),e("bf0f"),e("aa9c"),e("fd3c");var o=e("139b"),s=o.formatRelativeTime,l=["createTime","postCreateTime","publishTime","createdAt","updateTime"],c=function(t){return t?Array.isArray(t)?t.filter(Boolean):[t].filter(Boolean):[]},d=function(t){var n,e=r(l);try{for(e.s();!(n=e.n()).done;){var a=n.value;if(t[a])return{key:a,value:t[a]}}}catch(i){e.e(i)}finally{e.f()}return null},u=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=n.withTime,r=void 0===e||e,o=c(t.imageUrls);0===o.length&&o.push.apply(o,i(c(t.imageUrl)));var l=c(t.originalImageUrls);0===l.length&&l.push.apply(l,i(c(t.originalImageUrl))),0===l.length&&o.length>0&&l.push.apply(l,i(o));var u=a(a({},t),{},{imageUrls:o,originalImageUrls:l,authorName:t.authorName||"匿名用户",authorAvatar:"string"===typeof t.authorAvatar?t.authorAvatar:""});if(!u.imageStyle&&o.length>0&&(u.imageStyle="height: 0; padding-bottom: 75%;"),r)if(t.formattedCreateTime)u.formattedCreateTime=t.formattedCreateTime;else{var f=d(t);f&&(u.formattedCreateTime=s(f.value))}return u};t.exports={normalizePost:u,normalizePostList:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Array.isArray(t)?t.map((function(t){return u(t,n)})):[]}}}}]);