# Poemé¡µé¢ä¿®å¤è®°å½•

## é—®é¢˜æè¿°
Poemé¡µé¢éœ€è¦æ‰‹åŠ¨ç‚¹å‡»æµ‹è¯•æŒ‰é’®ï¼ˆğŸ›ï¼‰æ‰èƒ½æ˜¾ç¤ºå†…å®¹ï¼Œæ­£å¸¸çš„æ•°æ®åŠ è½½æµç¨‹ä¸å·¥ä½œã€‚

## é—®é¢˜åˆ†æ

### 1. **é€»è¾‘å†²çªé—®é¢˜**
- `onLoad` ä¸­è°ƒç”¨ `getPostList()` åŠ è½½æ•°æ®
- `onShow` ä¸­åˆè°ƒç”¨ `refreshPoemData()` é‡æ–°åŠ è½½æ•°æ®
- å¯¼è‡´é‡å¤è°ƒç”¨æˆ–é€»è¾‘å†²çª

### 2. **çŠ¶æ€ç®¡ç†é—®é¢˜**
- `refreshPoemData()` æ–¹æ³•ä¸­æ²¡æœ‰é‡ç½® `isLoading` çŠ¶æ€
- å¯¼è‡´ `getPostList()` ä¸­çš„ `if (this.isLoading)` æ£€æŸ¥é˜»æ­¢æ•°æ®åŠ è½½

### 3. **é¦–æ¬¡åŠ è½½æ ‡è®°é—®é¢˜**
- `_hasFirstLoad` æ ‡è®°æ²¡æœ‰æ­£ç¡®è®¾ç½®
- å¯¼è‡´æ¯æ¬¡è¿›å…¥é¡µé¢éƒ½ä¼šé‡æ–°åŠ è½½æ•°æ®

## ä¿®å¤å†…å®¹

### 1. **ä¼˜åŒ–onLoadå’ŒonShowé€»è¾‘**
```javascript
// onLoadä¸­è®¾ç½®é¦–æ¬¡åŠ è½½æ ‡è®°
this._hasFirstLoad = true;

// onShowä¸­æ£€æŸ¥æ˜¯å¦å·²æœ‰æ•°æ®
if (this.postList.length === 0) {
    this.refreshPoemData();
}
```

### 2. **ä¿®å¤refreshPoemDataæ–¹æ³•**
```javascript
refreshPoemData: function () {
    this.setData({
        // ... å…¶ä»–çŠ¶æ€
        isLoading: false, // é‡ç½®åŠ è½½çŠ¶æ€
    });
    this.getPostList();
}
```

### 3. **æ·»åŠ é¦–æ¬¡åŠ è½½æ ‡è®°**
```javascript
// åœ¨onLoadä¸­è®¾ç½®æ ‡è®°
this._hasFirstLoad = true;

// åœ¨onShowä¸­æ£€æŸ¥æ ‡è®°
if (!this._hasFirstLoad) {
    this._hasFirstLoad = true;
    // åªæœ‰åœ¨æ²¡æœ‰æ•°æ®æ—¶æ‰é‡æ–°åŠ è½½
    if (this.postList.length === 0) {
        this.refreshPoemData();
    }
}
```

## ä¿®å¤åçš„æ•ˆæœ
- âœ… é¡µé¢é¦–æ¬¡åŠ è½½æ—¶è‡ªåŠ¨æ˜¾ç¤ºå†…å®¹
- âœ… ä¸å†éœ€è¦æ‰‹åŠ¨ç‚¹å‡»æµ‹è¯•æŒ‰é’®
- âœ… é¿å…é‡å¤æ•°æ®åŠ è½½
- âœ… æ­£ç¡®çš„çŠ¶æ€ç®¡ç†

## ç›¸å…³æ–‡ä»¶
- `pages/poem/poem.vue` - ä¸»è¦ä¿®å¤æ–‡ä»¶
- æµ‹è¯•æŒ‰é’®ï¼ˆğŸ›ï¼‰ä»ç„¶ä¿ç•™ï¼Œç”¨äºè°ƒè¯•ç›®çš„
